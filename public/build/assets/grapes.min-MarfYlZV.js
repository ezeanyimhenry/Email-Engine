var k_={410:(S,tt,ut)=>{var at,At,Y;/*!
* Backbone.Undo.js v0.2
*
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(G){At=[ut(50),ut(316)],at=G,Y=typeof at=="function"?at.apply(tt,At):at,Y!==void 0&&(S.exports=Y)})(function(G,D){var F=Array.prototype.slice;function O(ct,Lt,$){return $.length<=4?ct.call(Lt,$[0],$[1],$[2],$[3]):ct.apply(Lt,$)}function L(ct,Lt){return F.call(ct,Lt)}function k(ct,Lt){return ct==null?!1:(G.isArray(Lt)||(Lt=L(arguments,1)),G.all(Lt,function($){return $ in ct}))}var j=function(){var ct=!1,Lt=-1;function $(){Lt++,ct=!0,G.defer(function(){ct=!1})}return function(){return ct||$(),Lt}}();function H(){this.registeredObjects=[],this.cidIndexes=[]}H.prototype={isRegistered:function(ct){return ct&&ct.cid?this.registeredObjects[ct.cid]:G.contains(this.registeredObjects,ct)},register:function(ct){return this.isRegistered(ct)?!1:(ct&&ct.cid?(this.registeredObjects[ct.cid]=ct,this.cidIndexes.push(ct.cid)):this.registeredObjects.push(ct),!0)},unregister:function(ct){if(this.isRegistered(ct)){if(ct&&ct.cid)delete this.registeredObjects[ct.cid],this.cidIndexes.splice(G.indexOf(this.cidIndexes,ct.cid),1);else{var Lt=G.indexOf(this.registeredObjects,ct);this.registeredObjects.splice(Lt,1)}return!0}return!1},get:function(){return G.map(this.cidIndexes,function(ct){return this.registeredObjects[ct]},this).concat(this.registeredObjects)}};function ot(ct,Lt,$,Q){for(var rt=0,R=Lt.length,lt;rt<R;rt++)if(lt=Lt[rt],!!lt){if(ct==="on"){if(!Q.objectRegistry.register(lt))continue}else if(!Q.objectRegistry.unregister(lt))continue;G.isFunction(lt[ct])&&lt[ct]("all",$,Q)}}function ht(ct,Lt){var $=Lt.type,Q=Lt.undoTypes,rt=!Q[$]||Q[$][ct];G.isFunction(rt)&&rt(Lt.object,Lt.before,Lt.after,Lt.options)}function kt(ct,Lt,$,Q,rt){if(!($.isCurrentlyUndoRedoing||ct==="undo"&&$.pointer===-1||ct==="redo"&&$.pointer===$.length-1)){$.isCurrentlyUndoRedoing=!0;var R,lt,A=ct==="undo";for(rt?lt=A&&$.pointer===$.length-1||!A&&$.pointer===-1?G.clone($.models):F.apply($.models,A?[0,$.pointer]:[$.pointer,$.length-1]):(R=$.at(A?$.pointer:$.pointer+1),lt=Q?$.where({magicFusionIndex:R.get("magicFusionIndex")}):[R]),$.pointer+=(A?-1:1)*lt.length;R=A?lt.pop():lt.shift();)R[ct]();$.isCurrentlyUndoRedoing=!1,Lt.trigger(ct,Lt)}}function Vt(ct,Lt){var $=ct.condition,Q=typeof $;return Q==="function"?!!O($,ct,Lt):Q==="boolean"?$:!0}function Bt(ct,Lt,$,Q){if(ct.track&&!ct.isCurrentlyUndoRedoing&&Lt in Q&&Vt(Q[Lt],$)){var rt=O(Q[Lt].on,Q[Lt],$),R;if(k(rt,"object","before","after")){if(rt.type=Lt,rt.magicFusionIndex=j(),rt.undoTypes=Q,ct.pointer<ct.length-1)for(var R=ct.length-ct.pointer-1;R--;)ct.pop();ct.pointer=ct.length,ct.add(rt),ct.length>ct.maximumStackLength&&(ct.shift(),ct.pointer--)}}}var Ot={add:{undo:function(ct,Lt,$,Q){ct.remove($,Q)},redo:function(ct,Lt,$,Q){Q.index&&(Q.at=Q.index),ct.add($,Q)},on:function(ct,Lt,$){return{object:Lt,before:void 0,after:ct,options:G.clone($)}}},remove:{undo:function(ct,Lt,$,Q){"index"in Q&&(Q.at=Q.index),ct.add(Lt,Q)},redo:function(ct,Lt,$,Q){ct.remove(Lt,Q)},on:function(ct,Lt,$){return{object:Lt,before:ct,after:void 0,options:G.clone($)}}},change:{undo:function(ct,Lt,$,Q){G.isEmpty(Lt)?G.each(G.keys($),ct.unset,ct):(ct.set(Lt),Q&&Q.unsetData&&Q.unsetData.before&&Q.unsetData.before.length&&G.each(Q.unsetData.before,ct.unset,ct))},redo:function(ct,Lt,$,Q){G.isEmpty($)?G.each(G.keys(Lt),ct.unset,ct):(ct.set($),Q&&Q.unsetData&&Q.unsetData.after&&Q.unsetData.after.length&&G.each(Q.unsetData.after,ct.unset,ct))},on:function(ct,Lt){var $=ct.changedAttributes(),Q=G.keys($),rt=G.pick(ct.previousAttributes(),Q),R=G.keys(rt),lt=(Lt||(Lt={})).unsetData={after:[],before:[]};return Q.length!=R.length&&(Q.length>R.length?G.each(Q,function(A){A in rt||lt.before.push(A)},this):G.each(R,function(A){A in $||lt.after.push(A)})),{object:ct,before:rt,after:$,options:G.clone(Lt)}}},reset:{undo:function(ct,Lt,$){ct.reset(Lt)},redo:function(ct,Lt,$){ct.reset($)},on:function(ct,Lt){return{object:ct,before:Lt.previousModels,after:G.clone(ct.models)}}}};function mt(){}mt.prototype=Ot;function Yt(ct,Lt,$,Q){if(typeof Lt=="object")return G.each(Lt,function(rt,R){ct===2?Yt(ct,rt,$,Q):Yt(ct,R,rt,$)});switch(ct){case 0:k($,"undo","redo","on")&&G.all(G.pick($,"undo","redo","on"),G.isFunction)&&(Q[Lt]=$);break;case 1:Q[Lt]&&G.isObject($)&&(Q[Lt]=G.extend({},Q[Lt],$));break;case 2:delete Q[Lt];break}return this}var re=D.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(ct){ht("undo",this.attributes)},redo:function(ct){ht("redo",this.attributes)}}),ae=D.Collection.extend({model:re,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(ct){this.maximumStackLength=ct}}),Qt=D.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(ct){this.stack=new ae,this.objectRegistry=new H,this.undoTypes=new mt,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(Lt,$){this.stack.setMaxLength($)},this),ct&&ct.track&&this.startTracking(),ct&&ct.register&&(G.isArray(ct.register)||G.isArguments(ct.register)?O(this.register,this,ct.register):this.register(ct.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(ct){Bt(this.stack,ct,L(arguments,1),this.undoTypes)},register:function(){ot("on",arguments,this._addToStack,this)},unregister:function(){ot("off",arguments,this._addToStack,this)},unregisterAll:function(){O(this.unregister,this,this.objectRegistry.get())},undo:function(ct){kt("undo",this,this.stack,ct)},undoAll:function(){kt("undo",this,this.stack,!1,!0)},redo:function(ct){kt("redo",this,this.stack,ct)},redoAll:function(){kt("redo",this,this.stack,!1,!0)},isAvailable:function(ct){var Lt=this.stack,$=Lt.length;switch(ct){case"undo":return $>0&&Lt.pointer>-1;case"redo":return $>0&&Lt.pointer<$-1;default:return!1}},merge:function(ct){for(var Lt=G.isArray(ct)?ct:L(arguments),$;$=Lt.pop();)$ instanceof Qt&&$.stack instanceof ae&&($.stack=this.stack)},addUndoType:function(ct,Lt){Yt(0,ct,Lt,this.undoTypes)},changeUndoType:function(ct,Lt){Yt(1,ct,Lt,this.undoTypes)},removeUndoType:function(ct){Yt(2,ct,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return G.extend(Qt,{defaults:function(ct){G.extend(Qt.prototype.defaults,ct)},addUndoType:function(ct,Lt){Yt(0,ct,Lt,Ot)},changeUndoType:function(ct,Lt){Yt(1,ct,Lt,Ot)},removeUndoType:function(ct){Yt(2,ct,void 0,Ot)}}),D.UndoManager=Qt})},316:(S,tt,ut)=>{var at,At;(function(Y){var G=typeof self=="object"&&self.self===self&&self||typeof ut.g=="object"&&ut.g.global===ut.g&&ut.g;at=[ut(50),ut(895),tt],At=(function(D,F,O){G.Backbone=Y(G,O,D,F)}).apply(tt,at),At!==void 0&&(S.exports=At)})(function(Y,G,D,F){var O=Y.Backbone,L=Array.prototype.slice;G.VERSION="1.4.1",G.$=F,G.noConflict=function(){return Y.Backbone=O,this},G.emulateHTTP=!1,G.emulateJSON=!1;var k=G.Events={},j=/\s+/,H,ot=function(P,V,Z,pt,Et){var X=0,xt;if(Z&&typeof Z=="object")for(pt!==void 0&&("context"in Et)&&Et.context===void 0&&(Et.context=pt),xt=D.keys(Z);X<xt.length;X++)V=ot(P,V,xt[X],Z[xt[X]],Et);else if(Z&&j.test(Z))for(xt=Z.split(j);X<xt.length;X++)V=P(V,xt[X],pt,Et);else V=P(V,Z,pt,Et);return V};k.on=function(P,V,Z){if(this._events=ot(ht,this._events||{},P,V,{context:Z,ctx:this,listening:H}),H){var pt=this._listeners||(this._listeners={});pt[H.id]=H,H.interop=!1}return this},k.listenTo=function(P,V,Z){if(!P)return this;var pt=P._listenId||(P._listenId=D.uniqueId("l")),Et=this._listeningTo||(this._listeningTo={}),X=H=Et[pt];X||(this._listenId||(this._listenId=D.uniqueId("l")),X=H=Et[pt]=new Yt(this,P));var xt=kt(P,V,Z,this);if(H=void 0,xt)throw xt;return X.interop&&X.on(V,Z),this};var ht=function(P,V,Z,pt){if(Z){var Et=P[V]||(P[V]=[]),X=pt.context,xt=pt.ctx,dt=pt.listening;dt&&dt.count++,Et.push({callback:Z,context:X,ctx:X||xt,listening:dt})}return P},kt=function(P,V,Z,pt){try{P.on(V,Z,pt)}catch(Et){return Et}};k.off=function(P,V,Z){return this._events?(this._events=ot(Vt,this._events,P,V,{context:Z,listeners:this._listeners}),this):this},k.stopListening=function(P,V,Z){var pt=this._listeningTo;if(!pt)return this;for(var Et=P?[P._listenId]:D.keys(pt),X=0;X<Et.length;X++){var xt=pt[Et[X]];if(!xt)break;xt.obj.off(V,Z,this),xt.interop&&xt.off(V,Z)}return D.isEmpty(pt)&&(this._listeningTo=void 0),this};var Vt=function(P,V,Z,pt){if(P){var Et=pt.context,X=pt.listeners,xt=0,dt;if(!V&&!Et&&!Z){for(dt=D.keys(X);xt<dt.length;xt++)X[dt[xt]].cleanup();return}for(dt=V?[V]:D.keys(P);xt<dt.length;xt++){V=dt[xt];var Ce=P[V];if(!Ce)break;for(var Ge=[],Re=0;Re<Ce.length;Re++){var Ue=Ce[Re];if(Z&&Z!==Ue.callback&&Z!==Ue.callback._callback||Et&&Et!==Ue.context)Ge.push(Ue);else{var rr=Ue.listening;rr&&rr.off(V,Z)}}Ge.length?P[V]=Ge:delete P[V]}return P}};k.once=function(P,V,Z){var pt=ot(Bt,{},P,V,this.off.bind(this));return typeof P=="string"&&Z==null&&(V=void 0),this.on(pt,V,Z)},k.listenToOnce=function(P,V,Z){var pt=ot(Bt,{},V,Z,this.stopListening.bind(this,P));return this.listenTo(P,pt)};var Bt=function(P,V,Z,pt){if(Z){var Et=P[V]=D.once(function(){pt(V,Et),Z.apply(this,arguments)});Et._callback=Z}return P};k.trigger=function(P){if(!this._events)return this;for(var V=Math.max(0,arguments.length-1),Z=Array(V),pt=0;pt<V;pt++)Z[pt]=arguments[pt+1];return ot(Ot,this._events,P,void 0,Z),this};var Ot=function(P,V,Z,pt){if(P){var Et=P[V],X=P.all;Et&&X&&(X=X.slice()),Et&&mt(Et,pt),X&&mt(X,[V].concat(pt))}return P},mt=function(P,V){var Z,pt=-1,Et=P.length,X=V[0],xt=V[1],dt=V[2];switch(V.length){case 0:for(;++pt<Et;)(Z=P[pt]).callback.call(Z.ctx);return;case 1:for(;++pt<Et;)(Z=P[pt]).callback.call(Z.ctx,X);return;case 2:for(;++pt<Et;)(Z=P[pt]).callback.call(Z.ctx,X,xt);return;case 3:for(;++pt<Et;)(Z=P[pt]).callback.call(Z.ctx,X,xt,dt);return;default:for(;++pt<Et;)(Z=P[pt]).callback.apply(Z.ctx,V);return}},Yt=function(P,V){this.id=P._listenId,this.listener=P,this.obj=V,this.interop=!0,this.count=0,this._events=void 0};Yt.prototype.on=k.on,Yt.prototype.off=function(P,V){var Z;this.interop?(this._events=ot(Vt,this._events,P,V,{context:void 0,listeners:void 0}),Z=!this._events):(this.count--,Z=this.count===0),Z&&this.cleanup()},Yt.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},k.bind=k.on,k.unbind=k.off,D.extend(G,k);var re=G.Model=function(P,V){var Z=P||{};V||(V={}),this.preinitialize.apply(this,arguments),this.cid=D.uniqueId(this.cidPrefix),this.attributes={},V.collection&&(this.collection=V.collection),V.parse&&(Z=this.parse(Z,V)||{});var pt=D.result(this,"defaults");Z=D.defaults(D.extend({},pt,Z),pt),this.set(Z,V),this.changed={},this.initialize.apply(this,arguments)};D.extend(re.prototype,k,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(P){return D.clone(this.attributes)},sync:function(){return G.sync.apply(this,arguments)},get:function(P){return this.attributes[P]},escape:function(P){return D.escape(this.get(P))},has:function(P){return this.get(P)!=null},matches:function(P){return!!D.iteratee(P,this)(this.attributes)},set:function(P,V,Z){if(P==null)return this;var pt;if(typeof P=="object"?(pt=P,Z=V):(pt={})[P]=V,Z||(Z={}),!this._validate(pt,Z))return!1;var Et=Z.unset,X=Z.silent,xt=[],dt=this._changing;this._changing=!0,dt||(this._previousAttributes=D.clone(this.attributes),this.changed={});var Ce=this.attributes,Ge=this.changed,Re=this._previousAttributes;for(var Ue in pt)V=pt[Ue],D.isEqual(Ce[Ue],V)||xt.push(Ue),D.isEqual(Re[Ue],V)?delete Ge[Ue]:Ge[Ue]=V,Et?delete Ce[Ue]:Ce[Ue]=V;if(this.idAttribute in pt){var rr=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,rr,Z)}if(!X){xt.length&&(this._pending=Z);for(var ge=0;ge<xt.length;ge++)this.trigger("change:"+xt[ge],this,Ce[xt[ge]],Z)}if(dt)return this;if(!X)for(;this._pending;)Z=this._pending,this._pending=!1,this.trigger("change",this,Z);return this._pending=!1,this._changing=!1,this},unset:function(P,V){return this.set(P,void 0,D.extend({},V,{unset:!0}))},clear:function(P){var V={};for(var Z in this.attributes)V[Z]=void 0;return this.set(V,D.extend({},P,{unset:!0}))},hasChanged:function(P){return P==null?!D.isEmpty(this.changed):D.has(this.changed,P)},changedAttributes:function(P){if(!P)return this.hasChanged()?D.clone(this.changed):!1;var V=this._changing?this._previousAttributes:this.attributes,Z={},pt;for(var Et in P){var X=P[Et];D.isEqual(V[Et],X)||(Z[Et]=X,pt=!0)}return pt?Z:!1},previous:function(P){return P==null||!this._previousAttributes?null:this._previousAttributes[P]},previousAttributes:function(){return D.clone(this._previousAttributes)},fetch:function(P){P=D.extend({parse:!0},P);var V=this,Z=P.success;return P.success=function(pt){var Et=P.parse?V.parse(pt,P):pt;if(!V.set(Et,P))return!1;Z&&Z.call(P.context,V,pt,P),V.trigger("sync",V,pt,P)},de(this,P),this.sync("read",this,P)},save:function(P,V,Z){var pt;P==null||typeof P=="object"?(pt=P,Z=V):(pt={})[P]=V,Z=D.extend({validate:!0,parse:!0},Z);var Et=Z.wait;if(pt&&!Et){if(!this.set(pt,Z))return!1}else if(!this._validate(pt,Z))return!1;var X=this,xt=Z.success,dt=this.attributes;Z.success=function(Re){X.attributes=dt;var Ue=Z.parse?X.parse(Re,Z):Re;if(Et&&(Ue=D.extend({},pt,Ue)),Ue&&!X.set(Ue,Z))return!1;xt&&xt.call(Z.context,X,Re,Z),X.trigger("sync",X,Re,Z)},de(this,Z),pt&&Et&&(this.attributes=D.extend({},dt,pt));var Ce=this.isNew()?"create":Z.patch?"patch":"update";Ce==="patch"&&!Z.attrs&&(Z.attrs=pt);var Ge=this.sync(Ce,this,Z);return this.attributes=dt,Ge},destroy:function(P){P=P?D.clone(P):{};var V=this,Z=P.success,pt=P.wait,Et=function(){V.stopListening(),V.trigger("destroy",V,V.collection,P)};P.success=function(xt){pt&&Et(),Z&&Z.call(P.context,V,xt,P),V.isNew()||V.trigger("sync",V,xt,P)};var X=!1;return this.isNew()?D.defer(P.success):(de(this,P),X=this.sync("delete",this,P)),pt||Et(),X},url:function(){var P=D.result(this,"urlRoot")||D.result(this.collection,"url")||lr();if(this.isNew())return P;var V=this.get(this.idAttribute);return P.replace(/[^\/]$/,"$&/")+encodeURIComponent(V)},parse:function(P,V){return P},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(P){return this._validate({},D.extend({},P,{validate:!0}))},_validate:function(P,V){if(!V.validate||!this.validate)return!0;P=D.extend({},this.attributes,P);var Z=this.validationError=this.validate(P,V)||null;return Z?(this.trigger("invalid",this,Z,D.extend(V,{validationError:Z})),!1):!0}});var ae=G.Collection=function(P,V){V||(V={}),this.preinitialize.apply(this,arguments),V.model&&(this.model=V.model),V.comparator!==void 0&&(this.comparator=V.comparator),this._reset(),this.initialize.apply(this,arguments),P&&this.reset(P,D.extend({silent:!0},V))},Qt={add:!0,remove:!0,merge:!0},ct={add:!0,remove:!1},Lt=function(P,V,Z){Z=Math.min(Math.max(Z,0),P.length);var pt=Array(P.length-Z),Et=V.length,X;for(X=0;X<pt.length;X++)pt[X]=P[X+Z];for(X=0;X<Et;X++)P[X+Z]=V[X];for(X=0;X<pt.length;X++)P[X+Et+Z]=pt[X]};D.extend(ae.prototype,k,{model:re,preinitialize:function(){},initialize:function(){},toJSON:function(P){return this.map(function(V){return V.toJSON(P)})},sync:function(){return G.sync.apply(this,arguments)},add:function(P,V){return this.set(P,D.extend({merge:!1},V,ct))},remove:function(P,V){V=D.extend({},V);var Z=!D.isArray(P);P=Z?[P]:P.slice();var pt=this._removeModels(P,V);return!V.silent&&pt.length&&(V.changes={added:[],merged:[],removed:pt},this.trigger("update",this,V)),Z?pt[0]:pt},set:function(P,V){if(P!=null){V=D.extend({},Qt,V),V.parse&&!this._isModel(P)&&(P=this.parse(P,V)||[]);var Z=!D.isArray(P);P=Z?[P]:P.slice();var pt=V.at;pt!=null&&(pt=+pt),pt>this.length&&(pt=this.length),pt<0&&(pt+=this.length+1);var Et=[],X=[],xt=[],dt=[],Ce={},Ge=V.add,Re=V.merge,Ue=V.remove,rr=!1,ge=this.comparator&&pt==null&&V.sort!==!1,Qe=D.isString(this.comparator)?this.comparator:null,De,$e;for($e=0;$e<P.length;$e++){De=P[$e];var kr=this.get(De);if(kr){if(Re&&De!==kr){var _e=this._isModel(De)?De.attributes:De;V.parse&&(_e=kr.parse(_e,V)),kr.set(_e,V),xt.push(kr),ge&&!rr&&(rr=kr.hasChanged(Qe))}Ce[kr.cid]||(Ce[kr.cid]=!0,Et.push(kr)),P[$e]=kr}else Ge&&(De=P[$e]=this._prepareModel(De,V),De&&(X.push(De),this._addReference(De,V),Ce[De.cid]=!0,Et.push(De)))}if(Ue){for($e=0;$e<this.length;$e++)De=this.models[$e],Ce[De.cid]||dt.push(De);dt.length&&this._removeModels(dt,V)}var Tr=!1,Ae=!ge&&Ge&&Ue;if(Et.length&&Ae?(Tr=this.length!==Et.length||D.some(this.models,function(ir,ur){return ir!==Et[ur]}),this.models.length=0,Lt(this.models,Et,0),this.length=this.models.length):X.length&&(ge&&(rr=!0),Lt(this.models,X,pt??this.length),this.length=this.models.length),rr&&this.sort({silent:!0}),!V.silent){for($e=0;$e<X.length;$e++)pt!=null&&(V.index=pt+$e),De=X[$e],De.trigger("add",De,this,V);(rr||Tr)&&this.trigger("sort",this,V),(X.length||dt.length||xt.length)&&(V.changes={added:X,removed:dt,merged:xt},this.trigger("update",this,V))}return Z?P[0]:P}},reset:function(P,V){V=V?D.clone(V):{};for(var Z=0;Z<this.models.length;Z++)this._removeReference(this.models[Z],V);return V.previousModels=this.models,this._reset(),P=this.add(P,D.extend({silent:!0},V)),V.silent||this.trigger("reset",this,V),P},push:function(P,V){return this.add(P,D.extend({at:this.length},V))},pop:function(P){var V=this.at(this.length-1);return this.remove(V,P)},unshift:function(P,V){return this.add(P,D.extend({at:0},V))},shift:function(P){var V=this.at(0);return this.remove(V,P)},slice:function(){return L.apply(this.models,arguments)},get:function(P){if(P!=null)return this._byId[P]||this._byId[this.modelId(this._isModel(P)?P.attributes:P,P.idAttribute)]||P.cid&&this._byId[P.cid]},has:function(P){return this.get(P)!=null},at:function(P){return P<0&&(P+=this.length),this.models[P]},where:function(P,V){return this[V?"find":"filter"](P)},findWhere:function(P){return this.where(P,!0)},sort:function(P){var V=this.comparator;if(!V)throw new Error("Cannot sort a set without a comparator");P||(P={});var Z=V.length;return D.isFunction(V)&&(V=V.bind(this)),Z===1||D.isString(V)?this.models=this.sortBy(V):this.models.sort(V),P.silent||this.trigger("sort",this,P),this},pluck:function(P){return this.map(P+"")},fetch:function(P){P=D.extend({parse:!0},P);var V=P.success,Z=this;return P.success=function(pt){var Et=P.reset?"reset":"set";Z[Et](pt,P),V&&V.call(P.context,Z,pt,P),Z.trigger("sync",Z,pt,P)},de(this,P),this.sync("read",this,P)},create:function(P,V){V=V?D.clone(V):{};var Z=V.wait;if(P=this._prepareModel(P,V),!P)return!1;Z||this.add(P,V);var pt=this,Et=V.success;return V.success=function(X,xt,dt){Z&&pt.add(X,dt),Et&&Et.call(dt.context,X,xt,dt)},P.save(null,V),P},parse:function(P,V){return P},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(P,V){return P[V||this.model.prototype.idAttribute||"id"]},values:function(){return new Q(this,rt)},keys:function(){return new Q(this,R)},entries:function(){return new Q(this,lt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(P,V){if(this._isModel(P))return P.collection||(P.collection=this),P;V=V?D.clone(V):{},V.collection=this;var Z;return this.model.prototype?Z=new this.model(P,V):Z=this.model(P,V),Z.validationError?(this.trigger("invalid",this,Z.validationError,V),!1):Z},_removeModels:function(P,V){for(var Z=[],pt=0;pt<P.length;pt++){var Et=this.get(P[pt]);if(Et){var X=this.indexOf(Et);this.models.splice(X,1),this.length--,delete this._byId[Et.cid];var xt=this.modelId(Et.attributes,Et.idAttribute);xt!=null&&delete this._byId[xt],V.silent||(V.index=X,Et.trigger("remove",Et,this,V)),Z.push(Et),this._removeReference(Et,V)}}return Z},_isModel:function(P){return P instanceof re},_addReference:function(P,V){this._byId[P.cid]=P;var Z=this.modelId(P.attributes,P.idAttribute);Z!=null&&(this._byId[Z]=P),P.on("all",this._onModelEvent,this)},_removeReference:function(P,V){delete this._byId[P.cid];var Z=this.modelId(P.attributes,P.idAttribute);Z!=null&&delete this._byId[Z],this===P.collection&&delete P.collection,P.off("all",this._onModelEvent,this)},_onModelEvent:function(P,V,Z,pt){if(V){if((P==="add"||P==="remove")&&Z!==this)return;if(P==="destroy"&&this.remove(V,pt),P==="changeId"){var Et=this.modelId(V.previousAttributes(),V.idAttribute),X=this.modelId(V.attributes,V.idAttribute);Et!=null&&delete this._byId[Et],X!=null&&(this._byId[X]=V)}}this.trigger.apply(this,arguments)}});var $=typeof Symbol=="function"&&Symbol.iterator;$&&(ae.prototype[$]=ae.prototype.values);var Q=function(P,V){this._collection=P,this._kind=V,this._index=0},rt=1,R=2,lt=3;$&&(Q.prototype[$]=function(){return this}),Q.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var P=this._collection.at(this._index);this._index++;var V;if(this._kind===rt)V=P;else{var Z=this._collection.modelId(P.attributes,P.idAttribute);this._kind===R?V=Z:V=[Z,P]}return{value:V,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var A=G.View=function(P){this.cid=D.uniqueId("view"),this.preinitialize.apply(this,arguments),D.extend(this,D.pick(P,Pt)),this._ensureElement(),this.initialize.apply(this,arguments)},Mt=/^(\S+)\s*(.*)$/,Pt=["model","collection","el","id","attributes","className","tagName","events"];D.extend(A.prototype,k,{tagName:"div",$:function(P){return this.$el.find(P)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(P){return this.undelegateEvents(),this._setElement(P),this.delegateEvents(),this},_setElement:function(P){this.$el=P instanceof G.$?P:G.$(P),this.el=this.$el[0]},delegateEvents:function(P){if(P||(P=D.result(this,"events")),!P)return this;this.undelegateEvents();for(var V in P){var Z=P[V];if(D.isFunction(Z)||(Z=this[Z]),!!Z){var pt=V.match(Mt);this.delegate(pt[1],pt[2],Z.bind(this))}}return this},delegate:function(P,V,Z){return this.$el.on(P+".delegateEvents"+this.cid,V,Z),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(P,V,Z){return this.$el.off(P+".delegateEvents"+this.cid,V,Z),this},_createElement:function(P){return document.createElement(P)},_ensureElement:function(){if(this.el)this.setElement(D.result(this,"el"));else{var P=D.extend({},D.result(this,"attributes"));this.id&&(P.id=D.result(this,"id")),this.className&&(P.class=D.result(this,"className")),this.setElement(this._createElement(D.result(this,"tagName"))),this._setAttributes(P)}},_setAttributes:function(P){this.$el.attr(P)}});var $t=function(P,V,Z,pt){switch(V){case 1:return function(){return P[Z](this[pt])};case 2:return function(Et){return P[Z](this[pt],Et)};case 3:return function(Et,X){return P[Z](this[pt],Ct(Et,this),X)};case 4:return function(Et,X,xt){return P[Z](this[pt],Ct(Et,this),X,xt)};default:return function(){var Et=L.call(arguments);return Et.unshift(this[pt]),P[Z].apply(P,Et)}}},xe=function(P,V,Z,pt){D.each(Z,function(Et,X){V[X]&&(P.prototype[X]=$t(V,Et,X,pt))})},Ct=function(P,V){return D.isFunction(P)?P:D.isObject(P)&&!V._isModel(P)?Ut(P):D.isString(P)?function(Z){return Z.get(P)}:P},Ut=function(P){var V=D.matches(P);return function(Z){return V(Z.attributes)}},se={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Wt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};D.each([[ae,se,"models"],[re,Wt,"attributes"]],function(P){var V=P[0],Z=P[1],pt=P[2];V.mixin=function(Et){var X=D.reduce(D.functions(Et),function(xt,dt){return xt[dt]=0,xt},{});xe(V,Et,X,pt)},xe(V,D,Z,pt)}),G.sync=function(P,V,Z){var pt=be[P];D.defaults(Z||(Z={}),{emulateHTTP:G.emulateHTTP,emulateJSON:G.emulateJSON});var Et={type:pt,dataType:"json"};if(Z.url||(Et.url=D.result(V,"url")||lr()),Z.data==null&&V&&(P==="create"||P==="update"||P==="patch")&&(Et.contentType="application/json",Et.data=JSON.stringify(Z.attrs||V.toJSON(Z))),Z.emulateJSON&&(Et.contentType="application/x-www-form-urlencoded",Et.data=Et.data?{model:Et.data}:{}),Z.emulateHTTP&&(pt==="PUT"||pt==="DELETE"||pt==="PATCH")){Et.type="POST",Z.emulateJSON&&(Et.data._method=pt);var X=Z.beforeSend;Z.beforeSend=function(Ce){if(Ce.setRequestHeader("X-HTTP-Method-Override",pt),X)return X.apply(this,arguments)}}Et.type!=="GET"&&!Z.emulateJSON&&(Et.processData=!1);var xt=Z.error;Z.error=function(Ce,Ge,Re){Z.textStatus=Ge,Z.errorThrown=Re,xt&&xt.call(Z.context,Ce,Ge,Re)};var dt=Z.xhr=G.ajax(D.extend(Et,Z));return V.trigger("request",V,dt,Z),dt};var be={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};G.ajax=function(){return G.$.ajax.apply(G.$,arguments)};var vt=G.Router=function(P){P||(P={}),this.preinitialize.apply(this,arguments),P.routes&&(this.routes=P.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},jt=/\((.*?)\)/g,Nt=/(\(\?)?:\w+/g,oe=/\*\w+/g,fe=/[\-{}\[\]+?.,\\\^$|#\s]/g;D.extend(vt.prototype,k,{preinitialize:function(){},initialize:function(){},route:function(P,V,Z){D.isRegExp(P)||(P=this._routeToRegExp(P)),D.isFunction(V)&&(Z=V,V=""),Z||(Z=this[V]);var pt=this;return G.history.route(P,function(Et){var X=pt._extractParameters(P,Et);pt.execute(Z,X,V)!==!1&&(pt.trigger.apply(pt,["route:"+V].concat(X)),pt.trigger("route",V,X),G.history.trigger("route",pt,V,X))}),this},execute:function(P,V,Z){P&&P.apply(this,V)},navigate:function(P,V){return G.history.navigate(P,V),this},_bindRoutes:function(){if(this.routes){this.routes=D.result(this,"routes");for(var P,V=D.keys(this.routes);(P=V.pop())!=null;)this.route(P,this.routes[P])}},_routeToRegExp:function(P){return P=P.replace(fe,"\\$&").replace(jt,"(?:$1)?").replace(Nt,function(V,Z){return Z?V:"([^/?]+)"}).replace(oe,"([^?]*?)"),new RegExp("^"+P+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(P,V){var Z=P.exec(V).slice(1);return D.map(Z,function(pt,Et){return Et===Z.length-1?pt||null:pt?decodeURIComponent(pt):null})}});var Xt=G.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ve=/^[#\/]|\s+$/g,Ke=/^\/+|\/+$/g,gr=/#.*$/;Xt.started=!1,D.extend(Xt.prototype,k,{interval:50,atRoot:function(){var P=this.location.pathname.replace(/[^\/]$/,"$&/");return P===this.root&&!this.getSearch()},matchRoot:function(){var P=this.decodeFragment(this.location.pathname),V=P.slice(0,this.root.length-1)+"/";return V===this.root},decodeFragment:function(P){return decodeURI(P.replace(/%25/g,"%2525"))},getSearch:function(){var P=this.location.href.replace(/#.*/,"").match(/\?.+/);return P?P[0]:""},getHash:function(P){var V=(P||this).location.href.match(/#(.*)$/);return V?V[1]:""},getPath:function(){var P=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return P.charAt(0)==="/"?P.slice(1):P},getFragment:function(P){return P==null&&(this._usePushState||!this._wantsHashChange?P=this.getPath():P=this.getHash()),P.replace(ve,"")},start:function(P){if(Xt.started)throw new Error("Backbone.history has already been started");if(Xt.started=!0,this.options=D.extend({root:"/"},this.options,P),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ke,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var V=this.root.slice(0,-1)||"/";return this.location.replace(V+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var Z=document.body,pt=Z.insertBefore(this.iframe,Z.firstChild).contentWindow;pt.document.open(),pt.document.close(),pt.location.hash="#"+this.fragment}var Et=window.addEventListener||function(X,xt){return attachEvent("on"+X,xt)};if(this._usePushState?Et("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Et("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var P=window.removeEventListener||function(V,Z){return detachEvent("on"+V,Z)};this._usePushState?P("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&P("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Xt.started=!1},route:function(P,V){this.handlers.unshift({route:P,callback:V})},checkUrl:function(P){var V=this.getFragment();if(V===this.fragment&&this.iframe&&(V=this.getHash(this.iframe.contentWindow)),V===this.fragment)return!1;this.iframe&&this.navigate(V),this.loadUrl()},loadUrl:function(P){return this.matchRoot()?(P=this.fragment=this.getFragment(P),D.some(this.handlers,function(V){if(V.route.test(P))return V.callback(P),!0})):!1},navigate:function(P,V){if(!Xt.started)return!1;(!V||V===!0)&&(V={trigger:!!V}),P=this.getFragment(P||"");var Z=this.root;(P===""||P.charAt(0)==="?")&&(Z=Z.slice(0,-1)||"/");var pt=Z+P;P=P.replace(gr,"");var Et=this.decodeFragment(P);if(this.fragment!==Et){if(this.fragment=Et,this._usePushState)this.history[V.replace?"replaceState":"pushState"]({},document.title,pt);else if(this._wantsHashChange){if(this._updateHash(this.location,P,V.replace),this.iframe&&P!==this.getHash(this.iframe.contentWindow)){var X=this.iframe.contentWindow;V.replace||(X.document.open(),X.document.close()),this._updateHash(X.location,P,V.replace)}}else return this.location.assign(pt);if(V.trigger)return this.loadUrl(P)}},_updateHash:function(P,V,Z){if(Z){var pt=P.href.replace(/(javascript:|#).*$/,"");P.replace(pt+"#"+V)}else P.hash="#"+V}}),G.history=new Xt;var Or=function(P,V){var Z=this,pt;return P&&D.has(P,"constructor")?pt=P.constructor:pt=function(){return Z.apply(this,arguments)},D.extend(pt,Z,V),pt.prototype=D.create(Z.prototype,P),pt.prototype.constructor=pt,pt.__super__=Z.prototype,pt};re.extend=ae.extend=vt.extend=A.extend=Xt.extend=Or;var lr=function(){throw new Error('A "url" property or function must be specified')},de=function(P,V){var Z=V.error;V.error=function(pt){Z&&Z.call(V.context,P,pt,V),P.trigger("error",P,pt,V)}};return G})},210:(S,tt,ut)=>{(function(at){at(ut(631))})(function(at){at.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(Y,G){return/^[;{}]$/.test(G)}}),at.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(Y,G,D,F){return this.jsonMode?/^[\[,{]$/.test(G)||/^}/.test(D):G==";"&&F.lexical&&F.lexical.type==")"?!1:/^[;{}]$/.test(G)&&!/^;/.test(D)}});var At=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;at.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(Y,G,D,F){var O=!1;return this.configuration=="html"&&(O=F.context?At.test(F.context.tagName):!1),!O&&(Y=="tag"&&/>$/.test(G)&&F.context||/^</.test(D))}}),at.defineExtension("commentRange",function(Y,G,D){var F=this,O=at.innerMode(F.getMode(),F.getTokenAt(G).state).mode;F.operation(function(){if(Y)F.replaceRange(O.commentEnd,D),F.replaceRange(O.commentStart,G),G.line==D.line&&G.ch==D.ch&&F.setCursor(G.line,G.ch+O.commentStart.length);else{var L=F.getRange(G,D),k=L.indexOf(O.commentStart),j=L.lastIndexOf(O.commentEnd);k>-1&&j>-1&&j>k&&(L=L.substr(0,k)+L.substring(k+O.commentStart.length,j)+L.substr(j+O.commentEnd.length)),F.replaceRange(L,G,D)}})}),at.defineExtension("autoIndentRange",function(Y,G){var D=this;this.operation(function(){for(var F=Y.line;F<=G.line;F++)D.indentLine(F,"smart")})}),at.defineExtension("autoFormatRange",function(Y,G){var D=this,F=D.getMode(),O=D.getRange(Y,G).split(`
`),L=at.copyState(F,D.getTokenAt(Y).state),k=D.getOption("tabSize"),j="",H=0,ot=Y.ch===0;function ht(){j+=`
`,ot=!0,++H}for(var kt=0;kt<O.length;++kt){for(var Vt=new at.StringStream(O[kt],k);!Vt.eol();){var Bt=at.innerMode(F,L),Ot=F.token(Vt,L),mt=Vt.current();Vt.start=Vt.pos,(!ot||/\S/.test(mt))&&(j+=mt,ot=!1),!ot&&Bt.mode.newlineAfterToken&&Bt.mode.newlineAfterToken(Ot,mt,Vt.string.slice(Vt.pos)||O[kt+1]||"",Bt.state)&&ht()}!Vt.pos&&F.blankLine&&F.blankLine(L),!ot&&kt<O.length-1&&ht()}D.operation(function(){D.replaceRange(j,Y,G);for(var Yt=Y.line+1,re=Y.line+H;Yt<=re;++Yt)D.indentLine(Yt,"smart");D.setSelection(Y,D.getCursor(!1))})})})},631:function(S){(function(tt,ut){S.exports=ut()})(this,function(){var tt=navigator.userAgent,ut=navigator.platform,at=/gecko\/\d/i.test(tt),At=/MSIE \d/.test(tt),Y=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tt),G=/Edge\/(\d+)/.exec(tt),D=At||Y||G,F=D&&(At?document.documentMode||6:+(G||Y)[1]),O=!G&&/WebKit\//.test(tt),L=O&&/Qt\/\d+\.\d+/.test(tt),k=!G&&/Chrome\/(\d+)/.exec(tt),j=k&&+k[1],H=/Opera\//.test(tt),ot=/Apple Computer/.test(navigator.vendor),ht=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(tt),kt=/PhantomJS/.test(tt),Vt=ot&&(/Mobile\/\w+/.test(tt)||navigator.maxTouchPoints>2),Bt=/Android/.test(tt),Ot=Vt||Bt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(tt),mt=Vt||/Mac/.test(ut),Yt=/\bCrOS\b/.test(tt),re=/win/i.test(ut),ae=H&&tt.match(/Version\/(\d*\.\d*)/);ae&&(ae=Number(ae[1])),ae&&ae>=15&&(H=!1,O=!0);var Qt=mt&&(L||H&&(ae==null||ae<12.11)),ct=at||D&&F>=9;function Lt(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var $=function(i,s){var c=i.className,u=Lt(s).exec(c);if(u){var p=c.slice(u.index+u[0].length);i.className=c.slice(0,u.index)+(p?u[1]+p:"")}};function Q(i){for(var s=i.childNodes.length;s>0;--s)i.removeChild(i.firstChild);return i}function rt(i,s){return Q(i).appendChild(s)}function R(i,s,c,u){var p=document.createElement(i);if(c&&(p.className=c),u&&(p.style.cssText=u),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var g=0;g<s.length;++g)p.appendChild(s[g]);return p}function lt(i,s,c,u){var p=R(i,s,c,u);return p.setAttribute("role","presentation"),p}var A;document.createRange?A=function(i,s,c,u){var p=document.createRange();return p.setEnd(u||i,c),p.setStart(i,s),p}:A=function(i,s,c){var u=document.body.createTextRange();try{u.moveToElementText(i.parentNode)}catch{return u}return u.collapse(!0),u.moveEnd("character",c),u.moveStart("character",s),u};function Mt(i,s){if(s.nodeType==3&&(s=s.parentNode),i.contains)return i.contains(s);do if(s.nodeType==11&&(s=s.host),s==i)return!0;while(s=s.parentNode)}function Pt(i){var s;try{s=i.activeElement}catch{s=i.body||null}for(;s&&s.shadowRoot&&s.shadowRoot.activeElement;)s=s.shadowRoot.activeElement;return s}function $t(i,s){var c=i.className;Lt(s).test(c)||(i.className+=(c?" ":"")+s)}function xe(i,s){for(var c=i.split(" "),u=0;u<c.length;u++)c[u]&&!Lt(c[u]).test(s)&&(s+=" "+c[u]);return s}var Ct=function(i){i.select()};Vt?Ct=function(i){i.selectionStart=0,i.selectionEnd=i.value.length}:D&&(Ct=function(i){try{i.select()}catch{}});function Ut(i){return i.display.wrapper.ownerDocument}function se(i){return Ut(i).defaultView}function Wt(i){var s=Array.prototype.slice.call(arguments,1);return function(){return i.apply(null,s)}}function be(i,s,c){s||(s={});for(var u in i)i.hasOwnProperty(u)&&(c!==!1||!s.hasOwnProperty(u))&&(s[u]=i[u]);return s}function vt(i,s,c,u,p){s==null&&(s=i.search(/[^\s\u00a0]/),s==-1&&(s=i.length));for(var g=u||0,y=p||0;;){var _=i.indexOf("	",g);if(_<0||_>=s)return y+(s-g);y+=_-g,y+=c-y%c,g=_+1}}var jt=function(){this.id=null,this.f=null,this.time=0,this.handler=Wt(this.onTimeout,this)};jt.prototype.onTimeout=function(i){i.id=0,i.time<=+new Date?i.f():setTimeout(i.handler,i.time-+new Date)},jt.prototype.set=function(i,s){this.f=s;var c=+new Date+i;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,i),this.time=c)};function Nt(i,s){for(var c=0;c<i.length;++c)if(i[c]==s)return c;return-1}var oe=50,fe={toString:function(){return"CodeMirror.Pass"}},Xt={scroll:!1},ve={origin:"*mouse"},Ke={origin:"+move"};function gr(i,s,c){for(var u=0,p=0;;){var g=i.indexOf("	",u);g==-1&&(g=i.length);var y=g-u;if(g==i.length||p+y>=s)return u+Math.min(y,s-p);if(p+=g-u,p+=c-p%c,u=g+1,p>=s)return u}}var Or=[""];function lr(i){for(;Or.length<=i;)Or.push(de(Or)+" ");return Or[i]}function de(i){return i[i.length-1]}function P(i,s){for(var c=[],u=0;u<i.length;u++)c[u]=s(i[u],u);return c}function V(i,s,c){for(var u=0,p=c(s);u<i.length&&c(i[u])<=p;)u++;i.splice(u,0,s)}function Z(){}function pt(i,s){var c;return Object.create?c=Object.create(i):(Z.prototype=i,c=new Z),s&&be(s,c),c}var Et=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function X(i){return/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||Et.test(i))}function xt(i,s){return s?s.source.indexOf("\\w")>-1&&X(i)?!0:s.test(i):X(i)}function dt(i){for(var s in i)if(i.hasOwnProperty(s)&&i[s])return!1;return!0}var Ce=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ge(i){return i.charCodeAt(0)>=768&&Ce.test(i)}function Re(i,s,c){for(;(c<0?s>0:s<i.length)&&Ge(i.charAt(s));)s+=c;return s}function Ue(i,s,c){for(var u=s>c?-1:1;;){if(s==c)return s;var p=(s+c)/2,g=u<0?Math.ceil(p):Math.floor(p);if(g==s)return i(g)?s:c;i(g)?c=g:s=g+u}}function rr(i,s,c,u){if(!i)return u(s,c,"ltr",0);for(var p=!1,g=0;g<i.length;++g){var y=i[g];(y.from<c&&y.to>s||s==c&&y.to==s)&&(u(Math.max(y.from,s),Math.min(y.to,c),y.level==1?"rtl":"ltr",g),p=!0)}p||u(s,c,"ltr")}var ge=null;function Qe(i,s,c){var u;ge=null;for(var p=0;p<i.length;++p){var g=i[p];if(g.from<s&&g.to>s)return p;g.to==s&&(g.from!=g.to&&c=="before"?u=p:ge=p),g.from==s&&(g.from!=g.to&&c!="before"?u=p:ge=p)}return u??ge}var De=function(){var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function c(E){return E<=247?i.charAt(E):1424<=E&&E<=1524?"R":1536<=E&&E<=1785?s.charAt(E-1536):1774<=E&&E<=2220?"r":8192<=E&&E<=8203?"w":E==8204?"b":"L"}var u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,g=/[LRr]/,y=/[Lb1n]/,_=/[1n]/;function b(E,K,et){this.level=E,this.from=K,this.to=et}return function(E,K){var et=K=="ltr"?"L":"R";if(E.length==0||K=="ltr"&&!u.test(E))return!1;for(var _t=E.length,ft=[],Dt=0;Dt<_t;++Dt)ft.push(c(E.charCodeAt(Dt)));for(var It=0,Zt=et;It<_t;++It){var ee=ft[It];ee=="m"?ft[It]=Zt:Zt=ee}for(var pe=0,ne=et;pe<_t;++pe){var he=ft[pe];he=="1"&&ne=="r"?ft[pe]="n":g.test(he)&&(ne=he,he=="r"&&(ft[pe]="R"))}for(var Te=1,Oe=ft[0];Te<_t-1;++Te){var We=ft[Te];We=="+"&&Oe=="1"&&ft[Te+1]=="1"?ft[Te]="1":We==","&&Oe==ft[Te+1]&&(Oe=="1"||Oe=="n")&&(ft[Te]=Oe),Oe=We}for(var vr=0;vr<_t;++vr){var Yr=ft[vr];if(Yr==",")ft[vr]="N";else if(Yr=="%"){var Sr=void 0;for(Sr=vr+1;Sr<_t&&ft[Sr]=="%";++Sr);for(var nn=vr&&ft[vr-1]=="!"||Sr<_t&&ft[Sr]=="1"?"1":"N",wn=vr;wn<Sr;++wn)ft[wn]=nn;vr=Sr-1}}for(var pr=0,An=et;pr<_t;++pr){var Xr=ft[pr];An=="L"&&Xr=="1"?ft[pr]="L":g.test(Xr)&&(An=Xr)}for(var Kr=0;Kr<_t;++Kr)if(p.test(ft[Kr])){var Br=void 0;for(Br=Kr+1;Br<_t&&p.test(ft[Br]);++Br);for(var Er=(Kr?ft[Kr-1]:et)=="L",kn=(Br<_t?ft[Br]:et)=="L",wa=Er==kn?Er?"L":"R":et,ai=Kr;ai<Br;++ai)ft[ai]=wa;Kr=Br-1}for(var on=[],Hn,Zr=0;Zr<_t;)if(y.test(ft[Zr])){var Ri=Zr;for(++Zr;Zr<_t&&y.test(ft[Zr]);++Zr);on.push(new b(0,Ri,Zr))}else{var Xn=Zr,Ni=on.length,si=K=="rtl"?1:0;for(++Zr;Zr<_t&&ft[Zr]!="L";++Zr);for(var bn=Xn;bn<Zr;)if(_.test(ft[bn])){Xn<bn&&(on.splice(Ni,0,new b(1,Xn,bn)),Ni+=si);var ba=bn;for(++bn;bn<Zr&&_.test(ft[bn]);++bn);on.splice(Ni,0,new b(2,ba,bn)),Ni+=si,Xn=bn}else++bn;Xn<Zr&&on.splice(Ni,0,new b(1,Xn,Zr))}return K=="ltr"&&(on[0].level==1&&(Hn=E.match(/^\s+/))&&(on[0].from=Hn[0].length,on.unshift(new b(0,0,Hn[0].length))),de(on).level==1&&(Hn=E.match(/\s+$/))&&(de(on).to-=Hn[0].length,on.push(new b(0,_t-Hn[0].length,_t)))),K=="rtl"?on.reverse():on}}();function $e(i,s){var c=i.order;return c==null&&(c=i.order=De(i.text,s)),c}var kr=[],_e=function(i,s,c){if(i.addEventListener)i.addEventListener(s,c,!1);else if(i.attachEvent)i.attachEvent("on"+s,c);else{var u=i._handlers||(i._handlers={});u[s]=(u[s]||kr).concat(c)}};function Tr(i,s){return i._handlers&&i._handlers[s]||kr}function Ae(i,s,c){if(i.removeEventListener)i.removeEventListener(s,c,!1);else if(i.detachEvent)i.detachEvent("on"+s,c);else{var u=i._handlers,p=u&&u[s];if(p){var g=Nt(p,c);g>-1&&(u[s]=p.slice(0,g).concat(p.slice(g+1)))}}}function ir(i,s){var c=Tr(i,s);if(c.length)for(var u=Array.prototype.slice.call(arguments,2),p=0;p<c.length;++p)c[p].apply(null,u)}function ur(i,s,c){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),ir(i,c||s.type,i,s),yt(s)||s.codemirrorIgnore}function fr(i){var s=i._handlers&&i._handlers.cursorActivity;if(s)for(var c=i.curOp.cursorActivityHandlers||(i.curOp.cursorActivityHandlers=[]),u=0;u<s.length;++u)Nt(c,s[u])==-1&&c.push(s[u])}function Kt(i,s){return Tr(i,s).length>0}function Gn(i){i.prototype.on=function(s,c){_e(this,s,c)},i.prototype.off=function(s,c){Ae(this,s,c)}}function N(i){i.preventDefault?i.preventDefault():i.returnValue=!1}function it(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}function yt(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==!1}function Ft(i){N(i),it(i)}function ce(i){return i.target||i.srcElement}function ke(i){var s=i.which;return s==null&&(i.button&1?s=1:i.button&2?s=3:i.button&4&&(s=2)),mt&&i.ctrlKey&&s==1&&(s=3),s}var qe=function(){if(D&&F<9)return!1;var i=R("div");return"draggable"in i||"dragDrop"in i}(),ln;function Cn(i){if(ln==null){var s=R("span","​");rt(i,R("span",[s,document.createTextNode("x")])),i.firstChild.offsetHeight!=0&&(ln=s.offsetWidth<=1&&s.offsetHeight>2&&!(D&&F<8))}var c=ln?R("span","​"):R("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}var br;function Lo(i){if(br!=null)return br;var s=rt(i,document.createTextNode("AخA")),c=A(s,0,1).getBoundingClientRect(),u=A(s,1,2).getBoundingClientRect();return Q(i),!c||c.left==c.right?!1:br=u.right-c.right<3}var vn=`

b`.split(/\n/).length!=3?function(i){for(var s=0,c=[],u=i.length;s<=u;){var p=i.indexOf(`
`,s);p==-1&&(p=i.length);var g=i.slice(s,i.charAt(p-1)=="\r"?p-1:p),y=g.indexOf("\r");y!=-1?(c.push(g.slice(0,y)),s+=y+1):(c.push(g),s=p+1)}return c}:function(i){return i.split(/\r\n?|\n/)},xn=window.getSelection?function(i){try{return i.selectionStart!=i.selectionEnd}catch{return!1}}:function(i){var s;try{s=i.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=i?!1:s.compareEndPoints("StartToEnd",s)!=0},_o=function(){var i=R("div");return"oncopy"in i?!0:(i.setAttribute("oncopy","return;"),typeof i.oncopy=="function")}(),Mr=null;function Cr(i){if(Mr!=null)return Mr;var s=rt(i,R("span","x")),c=s.getBoundingClientRect(),u=A(s,0,1).getBoundingClientRect();return Mr=Math.abs(c.left-u.left)>1}var Wr={},Sn={};function $n(i,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),Wr[i]=s}function Do(i,s){Sn[i]=s}function Rn(i){if(typeof i=="string"&&Sn.hasOwnProperty(i))i=Sn[i];else if(i&&typeof i.name=="string"&&Sn.hasOwnProperty(i.name)){var s=Sn[i.name];typeof s=="string"&&(s={name:s}),i=pt(s,i),i.name=s.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i))return Rn("application/xml");if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i))return Rn("application/json")}return typeof i=="string"?{name:i}:i||{name:"null"}}function Qr(i,s){s=Rn(s);var c=Wr[s.name];if(!c)return Qr(i,"text/plain");var u=c(i,s);if(zr.hasOwnProperty(s.name)){var p=zr[s.name];for(var g in p)p.hasOwnProperty(g)&&(u.hasOwnProperty(g)&&(u["_"+g]=u[g]),u[g]=p[g])}if(u.name=s.name,s.helperType&&(u.helperType=s.helperType),s.modeProps)for(var y in s.modeProps)u[y]=s.modeProps[y];return u}var zr={};function qn(i,s){var c=zr.hasOwnProperty(i)?zr[i]:zr[i]={};be(s,c)}function Mn(i,s){if(s===!0)return s;if(i.copyState)return i.copyState(s);var c={};for(var u in s){var p=s[u];p instanceof Array&&(p=p.concat([])),c[u]=p}return c}function On(i,s){for(var c;i.innerMode&&(c=i.innerMode(s),!(!c||c.mode==i));)s=c.state,i=c.mode;return c||{mode:i,state:s}}function Lr(i,s,c){return i.startState?i.startState(s,c):!0}var nr=function(i,s,c){this.pos=this.start=0,this.string=i,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};nr.prototype.eol=function(){return this.pos>=this.string.length},nr.prototype.sol=function(){return this.pos==this.lineStart},nr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},nr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},nr.prototype.eat=function(i){var s=this.string.charAt(this.pos),c;if(typeof i=="string"?c=s==i:c=s&&(i.test?i.test(s):i(s)),c)return++this.pos,s},nr.prototype.eatWhile=function(i){for(var s=this.pos;this.eat(i););return this.pos>s},nr.prototype.eatSpace=function(){for(var i=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>i},nr.prototype.skipToEnd=function(){this.pos=this.string.length},nr.prototype.skipTo=function(i){var s=this.string.indexOf(i,this.pos);if(s>-1)return this.pos=s,!0},nr.prototype.backUp=function(i){this.pos-=i},nr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=vt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?vt(this.string,this.lineStart,this.tabSize):0)},nr.prototype.indentation=function(){return vt(this.string,null,this.tabSize)-(this.lineStart?vt(this.string,this.lineStart,this.tabSize):0)},nr.prototype.match=function(i,s,c){if(typeof i=="string"){var u=function(y){return c?y.toLowerCase():y},p=this.string.substr(this.pos,i.length);if(u(p)==u(i))return s!==!1&&(this.pos+=i.length),!0}else{var g=this.string.slice(this.pos).match(i);return g&&g.index>0?null:(g&&s!==!1&&(this.pos+=g[0].length),g)}},nr.prototype.current=function(){return this.string.slice(this.start,this.pos)},nr.prototype.hideFirstChars=function(i,s){this.lineStart+=i;try{return s()}finally{this.lineStart-=i}},nr.prototype.lookAhead=function(i){var s=this.lineOracle;return s&&s.lookAhead(i)},nr.prototype.baseToken=function(){var i=this.lineOracle;return i&&i.baseToken(this.pos)};function me(i,s){if(s-=i.first,s<0||s>=i.size)throw new Error("There is no line "+(s+i.first)+" in the document.");for(var c=i;!c.lines;)for(var u=0;;++u){var p=c.children[u],g=p.chunkSize();if(s<g){c=p;break}s-=g}return c.lines[s]}function un(i,s,c){var u=[],p=s.line;return i.iter(s.line,c.line+1,function(g){var y=g.text;p==c.line&&(y=y.slice(0,c.ch)),p==s.line&&(y=y.slice(s.ch)),u.push(y),++p}),u}function yr(i,s,c){var u=[];return i.iter(s,c,function(p){u.push(p.text)}),u}function Vr(i,s){var c=s-i.height;if(c)for(var u=i;u;u=u.parent)u.height+=c}function Ye(i){if(i.parent==null)return null;for(var s=i.parent,c=Nt(s.lines,i),u=s.parent;u;s=u,u=u.parent)for(var p=0;u.children[p]!=s;++p)c+=u.children[p].chunkSize();return c+s.first}function tn(i,s){var c=i.first;t:do{for(var u=0;u<i.children.length;++u){var p=i.children[u],g=p.height;if(s<g){i=p;continue t}s-=g,c+=p.chunkSize()}return c}while(!i.lines);for(var y=0;y<i.lines.length;++y){var _=i.lines[y],b=_.height;if(s<b)break;s-=b}return c+y}function Dr(i,s){return s>=i.first&&s<i.first+i.size}function gn(i,s){return String(i.lineNumberFormatter(s+i.firstLineNumber))}function C(i,s,c){if(c===void 0&&(c=null),!(this instanceof C))return new C(i,s,c);this.line=i,this.ch=s,this.sticky=c}function U(i,s){return i.line-s.line||i.ch-s.ch}function Rt(i,s){return i.sticky==s.sticky&&U(i,s)==0}function Gt(i){return C(i.line,i.ch)}function je(i,s){return U(i,s)<0?s:i}function Xe(i,s){return U(i,s)<0?i:s}function er(i,s){return Math.max(i.first,Math.min(s,i.first+i.size-1))}function we(i,s){if(s.line<i.first)return C(i.first,0);var c=i.first+i.size-1;return s.line>c?C(c,me(i,c).text.length):_r(s,me(i,s.line).text.length)}function _r(i,s){var c=i.ch;return c==null||c>s?C(i.line,s):c<0?C(i.line,0):i}function wo(i,s){for(var c=[],u=0;u<s.length;u++)c[u]=we(i,s[u]);return c}var gi=function(i,s){this.state=i,this.lookAhead=s},cn=function(i,s,c,u){this.state=s,this.doc=i,this.line=c,this.maxLookAhead=u||0,this.baseTokens=null,this.baseTokenPos=1};cn.prototype.lookAhead=function(i){var s=this.doc.getLine(this.line+i);return s!=null&&i>this.maxLookAhead&&(this.maxLookAhead=i),s},cn.prototype.baseToken=function(i){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=i;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-i}},cn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},cn.fromSaved=function(i,s,c){return s instanceof gi?new cn(i,Mn(i.mode,s.state),c,s.lookAhead):new cn(i,Mn(i.mode,s),c)},cn.prototype.save=function(i){var s=i!==!1?Mn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new gi(s,this.maxLookAhead):s};function Wi(i,s,c,u){var p=[i.state.modeGen],g={};fn(i,s.text,i.doc.mode,c,function(E,K){return p.push(E,K)},g,u);for(var y=c.state,_=function(E){c.baseTokens=p;var K=i.state.overlays[E],et=1,_t=0;c.state=!0,fn(i,s.text,K.mode,c,function(ft,Dt){for(var It=et;_t<ft;){var Zt=p[et];Zt>ft&&p.splice(et,1,ft,p[et+1],Zt),et+=2,_t=Math.min(ft,Zt)}if(Dt)if(K.opaque)p.splice(It,et-It,ft,"overlay "+Dt),et=It+2;else for(;It<et;It+=2){var ee=p[It+1];p[It+1]=(ee?ee+" ":"")+"overlay "+Dt}},g),c.state=y,c.baseTokens=null,c.baseTokenPos=1},b=0;b<i.state.overlays.length;++b)_(b);return{styles:p,classes:g.bgClass||g.textClass?g:null}}function Aa(i,s,c){if(!s.styles||s.styles[0]!=i.state.modeGen){var u=Qn(i,Ye(s)),p=s.text.length>i.options.maxHighlightLength&&Mn(i.doc.mode,u.state),g=Wi(i,s,u);p&&(u.state=p),s.stateAfter=u.save(!p),s.styles=g.styles,g.classes?s.styleClasses=g.classes:s.styleClasses&&(s.styleClasses=null),c===i.doc.highlightFrontier&&(i.doc.modeFrontier=Math.max(i.doc.modeFrontier,++i.doc.highlightFrontier))}return s.styles}function Qn(i,s,c){var u=i.doc,p=i.display;if(!u.mode.startState)return new cn(u,!0,s);var g=fo(i,s,c),y=g>u.first&&me(u,g-1).stateAfter,_=y?cn.fromSaved(u,y,g):new cn(u,Lr(u.mode),g);return u.iter(g,s,function(b){zi(i,b.text,_);var E=_.line;b.stateAfter=E==s-1||E%5==0||E>=p.viewFrom&&E<p.viewTo?_.save():null,_.nextLine()}),c&&(u.modeFrontier=_.line),_}function zi(i,s,c,u){var p=i.doc.mode,g=new nr(s,i.options.tabSize,c);for(g.start=g.pos=u||0,s==""&&jo(p,c.state);!g.eol();)Io(p,g,c.state),g.start=g.pos}function jo(i,s){if(i.blankLine)return i.blankLine(s);if(i.innerMode){var c=On(i,s);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function Io(i,s,c,u){for(var p=0;p<10;p++){u&&(u[0]=On(i,c).mode);var g=i.token(s,c);if(s.pos>s.start)return g}throw new Error("Mode "+i.name+" failed to advance stream.")}var yi=function(i,s,c){this.start=i.start,this.end=i.pos,this.string=i.current(),this.type=s||null,this.state=c};function jr(i,s,c,u){var p=i.doc,g=p.mode,y;s=we(p,s);var _=me(p,s.line),b=Qn(i,s.line,c),E=new nr(_.text,i.options.tabSize,b),K;for(u&&(K=[]);(u||E.pos<s.ch)&&!E.eol();)E.start=E.pos,y=Io(g,E,b.state),u&&K.push(new yi(E,y,Mn(p.mode,b.state)));return u?K:new yi(E,y,b.state)}function Ki(i,s){if(i)for(;;){var c=i.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;i=i.slice(0,c.index)+i.slice(c.index+c[0].length);var u=c[1]?"bgClass":"textClass";s[u]==null?s[u]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(s[u])||(s[u]+=" "+c[2])}return i}function fn(i,s,c,u,p,g,y){var _=c.flattenSpans;_==null&&(_=i.options.flattenSpans);var b=0,E=null,K=new nr(s,i.options.tabSize,u),et,_t=i.options.addModeClass&&[null];for(s==""&&Ki(jo(c,u.state),g);!K.eol();){if(K.pos>i.options.maxHighlightLength?(_=!1,y&&zi(i,s,u,K.pos),K.pos=s.length,et=null):et=Ki(Io(c,K,u.state,_t),g),_t){var ft=_t[0].name;ft&&(et="m-"+(et?ft+" "+et:ft))}if(!_||E!=et){for(;b<K.start;)b=Math.min(K.start,b+5e3),p(b,E);E=et}K.start=K.pos}for(;b<K.pos;){var Dt=Math.min(K.pos,b+5e3);p(Dt,E),b=Dt}}function fo(i,s,c){for(var u,p,g=i.doc,y=c?-1:s-(i.doc.mode.innerMode?1e3:100),_=s;_>y;--_){if(_<=g.first)return g.first;var b=me(g,_-1),E=b.stateAfter;if(E&&(!c||_+(E instanceof gi?E.lookAhead:0)<=g.modeFrontier))return _;var K=vt(b.text,null,i.options.tabSize);(p==null||u>K)&&(p=_-1,u=K)}return p}function to(i,s){if(i.modeFrontier=Math.min(i.modeFrontier,s),!(i.highlightFrontier<s-10)){for(var c=i.first,u=s-1;u>c;u--){var p=me(i,u).stateAfter;if(p&&(!(p instanceof gi)||u+p.lookAhead<s)){c=u+1;break}}i.highlightFrontier=Math.min(i.highlightFrontier,c)}}var ka=!1,Ln=!1;function Ts(){ka=!0}function Ro(){Ln=!0}function No(i,s,c){this.marker=i,this.from=s,this.to=c}function Vo(i,s){if(i)for(var c=0;c<i.length;++c){var u=i[c];if(u.marker==s)return u}}function mi(i,s){for(var c,u=0;u<i.length;++u)i[u]!=s&&(c||(c=[])).push(i[u]);return c}function Ma(i,s,c){var u=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));u&&i.markedSpans&&u.has(i.markedSpans)?i.markedSpans.push(s):(i.markedSpans=i.markedSpans?i.markedSpans.concat([s]):[s],u&&u.add(i.markedSpans)),s.marker.attachLine(i)}function Es(i,s,c){var u;if(i)for(var p=0;p<i.length;++p){var g=i[p],y=g.marker,_=g.from==null||(y.inclusiveLeft?g.from<=s:g.from<s);if(_||g.from==s&&y.type=="bookmark"&&(!c||!g.marker.insertLeft)){var b=g.to==null||(y.inclusiveRight?g.to>=s:g.to>s);(u||(u=[])).push(new No(y,g.from,b?null:g.to))}}return u}function Gi(i,s,c){var u;if(i)for(var p=0;p<i.length;++p){var g=i[p],y=g.marker,_=g.to==null||(y.inclusiveRight?g.to>=s:g.to>s);if(_||g.from==s&&y.type=="bookmark"&&(!c||g.marker.insertLeft)){var b=g.from==null||(y.inclusiveLeft?g.from<=s:g.from<s);(u||(u=[])).push(new No(y,b?null:g.from-s,g.to==null?null:g.to-s))}}return u}function bo(i,s){if(s.full)return null;var c=Dr(i,s.from.line)&&me(i,s.from.line).markedSpans,u=Dr(i,s.to.line)&&me(i,s.to.line).markedSpans;if(!c&&!u)return null;var p=s.from.ch,g=s.to.ch,y=U(s.from,s.to)==0,_=Es(c,p,y),b=Gi(u,g,y),E=s.text.length==1,K=de(s.text).length+(E?p:0);if(_)for(var et=0;et<_.length;++et){var _t=_[et];if(_t.to==null){var ft=Vo(b,_t.marker);ft?E&&(_t.to=ft.to==null?null:ft.to+K):_t.to=p}}if(b)for(var Dt=0;Dt<b.length;++Dt){var It=b[Dt];if(It.to!=null&&(It.to+=K),It.from==null){var Zt=Vo(_,It.marker);Zt||(It.from=K,E&&(_||(_=[])).push(It))}else It.from+=K,E&&(_||(_=[])).push(It)}_&&(_=Co(_)),b&&b!=_&&(b=Co(b));var ee=[_];if(!E){var pe=s.text.length-2,ne;if(pe>0&&_)for(var he=0;he<_.length;++he)_[he].to==null&&(ne||(ne=[])).push(new No(_[he].marker,null,null));for(var Te=0;Te<pe;++Te)ee.push(ne);ee.push(b)}return ee}function Co(i){for(var s=0;s<i.length;++s){var c=i[s];c.from!=null&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&i.splice(s--,1)}return i.length?i:null}function $i(i,s,c){var u=null;if(i.iter(s.line,c.line+1,function(ft){if(ft.markedSpans)for(var Dt=0;Dt<ft.markedSpans.length;++Dt){var It=ft.markedSpans[Dt].marker;It.readOnly&&(!u||Nt(u,It)==-1)&&(u||(u=[])).push(It)}}),!u)return null;for(var p=[{from:s,to:c}],g=0;g<u.length;++g)for(var y=u[g],_=y.find(0),b=0;b<p.length;++b){var E=p[b];if(!(U(E.to,_.from)<0||U(E.from,_.to)>0)){var K=[b,1],et=U(E.from,_.from),_t=U(E.to,_.to);(et<0||!y.inclusiveLeft&&!et)&&K.push({from:E.from,to:_.from}),(_t>0||!y.inclusiveRight&&!_t)&&K.push({from:_.to,to:E.to}),p.splice.apply(p,K),b+=K.length-3}}return p}function _i(i){var s=i.markedSpans;if(s){for(var c=0;c<s.length;++c)s[c].marker.detachLine(i);i.markedSpans=null}}function xo(i,s){if(s){for(var c=0;c<s.length;++c)s[c].marker.attachLine(i);i.markedSpans=s}}function Fo(i){return i.inclusiveLeft?-1:0}function po(i){return i.inclusiveRight?1:0}function wi(i,s){var c=i.lines.length-s.lines.length;if(c!=0)return c;var u=i.find(),p=s.find(),g=U(u.from,p.from)||Fo(i)-Fo(s);if(g)return-g;var y=U(u.to,p.to)||po(i)-po(s);return y||s.id-i.id}function La(i,s){var c=Ln&&i.markedSpans,u;if(c)for(var p=void 0,g=0;g<c.length;++g)p=c[g],p.marker.collapsed&&(s?p.from:p.to)==null&&(!u||wi(u,p.marker)<0)&&(u=p.marker);return u}function Ho(i){return La(i,!0)}function bi(i){return La(i,!1)}function yn(i,s){var c=Ln&&i.markedSpans,u;if(c)for(var p=0;p<c.length;++p){var g=c[p];g.marker.collapsed&&(g.from==null||g.from<s)&&(g.to==null||g.to>s)&&(!u||wi(u,g.marker)<0)&&(u=g.marker)}return u}function Yn(i,s,c,u,p){var g=me(i,s),y=Ln&&g.markedSpans;if(y)for(var _=0;_<y.length;++_){var b=y[_];if(b.marker.collapsed){var E=b.marker.find(0),K=U(E.from,c)||Fo(b.marker)-Fo(p),et=U(E.to,u)||po(b.marker)-po(p);if(!(K>=0&&et<=0||K<=0&&et>=0)&&(K<=0&&(b.marker.inclusiveRight&&p.inclusiveLeft?U(E.to,c)>=0:U(E.to,c)>0)||K>=0&&(b.marker.inclusiveRight&&p.inclusiveLeft?U(E.from,u)<=0:U(E.from,u)<0)))return!0}}}function Ze(i){for(var s;s=Ho(i);)i=s.find(-1,!0).line;return i}function Bo(i){for(var s;s=bi(i);)i=s.find(1,!0).line;return i}function mn(i){for(var s,c;s=bi(i);)i=s.find(1,!0).line,(c||(c=[])).push(i);return c}function Nn(i,s){var c=me(i,s),u=Ze(c);return c==u?s:Ye(u)}function So(i,s){if(s>i.lastLine())return s;var c=me(i,s),u;if(!Tn(i,c))return s;for(;u=bi(c);)c=u.find(1,!0).line;return Ye(c)+1}function Tn(i,s){var c=Ln&&s.markedSpans;if(c){for(var u=void 0,p=0;p<c.length;++p)if(u=c[p],!!u.marker.collapsed){if(u.from==null)return!0;if(!u.marker.widgetNode&&u.from==0&&u.marker.inclusiveLeft&&Fr(i,s,u))return!0}}}function Fr(i,s,c){if(c.to==null){var u=c.marker.find(1,!0);return Fr(i,u.line,Vo(u.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==s.text.length)return!0;for(var p=void 0,g=0;g<s.markedSpans.length;++g)if(p=s.markedSpans[g],p.marker.collapsed&&!p.marker.widgetNode&&p.from==c.to&&(p.to==null||p.to!=c.from)&&(p.marker.inclusiveLeft||c.marker.inclusiveRight)&&Fr(i,s,p))return!0}function or(i){i=Ze(i);for(var s=0,c=i.parent,u=0;u<c.lines.length;++u){var p=c.lines[u];if(p==i)break;s+=p.height}for(var g=c.parent;g;c=g,g=c.parent)for(var y=0;y<g.children.length;++y){var _=g.children[y];if(_==c)break;s+=_.height}return s}function eo(i){if(i.height==0)return 0;for(var s=i.text.length,c,u=i;c=Ho(u);){var p=c.find(0,!0);u=p.from.line,s+=p.from.ch-p.to.ch}for(u=i;c=bi(u);){var g=c.find(0,!0);s-=u.text.length-g.from.ch,u=g.to.line,s+=u.text.length-g.to.ch}return s}function ro(i){var s=i.display,c=i.doc;s.maxLine=me(c,c.first),s.maxLineLength=eo(s.maxLine),s.maxLineChanged=!0,c.iter(function(u){var p=eo(u);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=u)})}var no=function(i,s,c){this.text=i,xo(this,s),this.height=c?c(this):1};no.prototype.lineNo=function(){return Ye(this)},Gn(no);function Da(i,s,c,u){i.text=s,i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null),i.order!=null&&(i.order=null),_i(i),xo(i,c);var p=u?u(i):1;p!=i.height&&Vr(i,p)}function Gr(i){i.parent=null,_i(i)}var Ol={},Uo={};function oo(i,s){if(!i||/^\s*$/.test(i))return null;var c=s.addModeClass?Uo:Ol;return c[i]||(c[i]=i.replace(/\S+/g,"cm-$&"))}function ja(i,s){var c=lt("span",null,null,O?"padding-right: .1px":null),u={pre:lt("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:i,trailingSpace:!1,splitSpaces:i.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var g=p?s.rest[p-1]:s.line,y=void 0;u.pos=0,u.addToken=qi,Lo(i.display.measure)&&(y=$e(g,i.doc.direction))&&(u.addToken=As(u.addToken,y)),u.map=[];var _=s!=i.display.externalMeasured&&Ye(g);ks(g,u,Aa(i,g,_)),g.styleClasses&&(g.styleClasses.bgClass&&(u.bgClass=xe(g.styleClasses.bgClass,u.bgClass||"")),g.styleClasses.textClass&&(u.textClass=xe(g.styleClasses.textClass,u.textClass||""))),u.map.length==0&&u.map.push(0,0,u.content.appendChild(Cn(i.display.measure))),p==0?(s.measure.map=u.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(u.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(O){var b=u.content.lastChild;(/\bcm-tab\b/.test(b.className)||b.querySelector&&b.querySelector(".cm-tab"))&&(u.content.className="cm-tab-wrap-hack")}return ir(i,"renderLine",i,s.line,u.pre),u.pre.className&&(u.textClass=xe(u.pre.className,u.textClass||"")),u}function Ps(i){var s=R("span","•","cm-invalidchar");return s.title="\\u"+i.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function qi(i,s,c,u,p,g,y){if(s){var _=i.splitSpaces?Yi(s,i.trailingSpace):s,b=i.cm.state.specialChars,E=!1,K;if(!b.test(s))i.col+=s.length,K=document.createTextNode(_),i.map.push(i.pos,i.pos+s.length,K),D&&F<9&&(E=!0),i.pos+=s.length;else{K=document.createDocumentFragment();for(var et=0;;){b.lastIndex=et;var _t=b.exec(s),ft=_t?_t.index-et:s.length-et;if(ft){var Dt=document.createTextNode(_.slice(et,et+ft));D&&F<9?K.appendChild(R("span",[Dt])):K.appendChild(Dt),i.map.push(i.pos,i.pos+ft,Dt),i.col+=ft,i.pos+=ft}if(!_t)break;et+=ft+1;var It=void 0;if(_t[0]=="	"){var Zt=i.cm.options.tabSize,ee=Zt-i.col%Zt;It=K.appendChild(R("span",lr(ee),"cm-tab")),It.setAttribute("role","presentation"),It.setAttribute("cm-text","	"),i.col+=ee}else _t[0]=="\r"||_t[0]==`
`?(It=K.appendChild(R("span",_t[0]=="\r"?"␍":"␤","cm-invalidchar")),It.setAttribute("cm-text",_t[0]),i.col+=1):(It=i.cm.options.specialCharPlaceholder(_t[0]),It.setAttribute("cm-text",_t[0]),D&&F<9?K.appendChild(R("span",[It])):K.appendChild(It),i.col+=1);i.map.push(i.pos,i.pos+1,It),i.pos++}}if(i.trailingSpace=_.charCodeAt(s.length-1)==32,c||u||p||E||g||y){var pe=c||"";u&&(pe+=u),p&&(pe+=p);var ne=R("span",[K],pe,g);if(y)for(var he in y)y.hasOwnProperty(he)&&he!="style"&&he!="class"&&ne.setAttribute(he,y[he]);return i.content.appendChild(ne)}i.content.appendChild(K)}}function Yi(i,s){if(i.length>1&&!/  /.test(i))return i;for(var c=s,u="",p=0;p<i.length;p++){var g=i.charAt(p);g==" "&&c&&(p==i.length-1||i.charCodeAt(p+1)==32)&&(g=" "),u+=g,c=g==" "}return u}function As(i,s){return function(c,u,p,g,y,_,b){p=p?p+" cm-force-border":"cm-force-border";for(var E=c.pos,K=E+u.length;;){for(var et=void 0,_t=0;_t<s.length&&(et=s[_t],!(et.to>E&&et.from<=E));_t++);if(et.to>=K)return i(c,u,p,g,y,_,b);i(c,u.slice(0,et.to-E),p,g,null,_,b),g=null,u=u.slice(et.to-E),E=et.to}}}function Ia(i,s,c,u){var p=!u&&c.widgetNode;p&&i.map.push(i.pos,i.pos+s,p),!u&&i.cm.display.input.needsContentAttribute&&(p||(p=i.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",c.id)),p&&(i.cm.display.input.setUneditable(p),i.content.appendChild(p)),i.pos+=s,i.trailingSpace=!1}function ks(i,s,c){var u=i.markedSpans,p=i.text,g=0;if(!u){for(var y=1;y<c.length;y+=2)s.addToken(s,p.slice(g,g=c[y]),oo(c[y+1],s.cm.options));return}for(var _=p.length,b=0,E=1,K="",et,_t,ft=0,Dt,It,Zt,ee,pe;;){if(ft==b){Dt=It=Zt=_t="",pe=null,ee=null,ft=1/0;for(var ne=[],he=void 0,Te=0;Te<u.length;++Te){var Oe=u[Te],We=Oe.marker;if(We.type=="bookmark"&&Oe.from==b&&We.widgetNode)ne.push(We);else if(Oe.from<=b&&(Oe.to==null||Oe.to>b||We.collapsed&&Oe.to==b&&Oe.from==b)){if(Oe.to!=null&&Oe.to!=b&&ft>Oe.to&&(ft=Oe.to,It=""),We.className&&(Dt+=" "+We.className),We.css&&(_t=(_t?_t+";":"")+We.css),We.startStyle&&Oe.from==b&&(Zt+=" "+We.startStyle),We.endStyle&&Oe.to==ft&&(he||(he=[])).push(We.endStyle,Oe.to),We.title&&((pe||(pe={})).title=We.title),We.attributes)for(var vr in We.attributes)(pe||(pe={}))[vr]=We.attributes[vr];We.collapsed&&(!ee||wi(ee.marker,We)<0)&&(ee=Oe)}else Oe.from>b&&ft>Oe.from&&(ft=Oe.from)}if(he)for(var Yr=0;Yr<he.length;Yr+=2)he[Yr+1]==ft&&(It+=" "+he[Yr]);if(!ee||ee.from==b)for(var Sr=0;Sr<ne.length;++Sr)Ia(s,0,ne[Sr]);if(ee&&(ee.from||0)==b){if(Ia(s,(ee.to==null?_+1:ee.to)-b,ee.marker,ee.from==null),ee.to==null)return;ee.to==b&&(ee=!1)}}if(b>=_)break;for(var nn=Math.min(_,ft);;){if(K){var wn=b+K.length;if(!ee){var pr=wn>nn?K.slice(0,nn-b):K;s.addToken(s,pr,et?et+Dt:Dt,Zt,b+pr.length==ft?It:"",_t,pe)}if(wn>=nn){K=K.slice(nn-b),b=nn;break}b=wn,Zt=""}K=p.slice(g,g=c[E++]),et=oo(c[E++],s.cm.options)}}}function _n(i,s,c){this.line=s,this.rest=mn(s),this.size=this.rest?Ye(de(this.rest))-c+1:1,this.node=this.text=null,this.hidden=Tn(i,s)}function Xi(i,s,c){for(var u=[],p,g=s;g<c;g=p){var y=new _n(i.doc,me(i.doc,g),g);p=g+y.size,u.push(y)}return u}var ho=null;function Ms(i){ho?ho.ops.push(i):i.ownsGroup=ho={ops:[i],delayedCallbacks:[]}}function Zi(i){var s=i.delayedCallbacks,c=0;do{for(;c<s.length;c++)s[c].call(null);for(var u=0;u<i.ops.length;u++){var p=i.ops[u];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(c<s.length)}function Wo(i,s){var c=i.ownsGroup;if(c)try{Zi(c)}finally{ho=null,s(c)}}var en=null;function Ir(i,s){var c=Tr(i,s);if(c.length){var u=Array.prototype.slice.call(arguments,2),p;ho?p=ho.delayedCallbacks:en?p=en:(p=en=[],setTimeout(Ls,0));for(var g=function(_){p.push(function(){return c[_].apply(null,u)})},y=0;y<c.length;++y)g(y)}}function Ls(){var i=en;en=null;for(var s=0;s<i.length;++s)i[s]()}function Ra(i,s,c,u){for(var p=0;p<s.changes.length;p++){var g=s.changes[p];g=="text"?Ci(i,s):g=="gutter"?Ko(i,s,c,u):g=="class"?Ji(i,s):g=="widget"&&js(i,s,u)}s.changes=null}function Oo(i){return i.node==i.text&&(i.node=R("div",null,null,"position: relative"),i.text.parentNode&&i.text.parentNode.replaceChild(i.node,i.text),i.node.appendChild(i.text),D&&F<8&&(i.node.style.zIndex=2)),i.node}function Ds(i,s){var c=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),s.background)c?s.background.className=c:(s.background.parentNode.removeChild(s.background),s.background=null);else if(c){var u=Oo(s);s.background=u.insertBefore(R("div",null,c),u.firstChild),i.display.input.setUneditable(s.background)}}function zo(i,s){var c=i.display.externalMeasured;return c&&c.line==s.line?(i.display.externalMeasured=null,s.measure=c.measure,c.built):ja(i,s)}function Ci(i,s){var c=s.text.className,u=zo(i,s);s.text==s.node&&(s.node=u.pre),s.text.parentNode.replaceChild(u.pre,s.text),s.text=u.pre,u.bgClass!=s.bgClass||u.textClass!=s.textClass?(s.bgClass=u.bgClass,s.textClass=u.textClass,Ji(i,s)):c&&(s.text.className=c)}function Ji(i,s){Ds(i,s),s.line.wrapClass?Oo(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var c=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=c||""}function Ko(i,s,c,u){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=Oo(s);s.gutterBackground=R("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(i.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px; width: "+u.gutterTotalWidth+"px"),i.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var g=s.line.gutterMarkers;if(i.options.lineNumbers||g){var y=Oo(s),_=s.gutter=R("div",null,"CodeMirror-gutter-wrapper","left: "+(i.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px");if(_.setAttribute("aria-hidden","true"),i.display.input.setUneditable(_),y.insertBefore(_,s.text),s.line.gutterClass&&(_.className+=" "+s.line.gutterClass),i.options.lineNumbers&&(!g||!g["CodeMirror-linenumbers"])&&(s.lineNumber=_.appendChild(R("div",gn(i.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+u.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.display.lineNumInnerWidth+"px"))),g)for(var b=0;b<i.display.gutterSpecs.length;++b){var E=i.display.gutterSpecs[b].className,K=g.hasOwnProperty(E)&&g[E];K&&_.appendChild(R("div",[K],"CodeMirror-gutter-elt","left: "+u.gutterLeft[E]+"px; width: "+u.gutterWidth[E]+"px"))}}}function js(i,s,c){s.alignable&&(s.alignable=null);for(var u=Lt("CodeMirror-linewidget"),p=s.node.firstChild,g=void 0;p;p=g)g=p.nextSibling,u.test(p.className)&&s.node.removeChild(p);Na(i,s,c)}function vo(i,s,c,u){var p=zo(i,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),Ji(i,s),Ko(i,s,c,u),Na(i,s,u),s.node}function Na(i,s,c){if(Va(i,s.line,s,c,!0),s.rest)for(var u=0;u<s.rest.length;u++)Va(i,s.rest[u],s,c,!1)}function Va(i,s,c,u,p){if(s.widgets)for(var g=Oo(c),y=0,_=s.widgets;y<_.length;++y){var b=_[y],E=R("div",[b.node],"CodeMirror-linewidget"+(b.className?" "+b.className:""));b.handleMouseEvents||E.setAttribute("cm-ignore-events","true"),Fa(b,E,c,u),i.display.input.setUneditable(E),p&&b.above?g.insertBefore(E,c.gutter||c.text):g.appendChild(E),Ir(b,"redraw")}}function Fa(i,s,c,u){if(i.noHScroll){(c.alignable||(c.alignable=[])).push(s);var p=u.wrapperWidth;s.style.left=u.fixedPos+"px",i.coverGutter||(p-=u.gutterTotalWidth,s.style.paddingLeft=u.gutterTotalWidth+"px"),s.style.width=p+"px"}i.coverGutter&&(s.style.zIndex=5,s.style.position="relative",i.noHScroll||(s.style.marginLeft=-u.gutterTotalWidth+"px"))}function go(i){if(i.height!=null)return i.height;var s=i.doc.cm;if(!s)return 0;if(!Mt(document.body,i.node)){var c="position: relative;";i.coverGutter&&(c+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),i.noHScroll&&(c+="width: "+s.display.wrapper.clientWidth+"px;"),rt(s.display.measure,R("div",[i.node],null,c))}return i.height=i.node.parentNode.offsetHeight}function io(i,s){for(var c=ce(s);c!=i.wrapper;c=c.parentNode)if(!c||c.nodeType==1&&c.getAttribute("cm-ignore-events")=="true"||c.parentNode==i.sizer&&c!=i.mover)return!0}function ao(i){return i.lineSpace.offsetTop}function Ha(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function x(i){if(i.cachedPaddingH)return i.cachedPaddingH;var s=rt(i.measure,R("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,u={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(u.left)&&!isNaN(u.right)&&(i.cachedPaddingH=u),u}function M(i){return oe-i.display.nativeBarWidth}function J(i){return i.display.scroller.clientWidth-M(i)-i.display.barWidth}function nt(i){return i.display.scroller.clientHeight-M(i)-i.display.barHeight}function bt(i,s,c){var u=i.options.lineWrapping,p=u&&J(i);if(!s.measure.heights||u&&s.measure.width!=p){var g=s.measure.heights=[];if(u){s.measure.width=p;for(var y=s.text.firstChild.getClientRects(),_=0;_<y.length-1;_++){var b=y[_],E=y[_+1];Math.abs(b.bottom-E.bottom)>2&&g.push((b.bottom+E.top)/2-c.top)}}g.push(c.bottom-c.top)}}function gt(i,s,c){if(i.line==s)return{map:i.measure.map,cache:i.measure.cache};if(i.rest){for(var u=0;u<i.rest.length;u++)if(i.rest[u]==s)return{map:i.measure.maps[u],cache:i.measure.caches[u]};for(var p=0;p<i.rest.length;p++)if(Ye(i.rest[p])>c)return{map:i.measure.maps[p],cache:i.measure.caches[p],before:!0}}}function Ht(i,s){s=Ze(s);var c=Ye(s),u=i.display.externalMeasured=new _n(i.doc,s,c);u.lineN=c;var p=u.built=ja(i,u);return u.text=p.pre,rt(i.display.lineMeasure,p.pre),u}function ie(i,s,c,u){return dr(i,Me(i,s),c,u)}function Fe(i,s){if(s>=i.display.viewFrom&&s<i.display.viewTo)return i.display.view[Si(i,s)];var c=i.display.externalMeasured;if(c&&s>=c.lineN&&s<c.lineN+c.size)return c}function Me(i,s){var c=Ye(s),u=Fe(i,c);u&&!u.text?u=null:u&&u.changes&&(Ra(i,u,c,Ml(i)),i.curOp.forceUpdate=!0),u||(u=Ht(i,s));var p=gt(u,s,c);return{line:s,view:u,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function dr(i,s,c,u,p){s.before&&(c=-1);var g=c+(u||""),y;return s.cache.hasOwnProperty(g)?y=s.cache[g]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(bt(i,s.view,s.rect),s.hasHeights=!0),y=Tl(i,s,c,u),y.bogus||(s.cache[g]=y)),{left:y.left,right:y.right,top:p?y.rtop:y.top,bottom:p?y.rbottom:y.bottom}}var Hr={left:0,right:0,top:0,bottom:0};function Qi(i,s,c){for(var u,p,g,y,_,b,E=0;E<i.length;E+=3)if(_=i[E],b=i[E+1],s<_?(p=0,g=1,y="left"):s<b?(p=s-_,g=p+1):(E==i.length-3||s==b&&i[E+3]>s)&&(g=b-_,p=g-1,s>=b&&(y="right")),p!=null){if(u=i[E+2],_==b&&c==(u.insertLeft?"left":"right")&&(y=c),c=="left"&&p==0)for(;E&&i[E-2]==i[E-3]&&i[E-1].insertLeft;)u=i[(E-=3)+2],y="left";if(c=="right"&&p==b-_)for(;E<i.length-3&&i[E+3]==i[E+4]&&!i[E+5].insertLeft;)u=i[(E+=3)+2],y="right";break}return{node:u,start:p,end:g,collapse:y,coverStart:_,coverEnd:b}}function Is(i,s){var c=Hr;if(s=="left")for(var u=0;u<i.length&&(c=i[u]).left==c.right;u++);else for(var p=i.length-1;p>=0&&(c=i[p]).left==c.right;p--);return c}function Tl(i,s,c,u){var p=Qi(s.map,c,u),g=p.node,y=p.start,_=p.end,b=p.collapse,E;if(g.nodeType==3){for(var K=0;K<4;K++){for(;y&&Ge(s.line.text.charAt(p.coverStart+y));)--y;for(;p.coverStart+_<p.coverEnd&&Ge(s.line.text.charAt(p.coverStart+_));)++_;if(D&&F<9&&y==0&&_==p.coverEnd-p.coverStart?E=g.parentNode.getBoundingClientRect():E=Is(A(g,y,_).getClientRects(),u),E.left||E.right||y==0)break;_=y,y=y-1,b="right"}D&&F<11&&(E=_f(i.display.measure,E))}else{y>0&&(b=u="right");var et;i.options.lineWrapping&&(et=g.getClientRects()).length>1?E=et[u=="right"?et.length-1:0]:E=g.getBoundingClientRect()}if(D&&F<9&&!y&&(!E||!E.left&&!E.right)){var _t=g.parentNode.getClientRects()[0];_t?E={left:_t.left,right:_t.left+ea(i.display),top:_t.top,bottom:_t.bottom}:E=Hr}for(var ft=E.top-s.rect.top,Dt=E.bottom-s.rect.top,It=(ft+Dt)/2,Zt=s.view.measure.heights,ee=0;ee<Zt.length-1&&!(It<Zt[ee]);ee++);var pe=ee?Zt[ee-1]:0,ne=Zt[ee],he={left:(b=="right"?E.right:E.left)-s.rect.left,right:(b=="left"?E.left:E.right)-s.rect.left,top:pe,bottom:ne};return!E.left&&!E.right&&(he.bogus=!0),i.options.singleCursorHeightPerLine||(he.rtop=ft,he.rbottom=Dt),he}function _f(i,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Cr(i))return s;var c=screen.logicalXDPI/screen.deviceXDPI,u=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*c,right:s.right*c,top:s.top*u,bottom:s.bottom*u}}function Ba(i){if(i.measure&&(i.measure.cache={},i.measure.heights=null,i.rest))for(var s=0;s<i.rest.length;s++)i.measure.caches[s]={}}function Pu(i){i.display.externalMeasure=null,Q(i.display.lineMeasure);for(var s=0;s<i.display.view.length;s++)Ba(i.display.view[s])}function xi(i){Pu(i),i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null,i.options.lineWrapping||(i.display.maxLineChanged=!0),i.display.lineNumChars=null}function Au(i){return k&&Bt?-(i.body.getBoundingClientRect().left-parseInt(getComputedStyle(i.body).marginLeft)):i.defaultView.pageXOffset||(i.documentElement||i.body).scrollLeft}function Ua(i){return k&&Bt?-(i.body.getBoundingClientRect().top-parseInt(getComputedStyle(i.body).marginTop)):i.defaultView.pageYOffset||(i.documentElement||i.body).scrollTop}function Wa(i){var s=Ze(i),c=s.widgets,u=0;if(c)for(var p=0;p<c.length;++p)c[p].above&&(u+=go(c[p]));return u}function Rs(i,s,c,u,p){if(!p){var g=Wa(s);c.top+=g,c.bottom+=g}if(u=="line")return c;u||(u="local");var y=or(s);if(u=="local"?y+=ao(i.display):y-=i.display.viewOffset,u=="page"||u=="window"){var _=i.display.lineSpace.getBoundingClientRect();y+=_.top+(u=="window"?0:Ua(Ut(i)));var b=_.left+(u=="window"?0:Au(Ut(i)));c.left+=b,c.right+=b}return c.top+=y,c.bottom+=y,c}function ku(i,s,c){if(c=="div")return s;var u=s.left,p=s.top;if(c=="page")u-=Au(Ut(i)),p-=Ua(Ut(i));else if(c=="local"||!c){var g=i.display.sizer.getBoundingClientRect();u+=g.left,p+=g.top}var y=i.display.lineSpace.getBoundingClientRect();return{left:u-y.left,top:p-y.top}}function Ns(i,s,c,u,p){return u||(u=me(i.doc,s.line)),Rs(i,u,ie(i,u,s.ch,p),c)}function Dn(i,s,c,u,p,g){u=u||me(i.doc,s.line),p||(p=Me(i,u));function y(Dt,It){var Zt=dr(i,p,Dt,It?"right":"left",g);return It?Zt.left=Zt.right:Zt.right=Zt.left,Rs(i,u,Zt,c)}var _=$e(u,i.doc.direction),b=s.ch,E=s.sticky;if(b>=u.text.length?(b=u.text.length,E="before"):b<=0&&(b=0,E="after"),!_)return y(E=="before"?b-1:b,E=="before");function K(Dt,It,Zt){var ee=_[It],pe=ee.level==1;return y(Zt?Dt-1:Dt,pe!=Zt)}var et=Qe(_,b,E),_t=ge,ft=K(b,et,E=="before");return _t!=null&&(ft.other=K(b,_t,E!="before")),ft}function El(i,s){var c=0;s=we(i.doc,s),i.options.lineWrapping||(c=ea(i.display)*s.ch);var u=me(i.doc,s.line),p=or(u)+ao(i.display);return{left:c,right:c,top:p,bottom:p+u.height}}function Pl(i,s,c,u,p){var g=C(i,s,c);return g.xRel=p,u&&(g.outside=u),g}function Al(i,s,c){var u=i.doc;if(c+=i.display.viewOffset,c<0)return Pl(u.first,0,null,-1,-1);var p=tn(u,c),g=u.first+u.size-1;if(p>g)return Pl(u.first+u.size-1,me(u,g).text.length,null,1,1);s<0&&(s=0);for(var y=me(u,p);;){var _=wf(i,y,p,s,c),b=yn(y,_.ch+(_.xRel>0||_.outside>0?1:0));if(!b)return _;var E=b.find(1);if(E.line==p)return E;y=me(u,p=E.line)}}function Mu(i,s,c,u){u-=Wa(s);var p=s.text.length,g=Ue(function(y){return dr(i,c,y-1).bottom<=u},p,0);return p=Ue(function(y){return dr(i,c,y).top>u},g,p),{begin:g,end:p}}function za(i,s,c,u){c||(c=Me(i,s));var p=Rs(i,s,dr(i,c,u),"line").top;return Mu(i,s,c,p)}function kl(i,s,c,u){return i.bottom<=c?!1:i.top>c?!0:(u?i.left:i.right)>s}function wf(i,s,c,u,p){p-=or(s);var g=Me(i,s),y=Wa(s),_=0,b=s.text.length,E=!0,K=$e(s,i.doc.direction);if(K){var et=(i.options.lineWrapping?Vs:bf)(i,s,c,g,K,u,p);E=et.level!=1,_=E?et.from:et.to-1,b=E?et.to:et.from-1}var _t=null,ft=null,Dt=Ue(function(Te){var Oe=dr(i,g,Te);return Oe.top+=y,Oe.bottom+=y,kl(Oe,u,p,!1)?(Oe.top<=p&&Oe.left<=u&&(_t=Te,ft=Oe),!0):!1},_,b),It,Zt,ee=!1;if(ft){var pe=u-ft.left<ft.right-u,ne=pe==E;Dt=_t+(ne?0:1),Zt=ne?"after":"before",It=pe?ft.left:ft.right}else{!E&&(Dt==b||Dt==_)&&Dt++,Zt=Dt==0?"after":Dt==s.text.length?"before":dr(i,g,Dt-(E?1:0)).bottom+y<=p==E?"after":"before";var he=Dn(i,C(c,Dt,Zt),"line",s,g);It=he.left,ee=p<he.top?-1:p>=he.bottom?1:0}return Dt=Re(s.text,Dt,1),Pl(c,Dt,Zt,ee,u-It)}function bf(i,s,c,u,p,g,y){var _=Ue(function(et){var _t=p[et],ft=_t.level!=1;return kl(Dn(i,C(c,ft?_t.to:_t.from,ft?"before":"after"),"line",s,u),g,y,!0)},0,p.length-1),b=p[_];if(_>0){var E=b.level!=1,K=Dn(i,C(c,E?b.from:b.to,E?"after":"before"),"line",s,u);kl(K,g,y,!0)&&K.top>y&&(b=p[_-1])}return b}function Vs(i,s,c,u,p,g,y){var _=Mu(i,s,u,y),b=_.begin,E=_.end;/\s/.test(s.text.charAt(E-1))&&E--;for(var K=null,et=null,_t=0;_t<p.length;_t++){var ft=p[_t];if(!(ft.from>=E||ft.to<=b)){var Dt=ft.level!=1,It=dr(i,u,Dt?Math.min(E,ft.to)-1:Math.max(b,ft.from)).right,Zt=It<g?g-It+1e9:It-g;(!K||et>Zt)&&(K=ft,et=Zt)}}return K||(K=p[p.length-1]),K.from<b&&(K={from:b,to:K.to,level:K.level}),K.to>E&&(K={from:K.from,to:E,level:K.level}),K}var To;function ta(i){if(i.cachedTextHeight!=null)return i.cachedTextHeight;if(To==null){To=R("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)To.appendChild(document.createTextNode("x")),To.appendChild(R("br"));To.appendChild(document.createTextNode("x"))}rt(i.measure,To);var c=To.offsetHeight/50;return c>3&&(i.cachedTextHeight=c),Q(i.measure),c||1}function ea(i){if(i.cachedCharWidth!=null)return i.cachedCharWidth;var s=R("span","xxxxxxxxxx"),c=R("pre",[s],"CodeMirror-line-like");rt(i.measure,c);var u=s.getBoundingClientRect(),p=(u.right-u.left)/10;return p>2&&(i.cachedCharWidth=p),p||10}function Ml(i){for(var s=i.display,c={},u={},p=s.gutters.clientLeft,g=s.gutters.firstChild,y=0;g;g=g.nextSibling,++y){var _=i.display.gutterSpecs[y].className;c[_]=g.offsetLeft+g.clientLeft+p,u[_]=g.clientWidth}return{fixedPos:ra(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:c,gutterWidth:u,wrapperWidth:s.wrapper.clientWidth}}function ra(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function Fs(i){var s=ta(i.display),c=i.options.lineWrapping,u=c&&Math.max(5,i.display.scroller.clientWidth/ea(i.display)-3);return function(p){if(Tn(i.doc,p))return 0;var g=0;if(p.widgets)for(var y=0;y<p.widgets.length;y++)p.widgets[y].height&&(g+=p.widgets[y].height);return c?g+(Math.ceil(p.text.length/u)||1)*s:g+s}}function Ll(i){var s=i.doc,c=Fs(i);s.iter(function(u){var p=c(u);p!=u.height&&Vr(u,p)})}function Go(i,s,c,u){var p=i.display;if(!c&&ce(s).getAttribute("cm-not-content")=="true")return null;var g,y,_=p.lineSpace.getBoundingClientRect();try{g=s.clientX-_.left,y=s.clientY-_.top}catch{return null}var b=Al(i,g,y),E;if(u&&b.xRel>0&&(E=me(i.doc,b.line).text).length==b.ch){var K=vt(E,E.length,i.options.tabSize)-E.length;b=C(b.line,Math.max(0,Math.round((g-x(i.display).left)/ea(i.display))-K))}return b}function Si(i,s){if(s>=i.display.viewTo||(s-=i.display.viewFrom,s<0))return null;for(var c=i.display.view,u=0;u<c.length;u++)if(s-=c[u].size,s<0)return u}function rn(i,s,c,u){s==null&&(s=i.doc.first),c==null&&(c=i.doc.first+i.doc.size),u||(u=0);var p=i.display;if(u&&c<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),i.curOp.viewChanged=!0,s>=p.viewTo)Ln&&Nn(i.doc,s)<p.viewTo&&qo(i);else if(c<=p.viewFrom)Ln&&So(i.doc,c+u)>p.viewFrom?qo(i):(p.viewFrom+=u,p.viewTo+=u);else if(s<=p.viewFrom&&c>=p.viewTo)qo(i);else if(s<=p.viewFrom){var g=Hs(i,c,c+u,1);g?(p.view=p.view.slice(g.index),p.viewFrom=g.lineN,p.viewTo+=u):qo(i)}else if(c>=p.viewTo){var y=Hs(i,s,s,-1);y?(p.view=p.view.slice(0,y.index),p.viewTo=y.lineN):qo(i)}else{var _=Hs(i,s,s,-1),b=Hs(i,c,c+u,1);_&&b?(p.view=p.view.slice(0,_.index).concat(Xi(i,_.lineN,b.lineN)).concat(p.view.slice(b.index)),p.viewTo+=u):qo(i)}var E=p.externalMeasured;E&&(c<E.lineN?E.lineN+=u:s<E.lineN+E.size&&(p.externalMeasured=null))}function $o(i,s,c){i.curOp.viewChanged=!0;var u=i.display,p=i.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(u.externalMeasured=null),!(s<u.viewFrom||s>=u.viewTo)){var g=u.view[Si(i,s)];if(g.node!=null){var y=g.changes||(g.changes=[]);Nt(y,c)==-1&&y.push(c)}}}function qo(i){i.display.viewFrom=i.display.viewTo=i.doc.first,i.display.view=[],i.display.viewOffset=0}function Hs(i,s,c,u){var p=Si(i,s),g,y=i.display.view;if(!Ln||c==i.doc.first+i.doc.size)return{index:p,lineN:c};for(var _=i.display.viewFrom,b=0;b<p;b++)_+=y[b].size;if(_!=s){if(u>0){if(p==y.length-1)return null;g=_+y[p].size-s,p++}else g=_-s;s+=g,c+=g}for(;Nn(i.doc,c)!=c;){if(p==(u<0?0:y.length-1))return null;c+=u*y[p-(u<0?1:0)].size,p+=u}return{index:p,lineN:c}}function Bs(i,s,c){var u=i.display,p=u.view;p.length==0||s>=u.viewTo||c<=u.viewFrom?(u.view=Xi(i,s,c),u.viewFrom=s):(u.viewFrom>s?u.view=Xi(i,s,u.viewFrom).concat(u.view):u.viewFrom<s&&(u.view=u.view.slice(Si(i,s))),u.viewFrom=s,u.viewTo<c?u.view=u.view.concat(Xi(i,u.viewTo,c)):u.viewTo>c&&(u.view=u.view.slice(0,Si(i,c)))),u.viewTo=c}function Us(i){for(var s=i.display.view,c=0,u=0;u<s.length;u++){var p=s[u];!p.hidden&&(!p.node||p.changes)&&++c}return c}function Ka(i){i.display.input.showSelection(i.display.input.prepareSelection())}function Lu(i,s){s===void 0&&(s=!0);var c=i.doc,u={},p=u.cursors=document.createDocumentFragment(),g=u.selection=document.createDocumentFragment(),y=i.options.$customCursor;y&&(s=!0);for(var _=0;_<c.sel.ranges.length;_++)if(!(!s&&_==c.sel.primIndex)){var b=c.sel.ranges[_];if(!(b.from().line>=i.display.viewTo||b.to().line<i.display.viewFrom)){var E=b.empty();if(y){var K=y(i,b);K&&Dl(i,K,p)}else(E||i.options.showCursorWhenSelecting)&&Dl(i,b.head,p);E||jl(i,b,g)}}return u}function Dl(i,s,c){var u=Dn(i,s,"div",null,null,!i.options.singleCursorHeightPerLine),p=c.appendChild(R("div"," ","CodeMirror-cursor"));if(p.style.left=u.left+"px",p.style.top=u.top+"px",p.style.height=Math.max(0,u.bottom-u.top)*i.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(i.getWrapperElement().className)){var g=Ns(i,s,"div",null,null),y=g.right-g.left;p.style.width=(y>0?y:i.defaultCharWidth())+"px"}if(u.other){var _=c.appendChild(R("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));_.style.display="",_.style.left=u.other.left+"px",_.style.top=u.other.top+"px",_.style.height=(u.other.bottom-u.other.top)*.85+"px"}}function Oi(i,s){return i.top-s.top||i.left-s.left}function jl(i,s,c){var u=i.display,p=i.doc,g=document.createDocumentFragment(),y=x(i.display),_=y.left,b=Math.max(u.sizerWidth,J(i)-u.sizer.offsetLeft)-y.right,E=p.direction=="ltr";function K(ne,he,Te,Oe){he<0&&(he=0),he=Math.round(he),Oe=Math.round(Oe),g.appendChild(R("div",null,"CodeMirror-selected","position: absolute; left: "+ne+`px;
                             top: `+he+"px; width: "+(Te??b-ne)+`px;
                             height: `+(Oe-he)+"px"))}function et(ne,he,Te){var Oe=me(p,ne),We=Oe.text.length,vr,Yr;function Sr(pr,An){return Ns(i,C(ne,pr),"div",Oe,An)}function nn(pr,An,Xr){var Kr=za(i,Oe,null,pr),Br=An=="ltr"==(Xr=="after")?"left":"right",Er=Xr=="after"?Kr.begin:Kr.end-(/\s/.test(Oe.text.charAt(Kr.end-1))?2:1);return Sr(Er,Br)[Br]}var wn=$e(Oe,p.direction);return rr(wn,he||0,Te??We,function(pr,An,Xr,Kr){var Br=Xr=="ltr",Er=Sr(pr,Br?"left":"right"),kn=Sr(An-1,Br?"right":"left"),wa=he==null&&pr==0,ai=Te==null&&An==We,on=Kr==0,Hn=!wn||Kr==wn.length-1;if(kn.top-Er.top<=3){var Zr=(E?wa:ai)&&on,Ri=(E?ai:wa)&&Hn,Xn=Zr?_:(Br?Er:kn).left,Ni=Ri?b:(Br?kn:Er).right;K(Xn,Er.top,Ni-Xn,Er.bottom)}else{var si,bn,ba,uu;Br?(si=E&&wa&&on?_:Er.left,bn=E?b:nn(pr,Xr,"before"),ba=E?_:nn(An,Xr,"after"),uu=E&&ai&&Hn?b:kn.right):(si=E?nn(pr,Xr,"before"):_,bn=!E&&wa&&on?b:Er.right,ba=!E&&ai&&Hn?_:kn.left,uu=E?nn(An,Xr,"after"):b),K(si,Er.top,bn-si,Er.bottom),Er.bottom<kn.top&&K(_,Er.bottom,null,kn.top),K(ba,kn.top,uu-ba,kn.bottom)}(!vr||Oi(Er,vr)<0)&&(vr=Er),Oi(kn,vr)<0&&(vr=kn),(!Yr||Oi(Er,Yr)<0)&&(Yr=Er),Oi(kn,Yr)<0&&(Yr=kn)}),{start:vr,end:Yr}}var _t=s.from(),ft=s.to();if(_t.line==ft.line)et(_t.line,_t.ch,ft.ch);else{var Dt=me(p,_t.line),It=me(p,ft.line),Zt=Ze(Dt)==Ze(It),ee=et(_t.line,_t.ch,Zt?Dt.text.length+1:null).end,pe=et(ft.line,Zt?0:null,ft.ch).start;Zt&&(ee.top<pe.top-2?(K(ee.right,ee.top,null,ee.bottom),K(_,pe.top,pe.left,pe.bottom)):K(ee.right,ee.top,pe.left-ee.right,ee.bottom)),ee.bottom<pe.top&&K(_,ee.bottom,null,pe.top)}c.appendChild(g)}function Il(i){if(i.state.focused){var s=i.display;clearInterval(s.blinker);var c=!0;s.cursorDiv.style.visibility="",i.options.cursorBlinkRate>0?s.blinker=setInterval(function(){i.hasFocus()||oa(i),s.cursorDiv.style.visibility=(c=!c)?"":"hidden"},i.options.cursorBlinkRate):i.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function Ws(i){i.hasFocus()||(i.display.input.focus(),i.state.focused||na(i))}function Rl(i){i.state.delayingBlurEvent=!0,setTimeout(function(){i.state.delayingBlurEvent&&(i.state.delayingBlurEvent=!1,i.state.focused&&oa(i))},100)}function na(i,s){i.state.delayingBlurEvent&&!i.state.draggingText&&(i.state.delayingBlurEvent=!1),i.options.readOnly!="nocursor"&&(i.state.focused||(ir(i,"focus",i,s),i.state.focused=!0,$t(i.display.wrapper,"CodeMirror-focused"),!i.curOp&&i.display.selForContextMenu!=i.doc.sel&&(i.display.input.reset(),O&&setTimeout(function(){return i.display.input.reset(!0)},20)),i.display.input.receivedFocus()),Il(i))}function oa(i,s){i.state.delayingBlurEvent||(i.state.focused&&(ir(i,"blur",i,s),i.state.focused=!1,$(i.display.wrapper,"CodeMirror-focused")),clearInterval(i.display.blinker),setTimeout(function(){i.state.focused||(i.display.shift=!1)},150))}function zs(i){for(var s=i.display,c=s.lineDiv.offsetTop,u=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,g=0,y=0;y<s.view.length;y++){var _=s.view[y],b=i.options.lineWrapping,E=void 0,K=0;if(!_.hidden){if(p+=_.line.height,D&&F<8){var et=_.node.offsetTop+_.node.offsetHeight;E=et-c,c=et}else{var _t=_.node.getBoundingClientRect();E=_t.bottom-_t.top,!b&&_.text.firstChild&&(K=_.text.firstChild.getBoundingClientRect().right-_t.left-1)}var ft=_.line.height-E;if((ft>.005||ft<-.005)&&(p<u&&(g-=ft),Vr(_.line,E),Du(_.line),_.rest))for(var Dt=0;Dt<_.rest.length;Dt++)Du(_.rest[Dt]);if(K>i.display.sizerWidth){var It=Math.ceil(K/ea(i.display));It>i.display.maxLineLength&&(i.display.maxLineLength=It,i.display.maxLine=_.line,i.display.maxLineChanged=!0)}}}Math.abs(g)>2&&(s.scroller.scrollTop+=g)}function Du(i){if(i.widgets)for(var s=0;s<i.widgets.length;++s){var c=i.widgets[s],u=c.node.parentNode;u&&(c.height=u.offsetHeight)}}function Ti(i,s,c){var u=c&&c.top!=null?Math.max(0,c.top):i.scroller.scrollTop;u=Math.floor(u-ao(i));var p=c&&c.bottom!=null?c.bottom:u+i.wrapper.clientHeight,g=tn(s,u),y=tn(s,p);if(c&&c.ensure){var _=c.ensure.from.line,b=c.ensure.to.line;_<g?(g=_,y=tn(s,or(me(s,_))+i.wrapper.clientHeight)):Math.min(b,s.lastLine())>=y&&(g=tn(s,or(me(s,b))-i.wrapper.clientHeight),y=b)}return{from:g,to:Math.max(y,g+1)}}function Nl(i,s){if(!ur(i,"scrollCursorIntoView")){var c=i.display,u=c.sizer.getBoundingClientRect(),p=null,g=c.wrapper.ownerDocument;if(s.top+u.top<0?p=!0:s.bottom+u.top>(g.defaultView.innerHeight||g.documentElement.clientHeight)&&(p=!1),p!=null&&!kt){var y=R("div","​",null,`position: absolute;
                         top: `+(s.top-c.viewOffset-ao(i.display))+`px;
                         height: `+(s.bottom-s.top+M(i)+c.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");i.display.lineSpace.appendChild(y),y.scrollIntoView(p),i.display.lineSpace.removeChild(y)}}}function Cf(i,s,c,u){u==null&&(u=0);var p;!i.options.lineWrapping&&s==c&&(c=s.sticky=="before"?C(s.line,s.ch+1,"before"):s,s=s.ch?C(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var g=0;g<5;g++){var y=!1,_=Dn(i,s),b=!c||c==s?_:Dn(i,c);p={left:Math.min(_.left,b.left),top:Math.min(_.top,b.top)-u,right:Math.max(_.left,b.left),bottom:Math.max(_.bottom,b.bottom)+u};var E=Vl(i,p),K=i.doc.scrollTop,et=i.doc.scrollLeft;if(E.scrollTop!=null&&(aa(i,E.scrollTop),Math.abs(i.doc.scrollTop-K)>1&&(y=!0)),E.scrollLeft!=null&&(Ei(i,E.scrollLeft),Math.abs(i.doc.scrollLeft-et)>1&&(y=!0)),!y)break}return p}function xf(i,s){var c=Vl(i,s);c.scrollTop!=null&&aa(i,c.scrollTop),c.scrollLeft!=null&&Ei(i,c.scrollLeft)}function Vl(i,s){var c=i.display,u=ta(i.display);s.top<0&&(s.top=0);var p=i.curOp&&i.curOp.scrollTop!=null?i.curOp.scrollTop:c.scroller.scrollTop,g=nt(i),y={};s.bottom-s.top>g&&(s.bottom=s.top+g);var _=i.doc.height+Ha(c),b=s.top<u,E=s.bottom>_-u;if(s.top<p)y.scrollTop=b?0:s.top;else if(s.bottom>p+g){var K=Math.min(s.top,(E?_:s.bottom)-g);K!=p&&(y.scrollTop=K)}var et=i.options.fixedGutter?0:c.gutters.offsetWidth,_t=i.curOp&&i.curOp.scrollLeft!=null?i.curOp.scrollLeft:c.scroller.scrollLeft-et,ft=J(i)-c.gutters.offsetWidth,Dt=s.right-s.left>ft;return Dt&&(s.right=s.left+ft),s.left<10?y.scrollLeft=0:s.left<_t?y.scrollLeft=Math.max(0,s.left+et-(Dt?0:10)):s.right>ft+_t-3&&(y.scrollLeft=s.right+(Dt?0:10)-ft),y}function ia(i,s){s!=null&&(Ks(i),i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+s)}function Yo(i){Ks(i);var s=i.getCursor();i.curOp.scrollToPos={from:s,to:s,margin:i.options.cursorScrollMargin}}function Ga(i,s,c){(s!=null||c!=null)&&Ks(i),s!=null&&(i.curOp.scrollLeft=s),c!=null&&(i.curOp.scrollTop=c)}function Sf(i,s){Ks(i),i.curOp.scrollToPos=s}function Ks(i){var s=i.curOp.scrollToPos;if(s){i.curOp.scrollToPos=null;var c=El(i,s.from),u=El(i,s.to);$a(i,c,u,s.margin)}}function $a(i,s,c,u){var p=Vl(i,{left:Math.min(s.left,c.left),top:Math.min(s.top,c.top)-u,right:Math.max(s.right,c.right),bottom:Math.max(s.bottom,c.bottom)+u});Ga(i,p.scrollLeft,p.scrollTop)}function aa(i,s){Math.abs(i.doc.scrollTop-s)<2||(at||Ul(i,{top:s}),ju(i,s,!0),at&&Ul(i),xr(i,100))}function ju(i,s,c){s=Math.max(0,Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,s)),!(i.display.scroller.scrollTop==s&&!c)&&(i.doc.scrollTop=s,i.display.scrollbars.setScrollTop(s),i.display.scroller.scrollTop!=s&&(i.display.scroller.scrollTop=s))}function Ei(i,s,c,u){s=Math.max(0,Math.min(s,i.display.scroller.scrollWidth-i.display.scroller.clientWidth)),!((c?s==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-s)<2)&&!u)&&(i.doc.scrollLeft=s,qs(i),i.display.scroller.scrollLeft!=s&&(i.display.scroller.scrollLeft=s),i.display.scrollbars.setScrollLeft(s))}function qa(i){var s=i.display,c=s.gutters.offsetWidth,u=Math.round(i.doc.height+Ha(i.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:i.options.fixedGutter?c:0,docHeight:u,scrollHeight:u+M(i)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:c}}var yo=function(i,s,c){this.cm=c;var u=this.vert=R("div",[R("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=R("div",[R("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");u.tabIndex=p.tabIndex=-1,i(u),i(p),_e(u,"scroll",function(){u.clientHeight&&s(u.scrollTop,"vertical")}),_e(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,D&&F<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};yo.prototype.update=function(i){var s=i.scrollWidth>i.clientWidth+1,c=i.scrollHeight>i.clientHeight+1,u=i.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=s?u+"px":"0";var p=i.viewHeight-(s?u:0);this.vert.firstChild.style.height=Math.max(0,i.scrollHeight-i.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=c?u+"px":"0",this.horiz.style.left=i.barLeft+"px";var g=i.viewWidth-i.barLeft-(c?u:0);this.horiz.firstChild.style.width=Math.max(0,i.scrollWidth-i.clientWidth+g)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&i.clientHeight>0&&(u==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?u:0,bottom:s?u:0}},yo.prototype.setScrollLeft=function(i){this.horiz.scrollLeft!=i&&(this.horiz.scrollLeft=i),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},yo.prototype.setScrollTop=function(i){this.vert.scrollTop!=i&&(this.vert.scrollTop=i),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},yo.prototype.zeroWidthHack=function(){var i=mt&&!ht?"12px":"18px";this.horiz.style.height=this.vert.style.width=i,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new jt,this.disableVert=new jt},yo.prototype.enableZeroWidthBar=function(i,s,c){i.style.visibility="";function u(){var p=i.getBoundingClientRect(),g=c=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1);g!=i?i.style.visibility="hidden":s.set(1e3,u)}s.set(1e3,u)},yo.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz),i.removeChild(this.vert)};var Pi=function(){};Pi.prototype.update=function(){return{bottom:0,right:0}},Pi.prototype.setScrollLeft=function(){},Pi.prototype.setScrollTop=function(){},Pi.prototype.clear=function(){};function so(i,s){s||(s=qa(i));var c=i.display.barWidth,u=i.display.barHeight;Ai(i,s);for(var p=0;p<4&&c!=i.display.barWidth||u!=i.display.barHeight;p++)c!=i.display.barWidth&&i.options.lineWrapping&&zs(i),Ai(i,qa(i)),c=i.display.barWidth,u=i.display.barHeight}function Ai(i,s){var c=i.display,u=c.scrollbars.update(s);c.sizer.style.paddingRight=(c.barWidth=u.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=u.bottom)+"px",c.heightForcer.style.borderBottom=u.bottom+"px solid transparent",u.right&&u.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=u.bottom+"px",c.scrollbarFiller.style.width=u.right+"px"):c.scrollbarFiller.style.display="",u.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=u.bottom+"px",c.gutterFiller.style.width=s.gutterWidth+"px"):c.gutterFiller.style.display=""}var ki={native:yo,null:Pi};function Fl(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&$(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new ki[i.options.scrollbarStyle](function(s){i.display.wrapper.insertBefore(s,i.display.scrollbarFiller),_e(s,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,c){c=="horizontal"?Ei(i,s):aa(i,s)},i),i.display.scrollbars.addClass&&$t(i.display.wrapper,i.display.scrollbars.addClass)}var Hl=0;function Mi(i){i.curOp={cm:i,viewChanged:!1,startHeight:i.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Hl,markArrays:null},Ms(i.curOp)}function Li(i){var s=i.curOp;s&&Wo(s,function(c){for(var u=0;u<c.ops.length;u++)c.ops[u].cm.curOp=null;Of(c)})}function Of(i){for(var s=i.ops,c=0;c<s.length;c++)Gs(s[c]);for(var u=0;u<s.length;u++)Tf(s[u]);for(var p=0;p<s.length;p++)Ef(s[p]);for(var g=0;g<s.length;g++)Pf(s[g]);for(var y=0;y<s.length;y++)Af(s[y])}function Gs(i){var s=i.cm,c=s.display;Iu(s),i.updateMaxLine&&ro(s),i.mustUpdate=i.viewChanged||i.forceUpdate||i.scrollTop!=null||i.scrollToPos&&(i.scrollToPos.from.line<c.viewFrom||i.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&s.options.lineWrapping,i.update=i.mustUpdate&&new $s(s,i.mustUpdate&&{top:i.scrollTop,ensure:i.scrollToPos},i.forceUpdate)}function Tf(i){i.updatedDisplay=i.mustUpdate&&Bl(i.cm,i.update)}function Ef(i){var s=i.cm,c=s.display;i.updatedDisplay&&zs(s),i.barMeasure=qa(s),c.maxLineChanged&&!s.options.lineWrapping&&(i.adjustWidthTo=ie(s,c.maxLine,c.maxLine.text.length).left+3,s.display.sizerWidth=i.adjustWidthTo,i.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+i.adjustWidthTo+M(s)+s.display.barWidth),i.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+i.adjustWidthTo-J(s))),(i.updatedDisplay||i.selectionChanged)&&(i.preparedSelection=c.input.prepareSelection())}function Pf(i){var s=i.cm;i.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=i.adjustWidthTo+"px",i.maxScrollLeft<s.doc.scrollLeft&&Ei(s,Math.min(s.display.scroller.scrollLeft,i.maxScrollLeft),!0),s.display.maxLineChanged=!1);var c=i.focus&&i.focus==Pt(Ut(s));i.preparedSelection&&s.display.input.showSelection(i.preparedSelection,c),(i.updatedDisplay||i.startHeight!=s.doc.height)&&so(s,i.barMeasure),i.updatedDisplay&&zl(s,i.barMeasure),i.selectionChanged&&Il(s),s.state.focused&&i.updateInput&&s.display.input.reset(i.typing),c&&Ws(i.cm)}function Af(i){var s=i.cm,c=s.display,u=s.doc;if(i.updatedDisplay&&Ru(s,i.update),c.wheelStartX!=null&&(i.scrollTop!=null||i.scrollLeft!=null||i.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),i.scrollTop!=null&&ju(s,i.scrollTop,i.forceScroll),i.scrollLeft!=null&&Ei(s,i.scrollLeft,!0,!0),i.scrollToPos){var p=Cf(s,we(u,i.scrollToPos.from),we(u,i.scrollToPos.to),i.scrollToPos.margin);Nl(s,p)}var g=i.maybeHiddenMarkers,y=i.maybeUnhiddenMarkers;if(g)for(var _=0;_<g.length;++_)g[_].lines.length||ir(g[_],"hide");if(y)for(var b=0;b<y.length;++b)y[b].lines.length&&ir(y[b],"unhide");c.wrapper.offsetHeight&&(u.scrollTop=s.display.scroller.scrollTop),i.changeObjs&&ir(s,"changes",s,i.changeObjs),i.update&&i.update.finish()}function En(i,s){if(i.curOp)return s();Mi(i);try{return s()}finally{Li(i)}}function $r(i,s){return function(){if(i.curOp)return s.apply(i,arguments);Mi(i);try{return s.apply(i,arguments)}finally{Li(i)}}}function wr(i){return function(){if(this.curOp)return i.apply(this,arguments);Mi(this);try{return i.apply(this,arguments)}finally{Li(this)}}}function qr(i){return function(){var s=this.cm;if(!s||s.curOp)return i.apply(this,arguments);Mi(s);try{return i.apply(this,arguments)}finally{Li(s)}}}function xr(i,s){i.doc.highlightFrontier<i.display.viewTo&&i.state.highlight.set(s,Wt(kf,i))}function kf(i){var s=i.doc;if(!(s.highlightFrontier>=i.display.viewTo)){var c=+new Date+i.options.workTime,u=Qn(i,s.highlightFrontier),p=[];s.iter(u.line,Math.min(s.first+s.size,i.display.viewTo+500),function(g){if(u.line>=i.display.viewFrom){var y=g.styles,_=g.text.length>i.options.maxHighlightLength?Mn(s.mode,u.state):null,b=Wi(i,g,u,!0);_&&(u.state=_),g.styles=b.styles;var E=g.styleClasses,K=b.classes;K?g.styleClasses=K:E&&(g.styleClasses=null);for(var et=!y||y.length!=g.styles.length||E!=K&&(!E||!K||E.bgClass!=K.bgClass||E.textClass!=K.textClass),_t=0;!et&&_t<y.length;++_t)et=y[_t]!=g.styles[_t];et&&p.push(u.line),g.stateAfter=u.save(),u.nextLine()}else g.text.length<=i.options.maxHighlightLength&&zi(i,g.text,u),g.stateAfter=u.line%5==0?u.save():null,u.nextLine();if(+new Date>c)return xr(i,i.options.workDelay),!0}),s.highlightFrontier=u.line,s.modeFrontier=Math.max(s.modeFrontier,u.line),p.length&&En(i,function(){for(var g=0;g<p.length;g++)$o(i,p[g],"text")})}}var $s=function(i,s,c){var u=i.display;this.viewport=s,this.visible=Ti(u,i.doc,s),this.editorIsHidden=!u.wrapper.offsetWidth,this.wrapperHeight=u.wrapper.clientHeight,this.wrapperWidth=u.wrapper.clientWidth,this.oldDisplayWidth=J(i),this.force=c,this.dims=Ml(i),this.events=[]};$s.prototype.signal=function(i,s){Kt(i,s)&&this.events.push(arguments)},$s.prototype.finish=function(){for(var i=0;i<this.events.length;i++)ir.apply(null,this.events[i])};function Iu(i){var s=i.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=M(i)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=M(i)+"px",s.scrollbarsClipped=!0)}function Mf(i){if(i.hasFocus())return null;var s=Pt(Ut(i));if(!s||!Mt(i.display.lineDiv,s))return null;var c={activeElt:s};if(window.getSelection){var u=se(i).getSelection();u.anchorNode&&u.extend&&Mt(i.display.lineDiv,u.anchorNode)&&(c.anchorNode=u.anchorNode,c.anchorOffset=u.anchorOffset,c.focusNode=u.focusNode,c.focusOffset=u.focusOffset)}return c}function Lf(i){if(!(!i||!i.activeElt||i.activeElt==Pt(i.activeElt.ownerDocument))&&(i.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(i.activeElt.nodeName)&&i.anchorNode&&Mt(document.body,i.anchorNode)&&Mt(document.body,i.focusNode))){var s=i.activeElt.ownerDocument,c=s.defaultView.getSelection(),u=s.createRange();u.setEnd(i.anchorNode,i.anchorOffset),u.collapse(!1),c.removeAllRanges(),c.addRange(u),c.extend(i.focusNode,i.focusOffset)}}function Bl(i,s){var c=i.display,u=i.doc;if(s.editorIsHidden)return qo(i),!1;if(!s.force&&s.visible.from>=c.viewFrom&&s.visible.to<=c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&Us(i)==0)return!1;Nu(i)&&(qo(i),s.dims=Ml(i));var p=u.first+u.size,g=Math.max(s.visible.from-i.options.viewportMargin,u.first),y=Math.min(p,s.visible.to+i.options.viewportMargin);c.viewFrom<g&&g-c.viewFrom<20&&(g=Math.max(u.first,c.viewFrom)),c.viewTo>y&&c.viewTo-y<20&&(y=Math.min(p,c.viewTo)),Ln&&(g=Nn(i.doc,g),y=So(i.doc,y));var _=g!=c.viewFrom||y!=c.viewTo||c.lastWrapHeight!=s.wrapperHeight||c.lastWrapWidth!=s.wrapperWidth;Bs(i,g,y),c.viewOffset=or(me(i.doc,c.viewFrom)),i.display.mover.style.top=c.viewOffset+"px";var b=Us(i);if(!_&&b==0&&!s.force&&c.renderedView==c.view&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo))return!1;var E=Mf(i);return b>4&&(c.lineDiv.style.display="none"),Df(i,c.updateLineNumbers,s.dims),b>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,Lf(E),Q(c.cursorDiv),Q(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,_&&(c.lastWrapHeight=s.wrapperHeight,c.lastWrapWidth=s.wrapperWidth,xr(i,400)),c.updateLineNumbers=null,!0}function Ru(i,s){for(var c=s.viewport,u=!0;;u=!1){if(!u||!i.options.lineWrapping||s.oldDisplayWidth==J(i)){if(c&&c.top!=null&&(c={top:Math.min(i.doc.height+Ha(i.display)-nt(i),c.top)}),s.visible=Ti(i.display,i.doc,c),s.visible.from>=i.display.viewFrom&&s.visible.to<=i.display.viewTo)break}else u&&(s.visible=Ti(i.display,i.doc,c));if(!Bl(i,s))break;zs(i);var p=qa(i);Ka(i),so(i,p),zl(i,p),s.force=!1}s.signal(i,"update",i),(i.display.viewFrom!=i.display.reportedViewFrom||i.display.viewTo!=i.display.reportedViewTo)&&(s.signal(i,"viewportChange",i,i.display.viewFrom,i.display.viewTo),i.display.reportedViewFrom=i.display.viewFrom,i.display.reportedViewTo=i.display.viewTo)}function Ul(i,s){var c=new $s(i,s);if(Bl(i,c)){zs(i),Ru(i,c);var u=qa(i);Ka(i),so(i,u),zl(i,u),c.finish()}}function Df(i,s,c){var u=i.display,p=i.options.lineNumbers,g=u.lineDiv,y=g.firstChild;function _(Dt){var It=Dt.nextSibling;return O&&mt&&i.display.currentWheelTarget==Dt?Dt.style.display="none":Dt.parentNode.removeChild(Dt),It}for(var b=u.view,E=u.viewFrom,K=0;K<b.length;K++){var et=b[K];if(!et.hidden)if(!et.node||et.node.parentNode!=g){var _t=vo(i,et,E,c);g.insertBefore(_t,y)}else{for(;y!=et.node;)y=_(y);var ft=p&&s!=null&&s<=E&&et.lineNumber;et.changes&&(Nt(et.changes,"gutter")>-1&&(ft=!1),Ra(i,et,E,c)),ft&&(Q(et.lineNumber),et.lineNumber.appendChild(document.createTextNode(gn(i.options,E)))),y=et.node.nextSibling}E+=et.size}for(;y;)y=_(y)}function Wl(i){var s=i.gutters.offsetWidth;i.sizer.style.marginLeft=s+"px",Ir(i,"gutterChanged",i)}function zl(i,s){i.display.sizer.style.minHeight=s.docHeight+"px",i.display.heightForcer.style.top=s.docHeight+"px",i.display.gutters.style.height=s.docHeight+i.display.barHeight+M(i)+"px"}function qs(i){var s=i.display,c=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!i.options.fixedGutter))){for(var u=ra(s)-s.scroller.scrollLeft+i.doc.scrollLeft,p=s.gutters.offsetWidth,g=u+"px",y=0;y<c.length;y++)if(!c[y].hidden){i.options.fixedGutter&&(c[y].gutter&&(c[y].gutter.style.left=g),c[y].gutterBackground&&(c[y].gutterBackground.style.left=g));var _=c[y].alignable;if(_)for(var b=0;b<_.length;b++)_[b].style.left=g}i.options.fixedGutter&&(s.gutters.style.left=u+p+"px")}}function Nu(i){if(!i.options.lineNumbers)return!1;var s=i.doc,c=gn(i.options,s.first+s.size-1),u=i.display;if(c.length!=u.lineNumChars){var p=u.measure.appendChild(R("div",[R("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),g=p.firstChild.offsetWidth,y=p.offsetWidth-g;return u.lineGutter.style.width="",u.lineNumInnerWidth=Math.max(g,u.lineGutter.offsetWidth-y)+1,u.lineNumWidth=u.lineNumInnerWidth+y,u.lineNumChars=u.lineNumInnerWidth?c.length:-1,u.lineGutter.style.width=u.lineNumWidth+"px",Wl(i.display),!0}return!1}function Di(i,s){for(var c=[],u=!1,p=0;p<i.length;p++){var g=i[p],y=null;if(typeof g!="string"&&(y=g.style,g=g.className),g=="CodeMirror-linenumbers")if(s)u=!0;else continue;c.push({className:g,style:y})}return s&&!u&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function Ya(i){var s=i.gutters,c=i.gutterSpecs;Q(s),i.lineGutter=null;for(var u=0;u<c.length;++u){var p=c[u],g=p.className,y=p.style,_=s.appendChild(R("div",null,"CodeMirror-gutter "+g));y&&(_.style.cssText=y),g=="CodeMirror-linenumbers"&&(i.lineGutter=_,_.style.width=(i.lineNumWidth||1)+"px")}s.style.display=c.length?"":"none",Wl(i)}function Xo(i){Ya(i.display),rn(i),qs(i)}function jf(i,s,c,u){var p=this;this.input=c,p.scrollbarFiller=R("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=R("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=lt("div",null,"CodeMirror-code"),p.selectionDiv=R("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=R("div",null,"CodeMirror-cursors"),p.measure=R("div",null,"CodeMirror-measure"),p.lineMeasure=R("div",null,"CodeMirror-measure"),p.lineSpace=lt("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var g=lt("div",[p.lineSpace],"CodeMirror-lines");p.mover=R("div",[g],null,"position: relative"),p.sizer=R("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=R("div",null,null,"position: absolute; height: "+oe+"px; width: 1px;"),p.gutters=R("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=R("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=R("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),k&&j>=105&&(p.wrapper.style.clipPath="inset(0px)"),p.wrapper.setAttribute("translate","no"),D&&F<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),!O&&!(at&&Ot)&&(p.scroller.draggable=!0),i&&(i.appendChild?i.appendChild(p.wrapper):i(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=Di(u.gutters,u.lineNumbers),Ya(p),c.init(p)}var Xa=0,Eo=null;D?Eo=-.53:at?Eo=15:k?Eo=-.7:ot&&(Eo=-.3333333333333333);function Vu(i){var s=i.wheelDeltaX,c=i.wheelDeltaY;return s==null&&i.detail&&i.axis==i.HORIZONTAL_AXIS&&(s=i.detail),c==null&&i.detail&&i.axis==i.VERTICAL_AXIS?c=i.detail:c==null&&(c=i.wheelDelta),{x:s,y:c}}function Fu(i){var s=Vu(i);return s.x*=Eo,s.y*=Eo,s}function Hu(i,s){k&&j==102&&(i.display.chromeScrollHack==null?i.display.sizer.style.pointerEvents="none":clearTimeout(i.display.chromeScrollHack),i.display.chromeScrollHack=setTimeout(function(){i.display.chromeScrollHack=null,i.display.sizer.style.pointerEvents=""},100));var c=Vu(s),u=c.x,p=c.y,g=Eo;s.deltaMode===0&&(u=s.deltaX,p=s.deltaY,g=1);var y=i.display,_=y.scroller,b=_.scrollWidth>_.clientWidth,E=_.scrollHeight>_.clientHeight;if(u&&b||p&&E){if(p&&mt&&O){t:for(var K=s.target,et=y.view;K!=_;K=K.parentNode)for(var _t=0;_t<et.length;_t++)if(et[_t].node==K){i.display.currentWheelTarget=K;break t}}if(u&&!at&&!H&&g!=null){p&&E&&aa(i,Math.max(0,_.scrollTop+p*g)),Ei(i,Math.max(0,_.scrollLeft+u*g)),(!p||p&&E)&&N(s),y.wheelStartX=null;return}if(p&&g!=null){var ft=p*g,Dt=i.doc.scrollTop,It=Dt+y.wrapper.clientHeight;ft<0?Dt=Math.max(0,Dt+ft-50):It=Math.min(i.doc.height,It+ft+50),Ul(i,{top:Dt,bottom:It})}Xa<20&&s.deltaMode!==0&&(y.wheelStartX==null?(y.wheelStartX=_.scrollLeft,y.wheelStartY=_.scrollTop,y.wheelDX=u,y.wheelDY=p,setTimeout(function(){if(y.wheelStartX!=null){var Zt=_.scrollLeft-y.wheelStartX,ee=_.scrollTop-y.wheelStartY,pe=ee&&y.wheelDY&&ee/y.wheelDY||Zt&&y.wheelDX&&Zt/y.wheelDX;y.wheelStartX=y.wheelStartY=null,pe&&(Eo=(Eo*Xa+pe)/(Xa+1),++Xa)}},200)):(y.wheelDX+=u,y.wheelDY+=p))}}var Vn=function(i,s){this.ranges=i,this.primIndex=s};Vn.prototype.primary=function(){return this.ranges[this.primIndex]},Vn.prototype.equals=function(i){if(i==this)return!0;if(i.primIndex!=this.primIndex||i.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var c=this.ranges[s],u=i.ranges[s];if(!Rt(c.anchor,u.anchor)||!Rt(c.head,u.head))return!1}return!0},Vn.prototype.deepCopy=function(){for(var i=[],s=0;s<this.ranges.length;s++)i[s]=new ar(Gt(this.ranges[s].anchor),Gt(this.ranges[s].head));return new Vn(i,this.primIndex)},Vn.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1},Vn.prototype.contains=function(i,s){s||(s=i);for(var c=0;c<this.ranges.length;c++){var u=this.ranges[c];if(U(s,u.from())>=0&&U(i,u.to())<=0)return c}return-1};var ar=function(i,s){this.anchor=i,this.head=s};ar.prototype.from=function(){return Xe(this.anchor,this.head)},ar.prototype.to=function(){return je(this.anchor,this.head)},ar.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function lo(i,s,c){var u=i&&i.options.selectionsMayTouch,p=s[c];s.sort(function(_t,ft){return U(_t.from(),ft.from())}),c=Nt(s,p);for(var g=1;g<s.length;g++){var y=s[g],_=s[g-1],b=U(_.to(),y.from());if(u&&!y.empty()?b>0:b>=0){var E=Xe(_.from(),y.from()),K=je(_.to(),y.to()),et=_.empty()?y.from()==y.head:_.from()==_.head;g<=c&&--c,s.splice(--g,2,new ar(et?K:E,et?E:K))}}return new Vn(s,c)}function Zo(i,s){return new Vn([new ar(i,s||i)],0)}function Jo(i){return i.text?C(i.from.line+i.text.length-1,de(i.text).length+(i.text.length==1?i.from.ch:0)):i.to}function Bu(i,s){if(U(i,s.from)<0)return i;if(U(i,s.to)<=0)return Jo(s);var c=i.line+s.text.length-(s.to.line-s.from.line)-1,u=i.ch;return i.line==s.to.line&&(u+=Jo(s).ch-s.to.ch),C(c,u)}function Kl(i,s){for(var c=[],u=0;u<i.sel.ranges.length;u++){var p=i.sel.ranges[u];c.push(new ar(Bu(p.anchor,s),Bu(p.head,s)))}return lo(i.cm,c,i.sel.primIndex)}function Uu(i,s,c){return i.line==s.line?C(c.line,i.ch-s.ch+c.ch):C(c.line+(i.line-s.line),i.ch)}function If(i,s,c){for(var u=[],p=C(i.first,0),g=p,y=0;y<s.length;y++){var _=s[y],b=Uu(_.from,p,g),E=Uu(Jo(_),p,g);if(p=_.to,g=E,c=="around"){var K=i.sel.ranges[y],et=U(K.head,K.anchor)<0;u[y]=new ar(et?E:b,et?b:E)}else u[y]=new ar(b,b)}return new Vn(u,i.sel.primIndex)}function Gl(i){i.doc.mode=Qr(i.options,i.doc.modeOption),sa(i)}function sa(i){i.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),i.doc.modeFrontier=i.doc.highlightFrontier=i.doc.first,xr(i,100),i.state.modeGen++,i.curOp&&rn(i)}function Wu(i,s){return s.from.ch==0&&s.to.ch==0&&de(s.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function $l(i,s,c,u){function p(pe){return c?c[pe]:null}function g(pe,ne,he){Da(pe,ne,he,u),Ir(pe,"change",pe,s)}function y(pe,ne){for(var he=[],Te=pe;Te<ne;++Te)he.push(new no(E[Te],p(Te),u));return he}var _=s.from,b=s.to,E=s.text,K=me(i,_.line),et=me(i,b.line),_t=de(E),ft=p(E.length-1),Dt=b.line-_.line;if(s.full)i.insert(0,y(0,E.length)),i.remove(E.length,i.size-E.length);else if(Wu(i,s)){var It=y(0,E.length-1);g(et,et.text,ft),Dt&&i.remove(_.line,Dt),It.length&&i.insert(_.line,It)}else if(K==et)if(E.length==1)g(K,K.text.slice(0,_.ch)+_t+K.text.slice(b.ch),ft);else{var Zt=y(1,E.length-1);Zt.push(new no(_t+K.text.slice(b.ch),ft,u)),g(K,K.text.slice(0,_.ch)+E[0],p(0)),i.insert(_.line+1,Zt)}else if(E.length==1)g(K,K.text.slice(0,_.ch)+E[0]+et.text.slice(b.ch),p(0)),i.remove(_.line+1,Dt);else{g(K,K.text.slice(0,_.ch)+E[0],p(0)),g(et,_t+et.text.slice(b.ch),ft);var ee=y(1,E.length-1);Dt>1&&i.remove(_.line+1,Dt-1),i.insert(_.line+1,ee)}Ir(i,"change",i,s)}function Qo(i,s,c){function u(p,g,y){if(p.linked)for(var _=0;_<p.linked.length;++_){var b=p.linked[_];if(b.doc!=g){var E=y&&b.sharedHist;c&&!E||(s(b.doc,E),u(b.doc,p,E))}}}u(i,null,!0)}function zu(i,s){if(s.cm)throw new Error("This document is already in use.");i.doc=s,s.cm=i,Ll(i),Gl(i),Ku(i),i.options.direction=s.direction,i.options.lineWrapping||ro(i),i.options.mode=s.modeOption,rn(i)}function Ku(i){(i.doc.direction=="rtl"?$t:$)(i.display.lineDiv,"CodeMirror-rtl")}function Rf(i){En(i,function(){Ku(i),rn(i)})}function Ys(i){this.done=[],this.undone=[],this.undoDepth=i?i.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=i?i.maxGeneration:1}function ql(i,s){var c={from:Gt(s.from),to:Jo(s),text:un(i,s.from,s.to)};return qu(i,c,s.from.line,s.to.line+1),Qo(i,function(u){return qu(u,c,s.from.line,s.to.line+1)},!0),c}function Gu(i){for(;i.length;){var s=de(i);if(s.ranges)i.pop();else break}}function Nf(i,s){if(s)return Gu(i.done),de(i.done);if(i.done.length&&!de(i.done).ranges)return de(i.done);if(i.done.length>1&&!i.done[i.done.length-2].ranges)return i.done.pop(),de(i.done)}function $u(i,s,c,u){var p=i.history;p.undone.length=0;var g=+new Date,y,_;if((p.lastOp==u||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>g-(i.cm?i.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(y=Nf(p,p.lastOp==u)))_=de(y.changes),U(s.from,s.to)==0&&U(s.from,_.to)==0?_.to=Jo(s):y.changes.push(ql(i,s));else{var b=de(p.done);for((!b||!b.ranges)&&Xs(i.sel,p.done),y={changes:[ql(i,s)],generation:p.generation},p.done.push(y);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(c),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=g,p.lastOp=p.lastSelOp=u,p.lastOrigin=p.lastSelOrigin=s.origin,_||ir(i,"historyAdded")}function Vf(i,s,c,u){var p=s.charAt(0);return p=="*"||p=="+"&&c.ranges.length==u.ranges.length&&c.somethingSelected()==u.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)}function Ff(i,s,c,u){var p=i.history,g=u&&u.origin;c==p.lastSelOp||g&&p.lastSelOrigin==g&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==g||Vf(i,g,de(p.done),s))?p.done[p.done.length-1]=s:Xs(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=g,p.lastSelOp=c,u&&u.clearRedo!==!1&&Gu(p.undone)}function Xs(i,s){var c=de(s);c&&c.ranges&&c.equals(i)||s.push(i)}function qu(i,s,c,u){var p=s["spans_"+i.id],g=0;i.iter(Math.max(i.first,c),Math.min(i.first+i.size,u),function(y){y.markedSpans&&((p||(p=s["spans_"+i.id]={}))[g]=y.markedSpans),++g})}function Hf(i){if(!i)return null;for(var s,c=0;c<i.length;++c)i[c].marker.explicitlyCleared?s||(s=i.slice(0,c)):s&&s.push(i[c]);return s?s.length?s:null:i}function Bf(i,s){var c=s["spans_"+i.id];if(!c)return null;for(var u=[],p=0;p<s.text.length;++p)u.push(Hf(c[p]));return u}function Yu(i,s){var c=Bf(i,s),u=bo(i,s);if(!c)return u;if(!u)return c;for(var p=0;p<c.length;++p){var g=c[p],y=u[p];if(g&&y)t:for(var _=0;_<y.length;++_){for(var b=y[_],E=0;E<g.length;++E)if(g[E].marker==b.marker)continue t;g.push(b)}else y&&(c[p]=y)}return c}function la(i,s,c){for(var u=[],p=0;p<i.length;++p){var g=i[p];if(g.ranges){u.push(c?Vn.prototype.deepCopy.call(g):g);continue}var y=g.changes,_=[];u.push({changes:_});for(var b=0;b<y.length;++b){var E=y[b],K=void 0;if(_.push({from:E.from,to:E.to,text:E.text}),s)for(var et in E)(K=et.match(/^spans_(\d+)$/))&&Nt(s,Number(K[1]))>-1&&(de(_)[et]=E[et],delete E[et])}}return u}function Yl(i,s,c,u){if(u){var p=i.anchor;if(c){var g=U(s,p)<0;g!=U(c,p)<0?(p=s,s=c):g!=U(s,c)<0&&(s=c)}return new ar(p,s)}else return new ar(c||s,s)}function Zs(i,s,c,u,p){p==null&&(p=i.cm&&(i.cm.display.shift||i.extend)),dn(i,new Vn([Yl(i.sel.primary(),s,c,p)],0),u)}function Xu(i,s,c){for(var u=[],p=i.cm&&(i.cm.display.shift||i.extend),g=0;g<i.sel.ranges.length;g++)u[g]=Yl(i.sel.ranges[g],s[g],null,p);var y=lo(i.cm,u,i.sel.primIndex);dn(i,y,c)}function Xl(i,s,c,u){var p=i.sel.ranges.slice(0);p[s]=c,dn(i,lo(i.cm,p,i.sel.primIndex),u)}function Zu(i,s,c,u){dn(i,Zo(s,c),u)}function Uf(i,s,c){var u={ranges:s.ranges,update:function(p){this.ranges=[];for(var g=0;g<p.length;g++)this.ranges[g]=new ar(we(i,p[g].anchor),we(i,p[g].head))},origin:c&&c.origin};return ir(i,"beforeSelectionChange",i,u),i.cm&&ir(i.cm,"beforeSelectionChange",i.cm,u),u.ranges!=s.ranges?lo(i.cm,u.ranges,u.ranges.length-1):s}function Za(i,s,c){var u=i.history.done,p=de(u);p&&p.ranges?(u[u.length-1]=s,Js(i,s,c)):dn(i,s,c)}function dn(i,s,c){Js(i,s,c),Ff(i,i.sel,i.cm?i.cm.curOp.id:NaN,c)}function Js(i,s,c){(Kt(i,"beforeSelectionChange")||i.cm&&Kt(i.cm,"beforeSelectionChange"))&&(s=Uf(i,s,c));var u=c&&c.bias||(U(s.primary().head,i.sel.primary().head)<0?-1:1);Ju(i,Qu(i,s,u,!0)),!(c&&c.scroll===!1)&&i.cm&&i.cm.getOption("readOnly")!="nocursor"&&Yo(i.cm)}function Ju(i,s){s.equals(i.sel)||(i.sel=s,i.cm&&(i.cm.curOp.updateInput=1,i.cm.curOp.selectionChanged=!0,fr(i.cm)),Ir(i,"cursorActivity",i))}function pn(i){Ju(i,Qu(i,i.sel,null,!1))}function Qu(i,s,c,u){for(var p,g=0;g<s.ranges.length;g++){var y=s.ranges[g],_=s.ranges.length==i.sel.ranges.length&&i.sel.ranges[g],b=ti(i,y.anchor,_&&_.anchor,c,u),E=y.head==y.anchor?b:ti(i,y.head,_&&_.head,c,u);(p||b!=y.anchor||E!=y.head)&&(p||(p=s.ranges.slice(0,g)),p[g]=new ar(b,E))}return p?lo(i.cm,p,s.primIndex):s}function ua(i,s,c,u,p){var g=me(i,s.line);if(g.markedSpans)for(var y=0;y<g.markedSpans.length;++y){var _=g.markedSpans[y],b=_.marker,E="selectLeft"in b?!b.selectLeft:b.inclusiveLeft,K="selectRight"in b?!b.selectRight:b.inclusiveRight;if((_.from==null||(E?_.from<=s.ch:_.from<s.ch))&&(_.to==null||(K?_.to>=s.ch:_.to>s.ch))){if(p&&(ir(b,"beforeCursorEnter"),b.explicitlyCleared))if(g.markedSpans){--y;continue}else break;if(!b.atomic)continue;if(c){var et=b.find(u<0?1:-1),_t=void 0;if((u<0?K:E)&&(et=tc(i,et,-u,et&&et.line==s.line?g:null)),et&&et.line==s.line&&(_t=U(et,c))&&(u<0?_t<0:_t>0))return ua(i,et,s,u,p)}var ft=b.find(u<0?-1:1);return(u<0?E:K)&&(ft=tc(i,ft,u,ft.line==s.line?g:null)),ft?ua(i,ft,s,u,p):null}}return s}function ti(i,s,c,u,p){var g=u||1,y=ua(i,s,c,g,p)||!p&&ua(i,s,c,g,!0)||ua(i,s,c,-g,p)||!p&&ua(i,s,c,-g,!0);return y||(i.cantEdit=!0,C(i.first,0))}function tc(i,s,c,u){return c<0&&s.ch==0?s.line>i.first?we(i,C(s.line-1)):null:c>0&&s.ch==(u||me(i,s.line)).text.length?s.line<i.first+i.size-1?C(s.line+1,0):null:new C(s.line,s.ch+c)}function ec(i){i.setSelection(C(i.firstLine(),0),C(i.lastLine()),Xt)}function rc(i,s,c){var u={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return u.canceled=!0}};return c&&(u.update=function(p,g,y,_){p&&(u.from=we(i,p)),g&&(u.to=we(i,g)),y&&(u.text=y),_!==void 0&&(u.origin=_)}),ir(i,"beforeChange",i,u),i.cm&&ir(i.cm,"beforeChange",i.cm,u),u.canceled?(i.cm&&(i.cm.curOp.updateInput=2),null):{from:u.from,to:u.to,text:u.text,origin:u.origin}}function ca(i,s,c){if(i.cm){if(!i.cm.curOp)return $r(i.cm,ca)(i,s,c);if(i.cm.state.suppressEdits)return}if(!((Kt(i,"beforeChange")||i.cm&&Kt(i.cm,"beforeChange"))&&(s=rc(i,s,!0),!s))){var u=ka&&!c&&$i(i,s.from,s.to);if(u)for(var p=u.length-1;p>=0;--p)nc(i,{from:u[p].from,to:u[p].to,text:p?[""]:s.text,origin:s.origin});else nc(i,s)}}function nc(i,s){if(!(s.text.length==1&&s.text[0]==""&&U(s.from,s.to)==0)){var c=Kl(i,s);$u(i,s,c,i.cm?i.cm.curOp.id:NaN),Ja(i,s,c,bo(i,s));var u=[];Qo(i,function(p,g){!g&&Nt(u,p.history)==-1&&(tl(p.history,s),u.push(p.history)),Ja(p,s,null,bo(p,s))})}}function Qs(i,s,c){var u=i.cm&&i.cm.state.suppressEdits;if(!(u&&!c)){for(var p=i.history,g,y=i.sel,_=s=="undo"?p.done:p.undone,b=s=="undo"?p.undone:p.done,E=0;E<_.length&&(g=_[E],!(c?g.ranges&&!g.equals(i.sel):!g.ranges));E++);if(E!=_.length){for(p.lastOrigin=p.lastSelOrigin=null;;)if(g=_.pop(),g.ranges){if(Xs(g,b),c&&!g.equals(i.sel)){dn(i,g,{clearRedo:!1});return}y=g}else if(u){_.push(g);return}else break;var K=[];Xs(y,b),b.push({changes:K,generation:p.generation}),p.generation=g.generation||++p.maxGeneration;for(var et=Kt(i,"beforeChange")||i.cm&&Kt(i.cm,"beforeChange"),_t=function(It){var Zt=g.changes[It];if(Zt.origin=s,et&&!rc(i,Zt,!1))return _.length=0,{};K.push(ql(i,Zt));var ee=It?Kl(i,Zt):de(_);Ja(i,Zt,ee,Yu(i,Zt)),!It&&i.cm&&i.cm.scrollIntoView({from:Zt.from,to:Jo(Zt)});var pe=[];Qo(i,function(ne,he){!he&&Nt(pe,ne.history)==-1&&(tl(ne.history,Zt),pe.push(ne.history)),Ja(ne,Zt,null,Yu(ne,Zt))})},ft=g.changes.length-1;ft>=0;--ft){var Dt=_t(ft);if(Dt)return Dt.v}}}}function oc(i,s){if(s!=0&&(i.first+=s,i.sel=new Vn(P(i.sel.ranges,function(p){return new ar(C(p.anchor.line+s,p.anchor.ch),C(p.head.line+s,p.head.ch))}),i.sel.primIndex),i.cm)){rn(i.cm,i.first,i.first-s,s);for(var c=i.cm.display,u=c.viewFrom;u<c.viewTo;u++)$o(i.cm,u,"gutter")}}function Ja(i,s,c,u){if(i.cm&&!i.cm.curOp)return $r(i.cm,Ja)(i,s,c,u);if(s.to.line<i.first){oc(i,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>i.lastLine())){if(s.from.line<i.first){var p=s.text.length-1-(i.first-s.from.line);oc(i,p),s={from:C(i.first,0),to:C(s.to.line+p,s.to.ch),text:[de(s.text)],origin:s.origin}}var g=i.lastLine();s.to.line>g&&(s={from:s.from,to:C(g,me(i,g).text.length),text:[s.text[0]],origin:s.origin}),s.removed=un(i,s.from,s.to),c||(c=Kl(i,s)),i.cm?Wf(i.cm,s,u):$l(i,s,u),Js(i,c,Xt),i.cantEdit&&ti(i,C(i.firstLine(),0))&&(i.cantEdit=!1)}}function Wf(i,s,c){var u=i.doc,p=i.display,g=s.from,y=s.to,_=!1,b=g.line;i.options.lineWrapping||(b=Ye(Ze(me(u,g.line))),u.iter(b,y.line+1,function(ft){if(ft==p.maxLine)return _=!0,!0})),u.sel.contains(s.from,s.to)>-1&&fr(i),$l(u,s,c,Fs(i)),i.options.lineWrapping||(u.iter(b,g.line+s.text.length,function(ft){var Dt=eo(ft);Dt>p.maxLineLength&&(p.maxLine=ft,p.maxLineLength=Dt,p.maxLineChanged=!0,_=!1)}),_&&(i.curOp.updateMaxLine=!0)),to(u,g.line),xr(i,400);var E=s.text.length-(y.line-g.line)-1;s.full?rn(i):g.line==y.line&&s.text.length==1&&!Wu(i.doc,s)?$o(i,g.line,"text"):rn(i,g.line,y.line+1,E);var K=Kt(i,"changes"),et=Kt(i,"change");if(et||K){var _t={from:g,to:y,text:s.text,removed:s.removed,origin:s.origin};et&&Ir(i,"change",i,_t),K&&(i.curOp.changeObjs||(i.curOp.changeObjs=[])).push(_t)}i.display.selForContextMenu=null}function fa(i,s,c,u,p){var g;u||(u=c),U(u,c)<0&&(g=[u,c],c=g[0],u=g[1]),typeof s=="string"&&(s=i.splitLines(s)),ca(i,{from:c,to:u,text:s,origin:p})}function da(i,s,c,u){c<i.line?i.line+=u:s<i.line&&(i.line=s,i.ch=0)}function ic(i,s,c,u){for(var p=0;p<i.length;++p){var g=i[p],y=!0;if(g.ranges){g.copied||(g=i[p]=g.deepCopy(),g.copied=!0);for(var _=0;_<g.ranges.length;_++)da(g.ranges[_].anchor,s,c,u),da(g.ranges[_].head,s,c,u);continue}for(var b=0;b<g.changes.length;++b){var E=g.changes[b];if(c<E.from.line)E.from=C(E.from.line+u,E.from.ch),E.to=C(E.to.line+u,E.to.ch);else if(s<=E.to.line){y=!1;break}}y||(i.splice(0,p+1),p=0)}}function tl(i,s){var c=s.from.line,u=s.to.line,p=s.text.length-(u-c)-1;ic(i.done,c,u,p),ic(i.undone,c,u,p)}function Qa(i,s,c,u){var p=s,g=s;return typeof s=="number"?g=me(i,er(i,s)):p=Ye(s),p==null?null:(u(g,p)&&i.cm&&$o(i.cm,p,c),g)}function pa(i){this.lines=i,this.parent=null;for(var s=0,c=0;c<i.length;++c)i[c].parent=this,s+=i[c].height;this.height=s}pa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(i,s){for(var c=i,u=i+s;c<u;++c){var p=this.lines[c];this.height-=p.height,Gr(p),Ir(p,"delete")}this.lines.splice(i,s)},collapse:function(i){i.push.apply(i,this.lines)},insertInner:function(i,s,c){this.height+=c,this.lines=this.lines.slice(0,i).concat(s).concat(this.lines.slice(i));for(var u=0;u<s.length;++u)s[u].parent=this},iterN:function(i,s,c){for(var u=i+s;i<u;++i)if(c(this.lines[i]))return!0}};function ts(i){this.children=i;for(var s=0,c=0,u=0;u<i.length;++u){var p=i[u];s+=p.chunkSize(),c+=p.height,p.parent=this}this.size=s,this.height=c,this.parent=null}ts.prototype={chunkSize:function(){return this.size},removeInner:function(i,s){this.size-=s;for(var c=0;c<this.children.length;++c){var u=this.children[c],p=u.chunkSize();if(i<p){var g=Math.min(s,p-i),y=u.height;if(u.removeInner(i,g),this.height-=y-u.height,p==g&&(this.children.splice(c--,1),u.parent=null),(s-=g)==0)break;i=0}else i-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof pa))){var _=[];this.collapse(_),this.children=[new pa(_)],this.children[0].parent=this}},collapse:function(i){for(var s=0;s<this.children.length;++s)this.children[s].collapse(i)},insertInner:function(i,s,c){this.size+=s.length,this.height+=c;for(var u=0;u<this.children.length;++u){var p=this.children[u],g=p.chunkSize();if(i<=g){if(p.insertInner(i,s,c),p.lines&&p.lines.length>50){for(var y=p.lines.length%25+25,_=y;_<p.lines.length;){var b=new pa(p.lines.slice(_,_+=25));p.height-=b.height,this.children.splice(++u,0,b),b.parent=this}p.lines=p.lines.slice(0,y),this.maybeSpill()}break}i-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var i=this;do{var s=i.children.splice(i.children.length-5,5),c=new ts(s);if(i.parent){i.size-=c.size,i.height-=c.height;var p=Nt(i.parent.children,i);i.parent.children.splice(p+1,0,c)}else{var u=new ts(i.children);u.parent=i,i.children=[u,c],i=u}c.parent=i.parent}while(i.children.length>10);i.parent.maybeSpill()}},iterN:function(i,s,c){for(var u=0;u<this.children.length;++u){var p=this.children[u],g=p.chunkSize();if(i<g){var y=Math.min(s,g-i);if(p.iterN(i,y,c))return!0;if((s-=y)==0)break;i=0}else i-=g}}};var ha=function(i,s,c){if(c)for(var u in c)c.hasOwnProperty(u)&&(this[u]=c[u]);this.doc=i,this.node=s};ha.prototype.clear=function(){var i=this.doc.cm,s=this.line.widgets,c=this.line,u=Ye(c);if(!(u==null||!s)){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(c.widgets=null);var g=go(this);Vr(c,Math.max(0,c.height-g)),i&&(En(i,function(){ac(i,c,-g),$o(i,u,"widget")}),Ir(i,"lineWidgetCleared",i,this,u))}},ha.prototype.changed=function(){var i=this,s=this.height,c=this.doc.cm,u=this.line;this.height=null;var p=go(this)-s;p&&(Tn(this.doc,u)||Vr(u,u.height+p),c&&En(c,function(){c.curOp.forceUpdate=!0,ac(c,u,p),Ir(c,"lineWidgetChanged",c,i,Ye(u))}))},Gn(ha);function ac(i,s,c){or(s)<(i.curOp&&i.curOp.scrollTop||i.doc.scrollTop)&&ia(i,c)}function zf(i,s,c,u){var p=new ha(i,c,u),g=i.cm;return g&&p.noHScroll&&(g.display.alignWidgets=!0),Qa(i,s,"widget",function(y){var _=y.widgets||(y.widgets=[]);if(p.insertAt==null?_.push(p):_.splice(Math.min(_.length,Math.max(0,p.insertAt)),0,p),p.line=y,g&&!Tn(i,y)){var b=or(y)<i.scrollTop;Vr(y,y.height+go(p)),b&&ia(g,p.height),g.curOp.forceUpdate=!0}return!0}),g&&Ir(g,"lineWidgetAdded",g,p,typeof s=="number"?s:Ye(s)),p}var ei=0,ri=function(i,s){this.lines=[],this.type=s,this.doc=i,this.id=++ei};ri.prototype.clear=function(){if(!this.explicitlyCleared){var i=this.doc.cm,s=i&&!i.curOp;if(s&&Mi(i),Kt(this,"clear")){var c=this.find();c&&Ir(this,"clear",c.from,c.to)}for(var u=null,p=null,g=0;g<this.lines.length;++g){var y=this.lines[g],_=Vo(y.markedSpans,this);i&&!this.collapsed?$o(i,Ye(y),"text"):i&&(_.to!=null&&(p=Ye(y)),_.from!=null&&(u=Ye(y))),y.markedSpans=mi(y.markedSpans,_),_.from==null&&this.collapsed&&!Tn(this.doc,y)&&i&&Vr(y,ta(i.display))}if(i&&this.collapsed&&!i.options.lineWrapping)for(var b=0;b<this.lines.length;++b){var E=Ze(this.lines[b]),K=eo(E);K>i.display.maxLineLength&&(i.display.maxLine=E,i.display.maxLineLength=K,i.display.maxLineChanged=!0)}u!=null&&i&&this.collapsed&&rn(i,u,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,i&&pn(i.doc)),i&&Ir(i,"markerCleared",i,this,u,p),s&&Li(i),this.parent&&this.parent.clear()}},ri.prototype.find=function(i,s){i==null&&this.type=="bookmark"&&(i=1);for(var c,u,p=0;p<this.lines.length;++p){var g=this.lines[p],y=Vo(g.markedSpans,this);if(y.from!=null&&(c=C(s?g:Ye(g),y.from),i==-1))return c;if(y.to!=null&&(u=C(s?g:Ye(g),y.to),i==1))return u}return c&&{from:c,to:u}},ri.prototype.changed=function(){var i=this,s=this.find(-1,!0),c=this,u=this.doc.cm;!s||!u||En(u,function(){var p=s.line,g=Ye(s.line),y=Fe(u,g);if(y&&(Ba(y),u.curOp.selectionChanged=u.curOp.forceUpdate=!0),u.curOp.updateMaxLine=!0,!Tn(c.doc,p)&&c.height!=null){var _=c.height;c.height=null;var b=go(c)-_;b&&Vr(p,p.height+b)}Ir(u,"markerChanged",u,i)})},ri.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||Nt(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(i)},ri.prototype.detachLine=function(i){if(this.lines.splice(Nt(this.lines,i),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Gn(ri);function va(i,s,c,u,p){if(u&&u.shared)return Kf(i,s,c,u,p);if(i.cm&&!i.cm.curOp)return $r(i.cm,va)(i,s,c,u,p);var g=new ri(i,p),y=U(s,c);if(u&&be(u,g,!1),y>0||y==0&&g.clearWhenEmpty!==!1)return g;if(g.replacedWith&&(g.collapsed=!0,g.widgetNode=lt("span",[g.replacedWith],"CodeMirror-widget"),u.handleMouseEvents||g.widgetNode.setAttribute("cm-ignore-events","true"),u.insertLeft&&(g.widgetNode.insertLeft=!0)),g.collapsed){if(Yn(i,s.line,s,c,g)||s.line!=c.line&&Yn(i,c.line,s,c,g))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ro()}g.addToHistory&&$u(i,{from:s,to:c,origin:"markText"},i.sel,NaN);var _=s.line,b=i.cm,E;if(i.iter(_,c.line+1,function(et){b&&g.collapsed&&!b.options.lineWrapping&&Ze(et)==b.display.maxLine&&(E=!0),g.collapsed&&_!=s.line&&Vr(et,0),Ma(et,new No(g,_==s.line?s.ch:null,_==c.line?c.ch:null),i.cm&&i.cm.curOp),++_}),g.collapsed&&i.iter(s.line,c.line+1,function(et){Tn(i,et)&&Vr(et,0)}),g.clearOnEnter&&_e(g,"beforeCursorEnter",function(){return g.clear()}),g.readOnly&&(Ts(),(i.history.done.length||i.history.undone.length)&&i.clearHistory()),g.collapsed&&(g.id=++ei,g.atomic=!0),b){if(E&&(b.curOp.updateMaxLine=!0),g.collapsed)rn(b,s.line,c.line+1);else if(g.className||g.startStyle||g.endStyle||g.css||g.attributes||g.title)for(var K=s.line;K<=c.line;K++)$o(b,K,"text");g.atomic&&pn(b.doc),Ir(b,"markerAdded",b,g)}return g}var es=function(i,s){this.markers=i,this.primary=s;for(var c=0;c<i.length;++c)i[c].parent=this};es.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();Ir(this,"clear")}},es.prototype.find=function(i,s){return this.primary.find(i,s)},Gn(es);function Kf(i,s,c,u,p){u=be(u),u.shared=!1;var g=[va(i,s,c,u,p)],y=g[0],_=u.widgetNode;return Qo(i,function(b){_&&(u.widgetNode=_.cloneNode(!0)),g.push(va(b,we(b,s),we(b,c),u,p));for(var E=0;E<b.linked.length;++E)if(b.linked[E].isParent)return;y=de(g)}),new es(g,y)}function sc(i){return i.findMarks(C(i.first,0),i.clipPos(C(i.lastLine())),function(s){return s.parent})}function Gf(i,s){for(var c=0;c<s.length;c++){var u=s[c],p=u.find(),g=i.clipPos(p.from),y=i.clipPos(p.to);if(U(g,y)){var _=va(i,g,y,u.primary,u.primary.type);u.markers.push(_),_.parent=u}}}function $f(i){for(var s=function(u){var p=i[u],g=[p.primary.doc];Qo(p.primary.doc,function(b){return g.push(b)});for(var y=0;y<p.markers.length;y++){var _=p.markers[y];Nt(g,_.doc)==-1&&(_.parent=null,p.markers.splice(y--,1))}},c=0;c<i.length;c++)s(c)}var lc=0,Pn=function(i,s,c,u,p){if(!(this instanceof Pn))return new Pn(i,s,c,u,p);c==null&&(c=0),ts.call(this,[new pa([new no("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var g=C(c,0);this.sel=Zo(g),this.history=new Ys(null),this.id=++lc,this.modeOption=s,this.lineSep=u,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof i=="string"&&(i=this.splitLines(i)),$l(this,{from:g,to:g,text:i}),dn(this,Zo(g),Xt)};Pn.prototype=pt(ts.prototype,{constructor:Pn,iter:function(i,s,c){c?this.iterN(i-this.first,s-i,c):this.iterN(this.first,this.first+this.size,i)},insert:function(i,s){for(var c=0,u=0;u<s.length;++u)c+=s[u].height;this.insertInner(i-this.first,s,c)},remove:function(i,s){this.removeInner(i-this.first,s)},getValue:function(i){var s=yr(this,this.first,this.first+this.size);return i===!1?s:s.join(i||this.lineSeparator())},setValue:qr(function(i){var s=C(this.first,0),c=this.first+this.size-1;ca(this,{from:s,to:C(c,me(this,c).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0),this.cm&&Ga(this.cm,0,0),dn(this,Zo(s),Xt)}),replaceRange:function(i,s,c,u){s=we(this,s),c=c?we(this,c):s,fa(this,i,s,c,u)},getRange:function(i,s,c){var u=un(this,we(this,i),we(this,s));return c===!1?u:c===""?u.join(""):u.join(c||this.lineSeparator())},getLine:function(i){var s=this.getLineHandle(i);return s&&s.text},getLineHandle:function(i){if(Dr(this,i))return me(this,i)},getLineNumber:function(i){return Ye(i)},getLineHandleVisualStart:function(i){return typeof i=="number"&&(i=me(this,i)),Ze(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return we(this,i)},getCursor:function(i){var s=this.sel.primary(),c;return i==null||i=="head"?c=s.head:i=="anchor"?c=s.anchor:i=="end"||i=="to"||i===!1?c=s.to():c=s.from(),c},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qr(function(i,s,c){Zu(this,we(this,typeof i=="number"?C(i,s||0):i),null,c)}),setSelection:qr(function(i,s,c){Zu(this,we(this,i),we(this,s||i),c)}),extendSelection:qr(function(i,s,c){Zs(this,we(this,i),s&&we(this,s),c)}),extendSelections:qr(function(i,s){Xu(this,wo(this,i),s)}),extendSelectionsBy:qr(function(i,s){var c=P(this.sel.ranges,i);Xu(this,wo(this,c),s)}),setSelections:qr(function(i,s,c){if(i.length){for(var u=[],p=0;p<i.length;p++)u[p]=new ar(we(this,i[p].anchor),we(this,i[p].head||i[p].anchor));s==null&&(s=Math.min(i.length-1,this.sel.primIndex)),dn(this,lo(this.cm,u,s),c)}}),addSelection:qr(function(i,s,c){var u=this.sel.ranges.slice(0);u.push(new ar(we(this,i),we(this,s||i))),dn(this,lo(this.cm,u,u.length-1),c)}),getSelection:function(i){for(var s=this.sel.ranges,c,u=0;u<s.length;u++){var p=un(this,s[u].from(),s[u].to());c=c?c.concat(p):p}return i===!1?c:c.join(i||this.lineSeparator())},getSelections:function(i){for(var s=[],c=this.sel.ranges,u=0;u<c.length;u++){var p=un(this,c[u].from(),c[u].to());i!==!1&&(p=p.join(i||this.lineSeparator())),s[u]=p}return s},replaceSelection:function(i,s,c){for(var u=[],p=0;p<this.sel.ranges.length;p++)u[p]=i;this.replaceSelections(u,s,c||"+input")},replaceSelections:qr(function(i,s,c){for(var u=[],p=this.sel,g=0;g<p.ranges.length;g++){var y=p.ranges[g];u[g]={from:y.from(),to:y.to(),text:this.splitLines(i[g]),origin:c}}for(var _=s&&s!="end"&&If(this,u,s),b=u.length-1;b>=0;b--)ca(this,u[b]);_?Za(this,_):this.cm&&Yo(this.cm)}),undo:qr(function(){Qs(this,"undo")}),redo:qr(function(){Qs(this,"redo")}),undoSelection:qr(function(){Qs(this,"undo",!0)}),redoSelection:qr(function(){Qs(this,"redo",!0)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){for(var i=this.history,s=0,c=0,u=0;u<i.done.length;u++)i.done[u].ranges||++s;for(var p=0;p<i.undone.length;p++)i.undone[p].ranges||++c;return{undo:s,redo:c}},clearHistory:function(){var i=this;this.history=new Ys(this.history),Qo(this,function(s){return s.history=i.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(i){return i&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:la(this.history.done),undone:la(this.history.undone)}},setHistory:function(i){var s=this.history=new Ys(this.history);s.done=la(i.done.slice(0),null,!0),s.undone=la(i.undone.slice(0),null,!0)},setGutterMarker:qr(function(i,s,c){return Qa(this,i,"gutter",function(u){var p=u.gutterMarkers||(u.gutterMarkers={});return p[s]=c,!c&&dt(p)&&(u.gutterMarkers=null),!0})}),clearGutter:qr(function(i){var s=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[i]&&Qa(s,c,"gutter",function(){return c.gutterMarkers[i]=null,dt(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(i){var s;if(typeof i=="number"){if(!Dr(this,i)||(s=i,i=me(this,i),!i))return null}else if(s=Ye(i),s==null)return null;return{line:s,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:qr(function(i,s,c){return Qa(this,i,s=="gutter"?"gutter":"class",function(u){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!u[p])u[p]=c;else{if(Lt(c).test(u[p]))return!1;u[p]+=" "+c}return!0})}),removeLineClass:qr(function(i,s,c){return Qa(this,i,s=="gutter"?"gutter":"class",function(u){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",g=u[p];if(g)if(c==null)u[p]=null;else{var y=g.match(Lt(c));if(!y)return!1;var _=y.index+y[0].length;u[p]=g.slice(0,y.index)+(!y.index||_==g.length?"":" ")+g.slice(_)||null}else return!1;return!0})}),addLineWidget:qr(function(i,s,c){return zf(this,i,s,c)}),removeLineWidget:function(i){i.clear()},markText:function(i,s,c){return va(this,we(this,i),we(this,s),c,c&&c.type||"range")},setBookmark:function(i,s){var c={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return i=we(this,i),va(this,i,i,c,"bookmark")},findMarksAt:function(i){i=we(this,i);var s=[],c=me(this,i.line).markedSpans;if(c)for(var u=0;u<c.length;++u){var p=c[u];(p.from==null||p.from<=i.ch)&&(p.to==null||p.to>=i.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(i,s,c){i=we(this,i),s=we(this,s);var u=[],p=i.line;return this.iter(i.line,s.line+1,function(g){var y=g.markedSpans;if(y)for(var _=0;_<y.length;_++){var b=y[_];!(b.to!=null&&p==i.line&&i.ch>=b.to||b.from==null&&p!=i.line||b.from!=null&&p==s.line&&b.from>=s.ch)&&(!c||c(b.marker))&&u.push(b.marker.parent||b.marker)}++p}),u},getAllMarks:function(){var i=[];return this.iter(function(s){var c=s.markedSpans;if(c)for(var u=0;u<c.length;++u)c[u].from!=null&&i.push(c[u].marker)}),i},posFromIndex:function(i){var s,c=this.first,u=this.lineSeparator().length;return this.iter(function(p){var g=p.text.length+u;if(g>i)return s=i,!0;i-=g,++c}),we(this,C(c,s))},indexFromPos:function(i){i=we(this,i);var s=i.ch;if(i.line<this.first||i.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,i.line,function(u){s+=u.text.length+c}),s},copy:function(i){var s=new Pn(yr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,i&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(i){i||(i={});var s=this.first,c=this.first+this.size;i.from!=null&&i.from>s&&(s=i.from),i.to!=null&&i.to<c&&(c=i.to);var u=new Pn(yr(this,s,c),i.mode||this.modeOption,s,this.lineSep,this.direction);return i.sharedHist&&(u.history=this.history),(this.linked||(this.linked=[])).push({doc:u,sharedHist:i.sharedHist}),u.linked=[{doc:this,isParent:!0,sharedHist:i.sharedHist}],Gf(u,sc(this)),u},unlinkDoc:function(i){if(i instanceof mr&&(i=i.doc),this.linked)for(var s=0;s<this.linked.length;++s){var c=this.linked[s];if(c.doc==i){this.linked.splice(s,1),i.unlinkDoc(this),$f(sc(this));break}}if(i.history==this.history){var u=[i.id];Qo(i,function(p){return u.push(p.id)},!0),i.history=new Ys(null),i.history.done=la(this.history.done,u),i.history.undone=la(this.history.undone,u)}},iterLinkedDocs:function(i){Qo(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){return this.lineSep?i.split(this.lineSep):vn(i)},lineSeparator:function(){return this.lineSep||`
`},setDirection:qr(function(i){i!="rtl"&&(i="ltr"),i!=this.direction&&(this.direction=i,this.iter(function(s){return s.order=null}),this.cm&&Rf(this.cm))})}),Pn.prototype.eachLine=Pn.prototype.iter;var Zl=0;function el(i){var s=this;if(uc(s),!(ur(s,i)||io(s.display,i))){N(i),D&&(Zl=+new Date);var c=Go(s,i,!0),u=i.dataTransfer.files;if(!(!c||s.isReadOnly()))if(u&&u.length&&window.FileReader&&window.File)for(var p=u.length,g=Array(p),y=0,_=function(){++y==p&&$r(s,function(){c=we(s.doc,c);var ft={from:c,to:c,text:s.doc.splitLines(g.filter(function(Dt){return Dt!=null}).join(s.doc.lineSeparator())),origin:"paste"};ca(s.doc,ft),Za(s.doc,Zo(we(s.doc,c),we(s.doc,Jo(ft))))})()},b=function(ft,Dt){if(s.options.allowDropFileTypes&&Nt(s.options.allowDropFileTypes,ft.type)==-1){_();return}var It=new FileReader;It.onerror=function(){return _()},It.onload=function(){var Zt=It.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Zt)){_();return}g[Dt]=Zt,_()},It.readAsText(ft)},E=0;E<u.length;E++)b(u[E],E);else{if(s.state.draggingText&&s.doc.sel.contains(c)>-1){s.state.draggingText(i),setTimeout(function(){return s.display.input.focus()},20);return}try{var K=i.dataTransfer.getData("Text");if(K){var et;if(s.state.draggingText&&!s.state.draggingText.copy&&(et=s.listSelections()),Js(s.doc,Zo(c,c)),et)for(var _t=0;_t<et.length;++_t)fa(s.doc,"",et[_t].anchor,et[_t].head,"drag");s.replaceSelection(K,"around","paste"),s.display.input.focus()}}catch{}}}}function rs(i,s){if(D&&(!i.state.draggingText||+new Date-Zl<100)){Ft(s);return}if(!(ur(i,s)||io(i.display,s))&&(s.dataTransfer.setData("Text",i.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!ot)){var c=R("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",H&&(c.width=c.height=1,i.display.wrapper.appendChild(c),c._top=c.offsetTop),s.dataTransfer.setDragImage(c,0,0),H&&c.parentNode.removeChild(c)}}function qf(i,s){var c=Go(i,s);if(c){var u=document.createDocumentFragment();Dl(i,c,u),i.display.dragCursor||(i.display.dragCursor=R("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)),rt(i.display.dragCursor,u)}}function uc(i){i.display.dragCursor&&(i.display.lineSpace.removeChild(i.display.dragCursor),i.display.dragCursor=null)}function cc(i){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),c=[],u=0;u<s.length;u++){var p=s[u].CodeMirror;p&&c.push(p)}c.length&&c[0].operation(function(){for(var g=0;g<c.length;g++)i(c[g])})}}var fc=!1;function Yf(){fc||(Xf(),fc=!0)}function Xf(){var i;_e(window,"resize",function(){i==null&&(i=setTimeout(function(){i=null,cc(dc)},100))}),_e(window,"blur",function(){return cc(oa)})}function dc(i){var s=i.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,i.setSize()}for(var Po={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ns=0;ns<10;ns++)Po[ns+48]=Po[ns+96]=String(ns);for(var ji=65;ji<=90;ji++)Po[ji]=String.fromCharCode(ji);for(var os=1;os<=12;os++)Po[os+111]=Po[os+63235]="F"+os;var mo={};mo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},mo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},mo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},mo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},mo.default=mt?mo.macDefault:mo.pcDefault;function Zf(i){var s=i.split(/-(?!$)/);i=s[s.length-1];for(var c,u,p,g,y=0;y<s.length-1;y++){var _=s[y];if(/^(cmd|meta|m)$/i.test(_))g=!0;else if(/^a(lt)?$/i.test(_))c=!0;else if(/^(c|ctrl|control)$/i.test(_))u=!0;else if(/^s(hift)?$/i.test(_))p=!0;else throw new Error("Unrecognized modifier name: "+_)}return c&&(i="Alt-"+i),u&&(i="Ctrl-"+i),g&&(i="Cmd-"+i),p&&(i="Shift-"+i),i}function ni(i){var s={};for(var c in i)if(i.hasOwnProperty(c)){var u=i[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if(u=="..."){delete i[c];continue}for(var p=P(c.split(" "),Zf),g=0;g<p.length;g++){var y=void 0,_=void 0;g==p.length-1?(_=p.join(" "),y=u):(_=p.slice(0,g+1).join(" "),y="...");var b=s[_];if(!b)s[_]=y;else if(b!=y)throw new Error("Inconsistent bindings for "+_)}delete i[c]}for(var E in s)i[E]=s[E];return i}function ga(i,s,c,u){s=rl(s);var p=s.call?s.call(i,u):s[i];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&c(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return ga(i,s.fallthrough,c,u);for(var g=0;g<s.fallthrough.length;g++){var y=ga(i,s.fallthrough[g],c,u);if(y)return y}}}function pc(i){var s=typeof i=="string"?i:Po[i.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function hc(i,s,c){var u=i;return s.altKey&&u!="Alt"&&(i="Alt-"+i),(Qt?s.metaKey:s.ctrlKey)&&u!="Ctrl"&&(i="Ctrl-"+i),(Qt?s.ctrlKey:s.metaKey)&&u!="Mod"&&(i="Cmd-"+i),!c&&s.shiftKey&&u!="Shift"&&(i="Shift-"+i),i}function vc(i,s){if(H&&i.keyCode==34&&i.char)return!1;var c=Po[i.keyCode];return c==null||i.altGraphKey?!1:(i.keyCode==3&&i.code&&(c=i.code),hc(c,i,s))}function rl(i){return typeof i=="string"?mo[i]:i}function Ii(i,s){for(var c=i.doc.sel.ranges,u=[],p=0;p<c.length;p++){for(var g=s(c[p]);u.length&&U(g.from,de(u).to)<=0;){var y=u.pop();if(U(y.from,g.from)<0){g.from=y.from;break}}u.push(g)}En(i,function(){for(var _=u.length-1;_>=0;_--)fa(i.doc,"",u[_].from,u[_].to,"+delete");Yo(i)})}function is(i,s,c){var u=Re(i.text,s+c,c);return u<0||u>i.text.length?null:u}function Jl(i,s,c){var u=is(i,s.ch,c);return u==null?null:new C(s.line,u,c<0?"after":"before")}function Ql(i,s,c,u,p){if(i){s.doc.direction=="rtl"&&(p=-p);var g=$e(c,s.doc.direction);if(g){var y=p<0?de(g):g[0],_=p<0==(y.level==1),b=_?"after":"before",E;if(y.level>0||s.doc.direction=="rtl"){var K=Me(s,c);E=p<0?c.text.length-1:0;var et=dr(s,K,E).top;E=Ue(function(_t){return dr(s,K,_t).top==et},p<0==(y.level==1)?y.from:y.to-1,E),b=="before"&&(E=is(c,E,1))}else E=p<0?y.to:y.from;return new C(u,E,b)}}return new C(u,p<0?c.text.length:0,p<0?"before":"after")}function gc(i,s,c,u){var p=$e(s,i.doc.direction);if(!p)return Jl(s,c,u);c.ch>=s.text.length?(c.ch=s.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var g=Qe(p,c.ch,c.sticky),y=p[g];if(i.doc.direction=="ltr"&&y.level%2==0&&(u>0?y.to>c.ch:y.from<c.ch))return Jl(s,c,u);var _=function(ee,pe){return is(s,ee instanceof C?ee.ch:ee,pe)},b,E=function(ee){return i.options.lineWrapping?(b=b||Me(i,s),za(i,s,b,ee)):{begin:0,end:s.text.length}},K=E(c.sticky=="before"?_(c,-1):c.ch);if(i.doc.direction=="rtl"||y.level==1){var et=y.level==1==u<0,_t=_(c,et?1:-1);if(_t!=null&&(et?_t<=y.to&&_t<=K.end:_t>=y.from&&_t>=K.begin)){var ft=et?"before":"after";return new C(c.line,_t,ft)}}var Dt=function(ee,pe,ne){for(var he=function(vr,Yr){return Yr?new C(c.line,_(vr,1),"before"):new C(c.line,vr,"after")};ee>=0&&ee<p.length;ee+=pe){var Te=p[ee],Oe=pe>0==(Te.level!=1),We=Oe?ne.begin:_(ne.end,-1);if(Te.from<=We&&We<Te.to||(We=Oe?Te.from:_(Te.to,-1),ne.begin<=We&&We<ne.end))return he(We,Oe)}},It=Dt(g+u,u,K);if(It)return It;var Zt=u>0?K.end:_(K.begin,-1);return Zt!=null&&!(u>0&&Zt==s.text.length)&&(It=Dt(u>0?0:p.length-1,u,E(Zt)),It)?It:null}var as={selectAll:ec,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),Xt)},killLine:function(i){return Ii(i,function(s){if(s.empty()){var c=me(i.doc,s.head.line).text.length;return s.head.ch==c&&s.head.line<i.lastLine()?{from:s.head,to:C(s.head.line+1,0)}:{from:s.head,to:C(s.head.line,c)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(i){return Ii(i,function(s){return{from:C(s.from().line,0),to:we(i.doc,C(s.to().line+1,0))}})},delLineLeft:function(i){return Ii(i,function(s){return{from:C(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(i){return Ii(i,function(s){var c=i.charCoords(s.head,"div").top+5,u=i.coordsChar({left:0,top:c},"div");return{from:u,to:s.from()}})},delWrappedLineRight:function(i){return Ii(i,function(s){var c=i.charCoords(s.head,"div").top+5,u=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:c},"div");return{from:s.from(),to:u}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(C(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(C(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(s){return yc(i,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(s){return _c(i,s.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(s){return mc(i,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(s){var c=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:c},"div")},Ke)},goLineLeft:function(i){return i.extendSelectionsBy(function(s){var c=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:0,top:c},"div")},Ke)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(s){var c=i.cursorCoords(s.head,"div").top+5,u=i.coordsChar({left:0,top:c},"div");return u.ch<i.getLine(u.line).search(/\S/)?_c(i,s.head):u},Ke)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"codepoint")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("	")},insertSoftTab:function(i){for(var s=[],c=i.listSelections(),u=i.options.tabSize,p=0;p<c.length;p++){var g=c[p].from(),y=vt(i.getLine(g.line),g.ch,u);s.push(lr(u-y%u))}i.replaceSelections(s)},defaultTab:function(i){i.somethingSelected()?i.indentSelection("add"):i.execCommand("insertTab")},transposeChars:function(i){return En(i,function(){for(var s=i.listSelections(),c=[],u=0;u<s.length;u++)if(s[u].empty()){var p=s[u].head,g=me(i.doc,p.line).text;if(g){if(p.ch==g.length&&(p=new C(p.line,p.ch-1)),p.ch>0)p=new C(p.line,p.ch+1),i.replaceRange(g.charAt(p.ch-1)+g.charAt(p.ch-2),C(p.line,p.ch-2),p,"+transpose");else if(p.line>i.doc.first){var y=me(i.doc,p.line-1).text;y&&(p=new C(p.line,1),i.replaceRange(g.charAt(0)+i.doc.lineSeparator()+y.charAt(y.length-1),C(p.line-1,y.length-1),p,"+transpose"))}}c.push(new ar(p,p))}i.setSelections(c)})},newlineAndIndent:function(i){return En(i,function(){for(var s=i.listSelections(),c=s.length-1;c>=0;c--)i.replaceRange(i.doc.lineSeparator(),s[c].anchor,s[c].head,"+input");s=i.listSelections();for(var u=0;u<s.length;u++)i.indentLine(s[u].from().line,null,!0);Yo(i)})},openLine:function(i){return i.replaceSelection(`
`,"start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function yc(i,s){var c=me(i.doc,s),u=Ze(c);return u!=c&&(s=Ye(u)),Ql(!0,i,u,s,1)}function mc(i,s){var c=me(i.doc,s),u=Bo(c);return u!=c&&(s=Ye(u)),Ql(!0,i,c,s,-1)}function _c(i,s){var c=yc(i,s.line),u=me(i.doc,c.line),p=$e(u,i.doc.direction);if(!p||p[0].level==0){var g=Math.max(c.ch,u.text.search(/\S/)),y=s.line==c.line&&s.ch<=g&&s.ch;return C(c.line,y?0:g,c.sticky)}return c}function oi(i,s,c){if(typeof s=="string"&&(s=as[s],!s))return!1;i.display.input.ensurePolled();var u=i.display.shift,p=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),c&&(i.display.shift=!1),p=s(i)!=fe}finally{i.display.shift=u,i.state.suppressEdits=!1}return p}function Jf(i,s,c){for(var u=0;u<i.state.keyMaps.length;u++){var p=ga(s,i.state.keyMaps[u],c,i);if(p)return p}return i.options.extraKeys&&ga(s,i.options.extraKeys,c,i)||ga(s,i.options.keyMap,c,i)}var Qf=new jt;function ya(i,s,c,u){var p=i.state.keySeq;if(p){if(pc(s))return"handled";if(/\'$/.test(s)?i.state.keySeq=null:Qf.set(50,function(){i.state.keySeq==p&&(i.state.keySeq=null,i.display.input.reset())}),tu(i,p+" "+s,c,u))return!0}return tu(i,s,c,u)}function tu(i,s,c,u){var p=Jf(i,s,u);return p=="multi"&&(i.state.keySeq=s),p=="handled"&&Ir(i,"keyHandled",i,s,c),(p=="handled"||p=="multi")&&(N(c),Il(i)),!!p}function eu(i,s){var c=vc(s,!0);return c?s.shiftKey&&!i.state.keySeq?ya(i,"Shift-"+c,s,function(u){return oi(i,u,!0)})||ya(i,c,s,function(u){if(typeof u=="string"?/^go[A-Z]/.test(u):u.motion)return oi(i,u)}):ya(i,c,s,function(u){return oi(i,u)}):!1}function wc(i,s,c){return ya(i,"'"+c+"'",s,function(u){return oi(i,u,!0)})}var nl=null;function bc(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField())&&(s.curOp.focus=Pt(Ut(s)),!ur(s,i))){D&&F<11&&i.keyCode==27&&(i.returnValue=!1);var c=i.keyCode;s.display.shift=c==16||i.shiftKey;var u=eu(s,i);H&&(nl=u?c:null,!u&&c==88&&!_o&&(mt?i.metaKey:i.ctrlKey)&&s.replaceSelection("",null,"cut")),at&&!mt&&!u&&c==46&&i.shiftKey&&!i.ctrlKey&&document.execCommand&&document.execCommand("cut"),c==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&ss(s)}}function ss(i){var s=i.display.lineDiv;$t(s,"CodeMirror-crosshair");function c(u){(u.keyCode==18||!u.altKey)&&($(s,"CodeMirror-crosshair"),Ae(document,"keyup",c),Ae(document,"mouseover",c))}_e(document,"keyup",c),_e(document,"mouseover",c)}function ol(i){i.keyCode==16&&(this.doc.sel.shift=!1),ur(this,i)}function ru(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField())&&!(io(s.display,i)||ur(s,i)||i.ctrlKey&&!i.altKey||mt&&i.metaKey)){var c=i.keyCode,u=i.charCode;if(H&&c==nl){nl=null,N(i);return}if(!(H&&(!i.which||i.which<10)&&eu(s,i))){var p=String.fromCharCode(u??c);p!="\b"&&(wc(s,i,p)||s.display.input.onKeyPress(i))}}}var Cc=400,il=function(i,s,c){this.time=i,this.pos=s,this.button=c};il.prototype.compare=function(i,s,c){return this.time+Cc>i&&U(s,this.pos)==0&&c==this.button};var Ao,ls;function td(i,s){var c=+new Date;return ls&&ls.compare(c,i,s)?(Ao=ls=null,"triple"):Ao&&Ao.compare(c,i,s)?(ls=new il(c,i,s),Ao=null,"double"):(Ao=new il(c,i,s),ls=null,"single")}function nu(i){var s=this,c=s.display;if(!(ur(s,i)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=i.shiftKey,io(c,i)){O||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));return}if(!Fn(s,i)){var u=Go(s,i),p=ke(i),g=u?td(u,p):"single";se(s).focus(),p==1&&s.state.selectingText&&s.state.selectingText(i),!(u&&ed(s,p,u,g,i))&&(p==1?u?xc(s,u,g,i):ce(i)==c.scroller&&N(i):p==2?(u&&Zs(s.doc,u),setTimeout(function(){return c.input.focus()},20)):p==3&&(ct?s.display.input.onContextMenu(i):Rl(s)))}}}function ed(i,s,c,u,p){var g="Click";return u=="double"?g="Double"+g:u=="triple"&&(g="Triple"+g),g=(s==1?"Left":s==2?"Middle":"Right")+g,ya(i,hc(g,p),p,function(y){if(typeof y=="string"&&(y=as[y]),!y)return!1;var _=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),_=y(i,c)!=fe}finally{i.state.suppressEdits=!1}return _})}function rd(i,s,c){var u=i.getOption("configureMouse"),p=u?u(i,s,c):{};if(p.unit==null){var g=Yt?c.shiftKey&&c.metaKey:c.altKey;p.unit=g?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||i.doc.extend)&&(p.extend=i.doc.extend||c.shiftKey),p.addNew==null&&(p.addNew=mt?c.metaKey:c.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(mt?c.altKey:c.ctrlKey)),p}function xc(i,s,c,u){D?setTimeout(Wt(Ws,i),0):i.curOp.focus=Pt(Ut(i));var p=rd(i,c,u),g=i.doc.sel,y;i.options.dragDrop&&qe&&!i.isReadOnly()&&c=="single"&&(y=g.contains(s))>-1&&(U((y=g.ranges[y]).from(),s)<0||s.xRel>0)&&(U(y.to(),s)>0||s.xRel<0)?nd(i,u,s,p):od(i,u,s,p)}function nd(i,s,c,u){var p=i.display,g=!1,y=$r(i,function(E){O&&(p.scroller.draggable=!1),i.state.draggingText=!1,i.state.delayingBlurEvent&&(i.hasFocus()?i.state.delayingBlurEvent=!1:Rl(i)),Ae(p.wrapper.ownerDocument,"mouseup",y),Ae(p.wrapper.ownerDocument,"mousemove",_),Ae(p.scroller,"dragstart",b),Ae(p.scroller,"drop",y),g||(N(E),u.addNew||Zs(i.doc,c,null,null,u.extend),O&&!ot||D&&F==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),_=function(E){g=g||Math.abs(s.clientX-E.clientX)+Math.abs(s.clientY-E.clientY)>=10},b=function(){return g=!0};O&&(p.scroller.draggable=!0),i.state.draggingText=y,y.copy=!u.moveOnDrag,_e(p.wrapper.ownerDocument,"mouseup",y),_e(p.wrapper.ownerDocument,"mousemove",_),_e(p.scroller,"dragstart",b),_e(p.scroller,"drop",y),i.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function Sc(i,s,c){if(c=="char")return new ar(s,s);if(c=="word")return i.findWordAt(s);if(c=="line")return new ar(C(s.line,0),we(i.doc,C(s.line+1,0)));var u=c(i,s);return new ar(u.from,u.to)}function od(i,s,c,u){D&&Rl(i);var p=i.display,g=i.doc;N(s);var y,_,b=g.sel,E=b.ranges;if(u.addNew&&!u.extend?(_=g.sel.contains(c),_>-1?y=E[_]:y=new ar(c,c)):(y=g.sel.primary(),_=g.sel.primIndex),u.unit=="rectangle")u.addNew||(y=new ar(c,c)),c=Go(i,s,!0,!0),_=-1;else{var K=Sc(i,c,u.unit);u.extend?y=Yl(y,K.anchor,K.head,u.extend):y=K}u.addNew?_==-1?(_=E.length,dn(g,lo(i,E.concat([y]),_),{scroll:!1,origin:"*mouse"})):E.length>1&&E[_].empty()&&u.unit=="char"&&!u.extend?(dn(g,lo(i,E.slice(0,_).concat(E.slice(_+1)),0),{scroll:!1,origin:"*mouse"}),b=g.sel):Xl(g,_,y,ve):(_=0,dn(g,new Vn([y],0),ve),b=g.sel);var et=c;function _t(ne){if(U(et,ne)!=0)if(et=ne,u.unit=="rectangle"){for(var he=[],Te=i.options.tabSize,Oe=vt(me(g,c.line).text,c.ch,Te),We=vt(me(g,ne.line).text,ne.ch,Te),vr=Math.min(Oe,We),Yr=Math.max(Oe,We),Sr=Math.min(c.line,ne.line),nn=Math.min(i.lastLine(),Math.max(c.line,ne.line));Sr<=nn;Sr++){var wn=me(g,Sr).text,pr=gr(wn,vr,Te);vr==Yr?he.push(new ar(C(Sr,pr),C(Sr,pr))):wn.length>pr&&he.push(new ar(C(Sr,pr),C(Sr,gr(wn,Yr,Te))))}he.length||he.push(new ar(c,c)),dn(g,lo(i,b.ranges.slice(0,_).concat(he),_),{origin:"*mouse",scroll:!1}),i.scrollIntoView(ne)}else{var An=y,Xr=Sc(i,ne,u.unit),Kr=An.anchor,Br;U(Xr.anchor,Kr)>0?(Br=Xr.head,Kr=Xe(An.from(),Xr.anchor)):(Br=Xr.anchor,Kr=je(An.to(),Xr.head));var Er=b.ranges.slice(0);Er[_]=id(i,new ar(we(g,Kr),Br)),dn(g,lo(i,Er,_),ve)}}var ft=p.wrapper.getBoundingClientRect(),Dt=0;function It(ne){var he=++Dt,Te=Go(i,ne,!0,u.unit=="rectangle");if(Te)if(U(Te,et)!=0){i.curOp.focus=Pt(Ut(i)),_t(Te);var Oe=Ti(p,g);(Te.line>=Oe.to||Te.line<Oe.from)&&setTimeout($r(i,function(){Dt==he&&It(ne)}),150)}else{var We=ne.clientY<ft.top?-20:ne.clientY>ft.bottom?20:0;We&&setTimeout($r(i,function(){Dt==he&&(p.scroller.scrollTop+=We,It(ne))}),50)}}function Zt(ne){i.state.selectingText=!1,Dt=1/0,ne&&(N(ne),p.input.focus()),Ae(p.wrapper.ownerDocument,"mousemove",ee),Ae(p.wrapper.ownerDocument,"mouseup",pe),g.history.lastSelOrigin=null}var ee=$r(i,function(ne){ne.buttons===0||!ke(ne)?Zt(ne):It(ne)}),pe=$r(i,Zt);i.state.selectingText=pe,_e(p.wrapper.ownerDocument,"mousemove",ee),_e(p.wrapper.ownerDocument,"mouseup",pe)}function id(i,s){var c=s.anchor,u=s.head,p=me(i.doc,c.line);if(U(c,u)==0&&c.sticky==u.sticky)return s;var g=$e(p);if(!g)return s;var y=Qe(g,c.ch,c.sticky),_=g[y];if(_.from!=c.ch&&_.to!=c.ch)return s;var b=y+(_.from==c.ch==(_.level!=1)?0:1);if(b==0||b==g.length)return s;var E;if(u.line!=c.line)E=(u.line-c.line)*(i.doc.direction=="ltr"?1:-1)>0;else{var K=Qe(g,u.ch,u.sticky),et=K-y||(u.ch-c.ch)*(_.level==1?-1:1);K==b-1||K==b?E=et<0:E=et>0}var _t=g[b+(E?-1:0)],ft=E==(_t.level==1),Dt=ft?_t.from:_t.to,It=ft?"after":"before";return c.ch==Dt&&c.sticky==It?s:new ar(new C(c.line,Dt,It),u)}function Oc(i,s,c,u){var p,g;if(s.touches)p=s.touches[0].clientX,g=s.touches[0].clientY;else try{p=s.clientX,g=s.clientY}catch{return!1}if(p>=Math.floor(i.display.gutters.getBoundingClientRect().right))return!1;u&&N(s);var y=i.display,_=y.lineDiv.getBoundingClientRect();if(g>_.bottom||!Kt(i,c))return yt(s);g-=_.top-y.viewOffset;for(var b=0;b<i.display.gutterSpecs.length;++b){var E=y.gutters.childNodes[b];if(E&&E.getBoundingClientRect().right>=p){var K=tn(i.doc,g),et=i.display.gutterSpecs[b];return ir(i,c,i,K,et.className,s),yt(s)}}}function Fn(i,s){return Oc(i,s,"gutterClick",!0)}function jn(i,s){io(i.display,s)||ma(i,s)||ur(i,s,"contextmenu")||ct||i.display.input.onContextMenu(s)}function ma(i,s){return Kt(i,"gutterContextMenu")?Oc(i,s,"gutterContextMenu",!1):!1}function ou(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-"),xi(i)}var ii={toString:function(){return"CodeMirror.Init"}},Tc={},al={};function Ec(i){var s=i.optionHandlers;function c(u,p,g,y){i.defaults[u]=p,g&&(s[u]=y?function(_,b,E){E!=ii&&g(_,b,E)}:g)}i.defineOption=c,i.Init=ii,c("value","",function(u,p){return u.setValue(p)},!0),c("mode",null,function(u,p){u.doc.modeOption=p,Gl(u)},!0),c("indentUnit",2,Gl,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(u){sa(u),xi(u),rn(u)},!0),c("lineSeparator",null,function(u,p){if(u.doc.lineSep=p,!!p){var g=[],y=u.doc.first;u.doc.iter(function(b){for(var E=0;;){var K=b.text.indexOf(p,E);if(K==-1)break;E=K+p.length,g.push(C(y,K))}y++});for(var _=g.length-1;_>=0;_--)fa(u.doc,p,g[_],C(g[_].line,g[_].ch+p.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(u,p,g){u.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),g!=ii&&u.refresh()}),c("specialCharPlaceholder",Ps,function(u){return u.refresh()},!0),c("electricChars",!0),c("inputStyle",Ot?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(u,p){return u.getInputField().spellcheck=p},!0),c("autocorrect",!1,function(u,p){return u.getInputField().autocorrect=p},!0),c("autocapitalize",!1,function(u,p){return u.getInputField().autocapitalize=p},!0),c("rtlMoveVisually",!re),c("wholeLineUpdateBefore",!0),c("theme","default",function(u){ou(u),Xo(u)},!0),c("keyMap","default",function(u,p,g){var y=rl(p),_=g!=ii&&rl(g);_&&_.detach&&_.detach(u,y),y.attach&&y.attach(u,_||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,Pc,!0),c("gutters",[],function(u,p){u.display.gutterSpecs=Di(p,u.options.lineNumbers),Xo(u)},!0),c("fixedGutter",!0,function(u,p){u.display.gutters.style.left=p?ra(u.display)+"px":"0",u.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(u){return so(u)},!0),c("scrollbarStyle","native",function(u){Fl(u),so(u),u.display.scrollbars.setScrollTop(u.doc.scrollTop),u.display.scrollbars.setScrollLeft(u.doc.scrollLeft)},!0),c("lineNumbers",!1,function(u,p){u.display.gutterSpecs=Di(u.options.gutters,p),Xo(u)},!0),c("firstLineNumber",1,Xo,!0),c("lineNumberFormatter",function(u){return u},Xo,!0),c("showCursorWhenSelecting",!1,Ka,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(u,p){p=="nocursor"&&(oa(u),u.display.input.blur()),u.display.input.readOnlyChanged(p)}),c("screenReaderLabel",null,function(u,p){p=p===""?null:p,u.display.input.screenReaderLabelChanged(p)}),c("disableInput",!1,function(u,p){p||u.display.input.reset()},!0),c("dragDrop",!0,ad),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,Ka,!0),c("singleCursorHeightPerLine",!0,Ka,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,sa,!0),c("addModeClass",!1,sa,!0),c("pollInterval",100),c("undoDepth",200,function(u,p){return u.doc.history.undoDepth=p}),c("historyEventDelay",1250),c("viewportMargin",10,function(u){return u.refresh()},!0),c("maxHighlightLength",1e4,sa,!0),c("moveInputWithCursor",!0,function(u,p){p||u.display.input.resetPosition()}),c("tabindex",null,function(u,p){return u.display.input.getField().tabIndex=p||""}),c("autofocus",null),c("direction","ltr",function(u,p){return u.doc.setDirection(p)},!0),c("phrases",null)}function ad(i,s,c){var u=c&&c!=ii;if(!s!=!u){var p=i.display.dragFunctions,g=s?_e:Ae;g(i.display.scroller,"dragstart",p.start),g(i.display.scroller,"dragenter",p.enter),g(i.display.scroller,"dragover",p.over),g(i.display.scroller,"dragleave",p.leave),g(i.display.scroller,"drop",p.drop)}}function Pc(i){i.options.lineWrapping?($t(i.display.wrapper,"CodeMirror-wrap"),i.display.sizer.style.minWidth="",i.display.sizerWidth=null):($(i.display.wrapper,"CodeMirror-wrap"),ro(i)),Ll(i),rn(i),xi(i),setTimeout(function(){return so(i)},100)}function mr(i,s){var c=this;if(!(this instanceof mr))return new mr(i,s);this.options=s=s?be(s):{},be(Tc,s,!1);var u=s.value;typeof u=="string"?u=new Pn(u,s.mode,null,s.lineSeparator,s.direction):s.mode&&(u.modeOption=s.mode),this.doc=u;var p=new mr.inputStyles[s.inputStyle](this),g=this.display=new jf(i,u,p,s);g.wrapper.CodeMirror=this,ou(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Fl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new jt,keySeq:null,specialChars:null},s.autofocus&&!Ot&&g.input.focus(),D&&F<11&&setTimeout(function(){return c.display.input.reset(!0)},20),Ac(this),Yf(),Mi(this),this.curOp.forceUpdate=!0,zu(this,u),s.autofocus&&!Ot||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&na(c)},20):oa(this);for(var y in al)al.hasOwnProperty(y)&&al[y](this,s[y],ii);Nu(this),s.finishInit&&s.finishInit(this);for(var _=0;_<sl.length;++_)sl[_](this);Li(this),O&&s.lineWrapping&&getComputedStyle(g.lineDiv).textRendering=="optimizelegibility"&&(g.lineDiv.style.textRendering="auto")}mr.defaults=Tc,mr.optionHandlers=al;function Ac(i){var s=i.display;_e(s.scroller,"mousedown",$r(i,nu)),D&&F<11?_e(s.scroller,"dblclick",$r(i,function(b){if(!ur(i,b)){var E=Go(i,b);if(!(!E||Fn(i,b)||io(i.display,b))){N(b);var K=i.findWordAt(E);Zs(i.doc,K.anchor,K.head)}}})):_e(s.scroller,"dblclick",function(b){return ur(i,b)||N(b)}),_e(s.scroller,"contextmenu",function(b){return jn(i,b)}),_e(s.input.getField(),"contextmenu",function(b){s.scroller.contains(b.target)||jn(i,b)});var c,u={end:0};function p(){s.activeTouch&&(c=setTimeout(function(){return s.activeTouch=null},1e3),u=s.activeTouch,u.end=+new Date)}function g(b){if(b.touches.length!=1)return!1;var E=b.touches[0];return E.radiusX<=1&&E.radiusY<=1}function y(b,E){if(E.left==null)return!0;var K=E.left-b.left,et=E.top-b.top;return K*K+et*et>400}_e(s.scroller,"touchstart",function(b){if(!ur(i,b)&&!g(b)&&!Fn(i,b)){s.input.ensurePolled(),clearTimeout(c);var E=+new Date;s.activeTouch={start:E,moved:!1,prev:E-u.end<=300?u:null},b.touches.length==1&&(s.activeTouch.left=b.touches[0].pageX,s.activeTouch.top=b.touches[0].pageY)}}),_e(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),_e(s.scroller,"touchend",function(b){var E=s.activeTouch;if(E&&!io(s,b)&&E.left!=null&&!E.moved&&new Date-E.start<300){var K=i.coordsChar(s.activeTouch,"page"),et;!E.prev||y(E,E.prev)?et=new ar(K,K):!E.prev.prev||y(E,E.prev.prev)?et=i.findWordAt(K):et=new ar(C(K.line,0),we(i.doc,C(K.line+1,0))),i.setSelection(et.anchor,et.head),i.focus(),N(b)}p()}),_e(s.scroller,"touchcancel",p),_e(s.scroller,"scroll",function(){s.scroller.clientHeight&&(aa(i,s.scroller.scrollTop),Ei(i,s.scroller.scrollLeft,!0),ir(i,"scroll",i))}),_e(s.scroller,"mousewheel",function(b){return Hu(i,b)}),_e(s.scroller,"DOMMouseScroll",function(b){return Hu(i,b)}),_e(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(b){ur(i,b)||Ft(b)},over:function(b){ur(i,b)||(qf(i,b),Ft(b))},start:function(b){return rs(i,b)},drop:$r(i,el),leave:function(b){ur(i,b)||uc(i)}};var _=s.input.getField();_e(_,"keyup",function(b){return ol.call(i,b)}),_e(_,"keydown",$r(i,bc)),_e(_,"keypress",$r(i,ru)),_e(_,"focus",function(b){return na(i,b)}),_e(_,"blur",function(b){return oa(i,b)})}var sl=[];mr.defineInitHook=function(i){return sl.push(i)};function us(i,s,c,u){var p=i.doc,g;c==null&&(c="add"),c=="smart"&&(p.mode.indent?g=Qn(i,s).state:c="prev");var y=i.options.tabSize,_=me(p,s),b=vt(_.text,null,y);_.stateAfter&&(_.stateAfter=null);var E=_.text.match(/^\s*/)[0],K;if(!u&&!/\S/.test(_.text))K=0,c="not";else if(c=="smart"&&(K=p.mode.indent(g,_.text.slice(E.length),_.text),K==fe||K>150)){if(!u)return;c="prev"}c=="prev"?s>p.first?K=vt(me(p,s-1).text,null,y):K=0:c=="add"?K=b+i.options.indentUnit:c=="subtract"?K=b-i.options.indentUnit:typeof c=="number"&&(K=b+c),K=Math.max(0,K);var et="",_t=0;if(i.options.indentWithTabs)for(var ft=Math.floor(K/y);ft;--ft)_t+=y,et+="	";if(_t<K&&(et+=lr(K-_t)),et!=E)return fa(p,et,C(s,0),C(s,E.length),"+input"),_.stateAfter=null,!0;for(var Dt=0;Dt<p.sel.ranges.length;Dt++){var It=p.sel.ranges[Dt];if(It.head.line==s&&It.head.ch<E.length){var Zt=C(s,E.length);Xl(p,Dt,new ar(Zt,Zt));break}}}var uo=null;function ll(i){uo=i}function iu(i,s,c,u,p){var g=i.doc;i.display.shift=!1,u||(u=g.sel);var y=+new Date-200,_=p=="paste"||i.state.pasteIncoming>y,b=vn(s),E=null;if(_&&u.ranges.length>1)if(uo&&uo.text.join(`
`)==s){if(u.ranges.length%uo.text.length==0){E=[];for(var K=0;K<uo.text.length;K++)E.push(g.splitLines(uo.text[K]))}}else b.length==u.ranges.length&&i.options.pasteLinesPerSelection&&(E=P(b,function(ee){return[ee]}));for(var et=i.curOp.updateInput,_t=u.ranges.length-1;_t>=0;_t--){var ft=u.ranges[_t],Dt=ft.from(),It=ft.to();ft.empty()&&(c&&c>0?Dt=C(Dt.line,Dt.ch-c):i.state.overwrite&&!_?It=C(It.line,Math.min(me(g,It.line).text.length,It.ch+de(b).length)):_&&uo&&uo.lineWise&&uo.text.join(`
`)==b.join(`
`)&&(Dt=It=C(Dt.line,0)));var Zt={from:Dt,to:It,text:E?E[_t%E.length]:b,origin:p||(_?"paste":i.state.cutIncoming>y?"cut":"+input")};ca(i.doc,Zt),Ir(i,"inputRead",i,Zt)}s&&!_&&Mc(i,s),Yo(i),i.curOp.updateInput<2&&(i.curOp.updateInput=et),i.curOp.typing=!0,i.state.pasteIncoming=i.state.cutIncoming=-1}function kc(i,s){var c=i.clipboardData&&i.clipboardData.getData("Text");if(c)return i.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&s.hasFocus()&&En(s,function(){return iu(s,c,0,null,"paste")}),!0}function Mc(i,s){if(!(!i.options.electricChars||!i.options.smartIndent))for(var c=i.doc.sel,u=c.ranges.length-1;u>=0;u--){var p=c.ranges[u];if(!(p.head.ch>100||u&&c.ranges[u-1].head.line==p.head.line)){var g=i.getModeAt(p.head),y=!1;if(g.electricChars){for(var _=0;_<g.electricChars.length;_++)if(s.indexOf(g.electricChars.charAt(_))>-1){y=us(i,p.head.line,"smart");break}}else g.electricInput&&g.electricInput.test(me(i.doc,p.head.line).text.slice(0,p.head.ch))&&(y=us(i,p.head.line,"smart"));y&&Ir(i,"electricInput",i,p.head.line)}}}function Lc(i){for(var s=[],c=[],u=0;u<i.doc.sel.ranges.length;u++){var p=i.doc.sel.ranges[u].head.line,g={anchor:C(p,0),head:C(p+1,0)};c.push(g),s.push(i.getRange(g.anchor,g.head))}return{text:s,ranges:c}}function au(i,s,c,u){i.setAttribute("autocorrect",c?"on":"off"),i.setAttribute("autocapitalize",u?"on":"off"),i.setAttribute("spellcheck",!!s)}function su(){var i=R("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=R("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return O?i.style.width="1000px":i.setAttribute("wrap","off"),Vt&&(i.style.border="1px solid black"),s}function Dc(i){var s=i.optionHandlers,c=i.helpers={};i.prototype={constructor:i,focus:function(){se(this).focus(),this.display.input.focus()},setOption:function(u,p){var g=this.options,y=g[u];g[u]==p&&u!="mode"||(g[u]=p,s.hasOwnProperty(u)&&$r(this,s[u])(this,p,y),ir(this,"optionChange",this,u))},getOption:function(u){return this.options[u]},getDoc:function(){return this.doc},addKeyMap:function(u,p){this.state.keyMaps[p?"push":"unshift"](rl(u))},removeKeyMap:function(u){for(var p=this.state.keyMaps,g=0;g<p.length;++g)if(p[g]==u||p[g].name==u)return p.splice(g,1),!0},addOverlay:wr(function(u,p){var g=u.token?u:i.getMode(this.options,u);if(g.startState)throw new Error("Overlays may not be stateful.");V(this.state.overlays,{mode:g,modeSpec:u,opaque:p&&p.opaque,priority:p&&p.priority||0},function(y){return y.priority}),this.state.modeGen++,rn(this)}),removeOverlay:wr(function(u){for(var p=this.state.overlays,g=0;g<p.length;++g){var y=p[g].modeSpec;if(y==u||typeof u=="string"&&y.name==u){p.splice(g,1),this.state.modeGen++,rn(this);return}}}),indentLine:wr(function(u,p,g){typeof p!="string"&&typeof p!="number"&&(p==null?p=this.options.smartIndent?"smart":"prev":p=p?"add":"subtract"),Dr(this.doc,u)&&us(this,u,p,g)}),indentSelection:wr(function(u){for(var p=this.doc.sel.ranges,g=-1,y=0;y<p.length;y++){var _=p[y];if(_.empty())_.head.line>g&&(us(this,_.head.line,u,!0),g=_.head.line,y==this.doc.sel.primIndex&&Yo(this));else{var b=_.from(),E=_.to(),K=Math.max(g,b.line);g=Math.min(this.lastLine(),E.line-(E.ch?0:1))+1;for(var et=K;et<g;++et)us(this,et,u);var _t=this.doc.sel.ranges;b.ch==0&&p.length==_t.length&&_t[y].from().ch>0&&Xl(this.doc,y,new ar(b,_t[y].to()),Xt)}}}),getTokenAt:function(u,p){return jr(this,u,p)},getLineTokens:function(u,p){return jr(this,C(u),p,!0)},getTokenTypeAt:function(u){u=we(this.doc,u);var p=Aa(this,me(this.doc,u.line)),g=0,y=(p.length-1)/2,_=u.ch,b;if(_==0)b=p[2];else for(;;){var E=g+y>>1;if((E?p[E*2-1]:0)>=_)y=E;else if(p[E*2+1]<_)g=E+1;else{b=p[E*2+2];break}}var K=b?b.indexOf("overlay "):-1;return K<0?b:K==0?null:b.slice(0,K-1)},getModeAt:function(u){var p=this.doc.mode;return p.innerMode?i.innerMode(p,this.getTokenAt(u).state).mode:p},getHelper:function(u,p){return this.getHelpers(u,p)[0]},getHelpers:function(u,p){var g=[];if(!c.hasOwnProperty(p))return g;var y=c[p],_=this.getModeAt(u);if(typeof _[p]=="string")y[_[p]]&&g.push(y[_[p]]);else if(_[p])for(var b=0;b<_[p].length;b++){var E=y[_[p][b]];E&&g.push(E)}else _.helperType&&y[_.helperType]?g.push(y[_.helperType]):y[_.name]&&g.push(y[_.name]);for(var K=0;K<y._global.length;K++){var et=y._global[K];et.pred(_,this)&&Nt(g,et.val)==-1&&g.push(et.val)}return g},getStateAfter:function(u,p){var g=this.doc;return u=er(g,u??g.first+g.size-1),Qn(this,u+1,p).state},cursorCoords:function(u,p){var g,y=this.doc.sel.primary();return u==null?g=y.head:typeof u=="object"?g=we(this.doc,u):g=u?y.from():y.to(),Dn(this,g,p||"page")},charCoords:function(u,p){return Ns(this,we(this.doc,u),p||"page")},coordsChar:function(u,p){return u=ku(this,u,p||"page"),Al(this,u.left,u.top)},lineAtHeight:function(u,p){return u=ku(this,{top:u,left:0},p||"page").top,tn(this.doc,u+this.display.viewOffset)},heightAtLine:function(u,p,g){var y=!1,_;if(typeof u=="number"){var b=this.doc.first+this.doc.size-1;u<this.doc.first?u=this.doc.first:u>b&&(u=b,y=!0),_=me(this.doc,u)}else _=u;return Rs(this,_,{top:0,left:0},p||"page",g||y).top+(y?this.doc.height-or(_):0)},defaultTextHeight:function(){return ta(this.display)},defaultCharWidth:function(){return ea(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(u,p,g,y,_){var b=this.display;u=Dn(this,we(this.doc,u));var E=u.bottom,K=u.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),b.sizer.appendChild(p),y=="over")E=u.top;else if(y=="above"||y=="near"){var et=Math.max(b.wrapper.clientHeight,this.doc.height),_t=Math.max(b.sizer.clientWidth,b.lineSpace.clientWidth);(y=="above"||u.bottom+p.offsetHeight>et)&&u.top>p.offsetHeight?E=u.top-p.offsetHeight:u.bottom+p.offsetHeight<=et&&(E=u.bottom),K+p.offsetWidth>_t&&(K=_t-p.offsetWidth)}p.style.top=E+"px",p.style.left=p.style.right="",_=="right"?(K=b.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(_=="left"?K=0:_=="middle"&&(K=(b.sizer.clientWidth-p.offsetWidth)/2),p.style.left=K+"px"),g&&xf(this,{left:K,top:E,right:K+p.offsetWidth,bottom:E+p.offsetHeight})},triggerOnKeyDown:wr(bc),triggerOnKeyPress:wr(ru),triggerOnKeyUp:ol,triggerOnMouseDown:wr(nu),execCommand:function(u){if(as.hasOwnProperty(u))return as[u].call(null,this)},triggerElectric:wr(function(u){Mc(this,u)}),findPosH:function(u,p,g,y){var _=1;p<0&&(_=-1,p=-p);for(var b=we(this.doc,u),E=0;E<p&&(b=lu(this.doc,b,_,g,y),!b.hitSide);++E);return b},moveH:wr(function(u,p){var g=this;this.extendSelectionsBy(function(y){return g.display.shift||g.doc.extend||y.empty()?lu(g.doc,y.head,u,p,g.options.rtlMoveVisually):u<0?y.from():y.to()},Ke)}),deleteH:wr(function(u,p){var g=this.doc.sel,y=this.doc;g.somethingSelected()?y.replaceSelection("",null,"+delete"):Ii(this,function(_){var b=lu(y,_.head,u,p,!1);return u<0?{from:b,to:_.head}:{from:_.head,to:b}})}),findPosV:function(u,p,g,y){var _=1,b=y;p<0&&(_=-1,p=-p);for(var E=we(this.doc,u),K=0;K<p;++K){var et=Dn(this,E,"div");if(b==null?b=et.left:et.left=b,E=jc(this,et,_,g),E.hitSide)break}return E},moveV:wr(function(u,p){var g=this,y=this.doc,_=[],b=!this.display.shift&&!y.extend&&y.sel.somethingSelected();if(y.extendSelectionsBy(function(K){if(b)return u<0?K.from():K.to();var et=Dn(g,K.head,"div");K.goalColumn!=null&&(et.left=K.goalColumn),_.push(et.left);var _t=jc(g,et,u,p);return p=="page"&&K==y.sel.primary()&&ia(g,Ns(g,_t,"div").top-et.top),_t},Ke),_.length)for(var E=0;E<y.sel.ranges.length;E++)y.sel.ranges[E].goalColumn=_[E]}),findWordAt:function(u){var p=this.doc,g=me(p,u.line).text,y=u.ch,_=u.ch;if(g){var b=this.getHelper(u,"wordChars");(u.sticky=="before"||_==g.length)&&y?--y:++_;for(var E=g.charAt(y),K=xt(E,b)?function(et){return xt(et,b)}:/\s/.test(E)?function(et){return/\s/.test(et)}:function(et){return!/\s/.test(et)&&!xt(et)};y>0&&K(g.charAt(y-1));)--y;for(;_<g.length&&K(g.charAt(_));)++_}return new ar(C(u.line,y),C(u.line,_))},toggleOverwrite:function(u){u!=null&&u==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?$t(this.display.cursorDiv,"CodeMirror-overwrite"):$(this.display.cursorDiv,"CodeMirror-overwrite"),ir(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Pt(Ut(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:wr(function(u,p){Ga(this,u,p)}),getScrollInfo:function(){var u=this.display.scroller;return{left:u.scrollLeft,top:u.scrollTop,height:u.scrollHeight-M(this)-this.display.barHeight,width:u.scrollWidth-M(this)-this.display.barWidth,clientHeight:nt(this),clientWidth:J(this)}},scrollIntoView:wr(function(u,p){u==null?(u={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof u=="number"?u={from:C(u,0),to:null}:u.from==null&&(u={from:u,to:null}),u.to||(u.to=u.from),u.margin=p||0,u.from.line!=null?Sf(this,u):$a(this,u.from,u.to,u.margin)}),setSize:wr(function(u,p){var g=this,y=function(b){return typeof b=="number"||/^\d+$/.test(String(b))?b+"px":b};u!=null&&(this.display.wrapper.style.width=y(u)),p!=null&&(this.display.wrapper.style.height=y(p)),this.options.lineWrapping&&Pu(this);var _=this.display.viewFrom;this.doc.iter(_,this.display.viewTo,function(b){if(b.widgets){for(var E=0;E<b.widgets.length;E++)if(b.widgets[E].noHScroll){$o(g,_,"widget");break}}++_}),this.curOp.forceUpdate=!0,ir(this,"refresh",this)}),operation:function(u){return En(this,u)},startOperation:function(){return Mi(this)},endOperation:function(){return Li(this)},refresh:wr(function(){var u=this.display.cachedTextHeight;rn(this),this.curOp.forceUpdate=!0,xi(this),Ga(this,this.doc.scrollLeft,this.doc.scrollTop),Wl(this.display),(u==null||Math.abs(u-ta(this.display))>.5||this.options.lineWrapping)&&Ll(this),ir(this,"refresh",this)}),swapDoc:wr(function(u){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),zu(this,u),xi(this),this.display.input.reset(),Ga(this,u.scrollLeft,u.scrollTop),this.curOp.forceScroll=!0,Ir(this,"swapDoc",this,p),p}),phrase:function(u){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,u)?p[u]:u},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Gn(i),i.registerHelper=function(u,p,g){c.hasOwnProperty(u)||(c[u]=i[u]={_global:[]}),c[u][p]=g},i.registerGlobalHelper=function(u,p,g,y){i.registerHelper(u,p,y),c[u]._global.push({pred:g,val:y})}}function lu(i,s,c,u,p){var g=s,y=c,_=me(i,s.line),b=p&&i.direction=="rtl"?-c:c;function E(){var pe=s.line+b;return pe<i.first||pe>=i.first+i.size?!1:(s=new C(pe,s.ch,s.sticky),_=me(i,pe))}function K(pe){var ne;if(u=="codepoint"){var he=_.text.charCodeAt(s.ch+(c>0?0:-1));if(isNaN(he))ne=null;else{var Te=c>0?he>=55296&&he<56320:he>=56320&&he<57343;ne=new C(s.line,Math.max(0,Math.min(_.text.length,s.ch+c*(Te?2:1))),-c)}}else p?ne=gc(i.cm,_,s,c):ne=Jl(_,s,c);if(ne==null)if(!pe&&E())s=Ql(p,i.cm,_,s.line,b);else return!1;else s=ne;return!0}if(u=="char"||u=="codepoint")K();else if(u=="column")K(!0);else if(u=="word"||u=="group")for(var et=null,_t=u=="group",ft=i.cm&&i.cm.getHelper(s,"wordChars"),Dt=!0;!(c<0&&!K(!Dt));Dt=!1){var It=_.text.charAt(s.ch)||`
`,Zt=xt(It,ft)?"w":_t&&It==`
`?"n":!_t||/\s/.test(It)?null:"p";if(_t&&!Dt&&!Zt&&(Zt="s"),et&&et!=Zt){c<0&&(c=1,K(),s.sticky="after");break}if(Zt&&(et=Zt),c>0&&!K(!Dt))break}var ee=ti(i,s,g,y,!0);return Rt(g,ee)&&(ee.hitSide=!0),ee}function jc(i,s,c,u){var p=i.doc,g=s.left,y;if(u=="page"){var _=Math.min(i.display.wrapper.clientHeight,se(i).innerHeight||p(i).documentElement.clientHeight),b=Math.max(_-.5*ta(i.display),3);y=(c>0?s.bottom:s.top)+c*b}else u=="line"&&(y=c>0?s.bottom+3:s.top-3);for(var E;E=Al(i,g,y),!!E.outside;){if(c<0?y<=0:y>=p.height){E.hitSide=!0;break}y+=c*5}return E}var tr=function(i){this.cm=i,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new jt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};tr.prototype.init=function(i){var s=this,c=this,u=c.cm,p=c.div=i.lineDiv;p.contentEditable=!0,au(p,u.options.spellcheck,u.options.autocorrect,u.options.autocapitalize);function g(_){for(var b=_.target;b;b=b.parentNode){if(b==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(b.className))break}return!1}_e(p,"paste",function(_){!g(_)||ur(u,_)||kc(_,u)||F<=11&&setTimeout($r(u,function(){return s.updateFromDOM()}),20)}),_e(p,"compositionstart",function(_){s.composing={data:_.data,done:!1}}),_e(p,"compositionupdate",function(_){s.composing||(s.composing={data:_.data,done:!1})}),_e(p,"compositionend",function(_){s.composing&&(_.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),_e(p,"touchstart",function(){return c.forceCompositionEnd()}),_e(p,"input",function(){s.composing||s.readFromDOMSoon()});function y(_){if(!(!g(_)||ur(u,_))){if(u.somethingSelected())ll({lineWise:!1,text:u.getSelections()}),_.type=="cut"&&u.replaceSelection("",null,"cut");else if(u.options.lineWiseCopyCut){var b=Lc(u);ll({lineWise:!0,text:b.text}),_.type=="cut"&&u.operation(function(){u.setSelections(b.ranges,0,Xt),u.replaceSelection("",null,"cut")})}else return;if(_.clipboardData){_.clipboardData.clearData();var E=uo.text.join(`
`);if(_.clipboardData.setData("Text",E),_.clipboardData.getData("Text")==E){_.preventDefault();return}}var K=su(),et=K.firstChild;au(et),u.display.lineSpace.insertBefore(K,u.display.lineSpace.firstChild),et.value=uo.text.join(`
`);var _t=Pt(p.ownerDocument);Ct(et),setTimeout(function(){u.display.lineSpace.removeChild(K),_t.focus(),_t==p&&c.showPrimarySelection()},50)}}_e(p,"copy",y),_e(p,"cut",y)},tr.prototype.screenReaderLabelChanged=function(i){i?this.div.setAttribute("aria-label",i):this.div.removeAttribute("aria-label")},tr.prototype.prepareSelection=function(){var i=Lu(this.cm,!1);return i.focus=Pt(this.div.ownerDocument)==this.div,i},tr.prototype.showSelection=function(i,s){!i||!this.cm.display.view.length||((i.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(i))},tr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},tr.prototype.showPrimarySelection=function(){var i=this.getSelection(),s=this.cm,c=s.doc.sel.primary(),u=c.from(),p=c.to();if(s.display.viewTo==s.display.viewFrom||u.line>=s.display.viewTo||p.line<s.display.viewFrom){i.removeAllRanges();return}var g=cs(s,i.anchorNode,i.anchorOffset),y=cs(s,i.focusNode,i.focusOffset);if(!(g&&!g.bad&&y&&!y.bad&&U(Xe(g,y),u)==0&&U(je(g,y),p)==0)){var _=s.display.view,b=u.line>=s.display.viewFrom&&Ic(s,u)||{node:_[0].measure.map[2],offset:0},E=p.line<s.display.viewTo&&Ic(s,p);if(!E){var K=_[_.length-1].measure,et=K.maps?K.maps[K.maps.length-1]:K.map;E={node:et[et.length-1],offset:et[et.length-2]-et[et.length-3]}}if(!b||!E){i.removeAllRanges();return}var _t=i.rangeCount&&i.getRangeAt(0),ft;try{ft=A(b.node,b.offset,E.offset,E.node)}catch{}ft&&(!at&&s.state.focused?(i.collapse(b.node,b.offset),ft.collapsed||(i.removeAllRanges(),i.addRange(ft))):(i.removeAllRanges(),i.addRange(ft)),_t&&i.anchorNode==null?i.addRange(_t):at&&this.startGracePeriod()),this.rememberSelection()}},tr.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){i.gracePeriod=!1,i.selectionChanged()&&i.cm.operation(function(){return i.cm.curOp.selectionChanged=!0})},20)},tr.prototype.showMultipleSelections=function(i){rt(this.cm.display.cursorDiv,i.cursors),rt(this.cm.display.selectionDiv,i.selection)},tr.prototype.rememberSelection=function(){var i=this.getSelection();this.lastAnchorNode=i.anchorNode,this.lastAnchorOffset=i.anchorOffset,this.lastFocusNode=i.focusNode,this.lastFocusOffset=i.focusOffset},tr.prototype.selectionInEditor=function(){var i=this.getSelection();if(!i.rangeCount)return!1;var s=i.getRangeAt(0).commonAncestorContainer;return Mt(this.div,s)},tr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Pt(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},tr.prototype.blur=function(){this.div.blur()},tr.prototype.getField=function(){return this.div},tr.prototype.supportsTouch=function(){return!0},tr.prototype.receivedFocus=function(){var i=this,s=this;this.selectionInEditor()?setTimeout(function(){return i.pollSelection()},20):En(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function c(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,c))}this.polling.set(this.cm.options.pollInterval,c)},tr.prototype.selectionChanged=function(){var i=this.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset},tr.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var i=this.getSelection(),s=this.cm;if(Bt&&k&&this.cm.display.gutterSpecs.length&&sd(i.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var c=cs(s,i.anchorNode,i.anchorOffset),u=cs(s,i.focusNode,i.focusOffset);c&&u&&En(s,function(){dn(s.doc,Zo(c,u),Xt),(c.bad||u.bad)&&(s.curOp.selectionChanged=!0)})}}},tr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i=this.cm,s=i.display,c=i.doc.sel.primary(),u=c.from(),p=c.to();if(u.ch==0&&u.line>i.firstLine()&&(u=C(u.line-1,me(i.doc,u.line-1).length)),p.ch==me(i.doc,p.line).text.length&&p.line<i.lastLine()&&(p=C(p.line+1,0)),u.line<s.viewFrom||p.line>s.viewTo-1)return!1;var g,y,_;u.line==s.viewFrom||(g=Si(i,u.line))==0?(y=Ye(s.view[0].line),_=s.view[0].node):(y=Ye(s.view[g].line),_=s.view[g-1].node.nextSibling);var b=Si(i,p.line),E,K;if(b==s.view.length-1?(E=s.viewTo-1,K=s.lineDiv.lastChild):(E=Ye(s.view[b+1].line)-1,K=s.view[b+1].node.previousSibling),!_)return!1;for(var et=i.doc.splitLines(ld(i,_,K,y,E)),_t=un(i.doc,C(y,0),C(E,me(i.doc,E).text.length));et.length>1&&_t.length>1;)if(de(et)==de(_t))et.pop(),_t.pop(),E--;else if(et[0]==_t[0])et.shift(),_t.shift(),y++;else break;for(var ft=0,Dt=0,It=et[0],Zt=_t[0],ee=Math.min(It.length,Zt.length);ft<ee&&It.charCodeAt(ft)==Zt.charCodeAt(ft);)++ft;for(var pe=de(et),ne=de(_t),he=Math.min(pe.length-(et.length==1?ft:0),ne.length-(_t.length==1?ft:0));Dt<he&&pe.charCodeAt(pe.length-Dt-1)==ne.charCodeAt(ne.length-Dt-1);)++Dt;if(et.length==1&&_t.length==1&&y==u.line)for(;ft&&ft>u.ch&&pe.charCodeAt(pe.length-Dt-1)==ne.charCodeAt(ne.length-Dt-1);)ft--,Dt++;et[et.length-1]=pe.slice(0,pe.length-Dt).replace(/^\u200b+/,""),et[0]=et[0].slice(ft).replace(/\u200b+$/,"");var Te=C(y,ft),Oe=C(E,_t.length?de(_t).length-Dt:0);if(et.length>1||et[0]||U(Te,Oe))return fa(i.doc,et,Te,Oe,"+input"),!0},tr.prototype.ensurePolled=function(){this.forceCompositionEnd()},tr.prototype.reset=function(){this.forceCompositionEnd()},tr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},tr.prototype.readFromDOMSoon=function(){var i=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(i.readDOMTimeout=null,i.composing)if(i.composing.done)i.composing=null;else return;i.updateFromDOM()},80))},tr.prototype.updateFromDOM=function(){var i=this;(this.cm.isReadOnly()||!this.pollContent())&&En(this.cm,function(){return rn(i.cm)})},tr.prototype.setUneditable=function(i){i.contentEditable="false"},tr.prototype.onKeyPress=function(i){i.charCode==0||this.composing||(i.preventDefault(),this.cm.isReadOnly()||$r(this.cm,iu)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0))},tr.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")},tr.prototype.onContextMenu=function(){},tr.prototype.resetPosition=function(){},tr.prototype.needsContentAttribute=!0;function Ic(i,s){var c=Fe(i,s.line);if(!c||c.hidden)return null;var u=me(i.doc,s.line),p=gt(c,u,s.line),g=$e(u,i.doc.direction),y="left";if(g){var _=Qe(g,s.ch);y=_%2?"right":"left"}var b=Qi(p.map,s.ch,y);return b.offset=b.collapse=="right"?b.end:b.start,b}function sd(i){for(var s=i;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function _a(i,s){return s&&(i.bad=!0),i}function ld(i,s,c,u,p){var g="",y=!1,_=i.doc.lineSeparator(),b=!1;function E(ft){return function(Dt){return Dt.id==ft}}function K(){y&&(g+=_,b&&(g+=_),y=b=!1)}function et(ft){ft&&(K(),g+=ft)}function _t(ft){if(ft.nodeType==1){var Dt=ft.getAttribute("cm-text");if(Dt){et(Dt);return}var It=ft.getAttribute("cm-marker"),Zt;if(It){var ee=i.findMarks(C(u,0),C(p+1,0),E(+It));ee.length&&(Zt=ee[0].find(0))&&et(un(i.doc,Zt.from,Zt.to).join(_));return}if(ft.getAttribute("contenteditable")=="false")return;var pe=/^(pre|div|p|li|table|br)$/i.test(ft.nodeName);if(!/^br$/i.test(ft.nodeName)&&ft.textContent.length==0)return;pe&&K();for(var ne=0;ne<ft.childNodes.length;ne++)_t(ft.childNodes[ne]);/^(pre|p)$/i.test(ft.nodeName)&&(b=!0),pe&&(y=!0)}else ft.nodeType==3&&et(ft.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;_t(s),s!=c;)s=s.nextSibling,b=!1;return g}function cs(i,s,c){var u;if(s==i.display.lineDiv){if(u=i.display.lineDiv.childNodes[c],!u)return _a(i.clipPos(C(i.display.viewTo-1)),!0);s=null,c=0}else for(u=s;;u=u.parentNode){if(!u||u==i.display.lineDiv)return null;if(u.parentNode&&u.parentNode==i.display.lineDiv)break}for(var p=0;p<i.display.view.length;p++){var g=i.display.view[p];if(g.node==u)return ud(g,s,c)}}function ud(i,s,c){var u=i.text.firstChild,p=!1;if(!s||!Mt(u,s))return _a(C(Ye(i.line),0),!0);if(s==u&&(p=!0,s=u.childNodes[c],c=0,!s)){var g=i.rest?de(i.rest):i.line;return _a(C(Ye(g),g.text.length),p)}var y=s.nodeType==3?s:null,_=s;for(!y&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(y=s.firstChild,c&&(c=y.nodeValue.length));_.parentNode!=u;)_=_.parentNode;var b=i.measure,E=b.maps;function K(Zt,ee,pe){for(var ne=-1;ne<(E?E.length:0);ne++)for(var he=ne<0?b.map:E[ne],Te=0;Te<he.length;Te+=3){var Oe=he[Te+2];if(Oe==Zt||Oe==ee){var We=Ye(ne<0?i.line:i.rest[ne]),vr=he[Te]+pe;return(pe<0||Oe!=Zt)&&(vr=he[Te+(pe?1:0)]),C(We,vr)}}}var et=K(y,_,c);if(et)return _a(et,p);for(var _t=_.nextSibling,ft=y?y.nodeValue.length-c:0;_t;_t=_t.nextSibling){if(et=K(_t,_t.firstChild,0),et)return _a(C(et.line,et.ch-ft),p);ft+=_t.textContent.length}for(var Dt=_.previousSibling,It=c;Dt;Dt=Dt.previousSibling){if(et=K(Dt,Dt.firstChild,-1),et)return _a(C(et.line,et.ch+It),p);It+=Dt.textContent.length}}var Rr=function(i){this.cm=i,this.prevInput="",this.pollingFast=!1,this.polling=new jt,this.hasSelection=!1,this.composing=null,this.resetting=!1};Rr.prototype.init=function(i){var s=this,c=this,u=this.cm;this.createField(i);var p=this.textarea;i.wrapper.insertBefore(this.wrapper,i.wrapper.firstChild),Vt&&(p.style.width="0px"),_e(p,"input",function(){D&&F>=9&&s.hasSelection&&(s.hasSelection=null),c.poll()}),_e(p,"paste",function(y){ur(u,y)||kc(y,u)||(u.state.pasteIncoming=+new Date,c.fastPoll())});function g(y){if(!ur(u,y)){if(u.somethingSelected())ll({lineWise:!1,text:u.getSelections()});else if(u.options.lineWiseCopyCut){var _=Lc(u);ll({lineWise:!0,text:_.text}),y.type=="cut"?u.setSelections(_.ranges,null,Xt):(c.prevInput="",p.value=_.text.join(`
`),Ct(p))}else return;y.type=="cut"&&(u.state.cutIncoming=+new Date)}}_e(p,"cut",g),_e(p,"copy",g),_e(i.scroller,"paste",function(y){if(!(io(i,y)||ur(u,y))){if(!p.dispatchEvent){u.state.pasteIncoming=+new Date,c.focus();return}var _=new Event("paste");_.clipboardData=y.clipboardData,p.dispatchEvent(_)}}),_e(i.lineSpace,"selectstart",function(y){io(i,y)||N(y)}),_e(p,"compositionstart",function(){var y=u.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:y,range:u.markText(y,u.getCursor("to"),{className:"CodeMirror-composing"})}}),_e(p,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},Rr.prototype.createField=function(i){this.wrapper=su(),this.textarea=this.wrapper.firstChild;var s=this.cm.options;au(this.textarea,s.spellcheck,s.autocorrect,s.autocapitalize)},Rr.prototype.screenReaderLabelChanged=function(i){i?this.textarea.setAttribute("aria-label",i):this.textarea.removeAttribute("aria-label")},Rr.prototype.prepareSelection=function(){var i=this.cm,s=i.display,c=i.doc,u=Lu(i);if(i.options.moveInputWithCursor){var p=Dn(i,c.sel.primary().head,"div"),g=s.wrapper.getBoundingClientRect(),y=s.lineDiv.getBoundingClientRect();u.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+y.top-g.top)),u.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+y.left-g.left))}return u},Rr.prototype.showSelection=function(i){var s=this.cm,c=s.display;rt(c.cursorDiv,i.cursors),rt(c.selectionDiv,i.selection),i.teTop!=null&&(this.wrapper.style.top=i.teTop+"px",this.wrapper.style.left=i.teLeft+"px")},Rr.prototype.reset=function(i){if(!(this.contextMenuPending||this.composing&&i)){var s=this.cm;if(this.resetting=!0,s.somethingSelected()){this.prevInput="";var c=s.getSelection();this.textarea.value=c,s.state.focused&&Ct(this.textarea),D&&F>=9&&(this.hasSelection=c)}else i||(this.prevInput=this.textarea.value="",D&&F>=9&&(this.hasSelection=null));this.resetting=!1}},Rr.prototype.getField=function(){return this.textarea},Rr.prototype.supportsTouch=function(){return!1},Rr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Ot||Pt(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Rr.prototype.blur=function(){this.textarea.blur()},Rr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Rr.prototype.receivedFocus=function(){this.slowPoll()},Rr.prototype.slowPoll=function(){var i=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){i.poll(),i.cm.state.focused&&i.slowPoll()})},Rr.prototype.fastPoll=function(){var i=!1,s=this;s.pollingFast=!0;function c(){var u=s.poll();!u&&!i?(i=!0,s.polling.set(60,c)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,c)},Rr.prototype.poll=function(){var i=this,s=this.cm,c=this.textarea,u=this.prevInput;if(this.contextMenuPending||this.resetting||!s.state.focused||xn(c)&&!u&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=c.value;if(p==u&&!s.somethingSelected())return!1;if(D&&F>=9&&this.hasSelection===p||mt&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var g=p.charCodeAt(0);if(g==8203&&!u&&(u="​"),g==8666)return this.reset(),this.cm.execCommand("undo")}for(var y=0,_=Math.min(u.length,p.length);y<_&&u.charCodeAt(y)==p.charCodeAt(y);)++y;return En(s,function(){iu(s,p.slice(y),u.length-y,null,i.composing?"*compose":null),p.length>1e3||p.indexOf(`
`)>-1?c.value=i.prevInput="":i.prevInput=p,i.composing&&(i.composing.range.clear(),i.composing.range=s.markText(i.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Rr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Rr.prototype.onKeyPress=function(){D&&F>=9&&(this.hasSelection=null),this.fastPoll()},Rr.prototype.onContextMenu=function(i){var s=this,c=s.cm,u=c.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var g=Go(c,i),y=u.scroller.scrollTop;if(!g||H)return;var _=c.options.resetSelectionOnContextMenu;_&&c.doc.sel.contains(g)==-1&&$r(c,dn)(c.doc,Zo(g),Xt);var b=p.style.cssText,E=s.wrapper.style.cssText,K=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",p.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(i.clientY-K.top-5)+"px; left: "+(i.clientX-K.left-5)+`px;
      z-index: 1000; background: `+(D?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var et;O&&(et=p.ownerDocument.defaultView.scrollY),u.input.focus(),O&&p.ownerDocument.defaultView.scrollTo(null,et),u.input.reset(),c.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=ft,u.selForContextMenu=c.doc.sel,clearTimeout(u.detectingSelectAll);function _t(){if(p.selectionStart!=null){var It=c.somethingSelected(),Zt="​"+(It?p.value:"");p.value="⇚",p.value=Zt,s.prevInput=It?"":"​",p.selectionStart=1,p.selectionEnd=Zt.length,u.selForContextMenu=c.doc.sel}}function ft(){if(s.contextMenuPending==ft&&(s.contextMenuPending=!1,s.wrapper.style.cssText=E,p.style.cssText=b,D&&F<9&&u.scrollbars.setScrollTop(u.scroller.scrollTop=y),p.selectionStart!=null)){(!D||D&&F<9)&&_t();var It=0,Zt=function(){u.selForContextMenu==c.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput=="​"?$r(c,ec)(c):It++<10?u.detectingSelectAll=setTimeout(Zt,500):(u.selForContextMenu=null,u.input.reset())};u.detectingSelectAll=setTimeout(Zt,200)}}if(D&&F>=9&&_t(),ct){Ft(i);var Dt=function(){Ae(window,"mouseup",Dt),setTimeout(ft,20)};_e(window,"mouseup",Dt)}else setTimeout(ft,50)},Rr.prototype.readOnlyChanged=function(i){i||this.reset(),this.textarea.disabled=i=="nocursor",this.textarea.readOnly=!!i},Rr.prototype.setUneditable=function(){},Rr.prototype.needsContentAttribute=!1;function cd(i,s){if(s=s?be(s):{},s.value=i.value,!s.tabindex&&i.tabIndex&&(s.tabindex=i.tabIndex),!s.placeholder&&i.placeholder&&(s.placeholder=i.placeholder),s.autofocus==null){var c=Pt(i.ownerDocument);s.autofocus=c==i||i.getAttribute("autofocus")!=null&&c==document.body}function u(){i.value=_.getValue()}var p;if(i.form&&(_e(i.form,"submit",u),!s.leaveSubmitMethodAlone)){var g=i.form;p=g.submit;try{var y=g.submit=function(){u(),g.submit=p,g.submit(),g.submit=y}}catch{}}s.finishInit=function(b){b.save=u,b.getTextArea=function(){return i},b.toTextArea=function(){b.toTextArea=isNaN,u(),i.parentNode.removeChild(b.getWrapperElement()),i.style.display="",i.form&&(Ae(i.form,"submit",u),!s.leaveSubmitMethodAlone&&typeof i.form.submit=="function"&&(i.form.submit=p))}},i.style.display="none";var _=mr(function(b){return i.parentNode.insertBefore(b,i.nextSibling)},s);return _}function Rc(i){i.off=Ae,i.on=_e,i.wheelEventPixels=Fu,i.Doc=Pn,i.splitLines=vn,i.countColumn=vt,i.findColumn=gr,i.isWordChar=X,i.Pass=fe,i.signal=ir,i.Line=no,i.changeEnd=Jo,i.scrollbarModel=ki,i.Pos=C,i.cmpPos=U,i.modes=Wr,i.mimeModes=Sn,i.resolveMode=Rn,i.getMode=Qr,i.modeExtensions=zr,i.extendMode=qn,i.copyState=Mn,i.startState=Lr,i.innerMode=On,i.commands=as,i.keyMap=mo,i.keyName=vc,i.isModifierKey=pc,i.lookupKey=ga,i.normalizeKeyMap=ni,i.StringStream=nr,i.SharedTextMarker=es,i.TextMarker=ri,i.LineWidget=ha,i.e_preventDefault=N,i.e_stopPropagation=it,i.e_stop=Ft,i.addClass=$t,i.contains=Mt,i.rmClass=$,i.keyNames=Po}Ec(mr),Dc(mr);var fd="iter insert remove copy getEditor constructor".split(" ");for(var ul in Pn.prototype)Pn.prototype.hasOwnProperty(ul)&&Nt(fd,ul)<0&&(mr.prototype[ul]=function(i){return function(){return i.apply(this.doc,arguments)}}(Pn.prototype[ul]));return Gn(Pn),mr.inputStyles={textarea:Rr,contenteditable:tr},mr.defineMode=function(i){!mr.defaults.mode&&i!="null"&&(mr.defaults.mode=i),$n.apply(this,arguments)},mr.defineMIME=Do,mr.defineMode("null",function(){return{token:function(i){return i.skipToEnd()}}}),mr.defineMIME("text/plain","null"),mr.defineExtension=function(i,s){mr.prototype[i]=s},mr.defineDocExtension=function(i,s){Pn.prototype[i]=s},mr.fromTextArea=cd,Rc(mr),mr.version="5.65.15",mr})},629:(S,tt,ut)=>{(function(at){at(ut(631))})(function(at){at.defineMode("css",function($,Q){var rt=Q.inline;Q.propertyKeywords||(Q=at.resolveMode("text/css"));var R=$.indentUnit,lt=Q.tokenHooks,A=Q.documentTypes||{},Mt=Q.mediaTypes||{},Pt=Q.mediaFeatures||{},$t=Q.mediaValueKeywords||{},xe=Q.propertyKeywords||{},Ct=Q.nonStandardPropertyKeywords||{},Ut=Q.fontProperties||{},se=Q.counterDescriptors||{},Wt=Q.colorKeywords||{},be=Q.valueKeywords||{},vt=Q.allowNested,jt=Q.lineComment,Nt=Q.supportsAtComponent===!0,oe=$.highlightNonStandardPropertyKeywords!==!1,fe,Xt;function ve(X,xt){return fe=xt,X}function Ke(X,xt){var dt=X.next();if(lt[dt]){var Ce=lt[dt](X,xt);if(Ce!==!1)return Ce}if(dt=="@")return X.eatWhile(/[\w\\\-]/),ve("def",X.current());if(dt=="="||(dt=="~"||dt=="|")&&X.eat("="))return ve(null,"compare");if(dt=='"'||dt=="'")return xt.tokenize=gr(dt),xt.tokenize(X,xt);if(dt=="#")return X.eatWhile(/[\w\\\-]/),ve("atom","hash");if(dt=="!")return X.match(/^\s*\w*/),ve("keyword","important");if(/\d/.test(dt)||dt=="."&&X.eat(/\d/))return X.eatWhile(/[\w.%]/),ve("number","unit");if(dt==="-"){if(/[\d.]/.test(X.peek()))return X.eatWhile(/[\w.%]/),ve("number","unit");if(X.match(/^-[\w\\\-]*/))return X.eatWhile(/[\w\\\-]/),X.match(/^\s*:/,!1)?ve("variable-2","variable-definition"):ve("variable-2","variable");if(X.match(/^\w+-/))return ve("meta","meta")}else return/[,+>*\/]/.test(dt)?ve(null,"select-op"):dt=="."&&X.match(/^-?[_a-z][_a-z0-9-]*/i)?ve("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(dt)?ve(null,dt):X.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(X.current())&&(xt.tokenize=Or),ve("variable callee","variable")):/[\w\\\-]/.test(dt)?(X.eatWhile(/[\w\\\-]/),ve("property","word")):ve(null,null)}function gr(X){return function(xt,dt){for(var Ce=!1,Ge;(Ge=xt.next())!=null;){if(Ge==X&&!Ce){X==")"&&xt.backUp(1);break}Ce=!Ce&&Ge=="\\"}return(Ge==X||!Ce&&X!=")")&&(dt.tokenize=null),ve("string","string")}}function Or(X,xt){return X.next(),X.match(/^\s*[\"\')]/,!1)?xt.tokenize=null:xt.tokenize=gr(")"),ve(null,"(")}function lr(X,xt,dt){this.type=X,this.indent=xt,this.prev=dt}function de(X,xt,dt,Ce){return X.context=new lr(dt,xt.indentation()+(Ce===!1?0:R),X.context),dt}function P(X){return X.context.prev&&(X.context=X.context.prev),X.context.type}function V(X,xt,dt){return Et[dt.context.type](X,xt,dt)}function Z(X,xt,dt,Ce){for(var Ge=Ce||1;Ge>0;Ge--)dt.context=dt.context.prev;return V(X,xt,dt)}function pt(X){var xt=X.current().toLowerCase();be.hasOwnProperty(xt)?Xt="atom":Wt.hasOwnProperty(xt)?Xt="keyword":Xt="variable"}var Et={};return Et.top=function(X,xt,dt){if(X=="{")return de(dt,xt,"block");if(X=="}"&&dt.context.prev)return P(dt);if(Nt&&/@component/i.test(X))return de(dt,xt,"atComponentBlock");if(/^@(-moz-)?document$/i.test(X))return de(dt,xt,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(X))return de(dt,xt,"atBlock");if(/^@(font-face|counter-style)/i.test(X))return dt.stateArg=X,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(X))return"keyframes";if(X&&X.charAt(0)=="@")return de(dt,xt,"at");if(X=="hash")Xt="builtin";else if(X=="word")Xt="tag";else{if(X=="variable-definition")return"maybeprop";if(X=="interpolation")return de(dt,xt,"interpolation");if(X==":")return"pseudo";if(vt&&X=="(")return de(dt,xt,"parens")}return dt.context.type},Et.block=function(X,xt,dt){if(X=="word"){var Ce=xt.current().toLowerCase();return xe.hasOwnProperty(Ce)?(Xt="property","maybeprop"):Ct.hasOwnProperty(Ce)?(Xt=oe?"string-2":"property","maybeprop"):vt?(Xt=xt.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Xt+=" error","maybeprop")}else return X=="meta"?"block":!vt&&(X=="hash"||X=="qualifier")?(Xt="error","block"):Et.top(X,xt,dt)},Et.maybeprop=function(X,xt,dt){return X==":"?de(dt,xt,"prop"):V(X,xt,dt)},Et.prop=function(X,xt,dt){if(X==";")return P(dt);if(X=="{"&&vt)return de(dt,xt,"propBlock");if(X=="}"||X=="{")return Z(X,xt,dt);if(X=="(")return de(dt,xt,"parens");if(X=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(xt.current()))Xt+=" error";else if(X=="word")pt(xt);else if(X=="interpolation")return de(dt,xt,"interpolation");return"prop"},Et.propBlock=function(X,xt,dt){return X=="}"?P(dt):X=="word"?(Xt="property","maybeprop"):dt.context.type},Et.parens=function(X,xt,dt){return X=="{"||X=="}"?Z(X,xt,dt):X==")"?P(dt):X=="("?de(dt,xt,"parens"):X=="interpolation"?de(dt,xt,"interpolation"):(X=="word"&&pt(xt),"parens")},Et.pseudo=function(X,xt,dt){return X=="meta"?"pseudo":X=="word"?(Xt="variable-3",dt.context.type):V(X,xt,dt)},Et.documentTypes=function(X,xt,dt){return X=="word"&&A.hasOwnProperty(xt.current())?(Xt="tag",dt.context.type):Et.atBlock(X,xt,dt)},Et.atBlock=function(X,xt,dt){if(X=="(")return de(dt,xt,"atBlock_parens");if(X=="}"||X==";")return Z(X,xt,dt);if(X=="{")return P(dt)&&de(dt,xt,vt?"block":"top");if(X=="interpolation")return de(dt,xt,"interpolation");if(X=="word"){var Ce=xt.current().toLowerCase();Ce=="only"||Ce=="not"||Ce=="and"||Ce=="or"?Xt="keyword":Mt.hasOwnProperty(Ce)?Xt="attribute":Pt.hasOwnProperty(Ce)?Xt="property":$t.hasOwnProperty(Ce)?Xt="keyword":xe.hasOwnProperty(Ce)?Xt="property":Ct.hasOwnProperty(Ce)?Xt=oe?"string-2":"property":be.hasOwnProperty(Ce)?Xt="atom":Wt.hasOwnProperty(Ce)?Xt="keyword":Xt="error"}return dt.context.type},Et.atComponentBlock=function(X,xt,dt){return X=="}"?Z(X,xt,dt):X=="{"?P(dt)&&de(dt,xt,vt?"block":"top",!1):(X=="word"&&(Xt="error"),dt.context.type)},Et.atBlock_parens=function(X,xt,dt){return X==")"?P(dt):X=="{"||X=="}"?Z(X,xt,dt,2):Et.atBlock(X,xt,dt)},Et.restricted_atBlock_before=function(X,xt,dt){return X=="{"?de(dt,xt,"restricted_atBlock"):X=="word"&&dt.stateArg=="@counter-style"?(Xt="variable","restricted_atBlock_before"):V(X,xt,dt)},Et.restricted_atBlock=function(X,xt,dt){return X=="}"?(dt.stateArg=null,P(dt)):X=="word"?(dt.stateArg=="@font-face"&&!Ut.hasOwnProperty(xt.current().toLowerCase())||dt.stateArg=="@counter-style"&&!se.hasOwnProperty(xt.current().toLowerCase())?Xt="error":Xt="property","maybeprop"):"restricted_atBlock"},Et.keyframes=function(X,xt,dt){return X=="word"?(Xt="variable","keyframes"):X=="{"?de(dt,xt,"top"):V(X,xt,dt)},Et.at=function(X,xt,dt){return X==";"?P(dt):X=="{"||X=="}"?Z(X,xt,dt):(X=="word"?Xt="tag":X=="hash"&&(Xt="builtin"),"at")},Et.interpolation=function(X,xt,dt){return X=="}"?P(dt):X=="{"||X==";"?Z(X,xt,dt):(X=="word"?Xt="variable":X!="variable"&&X!="("&&X!=")"&&(Xt="error"),"interpolation")},{startState:function(X){return{tokenize:null,state:rt?"block":"top",stateArg:null,context:new lr(rt?"block":"top",X||0,null)}},token:function(X,xt){if(!xt.tokenize&&X.eatSpace())return null;var dt=(xt.tokenize||Ke)(X,xt);return dt&&typeof dt=="object"&&(fe=dt[1],dt=dt[0]),Xt=dt,fe!="comment"&&(xt.state=Et[xt.state](fe,X,xt)),Xt},indent:function(X,xt){var dt=X.context,Ce=xt&&xt.charAt(0),Ge=dt.indent;return dt.type=="prop"&&(Ce=="}"||Ce==")")&&(dt=dt.prev),dt.prev&&(Ce=="}"&&(dt.type=="block"||dt.type=="top"||dt.type=="interpolation"||dt.type=="restricted_atBlock")?(dt=dt.prev,Ge=dt.indent):(Ce==")"&&(dt.type=="parens"||dt.type=="atBlock_parens")||Ce=="{"&&(dt.type=="at"||dt.type=="atBlock"))&&(Ge=Math.max(0,dt.indent-R))),Ge},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:jt,fold:"brace"}});function At($){for(var Q={},rt=0;rt<$.length;++rt)Q[$[rt].toLowerCase()]=!0;return Q}var Y=["domain","regexp","url","url-prefix"],G=At(Y),D=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],F=At(D),O=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],L=At(O),k=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],j=At(k),H=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],ot=At(H),ht=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],kt=At(ht),Vt=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],Bt=At(Vt),Ot=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],mt=At(Ot),Yt=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],re=At(Yt),ae=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Qt=At(ae),ct=Y.concat(D).concat(O).concat(k).concat(H).concat(ht).concat(Yt).concat(ae);at.registerHelper("hintWords","css",ct);function Lt($,Q){for(var rt=!1,R;(R=$.next())!=null;){if(rt&&R=="/"){Q.tokenize=null;break}rt=R=="*"}return["comment","comment"]}at.defineMIME("text/css",{documentTypes:G,mediaTypes:F,mediaFeatures:L,mediaValueKeywords:j,propertyKeywords:ot,nonStandardPropertyKeywords:kt,fontProperties:Bt,counterDescriptors:mt,colorKeywords:re,valueKeywords:Qt,tokenHooks:{"/":function($,Q){return $.eat("*")?(Q.tokenize=Lt,Lt($,Q)):!1}},name:"css"}),at.defineMIME("text/x-scss",{mediaTypes:F,mediaFeatures:L,mediaValueKeywords:j,propertyKeywords:ot,nonStandardPropertyKeywords:kt,colorKeywords:re,valueKeywords:Qt,fontProperties:Bt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function($,Q){return $.eat("/")?($.skipToEnd(),["comment","comment"]):$.eat("*")?(Q.tokenize=Lt,Lt($,Q)):["operator","operator"]},":":function($){return $.match(/^\s*\{/,!1)?[null,null]:!1},$:function($){return $.match(/^[\w-]+/),$.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function($){return $.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),at.defineMIME("text/x-less",{mediaTypes:F,mediaFeatures:L,mediaValueKeywords:j,propertyKeywords:ot,nonStandardPropertyKeywords:kt,colorKeywords:re,valueKeywords:Qt,fontProperties:Bt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function($,Q){return $.eat("/")?($.skipToEnd(),["comment","comment"]):$.eat("*")?(Q.tokenize=Lt,Lt($,Q)):["operator","operator"]},"@":function($){return $.eat("{")?[null,"interpolation"]:$.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:($.eatWhile(/[\w\\\-]/),$.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),at.defineMIME("text/x-gss",{documentTypes:G,mediaTypes:F,mediaFeatures:L,propertyKeywords:ot,nonStandardPropertyKeywords:kt,fontProperties:Bt,counterDescriptors:mt,colorKeywords:re,valueKeywords:Qt,supportsAtComponent:!0,tokenHooks:{"/":function($,Q){return $.eat("*")?(Q.tokenize=Lt,Lt($,Q)):!1}},name:"css",helperType:"gss"})})},531:(S,tt,ut)=>{(function(at){at(ut(631),ut(589),ut(876),ut(629))})(function(at){var At={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function Y(j,H,ot){var ht=j.current(),kt=ht.search(H);return kt>-1?j.backUp(ht.length-kt):ht.match(/<\/?$/)&&(j.backUp(ht.length),j.match(H,!1)||j.match(ht)),ot}var G={};function D(j){var H=G[j];return H||(G[j]=new RegExp("\\s+"+j+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function F(j,H){var ot=j.match(D(H));return ot?/^\s*(.*?)\s*$/.exec(ot[2])[1]:""}function O(j,H){return new RegExp((H?"^":"")+"</\\s*"+j+"\\s*>","i")}function L(j,H){for(var ot in j)for(var ht=H[ot]||(H[ot]=[]),kt=j[ot],Vt=kt.length-1;Vt>=0;Vt--)ht.unshift(kt[Vt])}function k(j,H){for(var ot=0;ot<j.length;ot++){var ht=j[ot];if(!ht[0]||ht[1].test(F(H,ht[0])))return ht[2]}}at.defineMode("htmlmixed",function(j,H){var ot=at.getMode(j,{name:"xml",htmlMode:!0,multilineTagIndentFactor:H.multilineTagIndentFactor,multilineTagIndentPastTag:H.multilineTagIndentPastTag,allowMissingTagName:H.allowMissingTagName}),ht={},kt=H&&H.tags,Vt=H&&H.scriptTypes;if(L(At,ht),kt&&L(kt,ht),Vt)for(var Bt=Vt.length-1;Bt>=0;Bt--)ht.script.unshift(["type",Vt[Bt].matches,Vt[Bt].mode]);function Ot(mt,Yt){var re=ot.token(mt,Yt.htmlState),ae=/\btag\b/.test(re),Qt;if(ae&&!/[<>\s\/]/.test(mt.current())&&(Qt=Yt.htmlState.tagName&&Yt.htmlState.tagName.toLowerCase())&&ht.hasOwnProperty(Qt))Yt.inTag=Qt+" ";else if(Yt.inTag&&ae&&/>$/.test(mt.current())){var ct=/^([\S]+) (.*)/.exec(Yt.inTag);Yt.inTag=null;var Lt=mt.current()==">"&&k(ht[ct[1]],ct[2]),$=at.getMode(j,Lt),Q=O(ct[1],!0),rt=O(ct[1],!1);Yt.token=function(R,lt){return R.match(Q,!1)?(lt.token=Ot,lt.localState=lt.localMode=null,null):Y(R,rt,lt.localMode.token(R,lt.localState))},Yt.localMode=$,Yt.localState=at.startState($,ot.indent(Yt.htmlState,"",""))}else Yt.inTag&&(Yt.inTag+=mt.current(),mt.eol()&&(Yt.inTag+=" "));return re}return{startState:function(){var mt=at.startState(ot);return{token:Ot,inTag:null,localMode:null,localState:null,htmlState:mt}},copyState:function(mt){var Yt;return mt.localState&&(Yt=at.copyState(mt.localMode,mt.localState)),{token:mt.token,inTag:mt.inTag,localMode:mt.localMode,localState:Yt,htmlState:at.copyState(ot,mt.htmlState)}},token:function(mt,Yt){return Yt.token(mt,Yt)},indent:function(mt,Yt,re){return!mt.localMode||/^\s*<\//.test(Yt)?ot.indent(mt.htmlState,Yt,re):mt.localMode.indent?mt.localMode.indent(mt.localState,Yt,re):at.Pass},innerMode:function(mt){return{state:mt.localState||mt.htmlState,mode:mt.localMode||ot}}}},"xml","javascript","css"),at.defineMIME("text/html","htmlmixed")})},876:(S,tt,ut)=>{(function(at){at(ut(631))})(function(at){at.defineMode("javascript",function(At,Y){var G=At.indentUnit,D=Y.statementIndent,F=Y.jsonld,O=Y.json||F,L=Y.trackScope!==!1,k=Y.typescript,j=Y.wordCharacters||/[\w$\xa1-\uffff]/,H=function(){function C(we){return{type:we,style:"keyword"}}var U=C("keyword a"),Rt=C("keyword b"),Gt=C("keyword c"),je=C("keyword d"),Xe=C("operator"),er={type:"atom",style:"atom"};return{if:C("if"),while:U,with:U,else:Rt,do:Rt,try:Rt,finally:Rt,return:je,break:je,continue:je,new:C("new"),delete:Gt,void:Gt,throw:Gt,debugger:C("debugger"),var:C("var"),const:C("var"),let:C("var"),function:C("function"),catch:C("catch"),for:C("for"),switch:C("switch"),case:C("case"),default:C("default"),in:Xe,typeof:Xe,instanceof:Xe,true:er,false:er,null:er,undefined:er,NaN:er,Infinity:er,this:C("this"),class:C("class"),super:C("atom"),yield:Gt,export:C("export"),import:C("import"),extends:Gt,await:Gt}}(),ot=/[+\-*&%=<>!?|~^@]/,ht=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function kt(C){for(var U=!1,Rt,Gt=!1;(Rt=C.next())!=null;){if(!U){if(Rt=="/"&&!Gt)return;Rt=="["?Gt=!0:Gt&&Rt=="]"&&(Gt=!1)}U=!U&&Rt=="\\"}}var Vt,Bt;function Ot(C,U,Rt){return Vt=C,Bt=Rt,U}function mt(C,U){var Rt=C.next();if(Rt=='"'||Rt=="'")return U.tokenize=Yt(Rt),U.tokenize(C,U);if(Rt=="."&&C.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Ot("number","number");if(Rt=="."&&C.match(".."))return Ot("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Rt))return Ot(Rt);if(Rt=="="&&C.eat(">"))return Ot("=>","operator");if(Rt=="0"&&C.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Ot("number","number");if(/\d/.test(Rt))return C.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Ot("number","number");if(Rt=="/")return C.eat("*")?(U.tokenize=re,re(C,U)):C.eat("/")?(C.skipToEnd(),Ot("comment","comment")):gn(C,U,1)?(kt(C),C.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Ot("regexp","string-2")):(C.eat("="),Ot("operator","operator",C.current()));if(Rt=="`")return U.tokenize=ae,ae(C,U);if(Rt=="#"&&C.peek()=="!")return C.skipToEnd(),Ot("meta","meta");if(Rt=="#"&&C.eatWhile(j))return Ot("variable","property");if(Rt=="<"&&C.match("!--")||Rt=="-"&&C.match("->")&&!/\S/.test(C.string.slice(0,C.start)))return C.skipToEnd(),Ot("comment","comment");if(ot.test(Rt))return(Rt!=">"||!U.lexical||U.lexical.type!=">")&&(C.eat("=")?(Rt=="!"||Rt=="=")&&C.eat("="):/[<>*+\-|&?]/.test(Rt)&&(C.eat(Rt),Rt==">"&&C.eat(Rt))),Rt=="?"&&C.eat(".")?Ot("."):Ot("operator","operator",C.current());if(j.test(Rt)){C.eatWhile(j);var Gt=C.current();if(U.lastType!="."){if(H.propertyIsEnumerable(Gt)){var je=H[Gt];return Ot(je.type,je.style,Gt)}if(Gt=="async"&&C.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Ot("async","keyword",Gt)}return Ot("variable","variable",Gt)}}function Yt(C){return function(U,Rt){var Gt=!1,je;if(F&&U.peek()=="@"&&U.match(ht))return Rt.tokenize=mt,Ot("jsonld-keyword","meta");for(;(je=U.next())!=null&&!(je==C&&!Gt);)Gt=!Gt&&je=="\\";return Gt||(Rt.tokenize=mt),Ot("string","string")}}function re(C,U){for(var Rt=!1,Gt;Gt=C.next();){if(Gt=="/"&&Rt){U.tokenize=mt;break}Rt=Gt=="*"}return Ot("comment","comment")}function ae(C,U){for(var Rt=!1,Gt;(Gt=C.next())!=null;){if(!Rt&&(Gt=="`"||Gt=="$"&&C.eat("{"))){U.tokenize=mt;break}Rt=!Rt&&Gt=="\\"}return Ot("quasi","string-2",C.current())}var Qt="([{}])";function ct(C,U){U.fatArrowAt&&(U.fatArrowAt=null);var Rt=C.string.indexOf("=>",C.start);if(!(Rt<0)){if(k){var Gt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(C.string.slice(C.start,Rt));Gt&&(Rt=Gt.index)}for(var je=0,Xe=!1,er=Rt-1;er>=0;--er){var we=C.string.charAt(er),_r=Qt.indexOf(we);if(_r>=0&&_r<3){if(!je){++er;break}if(--je==0){we=="("&&(Xe=!0);break}}else if(_r>=3&&_r<6)++je;else if(j.test(we))Xe=!0;else if(/["'\/`]/.test(we))for(;;--er){if(er==0)return;var wo=C.string.charAt(er-1);if(wo==we&&C.string.charAt(er-2)!="\\"){er--;break}}else if(Xe&&!je){++er;break}}Xe&&!je&&(U.fatArrowAt=er)}}var Lt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function $(C,U,Rt,Gt,je,Xe){this.indented=C,this.column=U,this.type=Rt,this.prev=je,this.info=Xe,Gt!=null&&(this.align=Gt)}function Q(C,U){if(!L)return!1;for(var Rt=C.localVars;Rt;Rt=Rt.next)if(Rt.name==U)return!0;for(var Gt=C.context;Gt;Gt=Gt.prev)for(var Rt=Gt.vars;Rt;Rt=Rt.next)if(Rt.name==U)return!0}function rt(C,U,Rt,Gt,je){var Xe=C.cc;for(R.state=C,R.stream=je,R.marked=null,R.cc=Xe,R.style=U,C.lexical.hasOwnProperty("align")||(C.lexical.align=!0);;){var er=Xe.length?Xe.pop():O?ve:fe;if(er(Rt,Gt)){for(;Xe.length&&Xe[Xe.length-1].lex;)Xe.pop()();return R.marked?R.marked:Rt=="variable"&&Q(C,Gt)?"variable-2":U}}}var R={state:null,column:null,marked:null,cc:null};function lt(){for(var C=arguments.length-1;C>=0;C--)R.cc.push(arguments[C])}function A(){return lt.apply(null,arguments),!0}function Mt(C,U){for(var Rt=U;Rt;Rt=Rt.next)if(Rt.name==C)return!0;return!1}function Pt(C){var U=R.state;if(R.marked="def",!!L){if(U.context){if(U.lexical.info=="var"&&U.context&&U.context.block){var Rt=$t(C,U.context);if(Rt!=null){U.context=Rt;return}}else if(!Mt(C,U.localVars)){U.localVars=new Ut(C,U.localVars);return}}Y.globalVars&&!Mt(C,U.globalVars)&&(U.globalVars=new Ut(C,U.globalVars))}}function $t(C,U){if(U)if(U.block){var Rt=$t(C,U.prev);return Rt?Rt==U.prev?U:new Ct(Rt,U.vars,!0):null}else return Mt(C,U.vars)?U:new Ct(U.prev,new Ut(C,U.vars),!1);else return null}function xe(C){return C=="public"||C=="private"||C=="protected"||C=="abstract"||C=="readonly"}function Ct(C,U,Rt){this.prev=C,this.vars=U,this.block=Rt}function Ut(C,U){this.name=C,this.next=U}var se=new Ut("this",new Ut("arguments",null));function Wt(){R.state.context=new Ct(R.state.context,R.state.localVars,!1),R.state.localVars=se}function be(){R.state.context=new Ct(R.state.context,R.state.localVars,!0),R.state.localVars=null}Wt.lex=be.lex=!0;function vt(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}vt.lex=!0;function jt(C,U){var Rt=function(){var Gt=R.state,je=Gt.indented;if(Gt.lexical.type=="stat")je=Gt.lexical.indented;else for(var Xe=Gt.lexical;Xe&&Xe.type==")"&&Xe.align;Xe=Xe.prev)je=Xe.indented;Gt.lexical=new $(je,R.stream.column(),C,null,Gt.lexical,U)};return Rt.lex=!0,Rt}function Nt(){var C=R.state;C.lexical.prev&&(C.lexical.type==")"&&(C.indented=C.lexical.indented),C.lexical=C.lexical.prev)}Nt.lex=!0;function oe(C){function U(Rt){return Rt==C?A():C==";"||Rt=="}"||Rt==")"||Rt=="]"?lt():A(U)}return U}function fe(C,U){return C=="var"?A(jt("vardef",U),ke,oe(";"),Nt):C=="keyword a"?A(jt("form"),gr,fe,Nt):C=="keyword b"?A(jt("form"),fe,Nt):C=="keyword d"?R.stream.match(/^\s*$/,!1)?A():A(jt("stat"),lr,oe(";"),Nt):C=="debugger"?A(oe(";")):C=="{"?A(jt("}"),be,De,Nt,vt):C==";"?A():C=="if"?(R.state.lexical.info=="else"&&R.state.cc[R.state.cc.length-1]==Nt&&R.state.cc.pop()(),A(jt("form"),gr,fe,Nt,vn)):C=="function"?A(Cr):C=="for"?A(jt("form"),be,xn,fe,vt,Nt):C=="class"||k&&U=="interface"?(R.marked="keyword",A(jt("form",C=="class"?C:U),Rn,Nt)):C=="variable"?k&&U=="declare"?(R.marked="keyword",A(fe)):k&&(U=="module"||U=="enum"||U=="type")&&R.stream.match(/^\s*\w/,!1)?(R.marked="keyword",U=="enum"?A(Ye):U=="type"?A(Sn,oe("operator"),Ae,oe(";")):A(jt("form"),qe,oe("{"),jt("}"),De,Nt,Nt)):k&&U=="namespace"?(R.marked="keyword",A(jt("form"),ve,fe,Nt)):k&&U=="abstract"?(R.marked="keyword",A(fe)):A(jt("stat"),Ce):C=="switch"?A(jt("form"),gr,oe("{"),jt("}","switch"),be,De,Nt,Nt,vt):C=="case"?A(ve,oe(":")):C=="default"?A(oe(":")):C=="catch"?A(jt("form"),Wt,Xt,fe,Nt,vt):C=="export"?A(jt("stat"),Mn,Nt):C=="import"?A(jt("stat"),Lr,Nt):C=="async"?A(fe):U=="@"?A(ve,fe):lt(jt("stat"),ve,oe(";"),Nt)}function Xt(C){if(C=="(")return A($n,oe(")"))}function ve(C,U){return Or(C,U,!1)}function Ke(C,U){return Or(C,U,!0)}function gr(C){return C!="("?lt():A(jt(")"),lr,oe(")"),Nt)}function Or(C,U,Rt){if(R.state.fatArrowAt==R.stream.start){var Gt=Rt?Et:pt;if(C=="(")return A(Wt,jt(")"),ge($n,")"),Nt,oe("=>"),Gt,vt);if(C=="variable")return lt(Wt,qe,oe("=>"),Gt,vt)}var je=Rt?P:de;return Lt.hasOwnProperty(C)?A(je):C=="function"?A(Cr,je):C=="class"||k&&U=="interface"?(R.marked="keyword",A(jt("form"),Do,Nt)):C=="keyword c"||C=="async"?A(Rt?Ke:ve):C=="("?A(jt(")"),lr,oe(")"),Nt,je):C=="operator"||C=="spread"?A(Rt?Ke:ve):C=="["?A(jt("]"),Vr,Nt,je):C=="{"?Qe(Re,"}",null,je):C=="quasi"?lt(V,je):C=="new"?A(X(Rt)):A()}function lr(C){return C.match(/[;\}\)\],]/)?lt():lt(ve)}function de(C,U){return C==","?A(lr):P(C,U,!1)}function P(C,U,Rt){var Gt=Rt==!1?de:P,je=Rt==!1?ve:Ke;if(C=="=>")return A(Wt,Rt?Et:pt,vt);if(C=="operator")return/\+\+|--/.test(U)||k&&U=="!"?A(Gt):k&&U=="<"&&R.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?A(jt(">"),ge(Ae,">"),Nt,Gt):U=="?"?A(ve,oe(":"),je):A(je);if(C=="quasi")return lt(V,Gt);if(C!=";"){if(C=="(")return Qe(Ke,")","call",Gt);if(C==".")return A(Ge,Gt);if(C=="[")return A(jt("]"),lr,oe("]"),Nt,Gt);if(k&&U=="as")return R.marked="keyword",A(Ae,Gt);if(C=="regexp")return R.state.lastType=R.marked="operator",R.stream.backUp(R.stream.pos-R.stream.start-1),A(je)}}function V(C,U){return C!="quasi"?lt():U.slice(U.length-2)!="${"?A(V):A(lr,Z)}function Z(C){if(C=="}")return R.marked="string-2",R.state.tokenize=ae,A(V)}function pt(C){return ct(R.stream,R.state),lt(C=="{"?fe:ve)}function Et(C){return ct(R.stream,R.state),lt(C=="{"?fe:Ke)}function X(C){return function(U){return U=="."?A(C?dt:xt):U=="variable"&&k?A(yt,C?P:de):lt(C?Ke:ve)}}function xt(C,U){if(U=="target")return R.marked="keyword",A(de)}function dt(C,U){if(U=="target")return R.marked="keyword",A(P)}function Ce(C){return C==":"?A(Nt,fe):lt(de,oe(";"),Nt)}function Ge(C){if(C=="variable")return R.marked="property",A()}function Re(C,U){if(C=="async")return R.marked="property",A(Re);if(C=="variable"||R.style=="keyword"){if(R.marked="property",U=="get"||U=="set")return A(Ue);var Rt;return k&&R.state.fatArrowAt==R.stream.start&&(Rt=R.stream.match(/^\s*:\s*/,!1))&&(R.state.fatArrowAt=R.stream.pos+Rt[0].length),A(rr)}else{if(C=="number"||C=="string")return R.marked=F?"property":R.style+" property",A(rr);if(C=="jsonld-keyword")return A(rr);if(k&&xe(U))return R.marked="keyword",A(Re);if(C=="[")return A(ve,$e,oe("]"),rr);if(C=="spread")return A(Ke,rr);if(U=="*")return R.marked="keyword",A(Re);if(C==":")return lt(rr)}}function Ue(C){return C!="variable"?lt(rr):(R.marked="property",A(Cr))}function rr(C){if(C==":")return A(Ke);if(C=="(")return lt(Cr)}function ge(C,U,Rt){function Gt(je,Xe){if(Rt?Rt.indexOf(je)>-1:je==","){var er=R.state.lexical;return er.info=="call"&&(er.pos=(er.pos||0)+1),A(function(we,_r){return we==U||_r==U?lt():lt(C)},Gt)}return je==U||Xe==U?A():Rt&&Rt.indexOf(";")>-1?lt(C):A(oe(U))}return function(je,Xe){return je==U||Xe==U?A():lt(C,Gt)}}function Qe(C,U,Rt){for(var Gt=3;Gt<arguments.length;Gt++)R.cc.push(arguments[Gt]);return A(jt(U,Rt),ge(C,U),Nt)}function De(C){return C=="}"?A():lt(fe,De)}function $e(C,U){if(k){if(C==":")return A(Ae);if(U=="?")return A($e)}}function kr(C,U){if(k&&(C==":"||U=="in"))return A(Ae)}function _e(C){if(k&&C==":")return R.stream.match(/^\s*\w+\s+is\b/,!1)?A(ve,Tr,Ae):A(Ae)}function Tr(C,U){if(U=="is")return R.marked="keyword",A()}function Ae(C,U){if(U=="keyof"||U=="typeof"||U=="infer"||U=="readonly")return R.marked="keyword",A(U=="typeof"?Ke:Ae);if(C=="variable"||U=="void")return R.marked="type",A(it);if(U=="|"||U=="&")return A(Ae);if(C=="string"||C=="number"||C=="atom")return A(it);if(C=="[")return A(jt("]"),ge(Ae,"]",","),Nt,it);if(C=="{")return A(jt("}"),ur,Nt,it);if(C=="(")return A(ge(N,")"),ir,it);if(C=="<")return A(ge(Ae,">"),Ae);if(C=="quasi")return lt(Kt,it)}function ir(C){if(C=="=>")return A(Ae)}function ur(C){return C.match(/[\}\)\]]/)?A():C==","||C==";"?A(ur):lt(fr,ur)}function fr(C,U){if(C=="variable"||R.style=="keyword")return R.marked="property",A(fr);if(U=="?"||C=="number"||C=="string")return A(fr);if(C==":")return A(Ae);if(C=="[")return A(oe("variable"),kr,oe("]"),fr);if(C=="(")return lt(Wr,fr);if(!C.match(/[;\}\)\],]/))return A()}function Kt(C,U){return C!="quasi"?lt():U.slice(U.length-2)!="${"?A(Kt):A(Ae,Gn)}function Gn(C){if(C=="}")return R.marked="string-2",R.state.tokenize=ae,A(Kt)}function N(C,U){return C=="variable"&&R.stream.match(/^\s*[?:]/,!1)||U=="?"?A(N):C==":"?A(Ae):C=="spread"?A(N):lt(Ae)}function it(C,U){if(U=="<")return A(jt(">"),ge(Ae,">"),Nt,it);if(U=="|"||C=="."||U=="&")return A(Ae);if(C=="[")return A(Ae,oe("]"),it);if(U=="extends"||U=="implements")return R.marked="keyword",A(Ae);if(U=="?")return A(Ae,oe(":"),Ae)}function yt(C,U){if(U=="<")return A(jt(">"),ge(Ae,">"),Nt,it)}function Ft(){return lt(Ae,ce)}function ce(C,U){if(U=="=")return A(Ae)}function ke(C,U){return U=="enum"?(R.marked="keyword",A(Ye)):lt(qe,$e,br,Lo)}function qe(C,U){if(k&&xe(U))return R.marked="keyword",A(qe);if(C=="variable")return Pt(U),A();if(C=="spread")return A(qe);if(C=="[")return Qe(Cn,"]");if(C=="{")return Qe(ln,"}")}function ln(C,U){return C=="variable"&&!R.stream.match(/^\s*:/,!1)?(Pt(U),A(br)):(C=="variable"&&(R.marked="property"),C=="spread"?A(qe):C=="}"?lt():C=="["?A(ve,oe("]"),oe(":"),ln):A(oe(":"),qe,br))}function Cn(){return lt(qe,br)}function br(C,U){if(U=="=")return A(Ke)}function Lo(C){if(C==",")return A(ke)}function vn(C,U){if(C=="keyword b"&&U=="else")return A(jt("form","else"),fe,Nt)}function xn(C,U){if(U=="await")return A(xn);if(C=="(")return A(jt(")"),_o,Nt)}function _o(C){return C=="var"?A(ke,Mr):C=="variable"?A(Mr):lt(Mr)}function Mr(C,U){return C==")"?A():C==";"?A(Mr):U=="in"||U=="of"?(R.marked="keyword",A(ve,Mr)):lt(ve,Mr)}function Cr(C,U){if(U=="*")return R.marked="keyword",A(Cr);if(C=="variable")return Pt(U),A(Cr);if(C=="(")return A(Wt,jt(")"),ge($n,")"),Nt,_e,fe,vt);if(k&&U=="<")return A(jt(">"),ge(Ft,">"),Nt,Cr)}function Wr(C,U){if(U=="*")return R.marked="keyword",A(Wr);if(C=="variable")return Pt(U),A(Wr);if(C=="(")return A(Wt,jt(")"),ge($n,")"),Nt,_e,vt);if(k&&U=="<")return A(jt(">"),ge(Ft,">"),Nt,Wr)}function Sn(C,U){if(C=="keyword"||C=="variable")return R.marked="type",A(Sn);if(U=="<")return A(jt(">"),ge(Ft,">"),Nt)}function $n(C,U){return U=="@"&&A(ve,$n),C=="spread"?A($n):k&&xe(U)?(R.marked="keyword",A($n)):k&&C=="this"?A($e,br):lt(qe,$e,br)}function Do(C,U){return C=="variable"?Rn(C,U):Qr(C,U)}function Rn(C,U){if(C=="variable")return Pt(U),A(Qr)}function Qr(C,U){if(U=="<")return A(jt(">"),ge(Ft,">"),Nt,Qr);if(U=="extends"||U=="implements"||k&&C==",")return U=="implements"&&(R.marked="keyword"),A(k?Ae:ve,Qr);if(C=="{")return A(jt("}"),zr,Nt)}function zr(C,U){if(C=="async"||C=="variable"&&(U=="static"||U=="get"||U=="set"||k&&xe(U))&&R.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return R.marked="keyword",A(zr);if(C=="variable"||R.style=="keyword")return R.marked="property",A(qn,zr);if(C=="number"||C=="string")return A(qn,zr);if(C=="[")return A(ve,$e,oe("]"),qn,zr);if(U=="*")return R.marked="keyword",A(zr);if(k&&C=="(")return lt(Wr,zr);if(C==";"||C==",")return A(zr);if(C=="}")return A();if(U=="@")return A(ve,zr)}function qn(C,U){if(U=="!"||U=="?")return A(qn);if(C==":")return A(Ae,br);if(U=="=")return A(Ke);var Rt=R.state.lexical.prev,Gt=Rt&&Rt.info=="interface";return lt(Gt?Wr:Cr)}function Mn(C,U){return U=="*"?(R.marked="keyword",A(yr,oe(";"))):U=="default"?(R.marked="keyword",A(ve,oe(";"))):C=="{"?A(ge(On,"}"),yr,oe(";")):lt(fe)}function On(C,U){if(U=="as")return R.marked="keyword",A(oe("variable"));if(C=="variable")return lt(Ke,On)}function Lr(C){return C=="string"?A():C=="("?lt(ve):C=="."?lt(de):lt(nr,me,yr)}function nr(C,U){return C=="{"?Qe(nr,"}"):(C=="variable"&&Pt(U),U=="*"&&(R.marked="keyword"),A(un))}function me(C){if(C==",")return A(nr,me)}function un(C,U){if(U=="as")return R.marked="keyword",A(nr)}function yr(C,U){if(U=="from")return R.marked="keyword",A(ve)}function Vr(C){return C=="]"?A():lt(ge(Ke,"]"))}function Ye(){return lt(jt("form"),qe,oe("{"),jt("}"),ge(tn,"}"),Nt,Nt)}function tn(){return lt(qe,br)}function Dr(C,U){return C.lastType=="operator"||C.lastType==","||ot.test(U.charAt(0))||/[,.]/.test(U.charAt(0))}function gn(C,U,Rt){return U.tokenize==mt&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(U.lastType)||U.lastType=="quasi"&&/\{\s*$/.test(C.string.slice(0,C.pos-(Rt||0)))}return{startState:function(C){var U={tokenize:mt,lastType:"sof",cc:[],lexical:new $((C||0)-G,0,"block",!1),localVars:Y.localVars,context:Y.localVars&&new Ct(null,null,!1),indented:C||0};return Y.globalVars&&typeof Y.globalVars=="object"&&(U.globalVars=Y.globalVars),U},token:function(C,U){if(C.sol()&&(U.lexical.hasOwnProperty("align")||(U.lexical.align=!1),U.indented=C.indentation(),ct(C,U)),U.tokenize!=re&&C.eatSpace())return null;var Rt=U.tokenize(C,U);return Vt=="comment"?Rt:(U.lastType=Vt=="operator"&&(Bt=="++"||Bt=="--")?"incdec":Vt,rt(U,Rt,Vt,Bt,C))},indent:function(C,U){if(C.tokenize==re||C.tokenize==ae)return at.Pass;if(C.tokenize!=mt)return 0;var Rt=U&&U.charAt(0),Gt=C.lexical,je;if(!/^\s*else\b/.test(U))for(var Xe=C.cc.length-1;Xe>=0;--Xe){var er=C.cc[Xe];if(er==Nt)Gt=Gt.prev;else if(er!=vn&&er!=vt)break}for(;(Gt.type=="stat"||Gt.type=="form")&&(Rt=="}"||(je=C.cc[C.cc.length-1])&&(je==de||je==P)&&!/^[,\.=+\-*:?[\(]/.test(U));)Gt=Gt.prev;D&&Gt.type==")"&&Gt.prev.type=="stat"&&(Gt=Gt.prev);var we=Gt.type,_r=Rt==we;return we=="vardef"?Gt.indented+(C.lastType=="operator"||C.lastType==","?Gt.info.length+1:0):we=="form"&&Rt=="{"?Gt.indented:we=="form"?Gt.indented+G:we=="stat"?Gt.indented+(Dr(C,U)?D||G:0):Gt.info=="switch"&&!_r&&Y.doubleIndentSwitch!=!1?Gt.indented+(/^(?:case|default)\b/.test(U)?G:2*G):Gt.align?Gt.column+(_r?0:1):Gt.indented+(_r?0:G)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:O?null:"/*",blockCommentEnd:O?null:"*/",blockCommentContinue:O?null:" * ",lineComment:O?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:O?"json":"javascript",jsonldMode:F,jsonMode:O,expressionAllowed:gn,skipExpression:function(C){rt(C,"atom","atom","true",new at.StringStream("",2,null))}}}),at.registerHelper("wordChars","javascript",/[\w$]/),at.defineMIME("text/javascript","javascript"),at.defineMIME("text/ecmascript","javascript"),at.defineMIME("application/javascript","javascript"),at.defineMIME("application/x-javascript","javascript"),at.defineMIME("application/ecmascript","javascript"),at.defineMIME("application/json",{name:"javascript",json:!0}),at.defineMIME("application/x-json",{name:"javascript",json:!0}),at.defineMIME("application/manifest+json",{name:"javascript",json:!0}),at.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),at.defineMIME("text/typescript",{name:"javascript",typescript:!0}),at.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},589:(S,tt,ut)=>{(function(at){at(ut(631))})(function(at){var At={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},Y={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};at.defineMode("xml",function(G,D){var F=G.indentUnit,O={},L=D.htmlMode?At:Y;for(var k in L)O[k]=L[k];for(var k in D)O[k]=D[k];var j,H;function ot(A,Mt){function Pt(Ct){return Mt.tokenize=Ct,Ct(A,Mt)}var $t=A.next();if($t=="<")return A.eat("!")?A.eat("[")?A.match("CDATA[")?Pt(Vt("atom","]]>")):null:A.match("--")?Pt(Vt("comment","-->")):A.match("DOCTYPE",!0,!0)?(A.eatWhile(/[\w\._\-]/),Pt(Bt(1))):null:A.eat("?")?(A.eatWhile(/[\w\._\-]/),Mt.tokenize=Vt("meta","?>"),"meta"):(j=A.eat("/")?"closeTag":"openTag",Mt.tokenize=ht,"tag bracket");if($t=="&"){var xe;return A.eat("#")?A.eat("x")?xe=A.eatWhile(/[a-fA-F\d]/)&&A.eat(";"):xe=A.eatWhile(/[\d]/)&&A.eat(";"):xe=A.eatWhile(/[\w\.\-:]/)&&A.eat(";"),xe?"atom":"error"}else return A.eatWhile(/[^&<]/),null}ot.isInText=!0;function ht(A,Mt){var Pt=A.next();if(Pt==">"||Pt=="/"&&A.eat(">"))return Mt.tokenize=ot,j=Pt==">"?"endTag":"selfcloseTag","tag bracket";if(Pt=="=")return j="equals",null;if(Pt=="<"){Mt.tokenize=ot,Mt.state=ae,Mt.tagName=Mt.tagStart=null;var $t=Mt.tokenize(A,Mt);return $t?$t+" tag error":"tag error"}else return/[\'\"]/.test(Pt)?(Mt.tokenize=kt(Pt),Mt.stringStartCol=A.column(),Mt.tokenize(A,Mt)):(A.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function kt(A){var Mt=function(Pt,$t){for(;!Pt.eol();)if(Pt.next()==A){$t.tokenize=ht;break}return"string"};return Mt.isInAttribute=!0,Mt}function Vt(A,Mt){return function(Pt,$t){for(;!Pt.eol();){if(Pt.match(Mt)){$t.tokenize=ot;break}Pt.next()}return A}}function Bt(A){return function(Mt,Pt){for(var $t;($t=Mt.next())!=null;){if($t=="<")return Pt.tokenize=Bt(A+1),Pt.tokenize(Mt,Pt);if($t==">")if(A==1){Pt.tokenize=ot;break}else return Pt.tokenize=Bt(A-1),Pt.tokenize(Mt,Pt)}return"meta"}}function Ot(A){return A&&A.toLowerCase()}function mt(A,Mt,Pt){this.prev=A.context,this.tagName=Mt||"",this.indent=A.indented,this.startOfLine=Pt,(O.doNotIndent.hasOwnProperty(Mt)||A.context&&A.context.noIndent)&&(this.noIndent=!0)}function Yt(A){A.context&&(A.context=A.context.prev)}function re(A,Mt){for(var Pt;;){if(!A.context||(Pt=A.context.tagName,!O.contextGrabbers.hasOwnProperty(Ot(Pt))||!O.contextGrabbers[Ot(Pt)].hasOwnProperty(Ot(Mt))))return;Yt(A)}}function ae(A,Mt,Pt){return A=="openTag"?(Pt.tagStart=Mt.column(),Qt):A=="closeTag"?ct:ae}function Qt(A,Mt,Pt){return A=="word"?(Pt.tagName=Mt.current(),H="tag",Q):O.allowMissingTagName&&A=="endTag"?(H="tag bracket",Q(A,Mt,Pt)):(H="error",Qt)}function ct(A,Mt,Pt){if(A=="word"){var $t=Mt.current();return Pt.context&&Pt.context.tagName!=$t&&O.implicitlyClosed.hasOwnProperty(Ot(Pt.context.tagName))&&Yt(Pt),Pt.context&&Pt.context.tagName==$t||O.matchClosing===!1?(H="tag",Lt):(H="tag error",$)}else return O.allowMissingTagName&&A=="endTag"?(H="tag bracket",Lt(A,Mt,Pt)):(H="error",$)}function Lt(A,Mt,Pt){return A!="endTag"?(H="error",Lt):(Yt(Pt),ae)}function $(A,Mt,Pt){return H="error",Lt(A,Mt,Pt)}function Q(A,Mt,Pt){if(A=="word")return H="attribute",rt;if(A=="endTag"||A=="selfcloseTag"){var $t=Pt.tagName,xe=Pt.tagStart;return Pt.tagName=Pt.tagStart=null,A=="selfcloseTag"||O.autoSelfClosers.hasOwnProperty(Ot($t))?re(Pt,$t):(re(Pt,$t),Pt.context=new mt(Pt,$t,xe==Pt.indented)),ae}return H="error",Q}function rt(A,Mt,Pt){return A=="equals"?R:(O.allowMissing||(H="error"),Q(A,Mt,Pt))}function R(A,Mt,Pt){return A=="string"?lt:A=="word"&&O.allowUnquoted?(H="string",Q):(H="error",Q(A,Mt,Pt))}function lt(A,Mt,Pt){return A=="string"?lt:Q(A,Mt,Pt)}return{startState:function(A){var Mt={tokenize:ot,state:ae,indented:A||0,tagName:null,tagStart:null,context:null};return A!=null&&(Mt.baseIndent=A),Mt},token:function(A,Mt){if(!Mt.tagName&&A.sol()&&(Mt.indented=A.indentation()),A.eatSpace())return null;j=null;var Pt=Mt.tokenize(A,Mt);return(Pt||j)&&Pt!="comment"&&(H=null,Mt.state=Mt.state(j||Pt,A,Mt),H&&(Pt=H=="error"?Pt+" error":H)),Pt},indent:function(A,Mt,Pt){var $t=A.context;if(A.tokenize.isInAttribute)return A.tagStart==A.indented?A.stringStartCol+1:A.indented+F;if($t&&$t.noIndent)return at.Pass;if(A.tokenize!=ht&&A.tokenize!=ot)return Pt?Pt.match(/^(\s*)/)[0].length:0;if(A.tagName)return O.multilineTagIndentPastTag!==!1?A.tagStart+A.tagName.length+2:A.tagStart+F*(O.multilineTagIndentFactor||1);if(O.alignCDATA&&/<!\[CDATA\[/.test(Mt))return 0;var xe=Mt&&/^<(\/)?([\w_:\.-]*)/.exec(Mt);if(xe&&xe[1])for(;$t;)if($t.tagName==xe[2]){$t=$t.prev;break}else if(O.implicitlyClosed.hasOwnProperty(Ot($t.tagName)))$t=$t.prev;else break;else if(xe)for(;$t;){var Ct=O.contextGrabbers[Ot($t.tagName)];if(Ct&&Ct.hasOwnProperty(Ot(xe[2])))$t=$t.prev;else break}for(;$t&&$t.prev&&!$t.startOfLine;)$t=$t.prev;return $t?$t.indent+F:A.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:O.htmlMode?"html":"xml",helperType:O.htmlMode?"html":"xml",skipAttribute:function(A){A.state==R&&(A.state=Q)},xmlCurrentTag:function(A){return A.tagName?{name:A.tagName,close:A.type=="closeTag"}:null},xmlCurrentContext:function(A){for(var Mt=[],Pt=A.context;Pt;Pt=Pt.prev)Mt.push(Pt.tagName);return Mt.reverse()}}}),at.defineMIME("text/xml","xml"),at.defineMIME("application/xml","xml"),at.mimeModes.hasOwnProperty("text/html")||at.defineMIME("text/html",{name:"xml",htmlMode:!0})})},642:(S,tt,ut)=>{ut.d(tt,{Z:()=>G});var at=ut(346),At=function(){var D=function(F,O){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,k){L.__proto__=k}||function(L,k){for(var j in k)Object.prototype.hasOwnProperty.call(k,j)&&(L[j]=k[j])},D(F,O)};return function(F,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");D(F,O);function L(){this.constructor=F}F.prototype=O===null?Object.create(O):(L.prototype=O.prototype,new L)}}(),Y=function(D){At(F,D);function F(O,L,k){var j=D.call(this,L,k)||this;return j._module=O,j}return Object.defineProperty(F.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),F}(at.Hn);const G=Y},675:(S,tt,ut)=>{ut.d(tt,{Z:()=>D,q:()=>Y});var at=ut(642),At=function(){var F=function(O,L){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,j){k.__proto__=j}||function(k,j){for(var H in j)Object.prototype.hasOwnProperty.call(j,H)&&(k[H]=j[H])},F(O,L)};return function(O,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");F(O,L);function k(){this.constructor=O}O.prototype=L===null?Object.create(L):(k.prototype=L.prototype,new k)}}(),Y;(function(F){F.Select="select",F.Hover="hover",F.Spacing="spacing",F.Target="target",F.Resize="resize"})(Y||(Y={}));var G=function(F){At(O,F);function O(){return F!==null&&F.apply(this,arguments)||this}return O.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(O.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"component",{get:function(){var L,k=this.get("component");return k||((L=this.get("componentView"))===null||L===void 0?void 0:L.model)},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"componentView",{get:function(){var L,k=this.get("componentView");return k||((L=this.get("component"))===null||L===void 0?void 0:L.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"el",{get:function(){var L;return(L=this.componentView)===null||L===void 0?void 0:L.el},enumerable:!1,configurable:!0}),O.prototype.getBoxRect=function(L){var k=this,j=k.el,H=k.em,ot=H.Canvas.getCanvasView(),ht=this.get("boxRect");return ht||(j&&ot?ot.getElBoxRect(j,L):{x:0,y:0,width:0,height:0})},O.prototype.getStyle=function(L){L===void 0&&(L={});var k=L.boxRect||this.getBoxRect(L),j=k.width,H=k.height,ot=k.x,ht=k.y;return{width:"".concat(j,"px"),height:"".concat(H,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(ot,"px ").concat(ht,"px")}},O.prototype.isType=function(L){return this.type===L},O}(at.Z);const D=G},713:(S,tt,ut)=>{ut.d(tt,{Z:()=>At});var at;(function(Y){Y.run="command:run",Y._run="run",Y.runCommand="command:run:",Y._runCommand="run:",Y.runBeforeCommand="command:run:before:",Y.abort="command:abort:",Y._abort="abort:",Y.stop="command:stop",Y._stop="stop",Y.stopCommand="command:stop:",Y._stopCommand="stop:",Y.stopBeforeCommand="command:stop:before:"})(at||(at={}));const At=at},858:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>at});const at={run:function(At){At.Components.clear(),At.Css.clear()}}},884:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>G});var at=ut(50),At=ut(668),Y=ut(491);const G={run:function(D){(0,at.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=D,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(D){this.toggleMove(),this.disableDragger()},onKeyUp:function(D){(0,Y.sN)(D)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(D){this.toggleDragger(1,D)},disableDragger:function(D){this.toggleDragger(0,D)},toggleDragger:function(D,F){var O=this,L=O.canvasModel,k=O.em,j=this.dragger,H=D?"add":"remove";this.getCanvas().classList[H]("".concat(this.ppfx,"is__grabbing")),j||(j=new At.Z({getPosition:function(){return{x:L.get("x"),y:L.get("y")}},setPosition:function(ot){var ht=ot.x,kt=ot.y;L.set({x:ht,y:kt})},onStart:function(ot,ht){k.trigger("canvas:move:start",ht)},onDrag:function(ot,ht){k.trigger("canvas:move",ht)},onEnd:function(ot,ht){k.trigger("canvas:move:end",ht)}}),this.dragger=j),D?j.start(F):j.stop()},toggleMove:function(D){var F=this.ppfx,O=D?"add":"remove",L=D?"on":"off",k={on:Y.on,off:Y.S1},j=this.getCanvas(),H=["".concat(F,"is__grab")];!D&&H.push("".concat(F,"is__grabbing")),H.forEach(function(ot){return j.classList[O](ot)}),k[L](document,"keyup",this.onKeyUp),k[L](j,"mousedown",this.enableDragger),k[L](document,"mouseup",this.disableDragger)}}},790:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>F,defineCommand:()=>G});var at=ut(346),At=ut(713),Y=function(){var O=function(L,k){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,H){j.__proto__=H}||function(j,H){for(var ot in H)Object.prototype.hasOwnProperty.call(H,ot)&&(j[ot]=H[ot])},O(L,k)};return function(L,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");O(L,k);function j(){this.constructor=L}L.prototype=k===null?Object.create(k):(j.prototype=k.prototype,new j)}}();function G(O){return O}var D=function(O){Y(L,O);function L(k){var j=O.call(this,0)||this;j.config=k||{},j.em=j.config.em||{};var H=j.config.stylePrefix;return j.pfx=H,j.ppfx=j.config.pStylePrefix,j.hoverClass="".concat(H,"hover"),j.badgeClass="".concat(H,"badge"),j.plhClass="".concat(H,"placeholder"),j.freezClass="".concat(j.ppfx,"freezed"),j.canvas=j.em.Canvas,j.init(j.config),j}return L.prototype.onFrameScroll=function(k){},L.prototype.getCanvas=function(){return this.canvas.getElement()},L.prototype.getCanvasBody=function(){return this.canvas.getBody()},L.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},L.prototype.offset=function(k){var j=k.getBoundingClientRect();return{top:j.top+k.ownerDocument.body.scrollTop,left:j.left+k.ownerDocument.body.scrollLeft}},L.prototype.init=function(k){},L.prototype.callRun=function(k,j){j===void 0&&(j={});var H=this.id;if(k.trigger("".concat(At.Z.runBeforeCommand).concat(H),{options:j}),k.trigger("".concat(At.Z._runCommand).concat(H,":before"),j),j.abort){k.trigger("".concat(At.Z.abort).concat(H),{options:j}),k.trigger("".concat(At.Z._abort).concat(H),j);return}var ot=j.sender||k,ht=this.run(k,ot,j),kt={id:H,result:ht,options:j};return k.trigger("".concat(At.Z.runCommand).concat(H),kt),k.trigger(At.Z.run,kt),k.trigger("".concat(At.Z._runCommand).concat(H),ht,j),k.trigger(At.Z._run,H,ht,j),ht},L.prototype.callStop=function(k,j){j===void 0&&(j={});var H=this.id,ot=j.sender||k;k.trigger("".concat(At.Z.stopBeforeCommand).concat(H),{options:j}),k.trigger("".concat(At.Z._stopCommand).concat(H,":before"),j);var ht=this.stop(k,ot,j),kt={id:H,result:ht,options:j};return k.trigger("".concat(At.Z.stopCommand).concat(H),kt),k.trigger(At.Z.stop,kt),k.trigger("".concat(At.Z._stopCommand).concat(H),ht,j),k.trigger(At.Z._stop,H,ht,j),ht},L.prototype.stopCommand=function(k){this.em.Commands.stop(this.id,k)},L.prototype.run=function(k,j,H){},L.prototype.stop=function(k,j,H){},L}(at.Hn);const F=D},180:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>G});var at=ut(50),At=function(D,F,O){if(O||arguments.length===2)for(var L=0,k=F.length,j;L<k;L++)(j||!(L in F))&&(j||(j=Array.prototype.slice.call(F,0,L)),j[L]=F[L]);return D.concat(j||Array.prototype.slice.call(F))},Y={run:function(D,F,O){var L=this;O===void 0&&(O={});var k=[],j=O.component||D.getSelectedAll();return j=(0,at.isArray)(j)?At([],j,!0):[j],j.filter(Boolean).forEach(function(H){var ot,ht;if(!H.get("removable"))return L.em.logWarning("The element is not removable",{component:H});k.push(H);var kt=((ht=(ot=H.delegate)===null||ot===void 0?void 0:ot.remove)===null||ht===void 0?void 0:ht.call(ot,H))||H;kt.remove()}),D.selectRemove(k),k}};const G=Y},544:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>D});var at=ut(50),At=ut(668),Y=function(){return Y=Object.assign||function(F){for(var O,L=1,k=arguments.length;L<k;L++){O=arguments[L];for(var j in O)Object.prototype.hasOwnProperty.call(O,j)&&(F[j]=O[j])}return F},Y.apply(this,arguments)},G="dmode";const D={run:function(F,O,L){var k=this;L===void 0&&(L={}),(0,at.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var j=L.target,H=L.event,ot=L.mode,ht=L.dragger,kt=ht===void 0?{}:ht,Vt=j.getEl(),Bt=Y({doc:Vt.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return k.guidesStatic},guidesTarget:function(){return k.guidesTarget}},kt);this.setupGuides(),this.opts=L,this.editor=F,this.em=F.getModel(),this.target=j,this.isTran=ot=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var Ot=this.dragger;return Ot?Ot.setOptions(Bt):(Ot=new At.Z(Bt),this.dragger=Ot),H&&Ot.start(H),this.toggleDrag(1),this.em.trigger("".concat(G,":start"),this.getEventOpts()),Ot},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(F){var O=F.guide;O&&O.parentNode.removeChild(O)}),this.guides=[]},getGuidesContainer:function(){var F=this,O=this.guidesEl;if(!O){var L=this,k=L.editor,j=L.em,H=L.opts,ot=k.getConfig().stylePrefix,ht=document.createElement("div"),kt=document.createElement("div"),Vt='<div class="'.concat(ot,"guide-info__line ").concat(ot,`danger-bg">
        <div class="`).concat(ot,"guide-info__content ").concat(ot,`danger-color"></div>
      </div>`);O=document.createElement("div"),O.className="".concat(ot,"guides"),ht.className="".concat(ot,"guide-info ").concat(ot,"guide-info__x"),kt.className="".concat(ot,"guide-info ").concat(ot,"guide-info__y"),ht.innerHTML=Vt,kt.innerHTML=Vt,O.appendChild(ht),O.appendChild(kt),k.Canvas.getGlobalToolsEl().appendChild(O),this.guidesEl=O,this.elGuideInfoX=ht,this.elGuideInfoY=kt,this.elGuideInfoContentX=ht.querySelector(".".concat(ot,"guide-info__content")),this.elGuideInfoContentY=kt.querySelector(".".concat(ot,"guide-info__content")),j.on("canvas:update frame:scroll",(0,at.debounce)(function(){var Bt;F.updateGuides(),H.debug&&((Bt=F.guides)===null||Bt===void 0||Bt.forEach(function(Ot){return F.renderGuide(Ot)}))},200))}return O},getGuidesStatic:function(){var F=this,O=[],L=this.target.getEl(),k=L.parentNode,j=k===void 0?{}:k;return(0,at.each)(j.children,function(H){return O=O.concat(L!==H?F.getElementGuides(H):[])}),O.concat(this.getElementGuides(j))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(F){var O=this,L,k;(F||this.guides).forEach(function(j){var H=j.origin,ot=L===H?k:O.getElementPos(H);L=H,k=ot,(0,at.each)(O.getGuidePosUpdate(j,ot),function(ht,kt){return j[kt]=ht}),j.originRect=ot})},getGuidePosUpdate:function(F,O){var L={},k=O.top,j=O.height,H=O.left,ot=O.width;switch(F.type){case"t":L.y=k;break;case"b":L.y=k+j;break;case"l":L.x=H;break;case"r":L.x=H+ot;break;case"x":L.x=H+ot/2;break;case"y":L.y=k+j/2;break}return L},renderGuide:function(F){F===void 0&&(F={});var O=F.guide||document.createElement("div"),L="px",k=F.active?2:1,j=O.children[0];return O.style="position: absolute; background-color: ".concat(F.active?"green":"red",";"),O.children.length||(j=document.createElement("div"),j.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",O.appendChild(j)),F.y?(O.style.width="100%",O.style.height="".concat(k).concat(L),O.style.top="".concat(F.y).concat(L),O.style.left=0):(O.style.width="".concat(k).concat(L),O.style.height="100%",O.style.left="".concat(F.x).concat(L),O.style.top="0".concat(L)),!F.guide&&this.guidesContainer.appendChild(O),O},getElementPos:function(F){return this.editor.Canvas.getElementPos(F,{noScroll:1})},getElementGuides:function(F){var O=this,L=this.opts,k=this.getElementPos(F),j=k.top,H=k.height,ot=k.left,ht=k.width,kt=[{type:"t",y:j},{type:"b",y:j+H},{type:"l",x:ot},{type:"r",x:ot+ht},{type:"x",x:ot+ht/2},{type:"y",y:j+H/2}].map(function(Vt){return Y(Y({},Vt),{origin:F,originRect:k,guide:L.debug&&O.renderGuide(Vt)})});return kt.forEach(function(Vt){var Bt;return(Bt=O.guides)===null||Bt===void 0?void 0:Bt.push(Vt)}),kt},getTranslate:function(F,O){O===void 0&&(O="x");var L=0;return(F||"").split(" ").forEach(function(k){var j=k.trim(),H="translate".concat(O.toUpperCase(),"(");j.indexOf(H)===0&&(L=parseFloat(j.replace(H,"")))}),L},setTranslate:function(F,O,L){var k="translate".concat(O.toUpperCase(),"("),j="".concat(k).concat(L,")"),H=(F||"").split(" ").map(function(ot){var ht=ot.trim();return ht.indexOf(k)===0&&(ot=j),ot}).join(" ");return H.indexOf(k)<0&&(H+=" ".concat(j)),H},getPosition:function(){var F=this,O=F.target,L=F.isTran,k=O.getStyle(),j=k.left,H=k.top,ot=k.transform,ht=0,kt=0;return L?(ht=this.getTranslate(ot),kt=this.getTranslate(ot,"y")):(ht=parseFloat(j||0),kt=parseFloat(H||0)),{x:ht,y:kt}},setPosition:function(F){var O=F.x,L=F.y,k=F.end,j=F.position,H=F.width,ot=F.height,ht=this,kt=ht.target,Vt=ht.isTran,Bt=ht.em,Ot="px",mt=!k,Yt="".concat(parseInt(O,10)).concat(Ot),re="".concat(parseInt(L,10)).concat(Ot),ae={};if(Vt){var Qt=kt.getStyle().transform||"";Qt=this.setTranslate(Qt,"x",Yt),Qt=this.setTranslate(Qt,"y",re),ae={transform:Qt,__p:mt},kt.addStyle(ae,{avoidStore:!k})}else{var ct={position:j,width:H,height:ot},Lt={left:Yt,top:re,__p:mt};(0,at.keys)(ct).forEach(function($){var Q=ct[$];Q&&(Lt[$]=Q)}),ae=Lt,kt.addStyle(ae,{avoidStore:!k})}Bt==null||Bt.Styles.__emitCmpStyleUpdate(ae,{components:Bt.getSelected()})},_getDragData:function(){var F=this.target;return{target:F,parent:F.parent(),index:F.index()}},onStart:function(F){var O=this,L=O.target,k=O.editor,j=O.isTran,H=O.opts,ot=H.center,ht=H.onStart,kt=k.Canvas,Vt=L.getStyle(),Bt="absolute",Ot=[Bt,"relative"];if(ht&&ht(this._getDragData()),!j&&Vt.position!==Bt){var mt=kt.offset(L.getEl()),Yt=mt.left,re=mt.top,ae=mt.width,Qt=mt.height,ct=L.parent(),Lt=void 0;do{var $=ct.getStyle();Lt=Ot.indexOf($.position)>=0?ct:null,ct=ct.parent()}while(ct&&!Lt);if(ot){var Q=kt.getMouseRelativeCanvas(F),rt=Q.x,R=Q.y;Yt=rt,re=R}else if(Lt){var lt=kt.offset(Lt.getEl());Yt=Yt-lt.left,re=re-lt.top}this.setPosition({x:Yt,y:re,width:"".concat(ae,"px"),height:"".concat(Qt,"px"),position:Bt})}},onDrag:function(){var F=this,O=this,L=O.guidesTarget,k=O.opts,j=k.onDrag;this.updateGuides(L),k.debug&&L.forEach(function(H){return F.renderGuide(H)}),k.guidesInfo&&this.renderGuideInfo(L.filter(function(H){return H.active})),j&&j(this._getDragData())},onEnd:function(F,O,L){L===void 0&&(L={});var k=this,j=k.editor,H=k.opts,ot=k.id,ht=H.onEnd;ht&&ht(F,L,Y(Y({event:F},L),this._getDragData())),j.stopCommand(ot),this.hideGuidesInfo(),this.em.trigger("".concat(G,":end"),this.getEventOpts())},hideGuidesInfo:function(){var F=this;["X","Y"].forEach(function(O){var L=F["elGuideInfo".concat(O)];L&&(L.style.display="none")})},renderGuideInfo:function(F){var O=this;F===void 0&&(F=[]);var L=this.guidesStatic;this.hideGuidesInfo(),F.forEach(function(k){var j=k.origin,H=k.x,ot=O.getElementPos(j),ht=(0,at.isUndefined)(H)?"y":"x",kt=ht==="y",Vt=ot[kt?"left":"top"],Bt=ot.rect[kt?"left":"top"],Ot=kt?Vt+ot.width:Vt+ot.height,mt=kt?Bt+ot.rect.width:Bt+ot.rect.height,Yt=O["elGuideInfo".concat(ht.toUpperCase())],re=O["elGuideInfoContent".concat(ht.toUpperCase())],ae=Yt.style,Qt=L==null?void 0:L.filter(function(be){return be.type===k.type}).map(function(be){var vt=be.originRect,jt=vt.left,Nt=vt.width,oe=vt.top,fe=vt.height,Xt=kt?jt:oe,ve=kt?jt+Nt:oe+fe;return{gap:ve<Vt?Vt-ve:Xt-Ot,guide:be}}).filter(function(be){return be.gap>0}).sort(function(be,vt){return be.gap-vt.gap}).map(function(be){return be.guide})[0];if(Qt){var ct=Qt.originRect,Lt=ct.left,$=ct.width,Q=ct.top,rt=ct.height,R=ct.rect,lt=kt?Lt<ot.left:Q<ot.top,A=kt?Lt:Q,Mt=kt?R.left:R.top,Pt=kt?Lt+$:Q+rt,$t=kt?R.left+R.width:R.top+R.height,xe=kt?k.y:k.x,Ct=lt?Pt:Ot,Ut="".concat(xe,"px"),se=lt?Vt-Pt:A-Ot,Wt=lt?Bt-$t:Mt-mt;ae.display="",ae[kt?"top":"left"]=Ut,ae[kt?"left":"top"]="".concat(Ct,"px"),ae[kt?"width":"height"]="".concat(se,"px"),re.innerHTML="".concat(Math.round(Wt),"px"),O.em.trigger("".concat(G,":active"),Y(Y({},O.getEventOpts()),{guide:k,guidesStatic:L,matched:Qt,posFirst:xe,posSecond:Ct,size:se,sizeRaw:Wt,elGuideInfo:Yt,elGuideInfoCnt:re}))}})},toggleDrag:function(F){var O=this,L=O.ppfx,k=O.editor,j=F?"add":"remove",H=["".concat(L,"is__grabbing")],ot=k.Canvas,ht=ot.getBody();H.forEach(function(kt){return ht.classList[j](kt)}),ot[F?"startAutoscroll":"stopAutoscroll"]()}}},236:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>at});const at={run:function(At){if(At.Canvas.hasFocus()){var Y=[];At.getSelectedAll().forEach(function(G){var D=G.components(),F=D&&D.filter(function(O){return O.get("selectable")})[0];F&&Y.push(F)}),Y.length&&At.select(Y)}}}},368:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>at});const at={run:function(At,Y,G){if(G===void 0&&(G={}),!(!At.Canvas.hasFocus()&&!G.force)){var D=[];At.getSelectedAll().forEach(function(F){for(var O=F.parent();O&&!O.get("selectable");)O=O.parent();O&&D.push(O)}),D.length&&At.select(D)}}}},243:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>at});const at={run:function(At){if(At.Canvas.hasFocus()){var Y=[];At.getSelectedAll().forEach(function(G){var D=G.parent();if(D){var F=D.components().length,O=0,L=0,k;do O++,L=G.index()+O,k=L<=F?D.getChildAt(L):null;while(k&&!k.get("selectable"));Y.push(k||G)}}),Y.length&&At.select(Y)}}}},400:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>at});const at={run:function(At){if(At.Canvas.hasFocus()){var Y=[];At.getSelectedAll().forEach(function(G){var D=G.parent();if(D){var F=0,O=0,L;do F++,O=G.index()-F,L=O>=0?D.getChildAt(O):null;while(L&&!L.get("selectable"));Y.push(L||G)}}),Y.length&&At.select(Y)}}}},910:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=ut(50);const At={run:function(Y,G,D){D===void 0&&(D={});var F=D.target,O=[];if(!F.get("styles"))return O;var L=F.get("type"),k=Y.Pages.getAllWrappers(),j=(0,at.flatten)(k.map(function(ot){return ot.findType(L)})).length;if(!j){var H=Y.CssComposer.getAll();O=H.filter(function(ot){return ot.get("group")==="cmp:".concat(L)}),H.remove(O)}return O}}},744:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=function(Y,G,D){if(D||arguments.length===2)for(var F=0,O=G.length,L;F<O;F++)(L||!(F in G))&&(L||(L=Array.prototype.slice.call(G,0,F)),L[F]=G[F]);return Y.concat(L||Array.prototype.slice.call(G))};const At={run:function(Y){var G=Y.getModel(),D=at([],Y.getSelectedAll(),!0).map(function(F){var O,L;return((L=(O=F.delegate)===null||O===void 0?void 0:O.copy)===null||L===void 0?void 0:L.call(O,F))||F}).filter(Boolean);D.length&&G.set("clipboard",D)}}},457:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=ut(491);const At={run:function(Y,G,D){var F=this;D===void 0&&(D={}),G&&G.set&&G.set("active",0);var O=Y.getConfig(),L=Y.Modal,k=O.stylePrefix;if(this.cm=Y.CodeManager||null,!this.editors){var j=this.buildEditor("htmlmixed","hopscotch","HTML"),H=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=j.model,this.cssEditor=H.model;var ot=(0,at.ut)("div",{class:"".concat(k,"export-dl")});ot.appendChild(j.el),ot.appendChild(H.el),this.editors=ot}L.open({title:O.textViewCode,content:this.editors}).getModel().once("change:open",function(){return Y.stopCommand("".concat(F.id))}),this.htmlEditor.setContent(Y.getHtml(D.optsHtml)),this.cssEditor.setContent(Y.getCss(D.optsCss))},stop:function(Y){var G=Y.Modal;G&&G.close()},buildEditor:function(Y,G,D){var F=this.em.CodeManager,O=F.createViewer({label:D,codeName:Y,theme:G}),L=new F.EditorView({model:O,config:F.getConfig()}).render().el;return{model:O,el:L}}}},975:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=ut(50);const At={isEnabled:function(){var Y=document;return!!(Y.fullscreenElement||Y.webkitFullscreenElement||Y.mozFullScreenElement)},enable:function(Y){var G="";return Y.requestFullscreen?Y.requestFullscreen():Y.webkitRequestFullscreen?(G="webkit",Y.webkitRequestFullscreen()):Y.mozRequestFullScreen?(G="moz",Y.mozRequestFullScreen()):Y.msRequestFullscreen&&Y.msRequestFullscreen(),G},disable:function(){var Y=document;this.isEnabled()&&(Y.exitFullscreen?Y.exitFullscreen():Y.webkitExitFullscreen?Y.webkitExitFullscreen():Y.mozCancelFullScreen?Y.mozCancelFullScreen():Y.msExitFullscreen&&Y.msExitFullscreen())},fsChanged:function(Y){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(Y||"","fullscreenchange"),this.fsChanged))},run:function(Y,G,D){D===void 0&&(D={}),this.sender=G;var F=D.target,O=(0,at.isElement)(F)?F:document.querySelector(F),L=this.enable(O||Y.getContainer());this.fsChanged=this.fsChanged.bind(this,L),document.addEventListener(L+"fullscreenchange",this.fsChanged)},stop:function(Y,G){G&&G.set&&G.set("active",!1),this.disable()}}},191:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>F});var at=ut(50),At=ut(895),Y=ut(491),G=ut(407),D=ut(189);const F=(0,at.extend)({},D.default,G.default,{init:function(O){G.default.init.apply(this,arguments),(0,at.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=O,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var O=[],L=0;L<arguments.length;L++)O[L]=arguments[L];G.default.enable.apply(this,O),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var k=this.$wrapper;k.css("cursor","move"),k.on("mousedown",this.initSorter),k.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(O){var L=(0,At.default)(O.target).data("model"),k=L.get("draggable");k&&(this.cacheEl=null,this.startSelectPosition(O.target,this.frameEl.contentDocument),this.sorter.draggable=k,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,Y.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(O){var L=O.get("draggable");if(L){this.cacheEl=null;var k=O.view.el;this.startSelectPosition(k,this.frameEl.contentDocument),this.sorter.draggable=L,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,Y.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(O){this.cacheEl=null;var L=O[O.length-1],k=this.em.getCurrentFrame(),j=L.getEl(k==null?void 0:k.model),H=j.ownerDocument;this.startSelectPosition(j,H,{onStart:this.onStart}),this.sorter.draggable=L.get("draggable"),this.sorter.toMove=O,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,Y.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,Y.S1)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,Y.S1)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(O,L){},rollback:function(O,L){var k=O.which||O.keyCode;(k==27||L)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,At.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,At.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var O=[],L=0;L<arguments.length;L++)O[L]=arguments[L];G.default.stop.apply(this,O),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var k=this.$wrapper;k.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>Y});var at=ut(50),At=ut(491);const Y={open:function(G){var D=this,F=this,O=F.editor,L=F.title,k=F.config,j=F.am,H=k.custom;if((0,at.isFunction)(H.open))return H.open(j.__customData());var ot=O.Modal;ot.open({title:L,content:G}).onceClose(function(){return O.stopCommand(D.id)})},close:function(){var G=this.config.custom;if((0,at.isFunction)(G.close))return G.close(this.am.__customData());var D=this.editor.Modal;D&&D.close()},run:function(G,D,F){F===void 0&&(F={});var O=G.AssetManager,L=O.getConfig(),k=F.types,j=k===void 0?[]:k,H=F.accept,ot=F.select;if(this.title=F.modalTitle||G.t("assetManager.modalTitle")||"",this.editor=G,this.config=L,this.am=O,O.setTarget(F.target),O.onClick(F.onClick),O.onDblClick(F.onDblClick),O.onSelect(F.onSelect),O.__behaviour({select:ot,types:j,options:F}),L.custom)this.rendered=this.rendered||(0,At.ut)("div"),this.rendered.className="".concat(L.stylePrefix,"custom-wrp"),O.__behaviour({container:this.rendered}),O.__trgCustom();else{if(!this.rendered||j){var ht=O.getAll().filter(function(Vt){return Vt});j&&j.length&&(ht=ht.filter(function(Vt){return j.indexOf(Vt.get("type"))!==-1})),O.render(ht),this.rendered=O.getContainer()}if(H){var kt=this.rendered.querySelector("input#".concat(L.stylePrefix,"uploadFile"));kt&&kt.setAttribute("accept",H)}}return this.open(this.rendered),this},stop:function(G){this.editor=G,this.close(this.rendered)}}},117:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>Y});var at=ut(50),At=ut(491);const Y={open:function(){var G=this,D=G.container,F=G.editor,O=G.bm,L=G.config,k=L.custom,j=L.appendTo;if((0,at.isFunction)(k.open))return k.open(O.__customData());if(this.firstRender&&!j){var H="views-container",ot=F.Panels,ht=ot.getPanel(H)||ot.addPanel({id:H});ht.set("appendContent",D).trigger("change:appendContent"),k||D.appendChild(O.render())}D&&(D.style.display="block")},close:function(){var G=this,D=G.container,F=G.config,O=F.custom;if((0,at.isFunction)(O.close))return O.close(this.bm.__customData());D&&(D.style.display="none")},run:function(G){var D=G.Blocks;this.config=D.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,At.ut)("div"),this.editor=G,this.bm=D;var F=this.container;D.__behaviour({container:F}),this.config.custom&&D.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>at});const at={run:function(At){var Y=At.LayerManager,G=At.Panels,D=Y.getConfig();if(!D.appendTo){if(!this.layers){var F="views-container",O=document.createElement("div"),L=G.getPanel(F)||G.addPanel({id:F});D.custom?Y.__trgCustom({container:O}):O.appendChild(Y.render()),L.set("appendContent",O).trigger("change:appendContent"),this.layers=O}this.layers.style.display="block"}},stop:function(){var At=this.layers;At&&(At.style.display="none")}}},801:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=ut(895);const At={run:function(Y,G){if(this.sender=G,!this.$cnt){var D=Y.getConfig(),F=Y.Panels,O=Y.DeviceManager,L=Y.SelectorManager,k=Y.StyleManager,j="change:appendContent",H=(0,at.default)("<div></div>"),ot=(0,at.default)("<div></div>"),ht=(0,at.default)("<div></div>"),kt=(0,at.default)("<div></div>");if(this.$cnt=H,this.$cntInner=ot,ot.append(ht),ot.append(kt),H.append(ot),O&&D.showDevices){var Vt=F.addPanel({id:"devices-c"}),Bt=O.render();Vt.set("appendContent",Bt).trigger(j)}var Ot=L.getConfig();Ot.custom?L.__trgCustom({container:ht.get(0)}):Ot.appendTo||ht.append(L.render([])),this.sm=k;var mt=k.getConfig(),Yt=mt.stylePrefix;this.$header=(0,at.default)('<div class="'.concat(Yt,'header">').concat(Y.t("styleManager.empty"),"</div>")),H.append(this.$header),mt.custom?k.__trgCustom({container:kt.get(0)}):mt.appendTo||kt.append(k.render());var re="views-container",ae=F.getPanel(re)||F.addPanel({id:re});ae.set("appendContent",H).trigger(j);var Qt=Y.getModel();this.listenTo(Qt,k.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var Y=this,G=Y.sender,D=Y.sm,F=Y.$cntInner,O=Y.$header;G&&G.get&&!G.get("active")||!D||(D.getSelected()?(F==null||F.show(),O==null||O.hide()):(F==null||F.hide(),O==null||O.show()))},stop:function(){var Y,G;(Y=this.$cntInner)===null||Y===void 0||Y.hide(),(G=this.$header)===null||G===void 0||G.hide()}}},395:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=ut(895);const At={run:function(Y,G){this.sender=G;var D=Y.getModel(),F=Y.Config,O=F.stylePrefix,L=Y.TraitManager,k=L.getConfig(),j;if(!k.appendTo){if(!this.$cn){this.$cn=(0,at.default)("<div></div>"),this.$cn2=(0,at.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,at.default)("<div>").append('<div class="'.concat(k.stylePrefix,'header">').concat(D.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),k.custom?L.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(O,'traits-label">').concat(D.t("traitManager.label"),"</div>")),this.$cn2.append(L.render()));var H=Y.Panels;H.getPanel("views-container")?j=H.getPanel("views-container"):j=H.addPanel({id:"views-container"}),j==null||j.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=Y.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var Y=this.sender;Y&&Y.get&&!Y.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=ut(50);const At={run:function(G,D,F){F===void 0&&(F={});var O=G.getModel(),L=O.get("clipboard"),k=G.getSelected();L!=null&&L.length&&k&&(G.getSelectedAll().forEach(function(j){var H,ot,ht,kt=((ot=(H=j.delegate)===null||H===void 0?void 0:H.copy)===null||ot===void 0?void 0:ot.call(H,j))||j,Vt=kt.collection,Bt;if(Vt){var Ot=kt.index()+1,mt={at:Ot,action:F.action||"paste-component"};(0,at.contains)(L,kt)&&kt.get("copyable")?Bt=Vt.add(kt.clone(),mt):Bt=Y(G,L,kt.parent(),mt)}else{var Yt=(ht=O.Pages.getSelected())===null||ht===void 0?void 0:ht.getMainComponent(),mt={at:(Yt==null?void 0:Yt.components().length)||0,action:F.action||"paste-component"};Bt=Y(G,L,Yt,mt)}Bt=(0,at.isArray)(Bt)?Bt:[Bt],Bt.forEach(function(re){return G.trigger("component:paste",re)})}),k.emitUpdate())}};function Y(G,D,F,O){var L=D.filter(function(j){return j.get("copyable")}),k=L.filter(function(j){return G.Components.canMove(F,j).result});return F.components().add(k.map(function(j){return j.clone()}),O)}},129:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>G});var at=ut(50),At=function(D,F,O){if(O||arguments.length===2)for(var L=0,k=F.length,j;L<k;L++)(j||!(L in F))&&(j||(j=Array.prototype.slice.call(F,0,L)),j[L]=F[L]);return D.concat(j||Array.prototype.slice.call(F))},Y="core:component-outline";const G={getPanels:function(D){return this.panels||(this.panels=D.Panels.getPanels()),this.panels},preventDrag:function(D){D.abort=1},tglEffects:function(D){var F=this.em,O=D?"on":"off";if(F){var L=F.Canvas,k=L.getBody(),j=L.getToolbarEl();j&&(j.style.display=D?"none":"");var H=k.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,at.each)(H,function(ot){return ot.style.pointerEvents=D?"all":""}),F[O]("run:tlb-move:before",this.preventDrag)}},run:function(D,F){var O=this;this.sender=F,this.selected=At([],D.getSelectedAll(),!0),D.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=D.Commands.isActive(Y)),this.shouldRunSwVisibility&&D.stopCommand(Y),D.getModel().stopDefault();var L=this.getPanels(D),k=D.Canvas.getElement(),j=D.getEl(),H=D.Config.stylePrefix;if(!this.helper){var ot=document.createElement("span");ot.className="".concat(H,"off-prv fa fa-eye-slash"),j.appendChild(ot),ot.onclick=function(){return O.stopCommand()},this.helper=ot}this.helper.style.display="inline-block",L.forEach(function(kt){return kt.set("visible",!1)});var ht=k.style;ht.width="100%",ht.height="100%",ht.top="0",ht.left="0",ht.padding="0",ht.margin="0",D.refresh(),this.tglEffects(1)},stop:function(D){var F=this,O=F.sender,L=O===void 0?{}:O,k=F.selected;L.set&&L.set("active",0);var j=this.getPanels(D);this.shouldRunSwVisibility&&(D.runCommand(Y),this.shouldRunSwVisibility=!1),D.getModel().runDefault(),j.forEach(function(ot){return ot.set("visible",!0)});var H=D.Canvas.getElement();H.setAttribute("style",""),k&&D.select(k),delete this.selected,this.helper&&(this.helper.style.display="none"),D.refresh(),this.tglEffects()}}},116:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=function(){return at=Object.assign||function(Y){for(var G,D=1,F=arguments.length;D<F;D++){G=arguments[D];for(var O in G)Object.prototype.hasOwnProperty.call(G,O)&&(Y[O]=G[O])}return Y},at.apply(this,arguments)};const At={run:function(Y,G,D){var F=D||{},O=Y.Canvas,L=O.getCanvasView(),k=at({appendTo:O.getResizerEl(),prefix:Y.getConfig().stylePrefix,posFetcher:L.getElementPos.bind(L),mousePosFetcher:O.getMouseRelativePos.bind(O)},F.options||{}),j=this.canvasResizer;return(!j||F.forceNew)&&(this.canvasResizer=new Y.Utils.Resizer(k),j=this.canvasResizer),j.setOptions(k,!0),j.blur(),j.focus(F.el),j},stop:function(){var Y;(Y=this.canvasResizer)===null||Y===void 0||Y.blur()}}},407:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>Lt});var at=ut(50),At=ut(346),Y=function(){var $=function(Q,rt){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,lt){R.__proto__=lt}||function(R,lt){for(var A in lt)Object.prototype.hasOwnProperty.call(lt,A)&&(R[A]=lt[A])},$(Q,rt)};return function(Q,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");$(Q,rt);function R(){this.constructor=Q}Q.prototype=rt===null?Object.create(rt):(R.prototype=rt.prototype,new R)}}(),G=function($){Y(Q,$);function Q(){return $!==null&&$.apply(this,arguments)||this}return Q.prototype.defaults=function(){return{command:"",attributes:{}}},Q}(At.Hn);const D=G;var F=function(){var $=function(Q,rt){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,lt){R.__proto__=lt}||function(R,lt){for(var A in lt)Object.prototype.hasOwnProperty.call(lt,A)&&(R[A]=lt[A])},$(Q,rt)};return function(Q,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");$(Q,rt);function R(){this.constructor=Q}Q.prototype=rt===null?Object.create(rt):(R.prototype=rt.prototype,new R)}}(),O=function($){F(Q,$);function Q(){return $!==null&&$.apply(this,arguments)||this}return Q}(At.FE);const L=O;O.prototype.model=D;var k=ut(330),j=function(){var $=function(Q,rt){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,lt){R.__proto__=lt}||function(R,lt){for(var A in lt)Object.prototype.hasOwnProperty.call(lt,A)&&(R[A]=lt[A])},$(Q,rt)};return function(Q,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");$(Q,rt);function R(){this.constructor=Q}Q.prototype=rt===null?Object.create(rt):(R.prototype=rt.prototype,new R)}}(),H=function(){return H=Object.assign||function($){for(var Q,rt=1,R=arguments.length;rt<R;rt++){Q=arguments[rt];for(var lt in Q)Object.prototype.hasOwnProperty.call(Q,lt)&&($[lt]=Q[lt])}return $},H.apply(this,arguments)},ot=function($){j(Q,$);function Q(rt){var R=$.call(this,rt)||this;return R.em=rt.config.em,R}return Q.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},Q.prototype.attributes=function(){return this.model.get("attributes")},Q.prototype.handleClick=function(rt){rt.preventDefault(),rt.stopPropagation();var R=this.em,lt=R.Canvas.getFrameEl().getBoundingClientRect(),A=lt.left,Mt=lt.top,Pt=H(H({},rt),{clientX:rt.clientX-A,clientY:rt.clientY-Mt});R.trigger("toolbar:run:before",{event:Pt}),this.execCommand(Pt)},Q.prototype.execCommand=function(rt){var R=this,lt=R.em,A=R.model,Mt={event:rt},Pt=A.get("command"),$t=lt.Editor;(0,at.isFunction)(Pt)&&Pt($t,null,Mt),(0,at.isString)(Pt)&&$t.runCommand(Pt,Mt)},Q.prototype.render=function(){var rt=this,R=rt.em,lt=rt.$el,A=rt.model,Mt=A.get("id"),Pt=A.get("label"),$t=R.getConfig().stylePrefix;return lt.addClass("".concat($t,"toolbar-item")),Mt&&lt.addClass("".concat($t,"toolbar-item__").concat(Mt)),Pt&&lt.append(Pt),this},Q}(At.G7);const ht=ot;var kt=function(){var $=function(Q,rt){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,lt){R.__proto__=lt}||function(R,lt){for(var A in lt)Object.prototype.hasOwnProperty.call(lt,A)&&(R[A]=lt[A])},$(Q,rt)};return function(Q,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");$(Q,rt);function R(){this.constructor=Q}Q.prototype=rt===null?Object.create(rt):(R.prototype=rt.prototype,new R)}}(),Vt=function($){kt(Q,$);function Q(rt){var R=$.call(this,rt)||this,lt=rt.em;return R.em=lt,R.config={em:lt},R.listenTo(R.collection,"reset",R.render),R}return Q.prototype.onRender=function(){var rt=this.em.config.stylePrefix;this.el.className="".concat(rt,"toolbar-items")},Q}(k.Z);const Bt=Vt;Vt.prototype.itemView=ht;var Ot=ut(491),mt=ut(163),Yt=ut(675),re=ut(184),ae=function(){return ae=Object.assign||function($){for(var Q,rt=1,R=arguments.length;rt<R;rt++){Q=arguments[rt];for(var lt in Q)Object.prototype.hasOwnProperty.call(Q,lt)&&($[lt]=Q[lt])}return $},ae.apply(this,arguments)},Qt=function($,Q){var rt={};for(var R in $)Object.prototype.hasOwnProperty.call($,R)&&Q.indexOf(R)<0&&(rt[R]=$[R]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,R=Object.getOwnPropertySymbols($);lt<R.length;lt++)Q.indexOf(R[lt])<0&&Object.prototype.propertyIsEnumerable.call($,R[lt])&&(rt[R[lt]]=$[R[lt]]);return rt},ct;const Lt={activeResizer:!1,init:function(){this.onSelect=(0,at.debounce)(this.onSelect,0),(0,at.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),ct=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function($){var Q=this,rt=this.em,R=rt.getConfig().listenToEl,lt=rt.getContainer().parentNode,A=$?"on":"off",Mt={on:Ot.on,off:Ot.S1},Pt=re.g.update;!R.length&&lt&&R.push(lt);var $t=function(xe,Ct){Mt[A](Ct,"mouseover",Q.onHover),Mt[A](Ct,"mouseleave",Q.onOut),Mt[A](Ct,"click",Q.onClick),Mt[A](xe,"scroll",Q.onFrameScroll,!0),Mt[A](xe,"resize",Q.onFrameResize)};Mt[A](window,"resize",this.onFrameUpdated),Mt[A](R,"scroll",this.onContainerChange),rt[A]("component:toggled ".concat(Pt," undo redo"),this.onSelect,this),rt[A]("change:componentHovered",this.onHovered,this),rt[A]("component:resize styleable:change component:input",this.updateGlobalPos,this),rt[A]("".concat(Pt,":toolbar"),this._upToolbar,this),rt[A]("frame:updated",this.onFrameUpdated,this),rt[A]("canvas:updateTools",this.onFrameUpdated,this),rt[A](rt.Canvas.events.refresh,this.updateAttached,this),rt.Canvas.getFrames().forEach(function(xe){var Ct=xe.view,Ut=Ct==null?void 0:Ct.getWindow();Ut&&$t(Ut,Ct==null?void 0:Ct.getBody())})},onHover:function($){$.stopPropagation();var Q=this.em,rt=$.target,R=(0,mt.getComponentView)(rt),lt=R==null?void 0:R.frameView,A=R==null?void 0:R.model;if(!A)for(var Mt=rt.parentNode;!A&&Mt&&!(0,Ot.Mx)(Mt);)A=(0,mt.getComponentModel)(Mt),Mt=Mt.parentNode;this.currentDoc=rt.ownerDocument,Q.setHovered(A,{useValid:!0}),lt&&Q.setCurrentFrame(lt)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function($,Q){var rt=this,R,lt={};Q?(R=Q.views)===null||R===void 0||R.forEach(function(A){var Mt=A.el,Pt=rt.getElementPos(Mt);lt={el:Mt,pos:Pt,component:Q,view:(0,mt.getViewEl)(Mt)},Mt.ownerDocument===rt.currentDoc&&(rt.elHovered=lt),rt.updateToolsLocal(lt)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(A){var Mt=A.view,Pt=Mt&&Mt.getToolsEl();Pt&&rt.toggleToolsEl(0,0,{el:Pt})}))},onSelect:function(){var $=this.em,Q=$.getSelected(),rt=$.getCurrentFrame(),R=Q&&Q.getView(rt==null?void 0:rt.model),lt=R&&R.el,A={};if(lt&&(0,Ot.pn)(lt)){var Mt=this.getElementPos(lt);A={el:lt,pos:Mt,component:Q,view:(0,mt.getViewEl)(lt)}}this.elSelected=A,this.updateToolsGlobal(),this.updateLocalPos(A),this.initResize(Q)},updateGlobalPos:function(){var $=this.getElSelected();$.el&&($.pos=this.getElementPos($.el),this.updateToolsGlobal())},updateLocalPos:function($){var Q=this.getElHovered();Q.el&&(Q.pos=this.getElementPos(Q.el),this.updateToolsLocal($))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function($,Q,rt){rt===void 0&&(rt={});var R=rt.el||this.canvas.getToolsEl(Q);return R&&(R.style.display=$?"":"none"),R||{}},showElementOffset:function($,Q,rt){rt===void 0&&(rt={}),ct&&this.editor.runCommand("show-offset",{el:$,elPos:Q,view:rt.view,force:1,top:0,left:0})},hideElementOffset:function($){this.editor.stopCommand("show-offset",{view:$})},showFixedElementOffset:function($,Q){this.editor.runCommand("show-offset",{el:$,elPos:Q,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function($){this.canvas.getHighlighter($).style.opacity=0},onClick:function($){$.stopPropagation(),$.preventDefault();var Q=this.em;if(Q.get("_cmpDrag"))return Q.set("_cmpDrag");var rt=$.target,R=(0,mt.getComponentModel)(rt);if(!R)for(var lt=rt.parentNode;!R&&lt&&!(0,Ot.Mx)(lt);)R=(0,mt.getComponentModel)(lt),lt=lt.parentNode;if(R){if(Q.isEditing()&&(!R.get("textable")&&R.isChildOf("text")||Q.getEditing()!==R))return;this.select(R,$)}},select:function($,Q){Q===void 0&&(Q={}),$&&(this.editor.select($,{event:Q,useValid:!0}),this.initResize($))},updateBadge:function($,Q,rt){rt===void 0&&(rt={});var R=this.canvas,lt=(0,mt.getComponentModel)($),A=this.getBadge(rt),Mt=A.style;if(!lt||!lt.get("badgable")){Mt.display="none";return}if(!rt.posOnly){var Pt=this.canvas.getConfig(),$t=lt.getIcon(),xe=Pt.pStylePrefix||"",Ct="".concat(xe,"badge"),Ut=Pt.customBadgeLabel,se="".concat($t?'<div class="'.concat(Ct,'__icon">').concat($t,"</div>"):"",`
        <div class="`).concat(Ct,'__name">').concat(lt.getName(),"</div>");A.innerHTML=Ut?Ut(lt):se}var Wt="px";Mt.display="block";var be=R.getTargetToElementFixed($,A,{pos:Q}),vt=be.top,jt=rt.leftOff<0?-rt.leftOff:0;Mt.top=vt+Wt,Mt.left=jt+Wt},showHighlighter:function($){this.canvas.getHighlighter($).style.opacity=""},initResize:function($){var Q=this,rt=Q.em,R=Q.canvas,lt=rt.Editor,A=!(0,at.isElement)($)&&(0,Ot.o5)($)?$:rt.getSelected(),Mt=A==null?void 0:A.get("resizable"),Pt=Yt.q.Resize,$t=R.hasCustomSpot(Pt);if(R.removeSpots({type:Pt}),A&&Mt){R.addSpot({type:Pt,component:A});var xe=(0,at.isElement)($)?$:A.getEl(),Ct=(0,mt.isObject)(Mt)?Mt:{},Ut=Ct.onStart,se=Ut===void 0?function(){}:Ut,Wt=Ct.onMove,be=Wt===void 0?function(){}:Wt,vt=Ct.onEnd,jt=vt===void 0?function(){}:vt,Nt=Ct.updateTarget,oe=Nt===void 0?function(){}:Nt,fe=Qt(Ct,["onStart","onMove","onEnd","updateTarget"]);if($t||!xe||this.activeResizer)return;var Xt,ve=rt.config,Ke=ve.stylePrefix||"",gr="".concat(Ke,"resizing"),Or=this,lr={component:A,el:xe},de=function(V,Z,pt){var Et=pt.docs;Et&&Et.forEach(function(X){var xt=X.body,dt=xt.className||"";xt.className=(V=="add"?"".concat(dt," ").concat(gr):dt.replace(gr,"")).trim()})},P=ae({onStart:function(V,Z){se(V,Z);var pt=Z.el,Et=Z.config,X=Z.resizer,xt=Et.keyHeight,dt=Et.keyWidth,Ce=Et.currentUnit,Ge=Et.keepAutoHeight,Re=Et.keepAutoWidth;de("add",V,Z),Xt=rt.Styles.getModelToStyle(A),R.toggleFramesEvents(!1);var Ue=getComputedStyle(pt),rr=Xt.getStyle(),ge=rr[dt];Et.autoWidth=Re&&ge==="auto",isNaN(parseFloat(ge))&&(ge=Ue[dt]);var Qe=rr[xt];Et.autoHeight=Ge&&Qe==="auto",isNaN(parseFloat(Qe))&&(Qe=Ue[xt]),X.startDim.w=parseFloat(ge),X.startDim.h=parseFloat(Qe),ct=!1,Ce&&(Et.unitHeight=(0,mt.getUnitFromValue)(Qe),Et.unitWidth=(0,mt.getUnitFromValue)(ge)),Or.activeResizer=!0,lt.trigger("component:resize",ae(ae({},lr),{type:"start"}))},onMove:function(V){be(V),lt.trigger("component:resize",ae(ae({},lr),{type:"move"}))},onEnd:function(V,Z){jt(V,Z),de("remove",V,Z),lt.trigger("component:resize",ae(ae({},lr),{type:"end"})),R.toggleFramesEvents(!0),ct=!0,Or.activeResizer=!1},updateTarget:function(V,Z,pt){if(oe(V,Z,pt),!!Xt){var Et=pt.store,X=pt.selectedHandler,xt=pt.config,dt=xt.keyHeight,Ce=xt.keyWidth,Ge=xt.autoHeight,Re=xt.autoWidth,Ue=xt.unitWidth,rr=xt.unitHeight,ge=["tc","bc"].indexOf(X)>=0,Qe=["cl","cr"].indexOf(X)>=0,De={};if(!ge){var $e=R.getBody().offsetWidth,kr=Z.w<$e?Z.w:$e;De[Ce]=Re?"auto":"".concat(kr).concat(Ue)}Qe||(De[dt]=Ge?"auto":"".concat(Z.h).concat(rr)),rt.getDragMode(A)&&(De.top="".concat(Z.t).concat(rr),De.left="".concat(Z.l).concat(Ue));var _e=ae(ae({},De),{__p:!Et});Xt.addStyle(_e,{avoidStore:!Et}),rt.Styles.__emitCmpStyleUpdate(_e,{components:rt.getSelected()})}}},fe);this.resizer=lt.runCommand("resize",{el:xe,options:P,force:1})}else{if($t)return;lt.stopCommand("resize"),this.resizer=null}},updateToolbar:function($){var Q=this.canvas,rt=this.config.em,R=$===rt?rt.getSelected():$,lt=Q.getToolbarEl(),A=lt.style,Mt=R.get("toolbar"),Pt=rt.config.showToolbar,$t=!Q.hasCustomSpot(Yt.q.Select);if(R&&Pt&&Mt&&Mt.length&&$t){if(A.display="",!this.toolbar){lt.innerHTML="",this.toolbar=new L(Mt);var xe=new Bt({collection:this.toolbar,em:rt});lt.appendChild(xe.render().el)}this.toolbar.reset(Mt),A.top="-100px",A.left="0"}else A.display="none"},updateToolbarPos:function($){var Q="px",rt=this.canvas.getToolbarEl().style;rt.top="".concat($.top).concat(Q),rt.left="".concat($.left).concat(Q),rt.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function($){return $===void 0&&($={}),this.canvas.getBadgeEl($.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function($){return $&&$.get("status")==="selected"},updateToolsLocal:function($){var Q=this.em.getConfig(),rt=$||this.getElHovered(),R=rt.el,lt=rt.pos,A=rt.view,Mt=rt.component;if(!R){this.lastHovered=0;return}var Pt=Mt.get("hoverable"),$t=this.lastHovered!==R,xe=$t?{}:{posOnly:1},Ct=this.canvas.hasCustomSpot(Yt.q.Hover);$t&&Pt&&(this.lastHovered=R,Ct?this.hideHighlighter(A):this.showHighlighter(A),this.showElementOffset(R,lt,{view:A})),this.isCompSelected(Mt)&&(this.hideHighlighter(A),!Q.showOffsetsSelected&&this.hideElementOffset(A));var Ut="px",se=this.toggleToolsEl(1,A),Wt=se.style,be=this.canvas.canvasRectOffset(R,lt),vt=be.top,jt=be.left;!Ct&&this.updateBadge(R,lt,ae(ae({},xe),{view:A,topOff:vt,leftOff:jt})),Wt.top=vt+Ut,Wt.left=jt+Ut,Wt.width=lt.width+Ut,Wt.height=lt.height+Ut,this._trgToolUp("local",{component:Mt,el:se,top:vt,left:jt,width:lt.width,height:lt.height})},_upToolbar:(0,at.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function($,Q){Q===void 0&&(Q={}),this.em.trigger("canvas:tools:update",ae({type:$},Q))},updateToolsGlobal:function($){$===void 0&&($={});var Q=this.getElSelected(),rt=Q.el,R=Q.pos,lt=Q.component;if(!rt){this.toggleToolsEl(),this.lastSelected=0;return}var A=this.canvas,Mt=this.lastSelected!==rt;(Mt||$.force)&&(this.lastSelected=rt,this.updateToolbar(lt));var Pt="px",$t=this.toggleToolsEl(1),xe=$t.style,Ct=A.getTargetToElementFixed(rt,A.getToolbarEl(),{pos:R}),Ut=Ct.canvasOffsetTop,se=Ct.canvasOffsetLeft;xe.top=Ut+Pt,xe.left=se+Pt,xe.width=R.width+Pt,xe.height=R.height+Pt,this.updateToolbarPos({top:Ct.top,left:Ct.left}),this._trgToolUp("global",{component:lt,el:$t,top:Ut,left:se,width:R.width,height:R.height})},updateAttached:(0,at.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,at.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function($){return this.canvas.getCanvasView().getElementPos($,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function($){$&&$.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function($){(0,mt.hasWin)()&&(this.editor=$&&$.get("Editor"),this.enable())},stop:function($,Q,rt){if(rt===void 0&&(rt={}),!!(0,mt.hasWin)()){var R=this,lt=R.em,A=R.editor;this.onHovered(),this.stopSelectComponent(),!rt.preserveSelected&&lt.setSelected(),this.toggleToolsEl(),A&&A.stopCommand("resize")}}}},189:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>At});var at=ut(895);const At={startSelectPosition:function(Y,G,D){var F=this;D===void 0&&(D={}),this.isPointed=!1;var O=this.em.Utils,L=Y.ownerDocument.body;O&&!this.sorter&&(this.sorter=new O.Sorter({container:L,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:G,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return F.em.getZoomDecimal()}})),D.onStart&&(this.sorter.onStart=D.onStart),Y&&this.sorter.startSort(Y,{container:L})},getOffsetDim:function(){var Y=this.offset(this.canvas.getFrameEl()),G=this.offset(this.canvas.getElement()),D=Y.top-G.top,F=Y.left-G.left;return{top:D,left:F}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,at.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,at.default)(this.cDim[this.posIndex][5]).parent():(0,at.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(Y,G,D){var F=Y||0,O=G||"before",L=D.length,k=L!==0&&O=="after"&&F==L;return L!==0&&(!k&&!D[F][4]||D[F-1]&&!D[F-1][4]||k&&!D[F-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>D});var at=ut(50),At=ut(675),Y=ut(895),G=function(){return G=Object.assign||function(F){for(var O,L=1,k=arguments.length;L<k;L++){O=arguments[L];for(var j in O)Object.prototype.hasOwnProperty.call(O,j)&&(F[j]=O[j])}return F},G.apply(this,arguments)};const D={getOffsetMethod:function(F){var O=F||"";return"get"+O+"OffsetViewerEl"},run:function(F,O,L){var k=this.canvas,j=L||{},H=j.state||"",ot=F.getConfig(),ht=this.em.getZoomDecimal(),kt=j.el;if(!ot.showOffsets||!(kt instanceof HTMLElement)||!ot.showOffsetsSelected&&H=="Fixed"){F.stopCommand("".concat(this.id),L);return}if(!k.hasCustomSpot(At.q.Spacing)){var Vt=G({},j.elPos||k.getElementPos(kt));(0,at.isUndefined)(j.top)||(Vt.top=j.top),(0,at.isUndefined)(j.left)||(Vt.left=j.left);var Bt=window.getComputedStyle(kt),Ot=this.ppfx,mt=H+"State",Yt=this.getOffsetMethod(H),re=k[Yt](L.view);re.style.opacity="";var ae=this["marginT"+H],Qt=this["marginB"+H],ct=this["marginL"+H],Lt=this["marginR"+H],$=this["padT"+H],Q=this["padB"+H],rt=this["padL"+H],R=this["padR"+H];if(re.childNodes.length&&(this[mt]="1",ae=re.querySelector("[data-offset-m-t]"),Qt=re.querySelector("[data-offset-m-b]"),ct=re.querySelector("[data-offset-m-l]"),Lt=re.querySelector("[data-offset-m-r]"),$=re.querySelector("[data-offset-p-t]"),Q=re.querySelector("[data-offset-p-b]"),rt=re.querySelector("[data-offset-p-l]"),R=re.querySelector("[data-offset-p-r]")),!this[mt]){var lt=H.toLowerCase(),A=lt+"margin-v",Mt=lt+"padding-v",Pt=(0,Y.default)('<div class="'.concat(Ot,'marginName">')).get(0),$t=(0,Y.default)('<div class="'.concat(Ot,'paddingName">')).get(0),xe=Ot+A+"-el",Ct=Ot+Mt+"-el",Ut="".concat(xe," ").concat(Ot+A),se="".concat(Ct," ").concat(Ot+Mt);ae=(0,Y.default)('<div class="'.concat(Ut,'-top"></div>')).get(0),Qt=(0,Y.default)('<div class="'.concat(Ut,'-bottom"></div>')).get(0),ct=(0,Y.default)('<div class="'.concat(Ut,'-left"></div>')).get(0),Lt=(0,Y.default)('<div class="'.concat(Ut,'-right"></div>')).get(0),$=(0,Y.default)('<div class="'.concat(se,'-top"></div>')).get(0),Q=(0,Y.default)('<div class="'.concat(se,'-bottom"></div>')).get(0),rt=(0,Y.default)('<div class="'.concat(se,'-left"></div>')).get(0),R=(0,Y.default)('<div class="'.concat(se,'-right"></div>')).get(0),this["marginT"+H]=ae,this["marginB"+H]=Qt,this["marginL"+H]=ct,this["marginR"+H]=Lt,this["padT"+H]=$,this["padB"+H]=Q,this["padL"+H]=rt,this["padR"+H]=R,Pt.appendChild(ae),Pt.appendChild(Qt),Pt.appendChild(ct),Pt.appendChild(Lt),$t.appendChild($),$t.appendChild(Q),$t.appendChild(rt),$t.appendChild(R),re.appendChild(Pt),re.appendChild($t),this[mt]="1"}var Wt="px",be=parseFloat(Bt.marginLeft.replace(Wt,""))*ht,vt=parseFloat(Bt.marginRight.replace(Wt,""))*ht,jt=parseFloat(Bt.marginTop.replace(Wt,""))*ht,Nt=parseFloat(Bt.marginBottom.replace(Wt,""))*ht,oe=ae.style,fe=Qt.style,Xt=ct.style,ve=Lt.style,Ke=$.style,gr=Q.style,Or=rt.style,lr=R.style,de=parseFloat(Vt.left),P=parseFloat(Bt.width)*ht+Wt;oe.height=jt+Wt,oe.width=P,oe.top=Vt.top-jt+Wt,oe.left=de+Wt,fe.height=Nt+Wt,fe.width=P,fe.top=Vt.top+Vt.height+Wt,fe.left=de+Wt;var V=Vt.height+jt+Nt+Wt,Z=Vt.top-jt+Wt;Xt.height=V,Xt.width=be+Wt,Xt.top=Z,Xt.left=de-be+Wt,ve.height=V,ve.width=vt+Wt,ve.top=Z,ve.left=de+Vt.width+Wt;var pt=parseFloat(Bt.paddingTop)*ht;Ke.height=pt+Wt;var Et=parseFloat(Bt.paddingBottom)*ht;gr.height=Et+Wt;var X=Vt.height-Et-pt+Wt,xt=Vt.top+pt+Wt;Or.height=X,Or.width=parseFloat(Bt.paddingLeft)*ht+Wt,Or.top=xt;var dt=parseFloat(Bt.paddingRight)*ht;lr.height=X,lr.width=dt+Wt,lr.top=xt}},stop:function(F,O,L){L===void 0&&(L={});var k=L||{},j=k.state||"",H=this.getOffsetMethod(j),ot=L.view,ht=this.canvas,kt=ht[H](ot);kt.style.opacity=0}}},434:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>Y});var at=ut(50),At=ut(163);const Y={init:function(){(0,at.bindAll)(this,"_onFramesChange")},run:function(G){this.toggleVis(G,!0)},stop:function(G){this.toggleVis(G,!1)},toggleVis:function(G,D){if(D===void 0&&(D=!0),!G.Commands.isActive("preview")){var F=G.Canvas,O=D?"on":"off",L=F.getModel();L[O]("change:frames",this._onFramesChange),this.handleFrames(F.getFrames(),D)}},handleFrames:function(G,D){var F=this;G.forEach(function(O){var L;!((L=O.view)===null||L===void 0)&&L.loaded&&F._upFrame(O,D),O.__ol||(O.on("loaded",function(){return F._upFrame(O)}),O.__ol=!0)})},_onFramesChange:function(G,D){this.handleFrames(D)},_upFrame:function(G,D){var F,O=this,L=O.ppfx,k=O.em,j=O.id,H=(0,At.isDef)(D)?D:k.Commands.isActive(j),ot=H?"add":"remove",ht="".concat(L,"dashed");(F=G.view)===null||F===void 0||F.getBody().classList[ot](ht)}}},346:(S,tt,ut)=>{ut.d(tt,{FE:()=>F,G7:()=>O,Hn:()=>D,pH:()=>k,vA:()=>L});var at=ut(316),At=ut.n(at),Y=function(){var j=function(H,ot){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,kt){ht.__proto__=kt}||function(ht,kt){for(var Vt in kt)Object.prototype.hasOwnProperty.call(kt,Vt)&&(ht[Vt]=kt[Vt])},j(H,ot)};return function(H,ot){if(typeof ot!="function"&&ot!==null)throw new TypeError("Class extends value "+String(ot)+" is not a constructor or null");j(H,ot);function ht(){this.constructor=H}H.prototype=ot===null?Object.create(ot):(ht.prototype=ot.prototype,new ht)}}(),G=function(){return G=Object.assign||function(j){for(var H,ot=1,ht=arguments.length;ot<ht;ot++){H=arguments[ot];for(var kt in H)Object.prototype.hasOwnProperty.call(H,kt)&&(j[kt]=H[kt])}return j},G.apply(this,arguments)},D=function(j){Y(H,j);function H(){return j!==null&&j.apply(this,arguments)||this}return H}(At().Model),F=function(j){Y(H,j);function H(){return j!==null&&j.apply(this,arguments)||this}return H}(At().Collection),O=function(j){Y(H,j);function H(){return j!==null&&j.apply(this,arguments)||this}return H}(At().View),L;(function(j){j.Screen="screen",j.World="world"})(L||(L={}));var k={x:0,y:0};G(G({},k),{width:0,height:0})},184:(S,tt,ut)=>{ut.d(tt,{W:()=>at,g:()=>At});var at;(function(Y){Y.remove="component:remove",Y.add="component:add",Y.move="component:move"})(at||(at={}));var At;(function(Y){Y.add="component:add",Y.remove="component:remove",Y.removeBefore="component:remove:before",Y.create="component:create",Y.update="component:update",Y.updateInside="component:update-inside",Y.symbolMainAdd="symbol:main:add",Y.symbolMainUpdate="symbol:main:update",Y.symbolMainUpdateDeep="symbol:main:update-deep",Y.symbolMainRemove="symbol:main:remove",Y.symbolMain="symbol:main",Y.symbolInstanceAdd="symbol:instance:add",Y.symbolInstanceRemove="symbol:instance:remove",Y.symbolInstance="symbol:instance",Y.symbol="symbol"})(At||(At={}))},330:(S,tt,ut)=>{ut.d(tt,{Z:()=>D});var at=ut(50),At=ut(346),Y=function(){var F=function(O,L){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,j){k.__proto__=j}||function(k,j){for(var H in j)Object.prototype.hasOwnProperty.call(j,H)&&(k[H]=j[H])},F(O,L)};return function(O,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");F(O,L);function k(){this.constructor=O}O.prototype=L===null?Object.create(L):(k.prototype=L.prototype,new k)}}(),G=function(F){Y(O,F);function O(L,k,j){L===void 0&&(L={}),j===void 0&&(j=!1);var H=F.call(this,L)||this;return H.itemsView="",H.itemType="type",H.reuseView=!1,H.config=k||L.config||{},j&&H.listenTo(H.collection,"add",H.addTo),H.items=[],H}return O.prototype.addTo=function(L){this.add(L)},O.prototype.itemViewNotFound=function(L){var k=this,j=k.config,H=k.ns,ot=j.em,ht="".concat(H?"[".concat(H,"]: "):"","'").concat(L,"' type not found");ot&&ot.logWarning(ht)},O.prototype.add=function(L,k){var j=this,H=j.config,ot=j.reuseView,ht=j.items,kt=this.itemsView||{},Vt=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],Bt=k||null,Ot=this.itemView,mt=L.get(this.itemType),Yt;kt[mt]?Ot=kt[mt]:mt&&!kt[mt]&&!(0,at.includes)(Vt,mt)&&this.itemViewNotFound(mt),L.view&&ot?Yt=L.view:Yt=new Ot({model:L,config:H},H),ht&&ht.push(Yt);var re=Yt.render().el;Bt?Bt.appendChild(re):this.$el.append(re)},O.prototype.render=function(){var L=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(k){this.add(k,L)},this),this.$el.append(L),this.onRender(),this},O.prototype.onRender=function(){},O.prototype.onRemoveBefore=function(L,k){},O.prototype.onRemove=function(L,k){},O.prototype.remove=function(L){L===void 0&&(L={});var k=this.items;return this.onRemoveBefore(k,L),this.clearItems(),F.prototype.remove.call(this),this.onRemove(k,L),this},O.prototype.clearItems=function(){this.items},O}(At.G7);const D=G;G.prototype.itemView=""},668:(S,tt,ut)=>{ut.d(tt,{Z:()=>O});var at=ut(50),At=ut(491),Y=function(){return Y=Object.assign||function(L){for(var k,j=1,H=arguments.length;j<H;j++){k=arguments[j];for(var ot in k)Object.prototype.hasOwnProperty.call(k,ot)&&(L[ot]=k[ot])}return L},Y.apply(this,arguments)},G=function(){return{x:0,y:0}},D=["x","y"],F=function(){function L(k){return k===void 0&&(k={}),this.opts={snapOffset:5,scale:1},(0,at.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(k),this.delta=G(),this.lastScroll=G(),this.lastScrollDiff=G(),this.startPointer=G(),this.startPosition=G(),this.globScrollDiff=G(),this.currentPointer=G(),this.position=G(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return L.prototype.setOptions=function(k){k===void 0&&(k={}),this.opts=Y(Y({},this.opts),k)},L.prototype.toggleDrag=function(k){var j=this.getDocumentEl(),H=this.getContainerEl(),ot=this.getWindowEl(),ht=k?"on":"off",kt={on:At.on,off:At.S1};kt[ht](H,"mousemove dragover",this.drag),kt[ht](j,"mouseup dragend touchend",this.stop),kt[ht](j,"keydown",this.keyHandle),kt[ht](ot,"scroll",this.handleScroll)},L.prototype.handleScroll=function(){var k=this,j=k.lastScroll,H=k.delta,ot=this.getScrollInfo(),ht={x:ot.x-j.x,y:ot.y-j.y};this.move(H.x+ht.x,H.y+ht.y),this.lastScrollDiff=ht},L.prototype.start=function(k){var j=this.opts,H=j.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(k),this.guidesStatic=(0,at.result)(j,"guidesStatic")||[],this.guidesTarget=(0,at.result)(j,"guidesTarget")||[],(0,at.isFunction)(H)&&H(k,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=G(),this.globScrollDiff=G(),this.drag(k)},L.prototype.drag=function(k){var j=this,H=this,ot=H.opts,ht=H.lastScrollDiff,kt=H.globScrollDiff,Vt=ot.onDrag,Bt=this.startPointer,Ot=this.getPointerPos(k),mt={x:kt.x+ht.x,y:kt.y+ht.y};this.globScrollDiff=mt;var Yt={x:Ot.x-Bt.x+mt.x,y:Ot.y-Bt.y+mt.y};this.lastScrollDiff=G();var re=this.lockedAxis;k.shiftKey?re=!re&&this.detectAxisLock(Yt.x,Yt.y):re=null,re==="x"?Yt.x=Bt.x:re==="y"&&(Yt.y=Bt.y);var ae=function(rt){D.forEach(function(R){return rt[R]=rt[R]*(0,at.result)(ot,"scale")}),j.delta=rt,j.move(rt.x,rt.y),(0,at.isFunction)(Vt)&&Vt(k,j)},Qt=Y({},Yt);if(this.currentPointer=Ot,this.lockedAxis=re,this.lastScroll=this.getScrollInfo(),ae(Yt),this.guidesTarget.length){var ct=this.snapGuides(Qt),Lt=ct.newDelta,$=ct.trgX,Q=ct.trgY;($||Q)&&ae(Lt)}k.which===0&&this.stop(k)},L.prototype.snapGuides=function(k){var j=this,H=k,ot=this,ht=ot.trgX,kt=ot.trgY;return this.guidesTarget.forEach(function(Vt){Vt.x&&j.trgX||Vt.y&&j.trgY||(Vt.active=!1,j.guidesStatic.forEach(function(Bt){if(!(Vt.y&&Bt.x||Vt.x&&Bt.y)){var Ot=Vt.y&&Bt.y,mt=Ot?"y":"x",Yt=Vt[mt],re=Bt[mt],ae=k[mt],Qt=Ot?kt:ht;if(j.isPointIn(Yt,re)&&(0,at.isUndefined)(Qt)){var ct=ae-(Yt-re);j.setGuideLock(Vt,ct)}}}))}),ht=this.trgX,kt=this.trgY,D.forEach(function(Vt){var Bt=Vt.toUpperCase(),Ot=j["trg".concat(Bt)];Ot&&!j.isPointIn(k[Vt],Ot.lock)&&(j.setGuideLock(Ot,null),Ot=null),Ot&&!(0,at.isUndefined)(Ot.lock)&&(H[Vt]=Ot.lock)}),{newDelta:H,trgX:this.trgX,trgY:this.trgY}},L.prototype.isPointIn=function(k,j,H){var ot=H===void 0?{}:H,ht=ot.offset,kt=ht||this.opts.snapOffset||0;return k>=j&&k<=j+kt||k<=j&&k>=j-kt},L.prototype.setGuideLock=function(k,j){var H=(0,at.isUndefined)(k.x)?"Y":"X",ot="trg".concat(H);return j!==null?(k.active=!0,k.lock=j,this[ot]=k):(delete k.active,delete k.lock,delete this[ot]),k},L.prototype.stop=function(k,j){j===void 0&&(j={});var H=this.delta,ot=!!j.cancel,ht=ot?0:H.x,kt=ot?0:H.y;this.toggleDrag(),this.lockedAxis=null,this.move(ht,kt,!0);var Vt=this.opts.onEnd;(0,at.isFunction)(Vt)&&Vt(k,this,{cancelled:ot})},L.prototype.keyHandle=function(k){(0,At.kl)(k)&&this.stop(k,{cancel:!0})},L.prototype.move=function(k,j,H){var ot=this,ht=ot.el,kt=ot.opts,Vt=this.startPosition;if(Vt){var Bt=kt.setPosition,Ot=Vt.x+k,mt=Vt.y+j;this.position={x:Ot,y:mt,end:H},(0,at.isFunction)(Bt)&&Bt(this.position),ht&&(ht.style.left="".concat(Ot,"px"),ht.style.top="".concat(mt,"px"))}},L.prototype.getContainerEl=function(){var k=this.opts.container;return k?[k]:this.getDocumentEl()},L.prototype.getWindowEl=function(){var k=this.getContainerEl();return k.map(function(j){var H=j.ownerDocument||j;return H.defaultView||H.parentWindow})},L.prototype.getDocumentEl=function(k){var j=this.opts.doc;if(k=k||this.el,!this.docs.length){var H=[document];k&&H.push(k.ownerDocument),j&&H.push(j),this.docs=H}return this.docs},L.prototype.getPointerPos=function(k){var j=this.opts.getPointerPosition,H=(0,At.VB)(k);return j?j(k):{x:H.clientX,y:H.clientY}},L.prototype.getStartPosition=function(){var k=this,j=k.el,H=k.opts,ot=H.getPosition,ht=G();return(0,at.isFunction)(ot)?ht=ot():j&&(ht={x:parseFloat(j.style.left),y:parseFloat(j.style.top)}),ht},L.prototype.getScrollInfo=function(){var k=this.opts.doc,j=k&&k.body;return{y:j?j.scrollTop:0,x:j?j.scrollLeft:0}},L.prototype.detectAxisLock=function(k,j){var H=k,ot=j,ht=Math.abs(H),kt=Math.abs(ot);if(ot>=ht||ot<=-ht)return"x";if(H>kt||H<-kt)return"y"},L}();const O=F},895:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{default:()=>Gn});var at=typeof document<"u"?document:null,At=typeof window<"u"?window:null,Y=Array.prototype,G=Y.filter,D=Y.indexOf,F=Y.map,O=Y.push,L=Y.reverse,k=Y.slice,j=Y.splice,H=/^#[\w-]*$/,ot=/^\.[\w-]*$/,ht=/<.+>/,kt=/^\w+$/;function Vt(N,it){return it===void 0&&(it=at),ot.test(N)?it.getElementsByClassName(N.slice(1)):kt.test(N)?it.getElementsByTagName(N):it.querySelectorAll(N)}function Bt(N,it){if(it===void 0&&(it=at),!!N){if(N.__cash)return N;var yt=N;if(rt(N)){if(it.__cash&&(it=it[0]),yt=H.test(N)?it.getElementById(N.slice(1)):ht.test(N)?ir(N):Vt(N,it),!yt)return}else if(Q(N))return this.ready(N);(yt.nodeType||yt===At)&&(yt=[yt]),this.length=yt.length;for(var Ft=0,ce=this.length;Ft<ce;Ft++)this[Ft]=yt[Ft]}}function Ot(N,it){return new Bt(N,it)}var mt=Ot.fn=Ot.prototype=Bt.prototype={constructor:Ot,__cash:!0,length:0,splice:j};mt.get=function(N){return N===void 0?k.call(this):this[N<0?N+this.length:N]},mt.eq=function(N){return Ot(this.get(N))},mt.first=function(){return this.eq(0)},mt.last=function(){return this.eq(-1)},mt.map=function(N){return Ot(F.call(this,function(it,yt){return N.call(it,yt,it)}))},mt.slice=function(){return Ot(k.apply(this,arguments))};var Yt=/(?:^\w|[A-Z]|\b\w)/g,re=/[\s-_]+/g;function ae(N){return N.replace(Yt,function(it,yt){return it[yt?"toUpperCase":"toLowerCase"]()}).replace(re,"")}Ot.camelCase=ae;function Qt(N,it){for(var yt=0,Ft=N.length;yt<Ft&&it.call(N[yt],N[yt],yt,N)!==!1;yt++);}Ot.each=Qt,mt.each=function(N){return Qt(this,function(it,yt){return N.call(it,yt,it)}),this},mt.removeProp=function(N){return this.each(function(it,yt){delete yt[N]})};function ct(N){N===void 0&&(N=this);for(var it=arguments,yt=it.length,Ft=yt<2?0:1;Ft<yt;Ft++)for(var ce in it[Ft])N[ce]=it[Ft][ce];return N}Ot.extend=mt.extend=ct;var Lt=1;Ot.guid=Lt;function $(N,it){var yt=N&&(N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.msMatchesSelector||N.oMatchesSelector);return!!yt&&yt.call(N,it)}Ot.matches=$;function Q(N){return typeof N=="function"}Ot.isFunction=Q;function rt(N){return typeof N=="string"}Ot.isString=rt;function R(N){return!isNaN(parseFloat(N))&&isFinite(N)}Ot.isNumeric=R;var lt=Array.isArray;Ot.isArray=lt,mt.prop=function(N,it){if(N){if(rt(N))return arguments.length<2?this[0]&&this[0][N]:this.each(function(Ft,ce){ce[N]=it});for(var yt in N)this.prop(yt,N[yt]);return this}};function A(N){return rt(N)?function(it,yt){return $(yt,N)}:N.__cash?function(it,yt){return N.is(yt)}:function(it,yt,Ft){return yt===Ft}}mt.filter=function(N){if(!N)return Ot();var it=Q(N)?N:A(N);return Ot(G.call(this,function(yt,Ft){return it.call(yt,Ft,yt,N)}))};var Mt=/\S+/g;function Pt(N){return rt(N)?N.match(Mt)||[]:[]}mt.hasClass=function(N){var it=Pt(N),yt=!1;return it.length&&this.each(function(Ft,ce){return yt=ce.classList.contains(it[0]),!yt}),yt},mt.removeAttr=function(N){var it=Pt(N);return it.length?this.each(function(yt,Ft){Qt(it,function(ce){Ft.removeAttribute(ce)})}):this},mt.attr=function(N,it){if(N){if(rt(N)){if(arguments.length<2){if(!this[0])return;var yt=this[0].getAttribute(N);return yt===null?void 0:yt}return it===null?this.removeAttr(N):this.each(function(ce,ke){ke.setAttribute(N,it)})}for(var Ft in N)this.attr(Ft,N[Ft]);return this}},mt.toggleClass=function(N,it){var yt=Pt(N),Ft=it!==void 0;return yt.length?this.each(function(ce,ke){Qt(yt,function(qe){Ft?it?ke.classList.add(qe):ke.classList.remove(qe):ke.classList.toggle(qe)})}):this},mt.addClass=function(N){return this.toggleClass(N,!0)},mt.removeClass=function(N){return arguments.length?this.toggleClass(N,!1):this.attr("class","")};function $t(N){return N.filter(function(it,yt,Ft){return Ft.indexOf(it)===yt})}Ot.unique=$t,mt.add=function(N,it){return Ot($t(this.get().concat(Ot(N,it).get())))};function xe(N,it,yt){if(N.nodeType===1){var Ft=At.getComputedStyle(N,null);return it?yt?Ft.getPropertyValue(it):Ft[it]:Ft}}function Ct(N,it){return parseInt(xe(N,it),10)||0}var Ut=/^--/;function se(N){return Ut.test(N)}var Wt={},be=at&&at.createElement("div"),vt=be?be.style:{},jt=["webkit","moz","ms","o"];function Nt(N,it){if(it===void 0&&(it=se(N)),it)return N;if(!Wt[N]){var yt=ae(N),Ft=""+yt.charAt(0).toUpperCase()+yt.slice(1),ce=(yt+" "+jt.join(Ft+" ")+Ft).split(" ");Qt(ce,function(ke){if(ke in vt)return Wt[N]=ke,!1})}return Wt[N]}Ot.prefixedProp=Nt;var oe={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function fe(N,it,yt){return yt===void 0&&(yt=se(N)),!yt&&!oe[N]&&R(it)?it+"px":it}mt.css=function(N,it){if(rt(N)){var yt=se(N);return N=Nt(N,yt),arguments.length<2?this[0]&&xe(this[0],N,yt):N?(it=fe(N,it,yt),this.each(function(ce,ke){ke.nodeType===1&&(yt?ke.style.setProperty(N,it):ke.style[N]=it)})):this}for(var Ft in N)this.css(Ft,N[Ft]);return this};var Xt="__cashData",ve=/^data-(.*)/;Ot.hasData=function(N){return Xt in N};function Ke(N){return N[Xt]=N[Xt]||{}}function gr(N,it){var yt=Ke(N);if(it){if(!(it in yt)){var Ft=N.dataset?N.dataset[it]||N.dataset[ae(it)]:Ot(N).attr("data-"+it);if(Ft!==void 0){try{Ft=JSON.parse(Ft)}catch{}yt[it]=Ft}}return yt[it]}return yt}function Or(N,it){it===void 0?delete N[Xt]:delete Ke(N)[it]}function lr(N,it,yt){Ke(N)[it]=yt}mt.data=function(N,it){var yt=this;if(!N)return this[0]?(Qt(this[0].attributes,function(ce){var ke=ce.name.match(ve);ke&&yt.data(ke[1])}),gr(this[0])):void 0;if(rt(N))return it===void 0?this[0]&&gr(this[0],N):this.each(function(ce,ke){return lr(ke,N,it)});for(var Ft in N)this.data(Ft,N[Ft]);return this},mt.removeData=function(N){return this.each(function(it,yt){return Or(yt,N)})};function de(N,it){return Ct(N,"border"+(it?"Left":"Top")+"Width")+Ct(N,"padding"+(it?"Left":"Top"))+Ct(N,"padding"+(it?"Right":"Bottom"))+Ct(N,"border"+(it?"Right":"Bottom")+"Width")}Qt(["Width","Height"],function(N){mt["inner"+N]=function(){if(this[0])return this[0]===At?At["inner"+N]:this[0]["client"+N]}}),Qt(["width","height"],function(N,it){mt[N]=function(yt){return this[0]?arguments.length?(yt=parseInt(yt,10),this.each(function(Ft,ce){if(ce.nodeType===1){var ke=xe(ce,"boxSizing");ce.style[N]=fe(N,yt+(ke==="border-box"?de(ce,!it):0))}})):this[0]===At?this[0][ae("outer-"+N)]:this[0].getBoundingClientRect()[N]-de(this[0],!it):yt===void 0?void 0:this}}),Qt(["Width","Height"],function(N,it){mt["outer"+N]=function(yt){if(this[0])return this[0]===At?At["outer"+N]:this[0]["offset"+N]+(yt?Ct(this[0],"margin"+(it?"Top":"Left"))+Ct(this[0],"margin"+(it?"Bottom":"Right")):0)}});function P(N,it){for(var yt=0,Ft=it.length;yt<Ft;yt++)if(N.indexOf(it[yt])<0)return!1;return!0}function V(N,it,yt){Qt(N[yt],function(Ft){Ft[0];var ce=Ft[1];it.removeEventListener(yt,ce)}),delete N[yt]}var Z="__cashEvents",pt=".";function Et(N){return N[Z]=N[Z]||{}}function X(N,it,yt,Ft){Ft.guid=Ft.guid||Lt++;var ce=Et(N);ce[it]=ce[it]||[],ce[it].push([yt,Ft]),N.addEventListener(it,Ft)}function xt(N){var it=N.split(pt);return[it[0],it.slice(1).sort()]}function dt(N,it,yt,Ft){var ce=Et(N);if(it){var ke=ce[it];if(!ke)return;Ft&&(Ft.guid=Ft.guid||Lt++),ce[it]=ke.filter(function(qe){var ln=qe[0],Cn=qe[1];if(Ft&&Cn.guid!==Ft.guid||!P(ln,yt))return!0;N.removeEventListener(it,Cn)})}else if(!yt||!yt.length)for(it in ce)V(ce,N,it);else for(it in ce)dt(N,it,yt,Ft)}mt.off=function(N,it){var yt=this;return N===void 0?this.each(function(Ft,ce){return dt(ce)}):Qt(Pt(N),function(Ft){var ce=xt(Ft),ke=ce[0],qe=ce[1];yt.each(function(ln,Cn){return dt(Cn,ke,qe,it)})}),this},mt.on=function(N,it,yt,Ft){var ce=this;if(!rt(N)){for(var ke in N)this.on(ke,it,N[ke]);return this}return Q(it)&&(yt=it,it=!1),Qt(Pt(N),function(qe){var ln=xt(qe),Cn=ln[0],br=ln[1];ce.each(function(Lo,vn){var xn=function _o(Mr){if(!(Mr.namespace&&!P(br,Mr.namespace.split(pt)))){var Cr=vn;if(it){for(var Wr=Mr.target;!$(Wr,it);)if(Wr===vn||(Wr=Wr.parentNode,!Wr))return;Cr=Wr}Mr.namespace=Mr.namespace||"";var Sn=yt.call(Cr,Mr,Mr.data);Ft&&dt(vn,Cn,br,_o),Sn===!1&&(Mr.preventDefault(),Mr.stopPropagation())}};xn.guid=yt.guid=yt.guid||Lt++,X(vn,Cn,br,xn)})}),this},mt.one=function(N,it,yt){return this.on(N,it,yt,!0)},mt.ready=function(N){var it=function(){return N(Ot)};return at.readyState!=="loading"?setTimeout(it):at.addEventListener("DOMContentLoaded",it),this},mt.trigger=function(N,it){var yt=N;if(rt(N)){var Ft=xt(N),ce=Ft[0],ke=Ft[1];yt=at.createEvent("HTMLEvents"),yt.initEvent(ce,!0,!0),yt.namespace=ke.join(pt)}return yt.data=it,this.each(function(qe,ln){ln.dispatchEvent(yt)})};function Ce(N){var it=[];return Qt(N.options,function(yt){yt.selected&&!yt.disabled&&!yt.parentNode.disabled&&it.push(yt.value)}),it}function Ge(N){return N.selectedIndex<0?null:N.options[N.selectedIndex].value}var Re=/select-one/i,Ue=/select-multiple/i;function rr(N){var it=N.type;return Re.test(it)?Ge(N):Ue.test(it)?Ce(N):N.value}var ge=/%20/g;function Qe(N,it){return"&"+encodeURIComponent(N)+"="+encodeURIComponent(it).replace(ge,"+")}var De=/file|reset|submit|button|image/i,$e=/radio|checkbox/i;mt.serialize=function(){var N="";return this.each(function(it,yt){Qt(yt.elements||[yt],function(Ft){if(!(Ft.disabled||!Ft.name||Ft.tagName==="FIELDSET")&&!De.test(Ft.type)&&!($e.test(Ft.type)&&!Ft.checked)){var ce=rr(Ft);if(ce!==void 0){var ke=lt(ce)?ce:[ce];Qt(ke,function(qe){N+=Qe(Ft.name,qe)})}}})}),N.substr(1)},mt.val=function(N){return N===void 0?this[0]&&rr(this[0]):this.each(function(it,yt){var Ft=Ue.test(yt.type),ce=N===null?Ft?[]:"":N;Ft&&lt(ce)?Qt(yt.options,function(ke){ke.selected=ce.indexOf(ke.value)>=0}):yt.value=ce})},mt.clone=function(){return this.map(function(N,it){return it.cloneNode(!0)})},mt.detach=function(){return this.each(function(N,it){it.parentNode&&it.parentNode.removeChild(it)})};var kr=/^\s*<(\w+)[^>]*>/,_e=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,Tr;function Ae(){if(!Tr){var N=at.createElement("table"),it=at.createElement("tr");Tr={"*":at.createElement("div"),tr:at.createElement("tbody"),td:it,th:it,thead:N,tbody:N,tfoot:N}}}function ir(N){if(Ae(),!rt(N))return[];if(_e.test(N))return[at.createElement(RegExp.$1)];var it=kr.test(N)&&RegExp.$1,yt=Tr[it]||Tr["*"];return yt.innerHTML=N,Ot(yt.childNodes).detach().get()}Ot.parseHTML=ir,mt.empty=function(){var N=this[0];if(N)for(;N.firstChild;)N.removeChild(N.firstChild);return this};function ur(N,it,yt){yt?N.insertBefore(it,N.childNodes[0]):N.appendChild(it)}function fr(N,it,yt){if(it!==void 0){var Ft=rt(it);!Ft&&it.length?Qt(it,function(ce){return fr(N,ce,yt)}):Qt(N,Ft?function(ce){ce.insertAdjacentHTML(yt?"afterbegin":"beforeend",it)}:function(ce,ke){return ur(ce,ke?it.cloneNode(!0):it,yt)})}}mt.append=function(){var N=this;return Qt(arguments,function(it){fr(N,it)}),this},mt.appendTo=function(N){return fr(Ot(N),this),this},mt.html=function(N){if(N===void 0)return this[0]&&this[0].innerHTML;var it=N.nodeType?N[0].outerHTML:N;return this.each(function(yt,Ft){Ft.innerHTML=it})},mt.insertAfter=function(N){var it=this;return Ot(N).each(function(yt,Ft){var ce=Ft.parentNode;it.each(function(ke,qe){ce.insertBefore(yt?qe.cloneNode(!0):qe,Ft.nextSibling)})}),this},mt.after=function(){var N=this;return Qt(L.apply(arguments),function(it){L.apply(Ot(it).slice()).insertAfter(N)}),this},mt.insertBefore=function(N){var it=this;return Ot(N).each(function(yt,Ft){var ce=Ft.parentNode;it.each(function(ke,qe){ce.insertBefore(yt?qe.cloneNode(!0):qe,Ft)})}),this},mt.before=function(){var N=this;return Qt(arguments,function(it){Ot(it).insertBefore(N)}),this},mt.prepend=function(){var N=this;return Qt(arguments,function(it){fr(N,it,!0)}),this},mt.prependTo=function(N){return fr(Ot(N),L.apply(this.slice()),!0),this},mt.remove=function(){return this.detach().off()},mt.replaceWith=function(N){var it=this;return this.each(function(yt,Ft){var ce=Ft.parentNode;if(ce){var ke=yt?Ot(N).clone():Ot(N);if(!ke[0])return it.remove(),!1;ce.replaceChild(ke[0],Ft),Ot(ke[0]).after(ke.slice(1))}})},mt.replaceAll=function(N){return Ot(N).replaceWith(this),this},mt.text=function(N){return N===void 0?this[0]?this[0].textContent:"":this.each(function(it,yt){yt.textContent=N})};var Kt=at&&at.documentElement;mt.offset=function(){var N=this[0];if(N){var it=N.getBoundingClientRect();return{top:it.top+At.pageYOffset-Kt.clientTop,left:it.left+At.pageXOffset-Kt.clientLeft}}},mt.offsetParent=function(){return Ot(this[0]&&this[0].offsetParent)},mt.position=function(){var N=this[0];if(N)return{left:N.offsetLeft,top:N.offsetTop}},mt.children=function(N){var it=[];return this.each(function(yt,Ft){O.apply(it,Ft.children)}),it=Ot($t(it)),N?it.filter(function(yt,Ft){return $(Ft,N)}):it},mt.contents=function(){var N=[];return this.each(function(it,yt){O.apply(N,yt.tagName==="IFRAME"?[yt.contentDocument]:yt.childNodes)}),Ot(N.length&&$t(N))},mt.find=function(N){for(var it=[],yt=0,Ft=this.length;yt<Ft;yt++){var ce=Vt(N,this[yt]);ce.length&&O.apply(it,ce)}return Ot(it.length&&$t(it))},mt.has=function(N){var it=rt(N)?function(yt,Ft){return!!Vt(N,Ft).length}:function(yt,Ft){return Ft.contains(N)};return this.filter(it)},mt.is=function(N){if(!N||!this[0])return!1;var it=A(N),yt=!1;return this.each(function(Ft,ce){return yt=it(Ft,ce,N),!yt}),yt},mt.next=function(){return Ot(this[0]&&this[0].nextElementSibling)},mt.not=function(N){if(!N||!this[0])return this;var it=A(N);return this.filter(function(yt,Ft){return!it(yt,Ft,N)})},mt.parent=function(){var N=[];return this.each(function(it,yt){yt&&yt.parentNode&&N.push(yt.parentNode)}),Ot($t(N))},mt.index=function(N){var it=N?Ot(N)[0]:this[0],yt=N?this:Ot(it).parent().children();return D.call(yt,it)},mt.closest=function(N){return!N||!this[0]?Ot():this.is(N)?this.filter(N):this.parent().closest(N)},mt.parents=function(N){var it=[],yt;return this.each(function(Ft,ce){for(yt=ce;yt&&yt.parentNode&&yt!==at.body.parentNode;)yt=yt.parentNode,(!N||N&&$(yt,N))&&it.push(yt)}),Ot($t(it))},mt.prev=function(){return Ot(this[0]&&this[0].previousElementSibling)},mt.siblings=function(){var N=this[0];return this.parent().children().filter(function(it,yt){return yt!==N})};const Gn=Ot},491:(S,tt,ut)=>{ut.d(tt,{$Q:()=>ht,BM:()=>Yt,FW:()=>j,G1:()=>D,GX:()=>ct,L_:()=>O,Mx:()=>F,R3:()=>kt,S1:()=>xe,SJ:()=>mt,Ut:()=>Qt,VB:()=>Q,Vb:()=>A,cx:()=>L,dL:()=>ot,hy:()=>Mt,kl:()=>rt,nB:()=>Pt,o5:()=>ae,on:()=>$t,pn:()=>H,r$:()=>R,rw:()=>Bt,sE:()=>k,sN:()=>$,t3:()=>Ot,ut:()=>Vt});var at=ut(50),At=function(Ct,Ut,se){if(se||arguments.length===2)for(var Wt=0,be=Ut.length,vt;Wt<be;Wt++)(vt||!(Wt in Ut))&&(vt||(vt=Array.prototype.slice.call(Ut,0,Wt)),vt[Wt]=Ut[Wt]);return Ct.concat(vt||Array.prototype.slice.call(Ut))},Y="tag",G="attributes",D="transitionend oTransitionEnd transitionend webkitTransitionEnd",F=function(Ct){return(Ct==null?void 0:Ct.nodeType)===Node.DOCUMENT_NODE},O=function(Ct){var Ut=Ct&&Ct.parentNode;Ut&&Ut.removeChild(Ct)};function L(){for(var Ct=[],Ut=0;Ut<arguments.length;Ut++)Ct[Ut]=arguments[Ut];var se=Array.isArray(Ct[0])?Ct[0]:At([],Ct,!0);return se.filter(Boolean).join(" ")}var k=function(Ct,Ut){return Ct.querySelectorAll(Ut)},j=function(Ct,Ut){return Ut===void 0&&(Ut={}),Ct&&Ct.setAttribute&&(0,at.each)(Ut,function(se,Wt){return Ct.setAttribute(Wt,se)})},H=function(Ct){var Ut;return Ct&&!!(Ct.offsetWidth||Ct.offsetHeight||!((Ut=Ct.getClientRects)===null||Ut===void 0)&&Ut.call(Ct).length)},ot=function(Ct,Ut){var se;(se=Ct.parentNode)===null||se===void 0||se.replaceChild(Ut,Ct)},ht=function(Ct,Ut,se){var Wt=Ct.childNodes,be=Wt.length,vt=(0,at.isUndefined)(se)?be:se;(0,at.isString)(Ut)&&(Ct.insertAdjacentHTML("beforeEnd",Ut),Ut=Ct.lastChild,Ct.removeChild(Ut)),vt>=be?Ct.appendChild(Ut):Ct.insertBefore(Ut,Wt[vt])},kt=function(Ct,Ut){return ht(Ct,Ut)},Vt=function(Ct,Ut,se){Ut===void 0&&(Ut={});var Wt=document.createElement(Ct);return Ut&&(0,at.each)(Ut,function(be,vt){return Wt.setAttribute(vt,be)}),se&&((0,at.isString)(se)?Wt.innerHTML=se:Wt.appendChild(se)),Wt},Bt=function(Ct){return document.createTextNode(Ct)},Ot=function(Ct,Ut){var se,Wt=Ct.type;try{se=new window[Ut](Wt,Ct)}catch{se=document.createEvent(Ut),se.initEvent(Wt,!0,!0)}return se._parentEvent=Ct,Wt.indexOf("key")===0&&(se.keyCodeVal=Ct.keyCode,["keyCode","which"].forEach(function(be){Object.defineProperty(se,be,{get:function(){return this.keyCodeVal}})})),se},mt=function(Ct,Ut){Ut===void 0&&(Ut=[]);var se=Array.isArray(Ut)?Ut:[Ut];se.forEach(function(Wt){var be=Wt[Y]||"div",vt=Wt[G]||{},jt=document.createElement(be);(0,at.each)(vt,function(Nt,oe){jt.setAttribute(oe,Nt)}),Ct.appendChild(jt)})},Yt=function(Ct){return(Ct==null?void 0:Ct.nodeType)===Node.TEXT_NODE},re=function(Ct){return(Ct==null?void 0:Ct.nodeType)===Node.COMMENT_NODE},ae=function(Ct){return Ct&&!Yt(Ct)&&!re(Ct)},Qt=function(Ct){var Ut={top:0,left:0,width:0,height:0};if(!Ct)return Ut;var se;if(Yt(Ct)){var Wt=document.createRange();Wt.selectNode(Ct),se=Wt.getBoundingClientRect(),Wt.detach()}return se||(Ct.getBoundingClientRect?Ct.getBoundingClientRect():Ut)},ct=function(Ct){var Ut=(Ct==null?void 0:Ct.ownerDocument)||document,se=Ut.documentElement,Wt=Ut.defaultView||window;return{x:(Wt.pageXOffset||se.scrollLeft||0)-(se.clientLeft||0),y:(Wt.pageYOffset||se.scrollTop||0)-(se.clientTop||0)}},Lt=function(Ct){return Ct.which||Ct.keyCode},$=function(Ct){return String.fromCharCode(Lt(Ct))},Q=function(Ct){return Ct.touches&&Ct.touches[0]?Ct.touches[0]:Ct},rt=function(Ct){return Lt(Ct)===27},R=function(Ct){return Lt(Ct)===13},lt=function(Ct){return Ct.ctrlKey},A=function(Ct){return lt(Ct)||Ct.metaKey},Mt=function(Ct){if(!Ct)return"";var Ut=Ct.name,se=Ct.publicId,Wt=Ct.systemId,be=se?' PUBLIC "'.concat(se,'"'):"",vt=!se&&Wt?' SYSTEM "'.concat(Wt,'"'):"";return"<!DOCTYPE ".concat(Ut).concat(be).concat(vt,">")},Pt=function(Ct){Ct===void 0&&(Ct={});var Ut=[];return(0,at.each)(Ct,function(se,Wt){return Ut.push("".concat(Wt,'="').concat(se,'"'))}),Ut.join(" ")},$t=function(Ct,Ut,se,Wt){var be=Ut.split(/\s+/),vt=(0,at.isArray)(Ct)?Ct:[Ct];be.forEach(function(jt){vt.forEach(function(Nt){return Nt==null?void 0:Nt.addEventListener(jt,se,Wt)})})},xe=function(Ct,Ut,se,Wt){var be=Ut.split(/\s+/),vt=(0,at.isArray)(Ct)?Ct:[Ct];be.forEach(function(jt){vt.forEach(function(Nt){return Nt==null?void 0:Nt.removeEventListener(jt,se,Wt)})})}},163:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{appendStyles:()=>Bt,buildBase64UrlFromSvg:()=>be,camelCase:()=>re,capitalize:()=>Mt,createId:()=>Wt,deepMerge:()=>rt,escape:()=>$,escapeNodeContent:()=>Q,find:()=>Lt,getComponentModel:()=>Ut,getComponentView:()=>Ct,getElement:()=>ct,getGlobal:()=>H,getModel:()=>R,getUiClass:()=>Vt,getUnitFromValue:()=>mt,getViewEl:()=>$t,hasDnd:()=>Qt,hasWin:()=>j,isBultInMethod:()=>F,isComponent:()=>xe,isDef:()=>k,isEmptyObj:()=>A,isObject:()=>lt,isRule:()=>Pt,matches:()=>kt,normalizeFloat:()=>ae,normalizeKey:()=>O,setViewEl:()=>se,shallowDiff:()=>Ot,toLowerCase:()=>ot,upFirst:()=>Yt,wait:()=>L});var at=ut(50),At=ut(491),Y=function(){return Y=Object.assign||function(vt){for(var jt,Nt=1,oe=arguments.length;Nt<oe;Nt++){jt=arguments[Nt];for(var fe in jt)Object.prototype.hasOwnProperty.call(jt,fe)&&(vt[fe]=jt[fe])}return vt},Y.apply(this,arguments)},G=function(vt,jt,Nt){if(Nt||arguments.length===2)for(var oe=0,fe=jt.length,Xt;oe<fe;oe++)(Xt||!(oe in jt))&&(Xt||(Xt=Array.prototype.slice.call(jt,0,oe)),Xt[oe]=jt[oe]);return vt.concat(Xt||Array.prototype.slice.call(jt))},D={},F=function(vt){return(0,at.isFunction)(D[vt])},O=function(vt){return F(vt)?"_".concat(vt):vt},L=function(vt){return vt===void 0&&(vt=0),new Promise(function(jt){return setTimeout(jt,vt)})},k=function(vt){return typeof vt<"u"},j=function(){return typeof window<"u"},H=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:ut.g},ot=function(vt){return(vt||"").toLowerCase()},ht=j()?window.Element.prototype:{},kt=ht.matches||ht.webkitMatchesSelector||ht.mozMatchesSelector||ht.msMatchesSelector,Vt=function(vt,jt){var Nt=vt.getConfig(),oe=Nt.stylePrefix,fe=Nt.customUI;return[fe&&"".concat(oe,"cui"),jt].filter(function(Xt){return Xt}).join(" ")},Bt=function(vt,jt){jt===void 0&&(jt={});var Nt=(0,at.isArray)(vt)?G([],vt,!0):[vt];if(Nt.length){var oe=Nt.shift();if(oe&&(!jt.unique||!document.querySelector('link[href="'.concat(oe,'"]')))){var fe=document.head,Xt=document.createElement("link");Xt.href=oe,Xt.rel="stylesheet",jt.prepand?fe.insertBefore(Xt,fe.firstChild):fe.appendChild(Xt)}Bt(Nt)}},Ot=function(vt,jt){var Nt={},oe=(0,at.keys)(jt);for(var fe in vt)if(vt.hasOwnProperty(fe)){var Xt=vt[fe],ve=jt[fe];oe.indexOf(fe)>=0?Xt!==ve&&(Nt[fe]=ve):Nt[fe]=null}for(var fe in jt)jt.hasOwnProperty(fe)&&(0,at.isUndefined)(vt[fe])&&(Nt[fe]=jt[fe]);return Nt},mt=function(vt){return vt.replace(parseFloat(vt),"")},Yt=function(vt){return vt[0].toUpperCase()+vt.toLowerCase().slice(1)},re=function(vt){return vt.replace(/-./g,function(jt){return jt[1].toUpperCase()})},ae=function(vt,jt,Nt){jt===void 0&&(jt=1),Nt===void 0&&(Nt=0);var oe=0;if(isNaN(vt))return Nt;if(vt=parseFloat(vt),Math.floor(vt)!==vt){var fe=jt.toString().split(".")[1];oe=fe?fe.length:0}return oe?parseFloat(vt.toFixed(oe)):vt},Qt=function(vt){return"draggable"in document.createElement("i")&&(vt?vt.config.nativeDnD:!0)},ct=function(vt){if((0,at.isElement)(vt)||(0,At.BM)(vt))return vt;if(vt&&vt.getEl)return vt.getEl()},Lt=function(vt,jt){var Nt=null;return vt.some(function(oe,fe){return jt(oe,fe,vt)?(Nt=oe,1):0}),Nt},$=function(vt){return vt===void 0&&(vt=""),"".concat(vt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},Q=function(vt){return vt===void 0&&(vt=""),"".concat(vt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},rt=function(){for(var vt=[],jt=0;jt<arguments.length;jt++)vt[jt]=arguments[jt];for(var Nt=Y({},vt[0]),oe=1;oe<vt.length;oe++){var fe=Y({},vt[oe]);for(var Xt in fe){var ve=Nt[Xt],Ke=fe[Xt];lt(ve)&&lt(Ke)?Nt[Xt]=rt(ve,Ke):Nt[Xt]=Ke}}return Nt},R=function(vt,jt){var Nt;return!jt&&vt&&vt.__cashData?Nt=vt.__cashData.model:jt&&(0,at.isElement)(vt)&&(Nt=jt(vt).data("model")),Nt},lt=function(vt){return vt&&!Array.isArray(vt)&&typeof vt=="object"},A=function(vt){return Object.keys(vt).length<=0},Mt=function(vt){return vt===void 0&&(vt=""),vt&&vt.charAt(0).toUpperCase()+vt.substring(1)},Pt=function(vt){return vt&&vt.toCSS},$t=function(vt){return vt==null?void 0:vt.__gjsv},xe=function(vt){return!!(vt!=null&&vt.toHTML)},Ct=function(vt){return $t(vt)},Ut=function(vt){var jt;return(jt=Ct(vt))===null||jt===void 0?void 0:jt.model},se=function(vt,jt){vt.__gjsv=jt},Wt=function(vt){vt===void 0&&(vt=16);for(var jt="",Nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",oe=Nt.length,fe=0;fe<vt;fe++)jt+=Nt.charAt(Math.floor(Math.random()*oe));return jt},be=function(vt){if(vt&&vt.substr(0,4)==="<svg"){var jt="";return j()?jt=window.btoa(vt):typeof Buffer<"u"&&(jt=Buffer.from(vt,"utf8").toString("base64")),jt?"data:image/svg+xml;base64,".concat(jt):vt}return vt}},828:(S,tt,ut)=>{var at={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function At(G){var D=Y(G);return ut(D)}function Y(G){if(!ut.o(at,G)){var D=new Error("Cannot find module '"+G+"'");throw D.code="MODULE_NOT_FOUND",D}return at[G]}At.keys=function(){return Object.keys(at)},At.resolve=Y,S.exports=At,At.id=828},50:(S,tt,ut)=>{ut.r(tt),ut.d(tt,{VERSION:()=>At,after:()=>Es,all:()=>Tn,allKeys:()=>Tr,any:()=>Fr,assign:()=>xn,before:()=>Gi,bind:()=>Ki,bindAll:()=>to,chain:()=>jo,chunk:()=>Va,clone:()=>Sn,collect:()=>Yn,compact:()=>Ls,compose:()=>Ma,constant:()=>de,contains:()=>or,countBy:()=>Ia,create:()=>Wr,debounce:()=>No,default:()=>Ha,defaults:()=>_o,defer:()=>Ts,delay:()=>Ln,detect:()=>Ho,difference:()=>Oo,drop:()=>en,each:()=>yn,escape:()=>Gt,every:()=>Tn,extend:()=>vn,extendOwn:()=>xn,filter:()=>Nn,find:()=>Ho,findIndex:()=>_i,findKey:()=>Co,findLastIndex:()=>xo,findWhere:()=>bi,first:()=>Wo,flatten:()=>Ra,foldl:()=>Bo,foldr:()=>mn,forEach:()=>yn,functions:()=>br,get:()=>zr,groupBy:()=>Yi,has:()=>qn,head:()=>Wo,identity:()=>Mn,include:()=>or,includes:()=>or,indexBy:()=>As,indexOf:()=>wi,initial:()=>Zi,inject:()=>Bo,intersection:()=>Ji,invert:()=>Cn,invoke:()=>eo,isArguments:()=>gr,isArray:()=>Xt,isArrayBuffer:()=>Ct,isBoolean:()=>Q,isDataView:()=>fe,isDate:()=>Mt,isElement:()=>rt,isEmpty:()=>Ue,isEqual:()=>_e,isError:()=>$t,isFinite:()=>Or,isFunction:()=>Wt,isMap:()=>yt,isMatch:()=>rr,isNaN:()=>lr,isNull:()=>Lt,isNumber:()=>A,isObject:()=>ct,isRegExp:()=>Pt,isSet:()=>ce,isString:()=>lt,isSymbol:()=>xe,isTypedArray:()=>xt,isUndefined:()=>$,isWeakMap:()=>Ft,isWeakSet:()=>ke,iteratee:()=>un,keys:()=>Re,last:()=>Ir,lastIndexOf:()=>La,map:()=>Yn,mapObject:()=>Vr,matcher:()=>On,matches:()=>On,max:()=>Da,memoize:()=>ka,methods:()=>br,min:()=>Gr,mixin:()=>go,negate:()=>mi,noop:()=>Ye,now:()=>C,object:()=>vo,omit:()=>Ms,once:()=>bo,pairs:()=>ln,partial:()=>jr,partition:()=>ks,pick:()=>ho,pluck:()=>ro,property:()=>Lr,propertyOf:()=>tn,random:()=>gn,range:()=>Na,reduce:()=>Bo,reduceRight:()=>mn,reject:()=>So,rest:()=>en,restArguments:()=>Qt,result:()=>Aa,sample:()=>oo,select:()=>Nn,shuffle:()=>ja,size:()=>_n,some:()=>Fr,sortBy:()=>Ps,sortedIndex:()=>Fo,tail:()=>en,take:()=>Wo,tap:()=>$n,template:()=>Wi,templateSettings:()=>er,throttle:()=>Ro,times:()=>Dr,toArray:()=>Uo,toPath:()=>Do,transpose:()=>Ko,unescape:()=>Xe,union:()=>Ci,uniq:()=>zo,unique:()=>zo,uniqueId:()=>zi,unzip:()=>Ko,values:()=>qe,where:()=>no,without:()=>Ds,wrap:()=>Vo,zip:()=>js});var at={};ut.r(at),ut.d(at,{VERSION:()=>At,after:()=>Es,all:()=>Tn,allKeys:()=>Tr,any:()=>Fr,assign:()=>xn,before:()=>Gi,bind:()=>Ki,bindAll:()=>to,chain:()=>jo,chunk:()=>Va,clone:()=>Sn,collect:()=>Yn,compact:()=>Ls,compose:()=>Ma,constant:()=>de,contains:()=>or,countBy:()=>Ia,create:()=>Wr,debounce:()=>No,default:()=>io,defaults:()=>_o,defer:()=>Ts,delay:()=>Ln,detect:()=>Ho,difference:()=>Oo,drop:()=>en,each:()=>yn,escape:()=>Gt,every:()=>Tn,extend:()=>vn,extendOwn:()=>xn,filter:()=>Nn,find:()=>Ho,findIndex:()=>_i,findKey:()=>Co,findLastIndex:()=>xo,findWhere:()=>bi,first:()=>Wo,flatten:()=>Ra,foldl:()=>Bo,foldr:()=>mn,forEach:()=>yn,functions:()=>br,get:()=>zr,groupBy:()=>Yi,has:()=>qn,head:()=>Wo,identity:()=>Mn,include:()=>or,includes:()=>or,indexBy:()=>As,indexOf:()=>wi,initial:()=>Zi,inject:()=>Bo,intersection:()=>Ji,invert:()=>Cn,invoke:()=>eo,isArguments:()=>gr,isArray:()=>Xt,isArrayBuffer:()=>Ct,isBoolean:()=>Q,isDataView:()=>fe,isDate:()=>Mt,isElement:()=>rt,isEmpty:()=>Ue,isEqual:()=>_e,isError:()=>$t,isFinite:()=>Or,isFunction:()=>Wt,isMap:()=>yt,isMatch:()=>rr,isNaN:()=>lr,isNull:()=>Lt,isNumber:()=>A,isObject:()=>ct,isRegExp:()=>Pt,isSet:()=>ce,isString:()=>lt,isSymbol:()=>xe,isTypedArray:()=>xt,isUndefined:()=>$,isWeakMap:()=>Ft,isWeakSet:()=>ke,iteratee:()=>un,keys:()=>Re,last:()=>Ir,lastIndexOf:()=>La,map:()=>Yn,mapObject:()=>Vr,matcher:()=>On,matches:()=>On,max:()=>Da,memoize:()=>ka,methods:()=>br,min:()=>Gr,mixin:()=>go,negate:()=>mi,noop:()=>Ye,now:()=>C,object:()=>vo,omit:()=>Ms,once:()=>bo,pairs:()=>ln,partial:()=>jr,partition:()=>ks,pick:()=>ho,pluck:()=>ro,property:()=>Lr,propertyOf:()=>tn,random:()=>gn,range:()=>Na,reduce:()=>Bo,reduceRight:()=>mn,reject:()=>So,rest:()=>en,restArguments:()=>Qt,result:()=>Aa,sample:()=>oo,select:()=>Nn,shuffle:()=>ja,size:()=>_n,some:()=>Fr,sortBy:()=>Ps,sortedIndex:()=>Fo,tail:()=>en,take:()=>Wo,tap:()=>$n,template:()=>Wi,templateSettings:()=>er,throttle:()=>Ro,times:()=>Dr,toArray:()=>Uo,toPath:()=>Do,transpose:()=>Ko,unescape:()=>Xe,union:()=>Ci,uniq:()=>zo,unique:()=>zo,uniqueId:()=>zi,unzip:()=>Ko,values:()=>qe,where:()=>no,without:()=>Ds,wrap:()=>Vo,zip:()=>js});var At="1.13.6",Y=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},G=Array.prototype,D=Object.prototype,F=typeof Symbol<"u"?Symbol.prototype:null,O=G.push,L=G.slice,k=D.toString,j=D.hasOwnProperty,H=typeof ArrayBuffer<"u",ot=typeof DataView<"u",ht=Array.isArray,kt=Object.keys,Vt=Object.create,Bt=H&&ArrayBuffer.isView,Ot=isNaN,mt=isFinite,Yt=!{toString:null}.propertyIsEnumerable("toString"),re=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ae=Math.pow(2,53)-1;function Qt(x,M){return M=M==null?x.length-1:+M,function(){for(var J=Math.max(arguments.length-M,0),nt=Array(J),bt=0;bt<J;bt++)nt[bt]=arguments[bt+M];switch(M){case 0:return x.call(this,nt);case 1:return x.call(this,arguments[0],nt);case 2:return x.call(this,arguments[0],arguments[1],nt)}var gt=Array(M+1);for(bt=0;bt<M;bt++)gt[bt]=arguments[bt];return gt[M]=nt,x.apply(this,gt)}}function ct(x){var M=typeof x;return M==="function"||M==="object"&&!!x}function Lt(x){return x===null}function $(x){return x===void 0}function Q(x){return x===!0||x===!1||k.call(x)==="[object Boolean]"}function rt(x){return!!(x&&x.nodeType===1)}function R(x){var M="[object "+x+"]";return function(J){return k.call(J)===M}}const lt=R("String"),A=R("Number"),Mt=R("Date"),Pt=R("RegExp"),$t=R("Error"),xe=R("Symbol"),Ct=R("ArrayBuffer");var Ut=R("Function"),se=Y.document&&Y.document.childNodes;typeof Int8Array!="object"&&typeof se!="function"&&(Ut=function(x){return typeof x=="function"||!1});const Wt=Ut,be=R("Object");var vt=ot&&be(new DataView(new ArrayBuffer(8))),jt=typeof Map<"u"&&be(new Map),Nt=R("DataView");function oe(x){return x!=null&&Wt(x.getInt8)&&Ct(x.buffer)}const fe=vt?oe:Nt,Xt=ht||R("Array");function ve(x,M){return x!=null&&j.call(x,M)}var Ke=R("Arguments");(function(){Ke(arguments)||(Ke=function(x){return ve(x,"callee")})})();const gr=Ke;function Or(x){return!xe(x)&&mt(x)&&!isNaN(parseFloat(x))}function lr(x){return A(x)&&Ot(x)}function de(x){return function(){return x}}function P(x){return function(M){var J=x(M);return typeof J=="number"&&J>=0&&J<=ae}}function V(x){return function(M){return M==null?void 0:M[x]}}const Z=V("byteLength"),pt=P(Z);var Et=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function X(x){return Bt?Bt(x)&&!fe(x):pt(x)&&Et.test(k.call(x))}const xt=H?X:de(!1),dt=V("length");function Ce(x){for(var M={},J=x.length,nt=0;nt<J;++nt)M[x[nt]]=!0;return{contains:function(bt){return M[bt]===!0},push:function(bt){return M[bt]=!0,x.push(bt)}}}function Ge(x,M){M=Ce(M);var J=re.length,nt=x.constructor,bt=Wt(nt)&&nt.prototype||D,gt="constructor";for(ve(x,gt)&&!M.contains(gt)&&M.push(gt);J--;)gt=re[J],gt in x&&x[gt]!==bt[gt]&&!M.contains(gt)&&M.push(gt)}function Re(x){if(!ct(x))return[];if(kt)return kt(x);var M=[];for(var J in x)ve(x,J)&&M.push(J);return Yt&&Ge(x,M),M}function Ue(x){if(x==null)return!0;var M=dt(x);return typeof M=="number"&&(Xt(x)||lt(x)||gr(x))?M===0:dt(Re(x))===0}function rr(x,M){var J=Re(M),nt=J.length;if(x==null)return!nt;for(var bt=Object(x),gt=0;gt<nt;gt++){var Ht=J[gt];if(M[Ht]!==bt[Ht]||!(Ht in bt))return!1}return!0}function ge(x){if(x instanceof ge)return x;if(!(this instanceof ge))return new ge(x);this._wrapped=x}ge.VERSION=At,ge.prototype.value=function(){return this._wrapped},ge.prototype.valueOf=ge.prototype.toJSON=ge.prototype.value,ge.prototype.toString=function(){return String(this._wrapped)};function Qe(x){return new Uint8Array(x.buffer||x,x.byteOffset||0,Z(x))}var De="[object DataView]";function $e(x,M,J,nt){if(x===M)return x!==0||1/x===1/M;if(x==null||M==null)return!1;if(x!==x)return M!==M;var bt=typeof x;return bt!=="function"&&bt!=="object"&&typeof M!="object"?!1:kr(x,M,J,nt)}function kr(x,M,J,nt){x instanceof ge&&(x=x._wrapped),M instanceof ge&&(M=M._wrapped);var bt=k.call(x);if(bt!==k.call(M))return!1;if(vt&&bt=="[object Object]"&&fe(x)){if(!fe(M))return!1;bt=De}switch(bt){case"[object RegExp]":case"[object String]":return""+x==""+M;case"[object Number]":return+x!=+x?+M!=+M:+x==0?1/+x===1/M:+x==+M;case"[object Date]":case"[object Boolean]":return+x==+M;case"[object Symbol]":return F.valueOf.call(x)===F.valueOf.call(M);case"[object ArrayBuffer]":case De:return kr(Qe(x),Qe(M),J,nt)}var gt=bt==="[object Array]";if(!gt&&xt(x)){var Ht=Z(x);if(Ht!==Z(M))return!1;if(x.buffer===M.buffer&&x.byteOffset===M.byteOffset)return!0;gt=!0}if(!gt){if(typeof x!="object"||typeof M!="object")return!1;var ie=x.constructor,Fe=M.constructor;if(ie!==Fe&&!(Wt(ie)&&ie instanceof ie&&Wt(Fe)&&Fe instanceof Fe)&&"constructor"in x&&"constructor"in M)return!1}J=J||[],nt=nt||[];for(var Me=J.length;Me--;)if(J[Me]===x)return nt[Me]===M;if(J.push(x),nt.push(M),gt){if(Me=x.length,Me!==M.length)return!1;for(;Me--;)if(!$e(x[Me],M[Me],J,nt))return!1}else{var dr=Re(x),Hr;if(Me=dr.length,Re(M).length!==Me)return!1;for(;Me--;)if(Hr=dr[Me],!(ve(M,Hr)&&$e(x[Hr],M[Hr],J,nt)))return!1}return J.pop(),nt.pop(),!0}function _e(x,M){return $e(x,M)}function Tr(x){if(!ct(x))return[];var M=[];for(var J in x)M.push(J);return Yt&&Ge(x,M),M}function Ae(x){var M=dt(x);return function(J){if(J==null)return!1;var nt=Tr(J);if(dt(nt))return!1;for(var bt=0;bt<M;bt++)if(!Wt(J[x[bt]]))return!1;return x!==N||!Wt(J[ir])}}var ir="forEach",ur="has",fr=["clear","delete"],Kt=["get",ur,"set"],Gn=fr.concat(ir,Kt),N=fr.concat(Kt),it=["add"].concat(fr,ir,ur);const yt=jt?Ae(Gn):R("Map"),Ft=jt?Ae(N):R("WeakMap"),ce=jt?Ae(it):R("Set"),ke=R("WeakSet");function qe(x){for(var M=Re(x),J=M.length,nt=Array(J),bt=0;bt<J;bt++)nt[bt]=x[M[bt]];return nt}function ln(x){for(var M=Re(x),J=M.length,nt=Array(J),bt=0;bt<J;bt++)nt[bt]=[M[bt],x[M[bt]]];return nt}function Cn(x){for(var M={},J=Re(x),nt=0,bt=J.length;nt<bt;nt++)M[x[J[nt]]]=J[nt];return M}function br(x){var M=[];for(var J in x)Wt(x[J])&&M.push(J);return M.sort()}function Lo(x,M){return function(J){var nt=arguments.length;if(M&&(J=Object(J)),nt<2||J==null)return J;for(var bt=1;bt<nt;bt++)for(var gt=arguments[bt],Ht=x(gt),ie=Ht.length,Fe=0;Fe<ie;Fe++){var Me=Ht[Fe];(!M||J[Me]===void 0)&&(J[Me]=gt[Me])}return J}}const vn=Lo(Tr),xn=Lo(Re),_o=Lo(Tr,!0);function Mr(){return function(){}}function Cr(x){if(!ct(x))return{};if(Vt)return Vt(x);var M=Mr();M.prototype=x;var J=new M;return M.prototype=null,J}function Wr(x,M){var J=Cr(x);return M&&xn(J,M),J}function Sn(x){return ct(x)?Xt(x)?x.slice():vn({},x):x}function $n(x,M){return M(x),x}function Do(x){return Xt(x)?x:[x]}ge.toPath=Do;function Rn(x){return ge.toPath(x)}function Qr(x,M){for(var J=M.length,nt=0;nt<J;nt++){if(x==null)return;x=x[M[nt]]}return J?x:void 0}function zr(x,M,J){var nt=Qr(x,Rn(M));return $(nt)?J:nt}function qn(x,M){M=Rn(M);for(var J=M.length,nt=0;nt<J;nt++){var bt=M[nt];if(!ve(x,bt))return!1;x=x[bt]}return!!J}function Mn(x){return x}function On(x){return x=xn({},x),function(M){return rr(M,x)}}function Lr(x){return x=Rn(x),function(M){return Qr(M,x)}}function nr(x,M,J){if(M===void 0)return x;switch(J??3){case 1:return function(nt){return x.call(M,nt)};case 3:return function(nt,bt,gt){return x.call(M,nt,bt,gt)};case 4:return function(nt,bt,gt,Ht){return x.call(M,nt,bt,gt,Ht)}}return function(){return x.apply(M,arguments)}}function me(x,M,J){return x==null?Mn:Wt(x)?nr(x,M,J):ct(x)&&!Xt(x)?On(x):Lr(x)}function un(x,M){return me(x,M,1/0)}ge.iteratee=un;function yr(x,M,J){return ge.iteratee!==un?ge.iteratee(x,M):me(x,M,J)}function Vr(x,M,J){M=yr(M,J);for(var nt=Re(x),bt=nt.length,gt={},Ht=0;Ht<bt;Ht++){var ie=nt[Ht];gt[ie]=M(x[ie],ie,x)}return gt}function Ye(){}function tn(x){return x==null?Ye:function(M){return zr(x,M)}}function Dr(x,M,J){var nt=Array(Math.max(0,x));M=nr(M,J,1);for(var bt=0;bt<x;bt++)nt[bt]=M(bt);return nt}function gn(x,M){return M==null&&(M=x,x=0),x+Math.floor(Math.random()*(M-x+1))}const C=Date.now||function(){return new Date().getTime()};function U(x){var M=function(gt){return x[gt]},J="(?:"+Re(x).join("|")+")",nt=RegExp(J),bt=RegExp(J,"g");return function(gt){return gt=gt==null?"":""+gt,nt.test(gt)?gt.replace(bt,M):gt}}const Rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Gt=U(Rt),je=Cn(Rt),Xe=U(je),er=ge.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var we=/(.)^/,_r={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},wo=/\\|'|\r|\n|\u2028|\u2029/g;function gi(x){return"\\"+_r[x]}var cn=/^\s*(\w|\$)+\s*$/;function Wi(x,M,J){!M&&J&&(M=J),M=_o({},M,ge.templateSettings);var nt=RegExp([(M.escape||we).source,(M.interpolate||we).source,(M.evaluate||we).source].join("|")+"|$","g"),bt=0,gt="__p+='";x.replace(nt,function(Me,dr,Hr,Qi,Is){return gt+=x.slice(bt,Is).replace(wo,gi),bt=Is+Me.length,dr?gt+=`'+
((__t=(`+dr+`))==null?'':_.escape(__t))+
'`:Hr?gt+=`'+
((__t=(`+Hr+`))==null?'':__t)+
'`:Qi&&(gt+=`';
`+Qi+`
__p+='`),Me}),gt+=`';
`;var Ht=M.variable;if(Ht){if(!cn.test(Ht))throw new Error("variable is not a bare identifier: "+Ht)}else gt=`with(obj||{}){
`+gt+`}
`,Ht="obj";gt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+gt+`return __p;
`;var ie;try{ie=new Function(Ht,"_",gt)}catch(Me){throw Me.source=gt,Me}var Fe=function(Me){return ie.call(this,Me,ge)};return Fe.source="function("+Ht+`){
`+gt+"}",Fe}function Aa(x,M,J){M=Rn(M);var nt=M.length;if(!nt)return Wt(J)?J.call(x):J;for(var bt=0;bt<nt;bt++){var gt=x==null?void 0:x[M[bt]];gt===void 0&&(gt=J,bt=nt),x=Wt(gt)?gt.call(x):gt}return x}var Qn=0;function zi(x){var M=++Qn+"";return x?x+M:M}function jo(x){var M=ge(x);return M._chain=!0,M}function Io(x,M,J,nt,bt){if(!(nt instanceof M))return x.apply(J,bt);var gt=Cr(x.prototype),Ht=x.apply(gt,bt);return ct(Ht)?Ht:gt}var yi=Qt(function(x,M){var J=yi.placeholder,nt=function(){for(var bt=0,gt=M.length,Ht=Array(gt),ie=0;ie<gt;ie++)Ht[ie]=M[ie]===J?arguments[bt++]:M[ie];for(;bt<arguments.length;)Ht.push(arguments[bt++]);return Io(x,nt,this,this,Ht)};return nt});yi.placeholder=ge;const jr=yi,Ki=Qt(function(x,M,J){if(!Wt(x))throw new TypeError("Bind must be called on a function");var nt=Qt(function(bt){return Io(x,nt,M,this,J.concat(bt))});return nt}),fn=P(dt);function fo(x,M,J,nt){if(nt=nt||[],!M&&M!==0)M=1/0;else if(M<=0)return nt.concat(x);for(var bt=nt.length,gt=0,Ht=dt(x);gt<Ht;gt++){var ie=x[gt];if(fn(ie)&&(Xt(ie)||gr(ie)))if(M>1)fo(ie,M-1,J,nt),bt=nt.length;else for(var Fe=0,Me=ie.length;Fe<Me;)nt[bt++]=ie[Fe++];else J||(nt[bt++]=ie)}return nt}const to=Qt(function(x,M){M=fo(M,!1,!1);var J=M.length;if(J<1)throw new Error("bindAll must be passed function names");for(;J--;){var nt=M[J];x[nt]=Ki(x[nt],x)}return x});function ka(x,M){var J=function(nt){var bt=J.cache,gt=""+(M?M.apply(this,arguments):nt);return ve(bt,gt)||(bt[gt]=x.apply(this,arguments)),bt[gt]};return J.cache={},J}const Ln=Qt(function(x,M,J){return setTimeout(function(){return x.apply(null,J)},M)}),Ts=jr(Ln,ge,1);function Ro(x,M,J){var nt,bt,gt,Ht,ie=0;J||(J={});var Fe=function(){ie=J.leading===!1?0:C(),nt=null,Ht=x.apply(bt,gt),nt||(bt=gt=null)},Me=function(){var dr=C();!ie&&J.leading===!1&&(ie=dr);var Hr=M-(dr-ie);return bt=this,gt=arguments,Hr<=0||Hr>M?(nt&&(clearTimeout(nt),nt=null),ie=dr,Ht=x.apply(bt,gt),nt||(bt=gt=null)):!nt&&J.trailing!==!1&&(nt=setTimeout(Fe,Hr)),Ht};return Me.cancel=function(){clearTimeout(nt),ie=0,nt=bt=gt=null},Me}function No(x,M,J){var nt,bt,gt,Ht,ie,Fe=function(){var dr=C()-bt;M>dr?nt=setTimeout(Fe,M-dr):(nt=null,J||(Ht=x.apply(ie,gt)),nt||(gt=ie=null))},Me=Qt(function(dr){return ie=this,gt=dr,bt=C(),nt||(nt=setTimeout(Fe,M),J&&(Ht=x.apply(ie,gt))),Ht});return Me.cancel=function(){clearTimeout(nt),nt=gt=ie=null},Me}function Vo(x,M){return jr(M,x)}function mi(x){return function(){return!x.apply(this,arguments)}}function Ma(){var x=arguments,M=x.length-1;return function(){for(var J=M,nt=x[M].apply(this,arguments);J--;)nt=x[J].call(this,nt);return nt}}function Es(x,M){return function(){if(--x<1)return M.apply(this,arguments)}}function Gi(x,M){var J;return function(){return--x>0&&(J=M.apply(this,arguments)),x<=1&&(M=null),J}}const bo=jr(Gi,2);function Co(x,M,J){M=yr(M,J);for(var nt=Re(x),bt,gt=0,Ht=nt.length;gt<Ht;gt++)if(bt=nt[gt],M(x[bt],bt,x))return bt}function $i(x){return function(M,J,nt){J=yr(J,nt);for(var bt=dt(M),gt=x>0?0:bt-1;gt>=0&&gt<bt;gt+=x)if(J(M[gt],gt,M))return gt;return-1}}const _i=$i(1),xo=$i(-1);function Fo(x,M,J,nt){J=yr(J,nt,1);for(var bt=J(M),gt=0,Ht=dt(x);gt<Ht;){var ie=Math.floor((gt+Ht)/2);J(x[ie])<bt?gt=ie+1:Ht=ie}return gt}function po(x,M,J){return function(nt,bt,gt){var Ht=0,ie=dt(nt);if(typeof gt=="number")x>0?Ht=gt>=0?gt:Math.max(gt+ie,Ht):ie=gt>=0?Math.min(gt+1,ie):gt+ie+1;else if(J&&gt&&ie)return gt=J(nt,bt),nt[gt]===bt?gt:-1;if(bt!==bt)return gt=M(L.call(nt,Ht,ie),lr),gt>=0?gt+Ht:-1;for(gt=x>0?Ht:ie-1;gt>=0&&gt<ie;gt+=x)if(nt[gt]===bt)return gt;return-1}}const wi=po(1,_i,Fo),La=po(-1,xo);function Ho(x,M,J){var nt=fn(x)?_i:Co,bt=nt(x,M,J);if(bt!==void 0&&bt!==-1)return x[bt]}function bi(x,M){return Ho(x,On(M))}function yn(x,M,J){M=nr(M,J);var nt,bt;if(fn(x))for(nt=0,bt=x.length;nt<bt;nt++)M(x[nt],nt,x);else{var gt=Re(x);for(nt=0,bt=gt.length;nt<bt;nt++)M(x[gt[nt]],gt[nt],x)}return x}function Yn(x,M,J){M=yr(M,J);for(var nt=!fn(x)&&Re(x),bt=(nt||x).length,gt=Array(bt),Ht=0;Ht<bt;Ht++){var ie=nt?nt[Ht]:Ht;gt[Ht]=M(x[ie],ie,x)}return gt}function Ze(x){var M=function(J,nt,bt,gt){var Ht=!fn(J)&&Re(J),ie=(Ht||J).length,Fe=x>0?0:ie-1;for(gt||(bt=J[Ht?Ht[Fe]:Fe],Fe+=x);Fe>=0&&Fe<ie;Fe+=x){var Me=Ht?Ht[Fe]:Fe;bt=nt(bt,J[Me],Me,J)}return bt};return function(J,nt,bt,gt){var Ht=arguments.length>=3;return M(J,nr(nt,gt,4),bt,Ht)}}const Bo=Ze(1),mn=Ze(-1);function Nn(x,M,J){var nt=[];return M=yr(M,J),yn(x,function(bt,gt,Ht){M(bt,gt,Ht)&&nt.push(bt)}),nt}function So(x,M,J){return Nn(x,mi(yr(M)),J)}function Tn(x,M,J){M=yr(M,J);for(var nt=!fn(x)&&Re(x),bt=(nt||x).length,gt=0;gt<bt;gt++){var Ht=nt?nt[gt]:gt;if(!M(x[Ht],Ht,x))return!1}return!0}function Fr(x,M,J){M=yr(M,J);for(var nt=!fn(x)&&Re(x),bt=(nt||x).length,gt=0;gt<bt;gt++){var Ht=nt?nt[gt]:gt;if(M(x[Ht],Ht,x))return!0}return!1}function or(x,M,J,nt){return fn(x)||(x=qe(x)),(typeof J!="number"||nt)&&(J=0),wi(x,M,J)>=0}const eo=Qt(function(x,M,J){var nt,bt;return Wt(M)?bt=M:(M=Rn(M),nt=M.slice(0,-1),M=M[M.length-1]),Yn(x,function(gt){var Ht=bt;if(!Ht){if(nt&&nt.length&&(gt=Qr(gt,nt)),gt==null)return;Ht=gt[M]}return Ht==null?Ht:Ht.apply(gt,J)})});function ro(x,M){return Yn(x,Lr(M))}function no(x,M){return Nn(x,On(M))}function Da(x,M,J){var nt=-1/0,bt=-1/0,gt,Ht;if(M==null||typeof M=="number"&&typeof x[0]!="object"&&x!=null){x=fn(x)?x:qe(x);for(var ie=0,Fe=x.length;ie<Fe;ie++)gt=x[ie],gt!=null&&gt>nt&&(nt=gt)}else M=yr(M,J),yn(x,function(Me,dr,Hr){Ht=M(Me,dr,Hr),(Ht>bt||Ht===-1/0&&nt===-1/0)&&(nt=Me,bt=Ht)});return nt}function Gr(x,M,J){var nt=1/0,bt=1/0,gt,Ht;if(M==null||typeof M=="number"&&typeof x[0]!="object"&&x!=null){x=fn(x)?x:qe(x);for(var ie=0,Fe=x.length;ie<Fe;ie++)gt=x[ie],gt!=null&&gt<nt&&(nt=gt)}else M=yr(M,J),yn(x,function(Me,dr,Hr){Ht=M(Me,dr,Hr),(Ht<bt||Ht===1/0&&nt===1/0)&&(nt=Me,bt=Ht)});return nt}var Ol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Uo(x){return x?Xt(x)?L.call(x):lt(x)?x.match(Ol):fn(x)?Yn(x,Mn):qe(x):[]}function oo(x,M,J){if(M==null||J)return fn(x)||(x=qe(x)),x[gn(x.length-1)];var nt=Uo(x),bt=dt(nt);M=Math.max(Math.min(M,bt),0);for(var gt=bt-1,Ht=0;Ht<M;Ht++){var ie=gn(Ht,gt),Fe=nt[Ht];nt[Ht]=nt[ie],nt[ie]=Fe}return nt.slice(0,M)}function ja(x){return oo(x,1/0)}function Ps(x,M,J){var nt=0;return M=yr(M,J),ro(Yn(x,function(bt,gt,Ht){return{value:bt,index:nt++,criteria:M(bt,gt,Ht)}}).sort(function(bt,gt){var Ht=bt.criteria,ie=gt.criteria;if(Ht!==ie){if(Ht>ie||Ht===void 0)return 1;if(Ht<ie||ie===void 0)return-1}return bt.index-gt.index}),"value")}function qi(x,M){return function(J,nt,bt){var gt=M?[[],[]]:{};return nt=yr(nt,bt),yn(J,function(Ht,ie){var Fe=nt(Ht,ie,J);x(gt,Ht,Fe)}),gt}}const Yi=qi(function(x,M,J){ve(x,J)?x[J].push(M):x[J]=[M]}),As=qi(function(x,M,J){x[J]=M}),Ia=qi(function(x,M,J){ve(x,J)?x[J]++:x[J]=1}),ks=qi(function(x,M,J){x[J?0:1].push(M)},!0);function _n(x){return x==null?0:fn(x)?x.length:Re(x).length}function Xi(x,M,J){return M in J}const ho=Qt(function(x,M){var J={},nt=M[0];if(x==null)return J;Wt(nt)?(M.length>1&&(nt=nr(nt,M[1])),M=Tr(x)):(nt=Xi,M=fo(M,!1,!1),x=Object(x));for(var bt=0,gt=M.length;bt<gt;bt++){var Ht=M[bt],ie=x[Ht];nt(ie,Ht,x)&&(J[Ht]=ie)}return J}),Ms=Qt(function(x,M){var J=M[0],nt;return Wt(J)?(J=mi(J),M.length>1&&(nt=M[1])):(M=Yn(fo(M,!1,!1),String),J=function(bt,gt){return!or(M,gt)}),ho(x,J,nt)});function Zi(x,M,J){return L.call(x,0,Math.max(0,x.length-(M==null||J?1:M)))}function Wo(x,M,J){return x==null||x.length<1?M==null||J?void 0:[]:M==null||J?x[0]:Zi(x,x.length-M)}function en(x,M,J){return L.call(x,M==null||J?1:M)}function Ir(x,M,J){return x==null||x.length<1?M==null||J?void 0:[]:M==null||J?x[x.length-1]:en(x,Math.max(0,x.length-M))}function Ls(x){return Nn(x,Boolean)}function Ra(x,M){return fo(x,M,!1)}const Oo=Qt(function(x,M){return M=fo(M,!0,!0),Nn(x,function(J){return!or(M,J)})}),Ds=Qt(function(x,M){return Oo(x,M)});function zo(x,M,J,nt){Q(M)||(nt=J,J=M,M=!1),J!=null&&(J=yr(J,nt));for(var bt=[],gt=[],Ht=0,ie=dt(x);Ht<ie;Ht++){var Fe=x[Ht],Me=J?J(Fe,Ht,x):Fe;M&&!J?((!Ht||gt!==Me)&&bt.push(Fe),gt=Me):J?or(gt,Me)||(gt.push(Me),bt.push(Fe)):or(bt,Fe)||bt.push(Fe)}return bt}const Ci=Qt(function(x){return zo(fo(x,!0,!0))});function Ji(x){for(var M=[],J=arguments.length,nt=0,bt=dt(x);nt<bt;nt++){var gt=x[nt];if(!or(M,gt)){var Ht;for(Ht=1;Ht<J&&or(arguments[Ht],gt);Ht++);Ht===J&&M.push(gt)}}return M}function Ko(x){for(var M=x&&Da(x,dt).length||0,J=Array(M),nt=0;nt<M;nt++)J[nt]=ro(x,nt);return J}const js=Qt(Ko);function vo(x,M){for(var J={},nt=0,bt=dt(x);nt<bt;nt++)M?J[x[nt]]=M[nt]:J[x[nt][0]]=x[nt][1];return J}function Na(x,M,J){M==null&&(M=x||0,x=0),J||(J=M<x?-1:1);for(var nt=Math.max(Math.ceil((M-x)/J),0),bt=Array(nt),gt=0;gt<nt;gt++,x+=J)bt[gt]=x;return bt}function Va(x,M){if(M==null||M<1)return[];for(var J=[],nt=0,bt=x.length;nt<bt;)J.push(L.call(x,nt,nt+=M));return J}function Fa(x,M){return x._chain?ge(M).chain():M}function go(x){return yn(br(x),function(M){var J=ge[M]=x[M];ge.prototype[M]=function(){var nt=[this._wrapped];return O.apply(nt,arguments),Fa(this,J.apply(ge,nt))}}),ge}yn(["pop","push","reverse","shift","sort","splice","unshift"],function(x){var M=G[x];ge.prototype[x]=function(){var J=this._wrapped;return J!=null&&(M.apply(J,arguments),(x==="shift"||x==="splice")&&J.length===0&&delete J[0]),Fa(this,J)}}),yn(["concat","join","slice"],function(x){var M=G[x];ge.prototype[x]=function(){var J=this._wrapped;return J!=null&&(J=M.apply(J,arguments)),Fa(this,J)}});const io=ge;var ao=go(at);ao._=ao;const Ha=ao}},Ih={};function hr(S){var tt=Ih[S];if(tt!==void 0)return tt.exports;var ut=Ih[S]={exports:{}};return k_[S].call(ut.exports,ut,ut.exports,hr),ut.exports}hr.n=S=>{var tt=S&&S.__esModule?()=>S.default:()=>S;return hr.d(tt,{a:tt}),tt};hr.d=(S,tt)=>{for(var ut in tt)hr.o(tt,ut)&&!hr.o(S,ut)&&Object.defineProperty(S,ut,{enumerable:!0,get:tt[ut]})};hr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();hr.o=(S,tt)=>Object.prototype.hasOwnProperty.call(S,tt);hr.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})};var Rh={};(()=>{hr.d(Rh,{ZP:()=>Z0,kr:()=>mh,j7:()=>yh});var S=hr(50),tt=hr(163);function ut(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var e=a.raw;return e.reduce(function(r,o,l){var f=n[l-1],d=e[l-1];return Array.isArray(f)?f=f.join(""):d&&d.slice(-1)==="$"?r=r.slice(0,-1):f=(0,tt.escape)(f),r+f+o})}var at={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1};const At=at;var Y=hr(316),G=hr.n(Y),D=hr(895);const F=function(a){var n=a.$;if(n&&n.prototype&&n.prototype.constructor.name!=="jQuery"){var t=n.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var o=this.get(0);return o&&o.focus(),this},t.bind=function(o,l){return this.on(o,l)},t.unbind=function(o,l){if((0,S.isObject)(o)){for(var f in o)o.hasOwnProperty(f)&&this.off(f,o[f]);return this}else return this.off(o,l)},t.click=function(o){return o?this.on("click",o):this.trigger("click")},t.change=function(o){return o?this.on("change",o):this.trigger("change")},t.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},t.delegate=function(o,l,f,d){return d||(d=f),this.on(l,o,function(h){h.data=f,d(h)})},t.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var l=o instanceof Window?o:null;return l?l.pageXOffset:o.scrollLeft||0},t.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var l=o instanceof Window?o:null;return l?l.pageYOffset:o.scrollTop||0};var e=n.prototype.offset;t.offset=function(o){var l,f;return o&&(l=o.top,f=o.left),typeof l<"u"&&this.css("top","".concat(l,"px")),typeof f<"u"&&this.css("left","".concat(f,"px")),e.call(this)},n.map=function(o,l){for(var f=[],d=0;d<o.length;d++)f.push(l(o[d],d));return f};var r=Array.prototype.indexOf;n.inArray=function(o,l,f){return l==null?-1:r.call(l,o,f)},n.Event=function(o,l){if(!(this instanceof n.Event))return new n.Event(o,l);this.type=o,this.isDefaultPrevented=function(){return!1}}}};var O=hr(346),L=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),k=function(a){L(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(O.Hn),j=function(a){L(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getByComponent=function(t){var e=this;return this.filter(function(r){return e.getComponent(r)===t})[0]},n.prototype.addComponent=function(t,e){var r=this,o=((0,S.isArray)(t)?t:[t]).filter(function(l){return!r.hasComponent(l)}).map(function(l){return new k({component:l})})[0];return this.push(o,e)},n.prototype.getComponent=function(t){return t.get("component")},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},n.prototype.removeComponent=function(t,e){var r=this,o=((0,S.isArray)(t)?t:[t]).map(function(l){return r.getByComponent(l)});return this.remove(o,e)},n}(O.FE);const H=j;var ot=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ht=function(){return ht=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ht.apply(this,arguments)},kt=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Vt=function(){function a(n,t,e){this.debounced=[],this.collections=[],this.cls=[],this._em=n,this._name=t;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,S.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],l=o===!0?{}:o||{};l.pStylePrefix=n.config.pStylePrefix||"",!(0,S.isUndefined)(o)&&!o&&(l._disable=1),l.em=n,this._config=(0,tt.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(n){},a.prototype.postLoad=function(n){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return n?this.config[n]:this.config},a.prototype.__logWarn=function(n,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(n),t)},a.prototype.destroy=function(){this.__destroy()},a.prototype.__destroy=function(){var n,t,e;(n=this.view)===null||n===void 0||n.remove(),(t=this.state)===null||t===void 0||t.stopListening(),(e=this.state)===null||e===void 0||e.clear(),this.debounced.forEach(function(r){return r.cancel()}),this.collections.forEach(function(r){r.stopListening(),r.reset()})},a.prototype.__appendTo=function(){var n=this.getConfig().appendTo;if(n){var t=(0,S.isElement)(n)?n:document.querySelector(n);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const Bt=Vt;var Ot=function(a){ot(n,a);function n(t,e,r,o,l,f){f===void 0&&(f={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=r,d.events=o,!f.skipListen&&d.__initListen(),d}return n.prototype.postLoad=function(t){},n.prototype.render=function(t){},n.prototype.getProjectData=function(t){var e={},r=this.storageKey;return r&&(e[r]=t||this.getAll()),e},n.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.all,o=e.onResult,l=e.reset,f=this.storageKey,d={action:"load"},h=r||this.all,v=t[f];if(typeof v=="string")try{v=JSON.parse(v)}catch{this.__logWarn("Data parsing failed",{input:v})}return l&&v&&h.reset(void 0,d),o?v&&o(v,d):v&&(0,tt.isDef)(v.length)&&h.reset(v,d),v},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},n.prototype.getAll=function(){return kt([],this.all.models,!0)},n.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},n.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,r=e.all,o=e.em,l=e.events;r&&o&&r.on("add",function(f,d,h){return o.trigger(l.add,f,h)}).on("remove",function(f,d,h){return o.trigger(l.remove,f,h)}).on("change",function(f,d){return o.trigger(l.update,f,f.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[r].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var d=f.entity,h=f.event;d.on("all",function(v,m,w,T){var I=T||w,W=ht({event:v},I);[o,r].map(function(z){return z.trigger(h,m,W)})})})},n.prototype.__remove=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,l=(0,S.isString)(t)?this.get(t):t,f=function(){return l&&r.all.remove(l,e),l};return!e.silent&&(o==null||o.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},n.prototype.__catchAllEvent=function(t,e,r,o){var l=this,f=l.em,d=l.events,h=o||r;f&&d.all&&f.trigger(d.all,{event:t,model:e,options:h}),this.__onAllEvent()},n.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var r=(0,S.isElement)(e)?e:document.querySelector(e);if(!r)return this.__logWarn('"appendTo" element not found');r.appendChild(this.render(t))}},n.prototype.__onAllEvent=function(){},n.prototype._createId=function(t){t===void 0&&(t=16);var e=this.getAll(),r=e.length+t,o=this.getAllMap(),l;do l=(0,tt.createId)(r);while(o[l]);return l},n.prototype.__listenAdd=function(t,e){var r=this;t.on("add",function(o,l,f){return r.em.trigger(e,o,f)})},n.prototype.__listenRemove=function(t,e){var r=this;t.on("remove",function(o,l,f){return r.em.trigger(e,o,f)})},n.prototype.__listenUpdate=function(t,e){var r=this;t.on("change",function(o,l){return r.em.trigger(e,o,o.changedAttributes(),l)})},n.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},n}(Vt),mt={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0};const Yt=mt;var re=hr(642),ae={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};const Qt=ae;var ct=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lt=function(a){ct(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},n.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var e=["width","height","widthMedia"];e.forEach(function(r){return t.checkUnit(r)})},n.prototype.checkUnit=function(t){var e=this.get(t)||"",r=(parseFloat(e)||0).toString()===e.toString();r&&this.set(t,"".concat(e,"px"))},n.prototype.getName=function(){return this.get("name")||this.get("id")},n.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},n}(O.Hn);const $=Lt;var Q=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rt=function(a){Q(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(O.FE);const R=rt;rt.prototype.model=$;var lt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),A=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Mt=function(a){lt(n,a);function n(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return n.prototype.template=function(t){var e=t.ppfx,r=t.label;return ut($t||($t=A([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,r,e,e,e,e,e,e,e)},n.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},n.prototype.startAdd=function(){},n.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},n.prototype.updateSelect=function(){var t=this,e=t.em,r=t.devicesEl;if(e&&e.getDeviceModel&&r){var o=e.getDeviceModel();r.val(o?o.get("id"):"")}},n.prototype.getOptions=function(){var t=this,e=t.collection,r=t.em,o="";return e.forEach(function(l){var f=l.attributes,d=f.name,h=f.id,v=r&&r.t&&r.t("deviceManager.devices.".concat(h))||d;o+='<option value="'.concat(h||d,'">').concat(v,"</option>")}),o},n.prototype.render=function(){var t=this,e=t.em,r=t.ppfx,o=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return o.html(this.template({ppfx:r,label:f})),this.devicesEl=o.find(".".concat(r,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(r,"devices-c"),this},n}(O.G7);const Pt=Mt;var $t,xe=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ct=function(){return Ct=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ct.apply(this,arguments)},Ut="device",se="".concat(Ut,":"),Wt="".concat(se,"select"),be="".concat(se,"update"),vt="".concat(se,"add"),jt="".concat(se,"remove"),Nt="".concat(jt,":before"),oe="change:device",fe={all:Ut,select:Wt,update:be,add:vt,remove:jt,removeBefore:Nt},Xt=function(a){xe(n,a);function n(t){var e,r=a.call(this,t,"DeviceManager",new R,fe,Qt)||this;return r.Device=$,r.Devices=R,r.storageKey="",r.devices=r.all,(e=r.config.devices)===null||e===void 0||e.forEach(function(o){return r.add(o,{silent:!0})}),r.select(r.config.default||r.devices.at(0)),t.on(oe,r._onSelect,r),r}return n.prototype._onSelect=function(t,e,r){var o=this,l=o.em,f=o.events,d=t.previous("device"),h=this.get(e),v=f.select;l.trigger(v,h,this.get(d)),this.__catchAllEvent(v,h,r)},n.prototype.add=function(t,e){e===void 0&&(e={});var r,o=e;if((0,S.isString)(t)){var l=e;o=arguments[2]||{},r=Ct(Ct({},o),{id:t,name:o.name||t,width:l})}else r=t;return r.id||(r.id=r.name||this._createId()),this.devices.add(r,o)},n.prototype.get=function(t){var e=this.getAll().filter(function(r){return r.get("name")===t})[0];return e||this.devices.get(t)||null},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,S.isString)(t)?this.get(t):t;return r&&this.em.set("device",r.get("id"),e),this},n.prototype.getSelected=function(){return this.get(this.em.get("device"))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new Pt({collection:this.devices,config:Ct({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(Ot);const ve=Xt;var Ke;(function(a){a.add="page:add",a.addBefore="page:add:before",a.remove="page:remove",a.removeBefore="page:remove:before",a.select="page:select",a.selectBefore="page:select:before",a.update="page:update",a.all="page"})(Ke||(Ke={}));const gr=Ke;var Or=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lr=function(a){Or(n,a);function n(t,e,r){return a.call(this,e,{module:t,modelConstructor:r})||this}return n.prototype.add=function(t,e){var r=this,o,l=(0,S.isArray)(t)?t:(0,S.isUndefined)(t)?void 0:[t];return l=(o=l==null?void 0:l.map(function(f){return f instanceof r.newModel?f:new r.newModel(r.module,f)}))!==null&&o!==void 0?o:[void 0],a.prototype.add.call(this,(0,S.isArray)(t)?l:l[0],e)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(O.FE);const de=lr;var P=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),V=function(){return V=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},V.apply(this,arguments)},Z=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},pt="__aw",Et="__ah",X=function(a,n){var t,e=a.get(n),r=(t=a.view)===null||t===void 0?void 0:t.el[n==="width"?"offsetWidth":"offsetHeight"];return(0,S.isNumber)(e)?e:(0,S.isString)(e)&&e.endsWith("px")?parseFloat(e):r||0},xt=function(a){P(n,a);function n(t,e){var r=a.call(this,t,e)||this,o=r.em,l=r.attributes,f=l.styles,d=l.component,h=o.Components,v=h.getConfig(),m=o.Css.getAll(),w={},T={em:o,config:v,frame:r,idMap:w};if(!(0,tt.isComponent)(d)){var I=(0,tt.isObject)(d)?d:{components:d};!I.type&&(I.type="wrapper");var W=h.getType("wrapper").model;r.set("component",new W(I,T))}if(!f)r.set("styles",m);else if(!(0,tt.isObject)(f)){var z=f;(0,S.keys)(w).length&&(z=(0,S.isString)(z)?o.Parser.parseCss(z):z,o.Css.checkId(z,{idMap:w})),m.add(z),r.set("styles",m)}return!e.width&&r.set(pt,1),!e.height&&r.set(Et,1),!r.id&&r.set("id",(0,tt.createId)()),r}return n.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(n.prototype,"width",{get:function(){return X(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return X(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=this.refFrame;return(t==null?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),n.prototype.initRefs=function(){var t=this.refFrame;if((0,S.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},n.prototype.getBoxRect=function(){var t=this.attributes,e=t.x,r=t.y,o=this,l=o.width,f=o.height;return{x:e,y:r,width:l,height:f}},n.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},n.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},n.prototype.getComponent=function(){return this.get("component")},n.prototype.getStyles=function(){return this.get("styles")},n.prototype.disable=function(){this.trigger("disable")},n.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},n.prototype.getHead=function(){return Z([],this.head,!0)},n.prototype.setHead=function(t){return this.set("head",Z([],t,!0))},n.prototype.addHeadItem=function(t){this.head.push(t)},n.prototype.getHeadByAttr=function(t,e,r){return this.head.filter(function(o){return o.attributes&&o.attributes[t]==e&&(!r||r===o.tag)})[0]},n.prototype.removeHeadByAttr=function(t,e,r){var o=this.getHeadByAttr(t,e,r),l=this.head.indexOf(o);l>=0&&this.head.splice(l,1)},n.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},n.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},n.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},n.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},n.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},n.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",V({frame:this},t))},n.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=re.Z.prototype.toJSON.call(this,t),r=(0,S.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[pt]&&delete e.width,e[Et]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,S.forEach)(e,function(o,l){l.indexOf("_")===0&&delete e[l]}),(0,S.forEach)(r,function(o,l){e[l]===o&&delete e[l]}),(0,S.forEach)(["attributes","head"],function(o){(0,S.isEmpty)(e[o])&&delete e[o]}),e},n}(re.Z);const dt=xt;var Ce=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ge=function(a){Ce(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,dt)||this;return r.loadedItems=0,r.itemsToLoad=0,(0,S.bindAll)(r,"itemLoaded"),r.on("add",r.onAdd),r.on("reset",r.onReset),r.on("remove",r.onRemove),r.forEach(function(o){return r.onAdd(o)}),r}return n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var r=this,o=(e==null?void 0:e.previousModels)||[];o.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(r){return r[t?"on":"off"]("loaded",e.itemLoaded)})},n}(de);const Re=Ge;var Ue=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rr=function(a){Ue(n,a);function n(t){var e=this,r=t.em,o=t.config,l=o.scripts,f=o.styles;return e=a.call(this,t,{scripts:l,styles:f})||this,e.set("frames",new Re(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(r,"change:device ".concat(be),e.updateDevice),e.listenTo(r,gr.select,e._pageUpdated),e}return n.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:O.pH,pointerScreen:O.pH}},Object.defineProperty(n.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),n.prototype.init=function(){var t=this.em,e=t.Pages._initPage();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},n.prototype._pageUpdated=function(t,e){var r=this.em;r.setSelected(),r.get("readyCanvas")&&r.stopDefault(),e==null||e.getFrames().map(function(o){return o.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},n.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,r=e.getDeviceModel(),o=t.frame||e.getCurrentFrameModel();if(o&&r){var l=r.attributes,f=l.width,d=l.height;o.set({width:f,height:d},{noUndo:1})}},n.prototype.onZoomChange=function(){var t=this,e=t.em,r=t.module,o=this.get("zoom");o<1&&this.set("zoom",1),e.trigger(r.events.zoom)},n.prototype.onCoordsChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.coords)},n.prototype.onPointerChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.pointer)},n.prototype.getPointerCoords=function(t){t===void 0&&(t=O.vA.World);var e=this.attributes,r=e.pointer,o=e.pointerScreen;return t===O.vA.World?r:o},n}(re.Z);const ge=rr;var Qe=hr(675),De=hr(184),$e=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kr=function(a){$e(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,Qe.Z)||this;r.on("add",r.onAdd),r.on("change",r.onChange),r.on("remove",r.onRemove);var o=r.em;r.refreshDbn=(0,S.debounce)(function(){return r.refresh()},0);var l="component:resize styleable:change component:input ".concat(De.g.update," frame:updated undo redo");return r.listenTo(o,l,function(){return r.refreshDbn()}),r}return Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){var r=this.module,o=r.em;o.trigger(t,e),this.refreshDbn()},n}(de);const _e=kr;var Tr;(function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer",a.refresh="canvas:refresh",a.frameLoad="canvas:frame:load",a.frameLoadHead="canvas:frame:load:head",a.frameLoadBody="canvas:frame:load:body"})(Tr||(Tr={}));const Ae=Tr;var ir=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ur=function(a){ir(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),n.prototype.preinitialize=function(t){this.className=""},n}(O.G7);const fr=ur;var Kt=hr(491),Gn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),N=function(a){Gn(n,a);function n(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var r=a.call(this,t)||this;return r.itemsView="",r.itemType="type",r.reuseView=!1,r.viewCollection=[],e&&r.listenTo(r.collection,"add",r.addTo),r}return n.prototype.addTo=function(t){this.add(t)},n.prototype.itemViewNotFound=function(t){},n.prototype.add=function(t,e){var r=this,o=r.reuseView,l=r.viewCollection,f=e||null,d=t.get(this.itemType),h;t.view&&o?h=t.view:h=this.renderView(t,d),l.push(h);var v=h.render().el;f?f.appendChild(v):this.$el.append(v)},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(r){return t.add(r,e)}),this.$el.append(e),this.onRender(),this},n.prototype.onRender=function(){},n.prototype.onRemoveBefore=function(t,e){},n.prototype.onRemove=function(t,e){},n.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),O.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},n.prototype.clearItems=function(){this.viewCollection},n}(fr);const it=N;var yt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ft=function(a){yt(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var r=e.model;return e.listenTo(r,"change",e.render),e.listenTo(r,"destroy remove",e.remove),e.listenTo(r.get("selectors"),"change",e.render),e}return n.prototype.tagName=function(){return"style"},n.prototype.render=function(){var t=this,e=t.model,r=t.el,o=e.get("important");return r.innerHTML=e.toCSS({important:o}),this},n}(O.G7);const ce=Ft;var ke=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qe=function(a){ke(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},n}(ce);const ln=qe;var Cn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),br=function(a,n){return"".concat(a).concat(n?"-".concat(parseFloat(n)):"")},Lo=function(a){Cn(n,a);function n(t){var e=a.call(this,t)||this;(0,S.bindAll)(e,"sortRules");var r=t.config||{};e.atRules={},e.config=r,e.em=r.em,e.pfx=r.stylePrefix||"",e.className=e.pfx+"rules";var o=e.collection;return e.listenTo(o,"add",e.addTo),e.listenTo(o,"reset",e.render),e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var r=e||null,o=this.config,l={model:t,config:o},f,d;if(t.get("atRuleType")==="keyframes"){var h=t.getAtRule(),v=this.atRules[h];if(!v){var m=document.createElement("style");v=document.createTextNode(""),m.appendChild(document.createTextNode("".concat(h,"{"))),m.appendChild(v),m.appendChild(document.createTextNode("}")),this.atRules[h]=v,f=m}d=new ln(l),v.appendData(d.render().el.textContent)}else d=new ce(l),f=d.render().el;var w=this.className,T=t.get("mediaText"),I=br(w),W=I;if(T&&(W=br(w,this.getMediaWidth(T))),f){var z=r||this.el,st=void 0;try{st=z.querySelector("#".concat(W))}catch{}st||(st=z.querySelector("#".concat(I))),st==null||st.appendChild(f)}return f}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},n.prototype.sortRules=function(t,e){var r=this.em,o=(r.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var l=o?t:e,f=o?e:t;return l-f},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,r=e.em,o=e.$el,l=e.collection,f=this.className,d=document.createDocumentFragment();o.empty();var h=r.Devices.getAll().pluck("priority").sort(this.sortRules);return h.every(function(v){return v})&&h.unshift(0),h.forEach(function(v){return d.appendChild((0,Kt.ut)("div",{id:br(f,v)}))}),l.each(function(v){return t.addToCollection(v,d)}),o.append(d),o.attr("class",f),this},n}(O.G7);const vn=Lo;var xn="text/html",_o=xn;const Mr=function(a,n){n===void 0&&(n={});var t=new DOMParser,e=n.htmlType||_o,r=e===xn,o=r?a:"<div>".concat(a,"</div>"),l=t.parseFromString(o,e),f;if(r){if(n.asDocument)return l;var d=l.head,h=l.body,v=d.querySelectorAll("script");(0,S.each)(v,function(w){return h.appendChild(w)});var m=[];(0,S.each)(d.children,function(w){return m.push(w)}),(0,S.each)(m,function(w,T){return h.insertBefore(w,h.children[T])}),f=h}else f=l.firstChild;return f};var Cr=function(){return Cr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Cr.apply(this,arguments)},Wr="data-gjs-",Sn="parse:html",$n=function(a,n){return n===void 0&&(n={}),{compTypes:[],modelAttrStart:Wr,getPropAttribute:function(t,e){var r=t.replace(this.modelAttrStart,""),o=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(o-1),d=e==="true"?!0:e==="false"?!1:e;try{d=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(d):d}catch{}return{name:r,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var r={},o={};return(0,S.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(f,l);r[d.name]=d.value}else o[f]=l}),{props:r,attrs:o}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var r=t.indexOf("/*"),o=t.indexOf("*/")+2;t=t.replace(t.slice(r,o),"")}for(var l=t.split(";"),f=0,d=l.length;f<d;f++){var h=l[f].trim();if(h){var v=h.split(":"),m=v[0].trim(),w=v.slice(1).join(":").trim();e[m]?((0,S.isArray)(e[m])||(e[m]=[e[m]]),e[m].push(w)):e[m]=w}}return e},parseClass:function(t){for(var e=[],r=t.split(" "),o=0,l=r.length;o<l;o++){var f=r[o].trim();f&&e.push(f)}return e},parseNodeAttr:function(t,e){for(var r=e||{},o=t.attributes||[],l=o.length,f=0;f<l;f++){var d=o[f].nodeName,h=o[f].nodeValue;if(d=="style")r.style=this.parseStyle(h);else if(d=="class")r.classes=this.parseClass(h);else{if(d=="contenteditable")continue;if(d.indexOf(this.modelAttrStart)===0){var v=this.getPropAttribute(d,h);r[v.name]=v.value}else h===""&&t[d]===!0&&(h=!0),r.attributes||(r.attributes={}),r.attributes[d]=h}}return r},detectNode:function(t,e){var r;e===void 0&&(e={});var o=this.compTypes,l={};if(o){var f=(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"".concat(this.modelAttrStart,"type"));if(f)l={type:f};else for(var d=0;d<o.length;d++){var h=o[d],v=h.model.isComponent(t,e);if(v){typeof v!="object"&&(v={type:h.id}),l=v;break}}}return l},parseNode:function(t,e){var r;e===void 0&&(e={});var o=((r=t.content)===null||r===void 0?void 0:r.childNodes)||t.childNodes,l=o.length,f=this.detectNode(t,e);if(!f.tagName){var d=t.tagName||"",h=t.namespaceURI||"";f.tagName=d&&h==="http://www.w3.org/1999/xhtml"?d.toLowerCase():d}if(f=this.parseNodeAttr(t,f),!l&&"".concat(t.outerHTML).slice(-2)==="/>"&&(f.void=!0),l&&!f.components&&!e.skipChildren){var v=o[0];l===1&&v.nodeType===3?(!f.type&&(f.type="text"),f.components={type:"textnode",content:v.nodeValue}):f.components=this.parseNodes(t,Cr(Cr({},e),{inSvg:e.inSvg||f.type==="svg"}))}var m=f.components;if(!f.type&&(m!=null&&m.length)){for(var w=n.textTypes,T=w===void 0?[]:w,I=n.textTags,W=I===void 0?[]:I,z=!0,st=!1,St=0;St<m.length;St++){var Tt=m[St],zt=Tt.type;if(!T.includes(zt)&&!W.includes(Tt.tagName)){z=!1;break}zt==="textnode"&&(st=!0)}z&&st&&(f.type="text")}return f},parseNodes:function(t,e){var r;e===void 0&&(e={});for(var o=[],l=((r=t.content)===null||r===void 0?void 0:r.childNodes)||t.childNodes,f=l.length,d=0;d<f;d++){var h=l[d],v=o[o.length-1],m=this.parseNode(h,e);if(m.type==="textnode"){if((v==null?void 0:v.type)==="textnode"){v.content+=m.content;continue}if(!e.keepEmptyTextNodes){var w=h.nodeValue;if(w!=" "&&!w.trim())continue}}!m.tagName&&(0,S.isUndefined)(m.content)||o.push(m)}return o},parse:function(t,e,r){var o,l,f;r===void 0&&(r={});var d=(a==null?void 0:a.get("Config"))||{},h={html:[]},v=Cr(Cr({},n),r),m=Cr(Cr(Cr({},n.optionsHtml),{htmlType:((o=n.optionsHtml)===null||o===void 0?void 0:o.htmlType)||n.htmlType}),r),w=m.preParser,T=m.asDocument,I=(0,S.isFunction)(w)?w(t,{editor:a==null?void 0:a.getEditor()}):t,W=(0,S.isFunction)(v.parserHtml)?v.parserHtml(I,m):Mr(I,m),z=W,st=W;T&&(z=st.documentElement,h.doctype=(0,Kt.hy)(st.doctype));var St=z.querySelectorAll("script"),Tt=St.length,zt=(0,S.isUndefined)(d.allowScripts)?m.allowScripts:d.allowScripts;if(!zt)for(;Tt--;)(l=St[Tt].parentNode)===null||l===void 0||l.removeChild(St[Tt]);if((!m.allowUnsafeAttr||!m.allowUnsafeAttrValue)&&this.__sanitizeNode(z,m),e){for(var le=z.querySelectorAll("style"),Se=le.length,Pe="";Se--;)Pe=le[Se].innerHTML+Pe,(f=le[Se].parentNode)===null||f===void 0||f.removeChild(le[Se]);Pe&&(h.css=e.parse(Pe))}a==null||a.trigger("".concat(Sn,":root"),{input:I,root:z});var Jt=[];if(T)h.head=this.parseNode(st.head,v),h.root=this.parseNodeAttr(z),Jt=this.parseNode(st.body,v);else{var Ee=this.parseNodes(z,v);Jt=Ee.length===1&&!v.returnArray?Ee[0]:Ee}return h.html=Jt,a==null||a.trigger(Sn,{input:I,output:h}),h},__sanitizeNode:function(t,e){var r=this,o=t.attributes||[],l=t.childNodes||[],f=[];(0,S.each)(o,function(d){var h=d.nodeName||"",v=d.nodeValue||"";!e.allowUnsafeAttr&&h.startsWith("on")&&f.push(h),!e.allowUnsafeAttrValue&&v.startsWith("javascript:")&&f.push(h)}),f.map(function(d){return t.removeAttribute(d)}),(0,S.each)(l,function(d){return r.__sanitizeNode(d,e)})}}};const Do=$n;var Rn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qr=function(){return Qr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qr.apply(this,arguments)},zr=Do(),qn=function(a){return(0,S.isArray)(a)?a[a.length-1]:a},Mn=function(a){Rn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.parseStyle=function(t){return zr.parseStyle(t)},n.prototype.extendStyle=function(t){return Qr(Qr({},this.getStyle()),t)},n.prototype.getStyle=function(t){var e=this.get("style")||{},r=Qr({},e);return t&&(0,S.isString)(t)?r[t]:r},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,S.isString)(t)&&(t=this.parseStyle(t));var o=this.getStyle(e);e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var l=Qr({},t),f=Qr({},l);(0,S.keys)(f).forEach(function(h){f[h]===""&&delete f[h]}),this.set("style",f,e);var d=(0,tt.shallowDiff)(o,l);return delete d.__p,(0,S.keys)(d).forEach(function(h){var v=r.em;e.noEvent||(r.trigger("change:style:".concat(h)),v&&(v.trigger("styleable:change",r,h,e),v.trigger("styleable:change:".concat(h),r,h,e)))}),l},n.prototype.addStyle=function(t,e,r){var o;e===void 0&&(e=""),r===void 0&&(r={}),typeof t=="string"?t=(o={},o[t]=e,o):r=e||{},r.addStyle=t,t=this.extendStyle(t),this.setStyle(t,r)},n.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},n.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],r=this.getStyle(t),o=t.important,l=function(d){var h=(0,S.isArray)(o)?o.indexOf(d)>=0:o,v=d.substring(0,2),m=v==="__";if(m)return"continue";var w=r[d],T=(0,S.isArray)(w)?w:[w];T.forEach(function(I){var W="".concat(I).concat(h?" !important":"");W&&e.push("".concat(d,":").concat(W,";"))})};for(var f in r)l(f);return e.join("")},n.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},n.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},n}(O.Hn);const On=Mn;var Lr=function(){return Lr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Lr.apply(this,arguments)},nr=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},me=function(a){return(0,S.isArray)(a.get(Fr))},un=function(a){return!!a.get(or)},yr=function(a){return!!(me(a)||un(a))},Vr=function(a){var n=a.parent();return yr(a)&&(!n||!yr(n))},Ye=function(a){a.__symbReady||(a.on("change",a.__upSymbProps),a.__symbReady=!0)},tn=function(a){var n=a.get(or);if(n&&(0,S.isString)(n)){var t=a.__getAllById()[n];t?(n=t,a.set(or,t)):n=0}return n||void 0},Dr=function(a){var n=a==null?void 0:a.get(Fr);return n&&(0,S.isArray)(n)&&(n.forEach(function(t,e){t&&(0,S.isString)(t)&&(n[e]=a.__getAllById()[t])}),n=n.filter(function(t){return t&&!(0,S.isString)(t)})),n||void 0},gn=function(a,n){n===void 0&&(n="");var t=a==null?void 0:a.get(eo),e=n.split(":")[0],r=n!==e?[n,e]:[n];return t===!0||(0,S.isArray)(t)&&r.some(function(o){return t.indexOf(o)>=0})},C=function(a,n){n===void 0&&(n={});var t=[],e=n.changed;if(n.fromInstance||n.noPropagate||n.fromUndo||e&&gn(a,e))return t;var r=Dr(a)||[],o=tn(a),l=o?nr([o],Dr(o)||[],!0):r;return t=l.filter(function(f){return f!==a}).filter(function(f){return!(e&&gn(f,e))}),t},U=function(a,n){for(var t=a,e=a.parent(n);e&&yr(e);)t=e,e=e.parent(n);return t},Rt=function(a,n){n===void 0&&(n={});var t=tn(a),e=t&&Dr(t);!n.skipRefs&&e&&t.set(Fr,e.filter(function(r){return r!==a})),a.set(or,0),a.components().forEach(function(r){return Rt(r,n)})},Gt=function(a,n,t,e){e===void 0&&(e={});var r=tn(a),o=Dr(a);!r&&!o||a.em.log(n,{model:a,toUp:t,context:"symbols",opts:e})},je=function(a,n){n===void 0&&(n={});var t=a.changedAttributes()||{},e=t.attributes||{};if(delete t.status,delete t.open,delete t[Fr],delete t[or],delete t[eo],delete t.attributes,delete e.id,(0,tt.isEmptyObj)(e)||(t.attributes=e),!(0,tt.isEmptyObj)(t)){var r=C(a,n);(0,S.keys)(t).map(function(o){gn(a,o)&&delete t[o]}),Gt(a,"props",r,{opts:n,changed:t}),r.forEach(function(o){var l=Lr({},t);(0,S.keys)(l).map(function(f){gn(o,f)&&delete l[f]}),o.set(l,Lr({fromInstance:a},n))})}},Xe=function(a,n){n===void 0&&(n={});var t=C(a,n);Gt(a,"classes",t,{opts:n}),t.forEach(function(e){e.set("classes",a.get("classes"),{fromInstance:a})}),a.__changesUp(n)},er=function(a,n,t,e){var r=e||t||{},o=r.fromInstance,l=r.fromUndo,f={fromInstance:o,fromUndo:l},d=n.opt.temporary;if(e)if(e.add){var T=[],I=!!Dr(a),v=C(a,Lr(Lr({},f),{changed:"components:add"}));if(v.length){var W=tn(n);T=Dr(W||n)||[],T=nr([],T,!0),T.push(W||n)}!d&&Gt(a,"add",v,{opts:e,addedInstances:T.map(function(Jt){return Jt.cid}),added:n.cid}),v.forEach(function(Jt){var Ee=U(Jt),Ve=T.filter(function(ue){var zn=U(ue,{prev:1});return Ee&&zn&&zn===Ee})[0],sr=Ve||n.clone({symbol:!0,symbolInv:I});Jt.append(sr,Lr({fromInstance:a},e))})}else{var z=tn(n);if(z&&!e.temporary&&z.set(Fr,Dr(z).filter(function(Pe){return Pe!==n})),!Vr(n)&&!e.skipRefsUp){var st="components:remove",St=e.index,Tt=n.parent(),zt=Lr({fromInstance:n},e),le=Vr(n),Se=function(Jt){var Ee=Jt.parent();Ee&&!gn(Ee,st)&&Jt.remove(zt)},v=gn(Tt,st)?[]:C(n,f);le&&(v=Tt&&C(Tt,Lr(Lr({},f),{changed:st})),Se=function(Jt){var Ee=Jt.components().at(St);Ee&&Ee.remove(Lr({fromInstance:Tt},zt))}),!d&&Gt(a,"remove",v,{opts:e,removed:n.cid,isSymbNested:le}),v.forEach(Se)}}else{var h=n,v=C(a,Lr(Lr({},f),{changed:"components:reset"})),m=h.models,w=new Set;Gt(a,"reset",v,{components:m}),v.forEach(function(Pe){var Jt=Pe.components(),Ee=m.map(function(Ve,sr){return!yr(Ve)||w.has(Ve)?(w.add(Ve),Ve.clone({symbol:!0})):Jt.at(sr)});Jt.reset(Ee,Lr({fromInstance:a},t))})}a.__changesUp(r)},we=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_r=function(){return _r=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_r.apply(this,arguments)},wo=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},gi=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},cn=function(a,n){if(n===void 0&&(n=[]),!a)return[];var t=(0,S.isArray)(a)||(0,S.isFunction)(a.map)?a:[a];return t.map(function(e){n.push(e.getId()),cn(e.components().models,n)}),n},Wi=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps,r=(0,S.isArray)(a)?a:[a];return r.map(function(o){var l=o.attributes,f=l===void 0?{}:l,d=o.components,h=o.tagName,v=o.style,m=f.id;f.draggable;var w=wo(f,["id","draggable"]),T=o;if(m){if(e[m])e[m].push(T),m=Gr.getNewId(n),T.attributes.id=m;else if(e[m]=[],n[m]){T=n[m];var I=T;h&&I.set({tagName:h},_r(_r({},t),{silent:!0})),(0,S.keys)(w).length&&I.addAttributes(w,_r({},t)),(0,S.keys)(v).length&&I.addStyle(v,t)}}if(d){var W=Wi(d,n);if((0,S.isFunction)(T.components)){var z=T.components();z.length>0&&z.reset(W,t)}else T.components=W}return T})},Aa=function(a){we(n,a);function n(t,e){var r=a.call(this,t,e)||this;r.opt=e,r.listenTo(r,"add",r.onAdd),r.listenTo(r,"remove",r.removeChildren),r.listenTo(r,"reset",r.resetChildren);var o=e.em,l=e.config;return r.config=l,r.em=o,r.domc=e.domc||(o==null?void 0:o.Components),r}return Object.defineProperty(n.prototype,"events",{get:function(){var t;return(t=this.domc)===null||t===void 0?void 0:t.events},enumerable:!1,configurable:!0}),n.prototype.resetChildren=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=e.previousModels||[],f=l.filter(function(v){return!t.get(v.cid)}),d=cn(t),h=cn(l).filter(function(v){return d.indexOf(v)>=0});e.keepIds=(e.keepIds||[]).concat(h),f.forEach(function(v){return r.removeChildren(v,o,e)}),t.each(function(v){return r.onAdd(v)})},n.prototype.resetFromString=function(t,e){var r,o;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=cn(this);var l=this,f=l.domc,d=l.em,h=l.parent,v=d==null?void 0:d.Css,m=(f==null?void 0:f.allById())||{},w=this.parseString(t,e),T=Wi(w,m,e),I=e.visitedCmps,W=I===void 0?{}:I;Object.keys(W).forEach(function(z){var st=W[z];if(st.length){var St=(v==null?void 0:v.getRules("#".concat(z)))||[];St.length&&st.forEach(function(Tt){St.forEach(function(zt){var le=zt.clone();le.set("selectors",["#".concat(Tt.attributes.id)]),v.getAll().add(le)})})}}),this.reset(T,e),d==null||d.trigger("component:content",h,e,t),(o=(r=h).__checkInnerChilds)===null||o===void 0||o.call(r)},n.prototype.removeChildren=function(t,e,r){var o=this;if(r===void 0&&(r={}),!!t){var l=this,f=l.domc,d=l.em,h=r.temporary||r.fromUndo;if(t.prevColl=this,!h){var v=t.getId(),m=d.Selectors.getAll(),w=d.Css.getAll(),T=(r.keepIds||[]).indexOf(v)<0,I=f?f.allById():{};delete I[v];var W=T?w.remove(w.filter(function(St){return St.getSelectors().getFullString()==="#".concat(v)}),r):[];m.remove(W.map(function(St){return St.getSelectors().at(0)})),t.opt.temporary||(d.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),d.trigger(De.g.remove,t),f&&un(t)&&Vr(t)&&f.symbols.__trgEvent(f.events.symbolInstanceRemove,{component:t},!0));var z=t.components();z.forEach(function(St){er(St,St,z,_r(_r({},r),{skipRefsUp:!0})),o.removeChildren(St,e,r)})}var st=t.components();d.stopListening(st),d.stopListening(t),d.stopListening(t.get("classes")),t.__postRemove()}},n.prototype.model=function(t,e){var r=e.collection.opt,o=r.em,l,f=o.Components.componentTypes;e.em=o,e.config=r.config,e.componentTypes=f,e.domc=r.domc;for(var d=0;d<f.length;d++){var h=f[d].id;if(h==t.type){l=f[d].model;break}}return l||(l=f[f.length-1].model,o&&t.type&&o.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new l(t,e)},n.prototype.parseString=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.domc,f=r.parent,d=e.asDocument&&(f==null?void 0:f.is("wrapper")),h=o.Css,v=o.Parser.parseHtml(t,{asDocument:d}),m=v.html;if(d){var w=f,T=v.html||{},I=T.components,W=wo(T,["components"]),z=v.head||{},st=z.components,St=wo(z,["components"]);m=I,w.set(W,e),w.head.set(St,e),w.head.components(st,e),w.docEl.set(v.root,e),w.set({doctype:v.doctype})}if(Gr.checkId(m,v.css,l.componentsById,e),v.css&&h&&!e.temporary){e.at;var Tt=wo(e,["at"]);h.addCollection(v.css,_r(_r({},Tt),{extend:1}))}return m},n.prototype.add=function(t,e){var r=this;if(e===void 0&&(e={}),t!=null){e.keepIds=gi(gi([],e.keepIds||[],!0),cn(e.previousModels),!0),(0,S.isString)(t)?t=this.parseString(t,e):(0,S.isArray)(t)&&t.forEach(function(l,f){if((0,S.isString)(l)){var d=r.parseString(l,e);t[f]=(0,S.isArray)(d)&&!d.length?null:d}});var o=((0,S.isArray)(t)?t:[t]).filter(Boolean).map(function(l){return r.processDef(l)});return t=(0,S.isArray)(t)?(0,S.flatten)(o,1):o[0],a.prototype.add.call(this,t,e)}},n.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this,r=e.em,o=e.config,l=o===void 0?{}:o,f=l.processor,d=t;if(f){d=_r({},d);var h=f(d);h&&((0,S.each)(d,function(z,st){return delete d[st]}),(0,S.extend)(d,h))}if(d.$$typeof&&typeof d.props=="object"){d=_r({},d),d.props=_r({},d.props);var v=r.Components,m=r.Parser,w=m.parserHtml;(0,S.each)(d,function(z,st){(0,S.includes)(["props","type"],st)||delete d[st]});var T=d.props,I=T.children;delete T.children,delete d.props;var W=w.splitPropsFromAttr(T);d.attributes=W.attrs,I&&(d.components=I),d.type?v.getType(d.type)||(d.tagName=d.type,delete d.type):d.type="textnode",(0,S.extend)(d,W.props)}return d},n.prototype.onAdd=function(t,e,r){r===void 0&&(r={});var o=this,l=o.domc,f=o.em,d=t.getStyle(),h=f&&f.getConfig().avoidInlineStyle;if(l&&l.Component.ensureInList(t),!(0,S.isEmpty)(d)&&!h&&f&&f.getConfig().forceClass&&!r.temporary){var v=t.cid;f.Css.setClassRule(v,d),t.setStyle({}),t.addClass(v)}if(t.__postAdd({recursive:!0}),f&&!r.temporary){var m=function(w){f.trigger(De.g.add,w,r),w.components().forEach(function(T){return m(T)})};m(t),l&&un(t)&&Vr(t)&&l.symbols.__trgEvent(l.events.symbolInstanceAdd,{component:t},!0)}},n}(O.FE);const Qn=Aa;var zi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jo=1,Io=2,yi=function(a){zi(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.config,l=o===void 0?{}:o,f=r.get("name"),d=r.get("label");f?d||r.set("label",f):r.set("name",d);var h=r.get("name"),v=l.escapeName,m=v?v(h):n.escapeName(h);return r.set("name",m),r.em=e.em,r}return n.prototype.defaults=function(){return{name:"",label:"",type:jo,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get("type")===Io},n.prototype.isClass=function(){return this.get("type")===jo},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,r=this.get("name"),o="";switch(this.get("type")){case jo:o=".";break;case Io:o="#";break}return o+(e?e(r):r)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getName=function(){return this.get("name")||""},n.prototype.getLabel=function(){return this.get("label")||""},n.prototype.setLabel=function(t){return this.set("label",t)},n.prototype.getActive=function(){return!!this.get("active")},n.prototype.setActive=function(t){return this.set("active",t)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,r=O.Hn.prototype.toJSON.call(this,[t]),o=(0,S.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,S.forEach)(o,function(f,d){r[d]===f&&delete r[d]}),r.label===r.name&&delete r.label;var l=(0,S.keys)(r).length;l===1&&r.name&&(r=r.name),l===2&&r.name&&r.type&&(r=this.getFullName())}return r},n.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w\-\\:@\\/#()\.%\+\[\]]+)/gi,"-")},n.TYPE_CLASS=jo,n.TYPE_ID=Io,n}(O.Hn);const jr=yi;yi.prototype.idAttribute="name";var Ki=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fn=function(a,n){return a.reduce(function(t,e,r){return t.concat(fn(a.slice(r+1),"".concat(n).concat(e)))},[n])},fo=function(a){Ki(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||jr.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,S.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},n.prototype.getValid=function(t){var e=t===void 0?{}:t,r=e.noDisabled;return(0,S.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return r?o.get("active"):1})},n.prototype.getFullString=function(t,e){e===void 0&&(e={});var r=[],o=t||this;return o.forEach(function(l){return r.push(l.getFullName(e))}),e.sort&&r.sort(),r.join("").trim()},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,r=t.array,o=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,d){o=o.concat(fn(l.slice(d+1),f))}):o=l,r?o:e?o.join(","):o.join("")},n}(O.FE);const to=fo;fo.prototype.model=jr;var ka=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ln=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Ts=function(a){ka(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},n.prototype.getId=function(){return this.get("id")},n.prototype.getLabel=function(){return this.get("label")},n}(O.Hn);const Ro=Ts;function No(a){var n=new Set,t=new Map,e={items:[]};a.forEach(function(o){var l=o.category;if(l){n.add(l);var f=t.get(l);f?f.push(o):t.set(l,[o])}else e.items.push(o)});var r=Array.from(n).map(function(o){return{category:o,items:t.get(o)||[]}});return Ln(Ln([],r,!0),[e],!1)}var Vo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mi="category",Ma=function(a){Vo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initCategory=function(t){var e=t.get(mi),r=e instanceof Ro;if(e&&!r){(0,S.isString)(e)?e={id:e,label:e}:(0,tt.isObject)(e)&&!e.id&&(e.id=e.label);var o=this.getCategories().add(e);return t.set(mi,o,{silent:!0}),o}else if(r){var o=e;return this.getCategories().add(o),o}},n}(O.FE),Es=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gi=function(a){Es(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.events,l=e.em,f=o==null?void 0:o.update;return l&&f&&r.on("change",function(d,h){return l.trigger(f,{category:d,changes:d.changedAttributes(),options:h})}),r}return n.prototype.add=function(t,e){var r=(0,S.isArray)(t)?t:[t];return r.forEach(function(o){return o&&(o.id=(0,tt.normalizeKey)("".concat(o.id)))}),a.prototype.add.call(this,t,e)},n.prototype.get=function(t){return a.prototype.get.call(this,(0,S.isString)(t)?(0,tt.normalizeKey)(t):t)},n}(O.FE);const bo=Gi;Gi.prototype.model=Ro;var Co;(function(a){a.select="trait:select",a.value="trait:value",a.categoryUpdate="trait:category:update",a.custom="trait:custom",a.all="trait"})(Co||(Co={}));const $i=Co;var _i=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xo=function(){return xo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},xo.apply(this,arguments)},Fo=function(a){_i(n,a);function n(t,e){var r=a.call(this,t)||this,o=r.attributes,l=o.target,f=o.name;return!r.get("id")&&r.set("id",f),l&&r.setTarget(l),r.em=e,r}return n.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof Ro?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),n.prototype.setTarget=function(t){if(t){var e=this.attributes,r=e.name,o=e.changeProp,l=e.value,f=e.getValue;this.target=t,this.unset("target");var d=o?"change:".concat(r):"change:attributes:".concat(r);this.listenTo(t,d,this.targetUpdated);var h=l||(f?void 0:this.getValue());!(0,S.isUndefined)(h)&&this.set({value:h},{silent:!0})}},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,l=this.getId(),f=this.get("label")||this.getName();return o&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},n.prototype.getValue=function(t){return this.getTargetValue(t)},n.prototype.setValue=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=o.component,f=o.em,d=e.partial,h={},v=this.attributes.setValue;if(v){v({value:t,component:l,editor:f==null?void 0:f.getEditor(),trait:this,partial:!!d,options:e,emitUpdate:function(){return r.targetUpdated()}});return}d&&(h.avoidStore=!0),this.setTargetValue(t,h)},n.prototype.getDefault=function(){return this.get("default")},n.prototype.getOptions=function(){return this.get("options")||[]},n.prototype.getOption=function(t){var e=this,r=(0,tt.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]},n.prototype.getOptionId=function(t){return t.id||t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,l=o===void 0?!0:o,f=(0,S.isString)(t)?this.getOption(t):t,d=this.getOptionId(f),h=f.label||f.name||d,v=this.getName();return l&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.options.".concat(v,".").concat(d)))||h},n.prototype.getCategoryLabel=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.category,l=t.locale,f=l===void 0?!0:l,d=o==null?void 0:o.getId(),h=o==null?void 0:o.getLabel();return f&&(r==null?void 0:r.t("traitManager.categories.".concat(d)))||h||""},n.prototype.runCommand=function(){var t=this.em,e=this.attributes.command;if(e&&t)return(0,S.isString)(e)?t.Commands.run(e):e(t.Editor,this)},n.prototype.props=function(){return this.attributes},n.prototype.targetUpdated=function(){var t=this,e=t.component,r=t.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var l={trait:this,component:e,value:o};e.trigger($i.value,l),r==null||r.trigger($i.value,l),r==null||r.trigger("trait:update",l)},n.prototype.getTargetValue=function(t){t===void 0&&(t={});var e=this,r=e.component,o=e.em,l=this.getName(),f=this.get("getValue"),d;if(f?d=f({editor:o==null?void 0:o.getEditor(),trait:this,component:r}):this.changeProp?d=r.get(l):d=r.getAttributes()[l],t.useType){var h=this.getType();if(h==="checkbox"){var v=this.attributes,m=v.valueTrue,w=v.valueFalse;!(0,S.isUndefined)(m)&&m===d?d=!0:!(0,S.isUndefined)(w)&&w===d&&(d=!1)}}return(0,S.isUndefined)(d)?"":d},n.prototype.setTargetValue=function(t,e){var r;e===void 0&&(e={});var o=this,l=o.component,f=o.attributes,d=this.getName();if(!(0,S.isUndefined)(t)){var h=t;if(t==="false"?h=!1:t==="true"&&(h=!0),this.getType()==="checkbox"){var v=f.valueTrue,m=f.valueFalse;h&&!(0,S.isUndefined)(v)&&(h=v),!h&&!(0,S.isUndefined)(m)&&(h=m)}var w=(r={},r[d]=h,r);w.__p=e.avoidStore?null:void 0,this.changeProp?l.set(w,e):l.addAttributes(w,e)}},n.prototype.setValueFromInput=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o={value:t};this.set(o,xo(xo({},r),{avoidStore:1})),e&&(this.set("value","",r),this.set(o,r))},n.prototype.getInitValue=function(){var t=this.component,e=this.getName(),r;if(t){var o=t.get("attributes");r=this.changeProp?t.get(e):o[e]}return r||this.get("value")||this.get("default")},n}(O.Hn);const po=Fo;var wi=function(){function a(n){n===void 0&&(n={}),this.config=n}return a.prototype.build=function(n,t){return(0,S.isString)(n)?this.buildFromString(n,t):new po(n,t)},a.prototype.buildFromString=function(n,t){var e={name:n,type:"text"};switch(n){case"target":e.type="select",e.default=!1,e.options=this.config.optionsTarget;break}return new po(e,t)},a}();const La=wi;var Ho=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bi=function(a){Ho(n,a);function n(t,e){var r=a.call(this,t)||this;r.categories=new bo;var o=e.em;r.em=o,r.categories=new bo([],{em:o,events:{update:$i.categoryUpdate}}),r.on("add",r.handleAdd),r.on("reset",r.handleReset);var l=r.module,f=l==null?void 0:l.getConfig();return r.tf=new La(f),r}return Object.defineProperty(n.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),n.prototype.getCategories=function(){return this.categories},n.prototype.handleReset=function(t,e){var r=e===void 0?{}:e,o=r.previousModels,l=o===void 0?[]:o;l.forEach(function(f){return f.trigger("remove")})},n.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e),this.initCategory(t)},n.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},n.prototype.add=function(t,e){if(t!=null){var r=this,o=r.target,l=r.em;if((0,S.isArray)(t)){for(var f=[],d=0,h=t.length;d<h;d++){var v=t[d];f[d]=v instanceof po?v:this.tf.build(v,l),f[d].setTarget(o)}return a.prototype.add.call(this,f,e)}var m=t instanceof po?t:this.tf.build(t,l);return m.setTarget(o),a.prototype.add.call(this,m,e)}},n}(Ma);const yn=bi;var Yn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ze=function(){return Ze=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ze.apply(this,arguments)},Bo=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},mn=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Nn=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},So=function(a){return!!(a!=null&&a.getConfig().avoidInlineStyle)},Tn="component:drag",Fr="__symbols",or="__symbol",eo="__symbol_ovrd",ro=De.g.update,no=De.g.updateInside,Da=function(a){Yn(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;(0,S.bindAll)(r,"__upSymbProps","__upSymbCls","__upSymbComps");var o=e.em,l=r.parent(),f=l==null?void 0:l.attributes,d=r.get("propagate");if(d&&r.set("propagate",(0,S.isArray)(d)?d:[d]),f&&f.propagate&&!d){var h={},v=f.propagate;v.forEach(function(W){return h[W]=l.get(W)}),h.propagate=v,r.set(Ze(Ze({},h),t))}if(e&&e.config&&e.config.voidElements.indexOf(r.get("tagName"))>=0&&r.set("void",!0),e.em=o,r.opt=e,r.em=o,r.frame=e.frame,r.config=e.config||{},r.set("attributes",Ze(Ze({},(0,S.result)(r,"defaults").attributes||{}),r.get("attributes")||{})),r.ccid=n.createId(r,e),r.initClasses(),r.initComponents(),r.initTraits(),r.initToolbar(),r.initScriptProps(),r.listenTo(r,"change:script",r.scriptUpdated),r.listenTo(r,"change:tagName",r.tagUpdated),r.listenTo(r,"change:attributes",r.attrUpdated),r.listenTo(r,"change:attributes:id",r._idUpdated),r.on("change:toolbar",r.__emitUpdateTlb),r.on("change",r.__onChange),r.on(no,r.__propToParent),r.set("status",""),r.views=[],["classes","traits","components"].forEach(function(W){var z="add remove ".concat(W!=="components"?"change":"");r.listenTo(r.get(W),z.trim(),function(){for(var st=[],St=0;St<arguments.length;St++)st[St]=arguments[St];return r.emitUpdate.apply(r,mn([W],st,!1))})}),!e.temporary){var m=o&&o.Css,w=r.attributes,T=w.styles,I=w.type;T&&m&&m.addCollection(T,{avoidUpdateStyle:!0},{group:"cmp:".concat(I)}),r.__postAdd(),r.init(),yr(r)&&Ye(r),o==null||o.trigger(De.g.create,r,e)}return r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},t[or]=0,t[Fr]=0,t[eo]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.updated=function(t,e,r){},n.prototype.removed=function(){},n.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,r=e==null?void 0:e.UndoManager,o=this.components();r&&!this.__hasUm&&(r.add(o),r.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&o.map(function(l){return l.__postAdd(t)})},n.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.UndoManager;e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},n.prototype.__onChange=function(t,e){var r=this,o=this.changedAttributes()||{};(0,S.keys)(o).forEach(function(l){return r.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete o[l]}),(0,tt.isEmptyObj)(o)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:o,options:e}))},n.prototype.__onStyleChange=function(t){var e=this,r=this.em;if(r){var o="component:styleUpdate",l=(0,S.keys)(t),f={style:t};r.trigger(o,this,f),l.forEach(function(d){return r.trigger("".concat(o,":").concat(d),e,f)})}},n.prototype.__changesUp=function(t){var e=this,r=e.em,o=e.frame;[o,r].forEach(function(l){return l&&l.changesUp(t)})},n.prototype.__propSelfToParent=function(t){this.trigger(ro,t),this.__propToParent(t)},n.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(no,t)},n.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},n.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},n.prototype.__upSymbProps=function(t,e){e===void 0&&(e={}),je(this,e)},n.prototype.__upSymbCls=function(t,e,r){r===void 0&&(r={}),Xe(this,r)},n.prototype.__upSymbComps=function(t,e,r){er(this,t,e,r)},n.prototype.is=function(t){return this.get("type")==t},n.prototype.props=function(){return this.attributes},n.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(){return this.get("dmode")||""},n.prototype.setSymbolOverride=function(t){var e;this.set(eo,(e=(0,S.isString)(t)?[t]:t)!==null&&e!==void 0?e:0)},n.prototype.getSymbolOverride=function(){return this.get(eo)},n.prototype.find=function(t){var e,r=[],o=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return o==null||o.each(function(l){var f=o.eq(l),d=f.data("model");d&&r.push(d)}),r},n.prototype.findType=function(t){var e=[],r=function(o){return o.forEach(function(l){l.is(t)&&e.push(l),r(l.components())})};return r(this.components()),e},n.prototype.closest=function(t){var e,r=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return r!=null&&r.length?r.data("model"):void 0},n.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},n.prototype.contains=function(t){var e=!1;if(!t)return e;var r=function(o){!e&&o.forEach(function(l){l===t&&(e=!0),!e&&r(l.components())})};return r(this.components()),e},n.prototype.tagUpdated=function(){this.trigger("rerender")},n.prototype.replaceWith=function(t,e){e===void 0&&(e={});var r=this.collection,o=r.indexOf(this);r.remove(this);var l=r.add(t,Ze(Ze({},e),{at:o}));return(0,S.isArray)(l)?l:[l]},n.prototype.attrUpdated=function(t,e,r){var o=this;r===void 0&&(r={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var d=l.style;d&&this.setStyle(d,r),delete l.style;var h=Ze({},this.previous("attributes")),v=(0,tt.shallowDiff)(h,this.get("attributes"));(0,S.keys)(v).forEach(function(m){var w,T="attributes:".concat(m);o.trigger("change:".concat(T),o,v[m],r),(w=o.em)===null||w===void 0||w.trigger("".concat(ro,":").concat(T),o,v[m],r)})},n.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",Ze({},t),e),this},n.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(Ze(Ze({},this.getAttributes({noClass:!0})),t),e)},n.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.getAttributes();return r.map(function(l){return delete o[l]}),this.setAttributes(o,e)},n.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=this.em,o=(0,S.isString)(t)?t:"",l=o?e:t;if(So(r)&&!l.inline){var f=r.get("state"),d=r.Css,h=d.getIdRule(this.getId(),Ze({state:f},l));return this.rule=h,h?h.getStyle(o):{}}return a.prototype.getStyle.call(this,o)},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={});var o=this,l=o.opt,f=o.em;if(So(f)&&!l.temporary&&!e.inline){var d=this.get("style")||{};t=(0,S.isString)(t)?this.parseStyle(t):t,t=Ze(Ze({},t),d);var h=f.get("state"),v=f.Css,m=this.getStyle(e);this.rule=v.setIdRule(this.getId(),t,Ze({state:h},e));var w=(0,tt.shallowDiff)(m,t);this.set("style","",{silent:!0}),(0,S.keys)(w).forEach(function(T){return r.trigger("change:style:".concat(T))})}else t=a.prototype.setStyle.apply(this,arguments);return l.temporary||this.__onStyleChange(e.addStyle||t),t},n.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,r=[],o=Ze({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete o.class:(this.classes.forEach(function(v){return r.push((0,S.isString)(v)?v:v.getName())}),r.length&&(o.class=r.join(" "))),!t.noStyle){var d=this.getStyle({inline:!0});(0,tt.isObject)(d)&&!(0,tt.isEmptyObj)(d)&&(o.style=this.styleToString({inline:!0}))}if(!(0,S.has)(o,"id")){var h=!1;(So(e)||!(0,S.isEmpty)(this.getStyle()))&&(h=!!(l!=null&&l.get(f,l.Selector.TYPE_ID))),(yr(this)||this.get("script-export")||this.get("script"))&&(h=!0),h&&(o.id=f)}return o},n.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},n.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},n.prototype.removeClass=function(t){var e=[];t=(0,S.isArray)(t)?t:[t];var r=this.classes,o=jr.TYPE_CLASS;return t.forEach(function(l){var f=l.split(" ");f.forEach(function(d){var h=r.where({name:d,type:o})[0];h&&e.push(r.remove(h))})}),e},n.prototype.getClasses=function(){var t=this.getAttributes(),e=t.class;return e?e.split(" "):[]},n.prototype.initClasses=function(t,e,r){r===void 0&&(r={});var o="change:classes",l=this.get("attributes")||{},f=l.class,d=Bo(l,["class"]),h=[this,o,this.initClasses],v=this.get("classes")||f||[],m=(0,S.isString)(v)?v.split(" "):v;this.stopListening.apply(this,h);var w=this.normalizeClasses(m),T=new to([]);return this.set("classes",T,r),T.add(w),T.on("add remove reset",this.__upSymbCls),f&&w.length&&this.set("attributes",d),this.listenTo.apply(this,h),this},n.prototype.initComponents=function(){var t="change:components",e=[this,t,this.initComponents];this.stopListening.apply(this,e);var r=new Qn([],this.opt);r.parent=this;var o=this.get("components"),l=!this.opt.avoidChildren;return this.set("components",r),l&&o&&r.add((0,S.isFunction)(o)?o(this):o,this.opt),r.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},n.prototype.initTraits=function(t){var e=this.em,r="change:traits";this.off(r,this.initTraits),this.__loadTraits();var o=Ze({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.changeProp){var d=f.getName(),h=f.getInitValue();d&&h&&(o[d]=h)}}),l.length&&this.set("attributes",o),this.on(r,this.initTraits),t&&e&&e.trigger("component:toggled"),this},n.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var r=this.previous(t)||[],o=this.get(t)||[],l=r.map(function(d){return"change:".concat(d)}).join(" "),f=o.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},n.prototype.__scriptPropsChange=function(t,e,r){r===void 0&&(r={}),!r.avoidStore&&this.trigger("rerender")},n.prototype.append=function(t,e){e===void 0&&(e={});var r=(0,S.isArray)(t)?mn([],t,!0):[t],o=r.map(function(f){return(0,S.isString)(f)||f.collection&&f.collection.remove(f,{temporary:!0}),f}),l=this.components().add(o,Ze({action:De.W.add},e));return(0,S.isArray)(l)?l:[l]},n.prototype.components=function(t,e){e===void 0&&(e={});var r=this.get("components");return(0,S.isUndefined)(t)?r:(r.reset(void 0,e),t?this.append(t,e):[])},n.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},n.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},n.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},n.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},n.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},n.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},n.prototype.initToolbar=function(){var t=this.em,e=this,r=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var o=[];e.collection&&o.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&o.push({attributes:{class:"".concat(r,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&o.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&o.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",o)}},n.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var r=t||this.traits;if(!(r instanceof yn)){r=(0,S.isFunction)(r)?r(this):r;var o=new yn([],this.opt);o.setTarget(this),r.length&&(r.forEach(function(l){return l.attributes&&delete l.attributes.value}),o.add(r)),this.set({traits:o},e)}return this},n.prototype.getTraits=function(){return this.__loadTraits(),mn([],this.traits.models,!0)},n.prototype.setTraits=function(t){var e=(0,S.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},n.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},n.prototype.updateTrait=function(t,e){var r,o=this.getTrait(t);return o&&o.set(e),(r=this.em)===null||r===void 0||r.trigger("component:toggled"),this},n.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},n.prototype.removeTrait=function(t){var e=this,r,o=(0,S.isArray)(t)?t:[t],l=o.map(function(h){return e.getTrait(h)}),f=this.traits,d=l.length?f.remove(l):[];return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,S.isArray)(d)?d:[d]},n.prototype.addTrait=function(t,e){var r;e===void 0&&(e={}),this.__loadTraits();var o=this.traits.add(t,e);return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,S.isArray)(o)?o:[o]},n.prototype.normalizeClasses=function(t){var e=[],r=this.em,o=r==null?void 0:r.Selectors;return o?t.models?mn([],t.models,!0):(t.forEach(function(l){return e.push(o.add(l))}),e):[]},n.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,r=Ze({},this.attributes),o=Ze({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;r.attributes=Ze({},r.attributes),delete r.attributes.id,r.components=[],r.classes=[],r.traits=[],Vr(this)&&(t.symbol=!0),this.get("components").each(function(I,W){r.components[W]=I.clone(Ze(Ze({},t),{_inner:1}))}),this.get("traits").each(function(I,W){r.traits[W]=I.clone()}),this.get("classes").each(function(I,W){r.classes[W]=I.get("name")}),r.status="",o.collection=null;var d=new this.constructor(r,o),h="#".concat(d.getId()),v=f?f.getRules("#".concat(l)):[];v.forEach(function(I){var W=I.clone();W.set("selectors",[h]),f.getAll().add(W)}),d.set(Fr,0);var m=tn(this),w=Dr(this);!t.symbol&&(m||w)?(d.set(or,0),d.set(Fr,0)):m?(m.set(Fr,mn(mn([],Dr(m),!0),[d],!1)),Ye(d)):t.symbol&&(me(this)?(this.set(Fr,mn(mn([],w,!0),[d],!1)),d.set(or,this),Ye(d)):t.symbolInv?(this.set(Fr,[d]),d.set(or,this),[this,d].map(function(I){return Ye(I)})):(d.set(Fr,[this]),[this,d].map(function(I){return Ye(I)}),this.set(or,d)));var T="component:clone";return e&&e.trigger(T,d),this.trigger(T,d),d},n.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,r=this.attributes,o=r.type,l=r.tagName,f=r.name,d=o||l,h=o?"":l,v="domComponents.names.",m=f&&(e==null?void 0:e.t("".concat(v).concat(f))),w=h&&(e==null?void 0:e.t("".concat(v).concat(h))),T=e&&(e.t("".concat(v).concat(o))||e.t("".concat(v).concat(l))),I=this.get("custom-name");return(t.noCustom?"":I)||m||f||w||(0,tt.capitalize)(h)||T||(0,tt.capitalize)(d)},n.prototype.setName=function(t,e){e===void 0&&(e={}),this.set("custom-name",t,e)},n.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,r=[],o=t.tag,l=o||e.get("tagName"),f=e.get("void"),d=t.attributes,h=this.getAttrToHTML(t);if(delete t.tag,d&&((0,S.isFunction)(d)?h=d(e,h)||{}:(0,tt.isObject)(d)&&(h=d)),t.withProps){var v=this.toJSON();(0,S.forEach)(v,function(St,Tt){var zt=["classes","attributes","components"];Tt[0]!=="_"&&zt.indexOf(Tt)<0&&(h["data-gjs-".concat(Tt)]=(0,S.isArray)(St)||(0,tt.isObject)(St)?JSON.stringify(St):(0,S.isBoolean)(St)?"".concat(St):St)})}for(var m in h){var w=h[m];if(!(0,S.isUndefined)(w)&&w!==null)if((0,S.isBoolean)(w))w&&r.push(m);else{var T="";if(t.altQuoteAttr&&(0,S.isString)(w)&&w.indexOf('"')>=0)T="'".concat(w.replace(/'/g,"&apos;"),"'");else{var I=(0,S.isString)(w)?w.replace(/"/g,"&quot;"):w;T='"'.concat(I,'"')}r.push("".concat(m,"=").concat(T))}}var W=r.length?" ".concat(r.join(" ")):"",z=e.getInnerHTML(t),st="<".concat(l).concat(W).concat(f?"/":"",">").concat(z);return!f&&(st+="</".concat(l,">")),st},n.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},n.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(r){return r.toHTML(t)}).join(""):this.content},n.prototype.getAttrToHTML=function(t){var e=this.getAttributes();return So(this.em)&&(t==null?void 0:t.keepInlineStyle)!==!0&&delete e.style,e},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=Y.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,delete e.delegate,!t.fromUndo){var r=e[or],o=e[Fr];o&&(0,S.isArray)(o)&&(e[Fr]=o.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),r&&!(0,S.isString)(r)&&(e[or]=r.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},n.prototype.getChangedProps=function(t){var e=t||Y.Model.prototype.toJSON.apply(this),r=(0,S.result)(this,"defaults");return(0,S.forEach)(r,function(o,l){["type"].indexOf(l)===-1&&e[l]===o&&delete e[l]}),(0,S.isEmpty)(e.type)&&delete e.type,(0,S.forEach)(["attributes","style"],function(o){(0,S.isEmpty)(r[o])&&(0,S.isEmpty)(e[o])&&delete e[o]}),(0,S.forEach)(["classes","components"],function(o){(!e[o]||(0,S.isEmpty)(r[o])&&!e[o].length)&&delete e[o]}),e},n.prototype.getId=function(){var t=this.get("attributes")||{};return t.id||this.ccid||this.cid},n.prototype.setId=function(t,e){var r=Ze({},this.get("attributes"));return r.id=t,this.set("attributes",r,e),this},n.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},n.prototype.getView=function(t){var e=this,r=e.view,o=e.views,l=e.em,f=t||(l==null?void 0:l.getCurrentFrameModel());return f&&(r=o.filter(function(d){return d.frameView===f.view})[0]),r},n.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t==null?void 0:t.model;return this.getView(e)},n.prototype.__getScriptProps=function(){var t=this.props(),e=this.get("script-props")||[];return e.reduce(function(r,o){return r[o]=t[o],r},{})},n.prototype.getScriptString=function(t){var e=this,r=t||this.get("script")||"";if(!r)return r;if(this.get("script-props"))r=r.toString().trim();else{if((0,S.isFunction)(r)){var o=r.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),r=o.trim()}var l=this.em.getConfig(),f=Nn(l.tagVarStart||"{[ "),d=Nn(l.tagVarEnd||" ]}"),h=new RegExp("".concat(f,"([\\w\\d-]*)").concat(d),"g");r=r.replace(h,function(v,m){e.scriptUpdated();var w=e.attributes[m]||"";return(0,S.isArray)(w)||typeof w=="object"?JSON.stringify(w):w})}return r},n.prototype.emitUpdate=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var l=this.em,f=ro+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,mn([t,d,t&&this.previous(t)],r,!1)),this.trigger.apply(this,mn([f],r,!1)),l&&l.trigger.apply(l,mn([f,this],r,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:r[2]||r[1]||{}})},n.prototype.onAll=function(t){return(0,S.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},n.prototype.forEachChild=function(t){(0,S.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},n.prototype.remove=function(t){var e=this;t===void 0&&(t={});var r=this.em,o=this.collection,l=function(){o&&o.remove(e,Ze({action:De.W.remove},t)),o||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=Ze({},t);return[this,r].map(function(d){return d.trigger(De.g.removeBefore,e,l,f)}),!f.abort&&l(),this},n.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var r=e.at,o=this.index(),l=t===this.parent(),f=o===r||o===r-1;if(!l||!f){l&&r&&r>o&&(e.at=r-1);var d=De.W.move;this.remove({action:d,temporary:1}),t.append(this,Ze({action:d},e)),this.emitUpdate()}}return this},n.prototype.isInstanceOf=function(t){var e,r,o=(r=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||r===void 0?void 0:r.model;if(!o)return!1;var l=this.constructor.typeExtends;return this instanceof o||l.has(t)},n.prototype.isChildOf=function(t){for(var e=(0,S.isString)(t),r=this.parent();r;){if(e){if(r.isInstanceOf(t))return!0}else if(r===t)return!0;r=r.parent()}return!1},n.prototype.resetId=function(t){var e=this.em,r=this.getId();if(!r)return this;var o=n.createId(this);this.setId(o);var l=e==null?void 0:e.Css.getIdRule(r),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",o),this},n.prototype._getStyleRule=function(t){var e=t===void 0?{}:t,r=e.id,o=this.em,l=r||this.getId();return o==null?void 0:o.Css.getIdRule(l)},n.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},n.prototype._idUpdated=function(t,e,r){if(r===void 0&&(r={}),!r.idUpdate){var o=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||o,d=n.getList(this);if(d[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete d[f],d[l]=this,this.ccid=l;var h=this._getStyleSelector({id:f});h&&h.set({name:l,label:l})}},n.getDefaults=function(){return(0,S.result)(this.prototype,"defaults")},n.isComponent=function(t,e){return{tagName:(0,tt.toLowerCase)(t.tagName)}},n.ensureInList=function(t){var e=n.getList(t),r=t.getId(),o=e[r];if(!o)e[r]=t;else if(o!==t){var l=n.getIncrementId(r,e);t.setId(l),e[l]=t}t.components().forEach(function(f){return n.ensureInList(f)})},n.createId=function(t,e){e===void 0&&(e={});var r=n.getList(t),o=e.idMap,l=o===void 0?{}:o,f=t.get("attributes").id,d;return f?(d=n.getIncrementId(f,r,e),t.setId(d),f!==d&&(l[f]=d)):d=n.getNewId(r),r[d]=t,d},n.getNewId=function(t){for(var e=Object.keys(t).length,r=e.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-r),l="i".concat(o);t[l];)l=n.getNewId(t);return l},n.getIncrementId=function(t,e,r){r===void 0&&(r={});var o=r.keepIds,l=o===void 0?[]:o,f=1,d=t;if(l.indexOf(t)<0)for(;e[d];)f++,d="".concat(t,"-").concat(f);return d},n.getList=function(t){var e,r=t.em,o=r==null?void 0:r.Components;return(e=o==null?void 0:o.componentsById)!==null&&e!==void 0?e:{}},n.checkId=function(t,e,r,o){e===void 0&&(e=[]),r===void 0&&(r={}),o===void 0&&(o={});var l=(0,S.isArray)(t)?t:[t],f=o.keepIds,d=f===void 0?[]:f,h=o.idMap,v=h===void 0?{}:h;l.forEach(function(m){m.attributes;var w=m.attributes,T=w===void 0?{}:w,I=m.components,W=T.id;if(W&&r[W]&&d.indexOf(W)<0){var z=n.getIncrementId(W,r);v[W]=z,T.id=z,(0,S.isArray)(e)&&e.forEach(function(st){var St=st.selectors;St.forEach(function(Tt,zt){Tt==="#".concat(W)&&(St[zt]="#".concat(z))})})}I&&n.checkId(I,e,r,o)})},n.typeExtends=new Set,n}(On);const Gr=Da;var Ol=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uo=function(){return Uo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Uo.apply(this,arguments)},oo="head",ja=["title","style","base","link","meta","script","noscript"],Ps=function(a){Ol(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Uo(Uo({},a.prototype.defaults),{type:oo,tagName:oo,draggable:!1,highlightable:!1,droppable:function(t){var e=t.tagName;return!e||ja.includes((0,tt.toLowerCase)(e))}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===oo},n}(Gr);const qi=Ps;var Yi=function(){return Yi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yi.apply(this,arguments)},As=function(){function a(n,t){var e=this;this.em=n,this.canvas=n.Canvas;var r=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),o=Array.isArray(r)?r:[r];this.el=o[0],this.counter=0,(0,S.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),o.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(n,t){var e={on:Kt.on,off:Kt.S1},r=t?"on":"off";e[r](n,"dragenter",this.handleDragEnter),e[r](n,"dragover",this.handleDragOver),e[r](n,"drop",this.handleDrop),e[r](n,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(n){var t,e=n?Kt.on:Kt.S1,r=this.el.ownerDocument,o=(t=r.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=n?{onStart:function(l){var f=l.sorter;(0,Kt.on)(o,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,Kt.S1)(o,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return r.elementFromPoint(f.clientX,f.clientY)}}:null,e(o,"pointerenter",this.handleDragEnter),e(o,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(o,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(n){this.over?this.endDrop(n):this.__customTglEff(!1)},a.prototype.endDrop=function(n,t){var e=this,r=e.em,o=e.dragStop;this.counter=0,o&&o(n||!this.over),this.__customTglEff(!1),r.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(n){this.updateCounter(-1,n)},a.prototype.updateCounter=function(n,t){this.counter+=n,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(n){var t=this,e=this,r=e.em,o=e.canvas,l=n.dataTransfer,f=r.get("dragContent");if(!(!f&&!o.getConfig().allowExternalDrop)&&(this.updateCounter(1,n),!this.over)){this.over=!0;var d=r.Utils,h=f||"<br>",v,m;if(r.stopDefault(),r.inAbsoluteMode()){var w=r.Components.getWrapper(),T=w.append({})[0],I=r.Commands.run("core:component-drag",{event:n,guidesInfo:1,center:1,target:T,onEnd:function(z,st,St){var Tt=St.cancelled,zt;if(!Tt){zt=w.append(h)[0];var le=o.getOffset(),Se=T.getStyle(),Pe=Se.top,Jt=Se.left,Ee=Se.position,Ve=(0,Kt.GX)(z.target),sr=parseInt("".concat(parseFloat(Jt)+Ve.x-le.left),10),ue=parseInt("".concat(parseFloat(Pe)+Ve.y-le.top),10);zt.addStyle({left:sr+"px",top:ue+"px",position:Ee})}t.handleDragEnd(zt,l),T.remove()}});v=function(z){return I.stop(n,{cancel:z})},m=function(z){return h=z}}else{var W=new d.Sorter(Yi({em:r,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:o.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(z){return t.handleDragEnd(z,l)},document:this.el.ownerDocument},this.sortOpts||{}));W.setDropContent(h),W.startSort(),this.sorter=W,v=function(z){z&&(W.moved=!1),W.endMove()},m=function(z){return W.setDropContent(z)}}this.dragStop=v,this.dragContent=m,r.trigger("canvas:dragenter",l,h)}},a.prototype.handleDragEnd=function(n,t){var e=this.em;this.over=!1,n&&(e.set("dragResult",n),e.trigger("canvas:drop",t,n)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(n){n.preventDefault(),this.em.trigger("canvas:dragover",n)},a.prototype.handleDrop=function(n){n.preventDefault();var t=this.dragContent,e=n.dataTransfer,r=this.getContentByData(e).content;n.target.style.border="",r&&t&&t(r),this.endDrop(!r,n)},a.prototype.getContentByData=function(n){var t=this.em,e=n&&n.types,r=n&&n.files||[],o=t.get("dragContent"),l=n&&n.getData("text");if(r.length){l=[];for(var f=0;f<r.length;f++){var d=r[f],h=d.type.split("/")[0];h=="image"&&l.push({type:h,file:d,attributes:{alt:d.name}})}}else if(o)l=o;else if((0,S.indexOf)(e,"text/html")>=0)l=n&&n.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,S.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,S.indexOf)(e,"text/json")>=0){var v=n&&n.getData("text/json");v&&(l=JSON.parse(v))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var m={content:l};return t.trigger("canvas:dragdata",n,m),m},a}();const Ia=As;var ks=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_n=function(){return _n=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_n.apply(this,arguments)},Xi=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ho=function(a){ks(n,a);function n(t,e){var r=a.call(this,{model:t})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,S.bindAll)(r,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var o=r.el;r.module._config=_n(_n({},r.config||{}),{frameView:r}),r.frameWrapView=e,r.showGlobalTools=(0,S.debounce)(r.showGlobalTools.bind(r),50);var l=r.getCanvasModel();return r.listenTo(t,"change:head",r.updateHead),r.listenTo(l,"change:styles",r.renderStyles),t.view=r,(0,tt.setViewEl)(o,r),r}return Object.defineProperty(n.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),n.prototype.getBoxRect=function(){var t=this,e=t.el,r=t.module,o=r.getCanvasView(),l=r.getCoords(),f=e.getBoundingClientRect(),d=o.getCanvasOffset(),h=o.getViewportDelta(),v=r.getZoomMultiplier(),m=(f.x-d.left-h.x-l.x)*v,w=(f.y-d.top-h.y-l.y)*v,T=f.width*v,I=f.height*v;return{x:m,y:w,width:T,height:I}},n.prototype.updateHead=function(){var t=this.model,e=this.getHead(),r=[],o=[],l=t.head,f=t.previous("head"),d=function(v){return v===void 0&&(v={}),Object.keys(v).sort().map(function(m){return"[".concat(m,'="').concat(v[m],'"]')}).join("")},h=function(v,m,w){v.forEach(function(T){var I=T.tag,W=T.attributes,z=m.some(function(st){return st.tag===I&&d(st.attributes)===d(W)});!z&&w.push(T)})};h(l,f,o),h(f,l,r),r.forEach(function(v){var m,w=e.querySelector("".concat(v.tag).concat(d(v.attributes)));(m=w==null?void 0:w.parentNode)===null||m===void 0||m.removeChild(w)}),(0,Kt.SJ)(e,o)},n.prototype.getEl=function(){return this.el},n.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},n.prototype.getWindow=function(){return this.getEl().contentWindow},n.prototype.getDoc=function(){return this.getEl().contentDocument},n.prototype.getHead=function(){return this.getDoc().querySelector("head")},n.prototype.getBody=function(){return this.getDoc().querySelector("body")},n.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},n.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Kt.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},n.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},n.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},n.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},n.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},n.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},n.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},n.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),r=e.scrollTop,o=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:r,scrollLeft:o,scrollBottom:r+l,scrollRight:o+f}},n.prototype._getTool=function(t){var e=this.tools,r=this.getToolsEl();return e[t]||(e[t]=r.querySelector(t)),e[t]},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),fr.prototype.remove.apply(this,e),this},n.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},n.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,r=this.getWindow(),o=r.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,d=this.getRect().height-f,h=o;if(l<f&&(h-=f-l),l>d&&(h+=l-d),!(0,S.isUndefined)(t)&&h!==o&&h>0&&h<this.lastMaxHeight){var v=this.getGlobalToolsEl();v.style.opacity="0",this.showGlobalTools(),r.scrollTo(0,h),e.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},n.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,Kt.VB)(t).clientY*this.em.getZoomDecimal()},n.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},n.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},n.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),r=t?"on":"off",o={on:Kt.on,off:Kt.S1};o[r](e,"mousemove dragover",this.updateClientY),o[r](e,"mouseup",this.stopAutoscroll)},n.prototype.render=function(){var t=this,e=t.$el,r=t.ppfx,o=t.em;return e.attr({class:"".concat(r,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},n.prototype.renderScripts=function(){var t=this,e=this,r=e.el,o=e.model,l=e.em,f="frame:load",d={el:r,model:o,view:this},h=this.getCanvasModel(),v=function(m){var w;if(m.length>0){var T=m.shift(),I=(0,Kt.ut)("script",_n({type:"text/javascript"},(0,S.isString)(T)?{src:T}:T));(w=r.contentDocument)===null||w===void 0||w.head.appendChild(I),I.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?v(m):I.onerror=I.onload=v.bind(null,m)}else l==null||l.trigger(Ae.frameLoadHead,d),t.renderBody(),l==null||l.trigger(Ae.frameLoadBody,d),l==null||l.trigger(f,d)};r.onload=function(){var m=t.config.frameContent;if(m){var w=t.getDoc();w.open(),w.write(m),w.close()}d.window=t.getWindow(),l==null||l.trigger("".concat(f,":before"),d),l==null||l.trigger(Ae.frameLoad,d),t.renderHead(),v(Xi([],h.get("scripts"),!0))}},n.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),r=this.getCanvasModel(),o=function(m){return m.map(function(w){return{tag:"link",attributes:_n({rel:"stylesheet"},(0,S.isString)(w)?{href:w}:w)}})},l=o(t.prev||r.previous("styles")),f=o(r.get("styles")),d=[],h=[],v=function(m,w,T){m.forEach(function(I){var W=I.attributes.href,z=w.some(function(st){return st.attributes.href===W});!z&&T.push(I)})};v(f,l,h),v(l,f,d),d.forEach(function(m){var w,T=e.querySelector('link[href="'.concat(m.attributes.href,'"]'));(w=T==null?void 0:T.parentNode)===null||w===void 0||w.removeChild(T)}),(0,Kt.SJ)(e,h)},n.prototype.renderHead=function(){var t=this,e=t.model,r=t.em,o=e.root,l=r.Components.getType(oo).view;this.headView=new l({el:this.getHead(),model:o.head,config:_n(_n({},o.config),{frameView:this})}).render()},n.prototype.renderBody=function(){var t=this,e,r,o=this,l=o.config,f=o.em,d=o.model,h=o.ppfx,v=this.getDoc(),m=this.getBody(),w=this.getWindow(),T=d.hasAutoHeight(),I=f.config;w._isEditor=!0,this.renderStyles({prev:[]});var W="#ffca6f";(0,Kt.R3)(m,`<style>
      `.concat(I.baseCss||l.frameStyle||"",`

      `).concat(T?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(T?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(h,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(h,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(h,`selected-parent {
        outline: 2px solid `).concat(W,` !important
      }

      .`).concat(h,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(h,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(h,`no-pointer {
        pointer-events: none;
      }

      .`).concat(h,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(h,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(h,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(h,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(h,`is__grabbing,
      .`).concat(h,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(I.canvasCss||"",`
      `).concat(I.protectedCss||"",`
    </style>`));var z=d.root,st=f.Components.getType("wrapper").view;this.wrapper=new st({model:z,config:_n(_n({},z.config),{em:f,frameView:this})}).render(),(0,Kt.R3)(m,(e=this.wrapper)===null||e===void 0?void 0:e.el),(0,Kt.R3)(m,new vn({collection:d.getStyles(),config:_n(_n({},f.Css.getConfig()),{frameView:this})}).render().el),(0,Kt.R3)(m,this.getJsContainer()),(0,Kt.on)(m,"click",function(St){var Tt;return St&&((Tt=St.target)===null||Tt===void 0?void 0:Tt.tagName)=="A"&&St.preventDefault()}),(0,Kt.on)(m,"submit",function(St){return St&&St.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!l.infiniteCanvas}}].forEach(function(St){return St.event.split(" ").forEach(function(Tt){v.addEventListener(Tt,function(zt){return t.el.dispatchEvent((0,Kt.t3)(zt,St.class))},St.opts)})}),this._toggleEffects(!0),(0,tt.hasDnd)(f)&&(this.droppable=new Ia(f,(r=this.wrapper)===null||r===void 0?void 0:r.el)),this.loaded=!0,d.trigger("loaded")},n.prototype._toggleEffects=function(t){var e=t?Kt.on:Kt.S1,r=this.getWindow();r&&e(r,"".concat(Kt.G1," resize"),this._emitUpdate)},n.prototype._emitUpdate=function(){this.model._emitUpdated()},n}(fr);const Ms=ho;var Zi=hr(668),Wo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),en=function(){return en=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},en.apply(this,arguments)},Ir=function(a){Wo(n,a);function n(t,e){var r=a.call(this,{model:t})||this;return(0,S.bindAll)(r,"onScroll","frameLoaded","updateOffset","remove","startDrag"),en(en({},t.config),{frameWrapView:r}),r.cv=e,r.frame=new Ms(t,r),r.classAnim="".concat(r.ppfx,"frame-wrapper--anim"),r.updateOffset=(0,S.debounce)(r.updateOffset.bind(r),0),r.updateSize=(0,S.debounce)(r.updateSize.bind(r),0),r.listenTo(t,"loaded",r.frameLoaded),r.listenTo(t,"change:x change:y",r.updatePos),r.listenTo(t,"change:width change:height",r.updateSize),r.listenTo(t,"destroy remove",r.remove),r.updatePos(),r.setupDragger(),r}return n.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},n.prototype.setupDragger=function(){var t=this,e=this,r=e.module,o=e.model,l,f,d,h=function(v){r.toggleFramesEvents(v)};this.dragger=new Zi.Z({onStart:function(){var v=o.attributes,m=v.x,w=v.y;d=t.em.getZoomMultiplier(),l=m,f=w,h(!1)},onEnd:function(){return h(!0)},setPosition:function(v){o.set({x:l+v.x*d,y:f+v.y*d})}})},n.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Kt.L_)(this.elTools)},n.prototype.remove=function(t){var e=this;return this.__clear(t),fr.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(r){return e[r]=0}),this},n.prototype.updateOffset=function(){var t,e=this,r=e.em,o=e.$el,l=e.frame;!r||r.destroyed||(r.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this,r=e.model,o=e.el,l=r.attributes,f=l.x,d=l.y,h=o.style;this.frame.rect=void 0,h.left=isNaN(f)?f:"".concat(f,"px"),h.top=isNaN(d)?d:"".concat(d,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var t=this,e=t.em,r=t.el,o=t.$el,l=t.model,f=t.classAnim,d=t.frame;if(d){d.rect=void 0,o.addClass(f);var h=this.__handleSize(),v=h.noChanges,m=h.width,w=h.height;((0,S.isNull)(m)||(0,S.isNull)(w))&&l.set(en(en({},m?{}:{width:r.offsetWidth}),w?{}:{height:r.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),v?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this,e=t.frame,r=t.em;r.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},n.prototype.frameLoaded=function(){var t=this,e=t.frame;t.config,e.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var t,e,r="px",o=this,l=o.model,f=o.el,d=f.style,h=l.attributes,v=h.width,m=h.height,w=d.width||"",T=d.height||"",I=v||"",W=m||"",z=w==I&&T==W,st=(0,S.isNumber)(I)?"".concat(I).concat(r):I,St=(0,S.isNumber)(W)?"".concat(W).concat(r):W;if(d.width=st,l.hasAutoHeight()){var Tt=this.frame.el;if(Tt.contentDocument){var zt=Tt.contentDocument,le=new ResizeObserver(function(){d.height="".concat(zt.body.scrollHeight,"px")});le.observe(zt.body),(t=this.sizeObserver)===null||t===void 0||t.disconnect(),this.sizeObserver=le}}else d.height=St,(e=this.sizeObserver)===null||e===void 0||e.disconnect(),delete this.sizeObserver;return{noChanges:z,width:v,height:m,newW:I,newH:W}},n.prototype.render=function(){var t=this,e=t.frame,r=t.$el,o=t.ppfx,l=t.cv,f=t.model,d=t.el,h=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),r.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var v=(0,Kt.ut)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=v;var m=l==null?void 0:l.toolsWrapper;return m&&m.appendChild(v),h&&h({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(fr);const Ls=Ir;var Ra=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oo=function(a){Ra(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,!0)||this;return r.listenTo(r.collection,"reset",r.render),r.canvasView=e.canvasView,r._module=e.module,r}return n.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(r){return r.remove(e)})},n.prototype.onRender=function(){var t=this,e=t.$el,r=t.ppfx;e.attr({class:"".concat(r,"frames")})},n.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(e){return e.remove()}),this.viewCollection=[]},n.prototype.renderView=function(t,e){return new Ls(t,this.canvasView)},n}(it);const Ds=Oo;var zo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ci=function(){return Ci=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ci.apply(this,arguments)},Ji=function(a){zo(n,a);function n(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,S.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var r=e,o=r.em,l=r.pfx,f=r.ppfx,d=e.module.events;return e.className="".concat(l,"canvas ").concat(f,"no-touch-actions").concat(o.config.customUI?"":" ".concat(l,"canvas-bg")),e.clsUnscale="".concat(l,"unscale"),e._initFrames(),e.listenTo(o,d.refresh,e.clearOff),e.listenTo(o,"component:selected",e.checkSelected),e.listenTo(o,"".concat(d.coords," ").concat(d.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return n.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},n.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},n.prototype._initFrames=function(){var t=this,e=t.frames,r=t.model,o=t.config,l=t.em,f=r.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new Ds({collection:f},Ci(Ci({},o),{canvasView:this}))},n.prototype.checkSelected=function(t,e){var r;e===void 0&&(e={});var o=e.scroll,l=this.em.getCurrentFrame();o&&((r=t.views)===null||r===void 0||r.forEach(function(f){f.frameView===l&&f.scrollIntoView(o)}))},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,fr.prototype.remove.apply(this,e),this.toggleListeners(!1),this},n.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},n.prototype.toggleListeners=function(t){var e=this,r=e.el,o=e.config,l=t?Kt.on:Kt.S1;l(document,"keypress",this.onKeyPress),l(window,"scroll resize",this.clearOff),l(r,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),l(r,"pointermove",this.onPointer)},n.prototype.screenToWorld=function(t,e){var r=this.module,o=r.getCoords(),l=r.getZoomMultiplier(),f=this.getViewportDelta();return{x:(t-o.x-f.x)*l,y:(e-o.y-f.y)*l}},n.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),r=(0,Kt.GX)(),o={x:t.clientX-e.left+r.x,y:t.clientY-e.top+r.y};if(t._parentEvent){var l=t.target.getBoundingClientRect(),f=this.module.getZoomDecimal();o.x=l.left-e.left+r.x+t.clientX*f,o.y=l.top-e.top+r.y+t.clientY*f}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},n.prototype.onKeyPress=function(t){var e=this.em,r=(0,Kt.sN)(t);r===" "&&e.getZoomDecimal()!==1&&!e.Canvas.isInputFocused()&&(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},n.prototype.onWheel=function(t){var e=this,r=e.module,o=e.config;if(o.infiniteCanvas){this.preventDefault(t);var l=t.deltaX,f=t.deltaY,d=r.getZoomDecimal(),h=(0,Kt.Vb)(t),v=r.getCoords();if(h){var m=d-f*d*.01;r.setZoom(m*100);var w=this.model.getPointerCoords(O.vA.Screen),T=this.getCanvasOffset(),I=w.x-T.width/2,W=w.y-T.height/2,z=m/d,st=I-(I-v.x)*z,St=W-(W-v.y)*z;r.setCoords(st,St)}else this.onPointer(t),r.setCoords(v.x-l,v.y-f)}},n.prototype.updateFrames=function(t){var e=this.em,r=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),r.style.display="none",e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(o),e.runDefault(o),r.style.display=""},300)},n.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,r=t.model,o=t.module,l=t.cvStyle,f=t.clsUnscale,d=o.getZoomMultiplier();if(e){var h=r.attributes,v=h.x,m=h.y,w=o.getZoomDecimal();e.style.transform="scale(".concat(w,") translate(").concat(v*d,"px, ").concat(m*d,"px)")}l&&(l.innerHTML=`
        .`.concat(f," { scale: ").concat(d,` }
      `))},n.prototype.fitViewport=function(t){var e,r;t===void 0&&(t={});var o=this,l=o.em,f=o.module,d=o.model,h=this.getCanvasOffset(),v=t.el,m=v&&((e=(0,tt.getComponentView)(v))===null||e===void 0?void 0:e.frameView),w=m?m.model:t.frame||l.getCurrentFrameModel()||d.frames.at(0),T=w.attributes,I=T.x,W=T.y,z={x:I??0,y:W??0,width:w.width,height:w.height};if(v){var st=this.getElBoxRect(v);z.x=z.x+st.x,z.y=z.y+st.y,z.width=st.width,z.height=st.height}var St=t.ignoreHeight,Tt=(r=t.gap)!==null&&r!==void 0?r:0,zt=(0,S.isNumber)(Tt),le=zt?Tt:Tt.x,Se=zt?Tt:Tt.y,Pe=z.width+le*2,Jt=z.height+Se*2,Ee=h.width,Ve=h.height,sr=Ee/Pe,ue=Ve/Jt,zn=St?sr:Math.min(sr,ue),mu=zn*100;f.setZoom(mu);var yl=-z.x+(w.width>=Ee?Ee/2-Pe/2:-le),ml=-z.y+Ve/2-Jt/2,ui={x:(yl+le)*zn,y:(ml+Se)*zn};if(St){var gs=f.getZoomMultiplier(),ys=Ve*gs,Sa=ys-Ve,Oa=Sa/2;ui.y=(-z.y+Se)*zn-Oa/gs}f.setCoords(ui.x,ui.y)},n.prototype.isElInViewport=function(t){var e=(0,tt.getElement)(t),r=(0,Kt.Ut)(e),o=this.getFrameOffset(e),l=r.top,f=r.left;return l>=0&&f>=0&&l<=o.height&&f<=o.width},n.prototype.offset=function(t,e){e===void 0&&(e={});var r=e.noScroll,o=(0,Kt.Ut)(t),l=r?{x:0,y:0}:(0,Kt.GX)(t);return{top:o.top+l.y,left:o.left+l.x,width:o.width,height:o.height}},n.prototype.getRectToScreen=function(t){var e,r,o,l,f=this.module.getZoomDecimal(),d=this.module.getCoords(),h=this.getViewportDelta(),v=((e=t.x)!==null&&e!==void 0?e:0)*f+d.x+h.x||0,m=((r=t.y)!==null&&r!==void 0?r:0)*f+d.y+h.y||0;return{x:v,y:m,width:((o=t.width)!==null&&o!==void 0?o:0)*f,height:((l=t.height)!==null&&l!==void 0?l:0)*f}},n.prototype.getElBoxRect=function(t,e){var r,o,l;e===void 0&&(e={});var f=this.module,d=(0,Kt.Ut)(t),h=d.width,v=d.height,m=d.left,w=d.top,T=(r=(0,tt.getComponentView)(t))===null||r===void 0?void 0:r.frameView,I=T==null?void 0:T.getBoxRect(),W=f.getZoomMultiplier(),z=(o=I==null?void 0:I.x)!==null&&o!==void 0?o:0,st=(l=I==null?void 0:I.y)!==null&&l!==void 0?l:0,St=this.el,Tt=(0,Kt.GX)(),zt=m+z+(St.scrollLeft+Tt.x)*W,le=w+st+(St.scrollTop+Tt.y)*W,Se={x:zt,y:le,width:h,height:v};return e.local&&(Se.x=m,Se.y=w),e.toScreen?this.getRectToScreen(Se):Se},n.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),r=e.top,o=e.left,l=e.width,f=e.height,d=this.module;if(t.toWorld){var h=d.getZoomMultiplier(),v=d.getCoords(),m=this.getViewportDelta(),w=-v.x-m.x||0,T=-v.y-m.y||0;return{x:w*h,y:T*h,width:l*h,height:f*h}}else return{x:o,y:r,width:l,height:f}},n.prototype.getViewportDelta=function(t){var e=this.module.getZoomMultiplier(),r=this.getCanvasOffset(),o=r.width,l=r.height,f=o*e,d=l*e,h=f-o,v=d-l;return{x:h/2/e,y:v/2/e}},n.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},n.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var r=(e=this.frame)===null||e===void 0?void 0:e.el,o=t==null?void 0:t.ownerDocument.defaultView,l=o?o.frameElement:r;this.frmOff=this.offset(l||r)}return this.frmOff},n.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},n.prototype.getElementPos=function(t,e){e===void 0&&(e={});var r=this.module.getZoomDecimal(),o=this.getFrameOffset(t),l=this.el,f=this.getCanvasOffset(),d=this.offset(t,e),h=e.avoidFrameOffset?0:o.top,v=e.avoidFrameOffset?0:o.left,m=e.avoidFrameZoom?d.top:d.top*r,w=e.avoidFrameZoom?d.left:d.left*r,T=e.avoidFrameOffset?m:m+h-f.top+l.scrollTop,I=e.avoidFrameOffset?w:w+v-f.left+l.scrollLeft,W=e.avoidFrameZoom?d.height:d.height*r,z=e.avoidFrameZoom?d.width:d.width*r;return{top:T,left:I,height:W,width:z,zoom:r,rect:d}},n.prototype.getElementOffsets=function(t){if(!t||(0,Kt.BM)(t))return{};var e={},r=window.getComputedStyle(t),o=this.module.getZoomDecimal(),l=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return l.forEach(function(f){e[f]=parseFloat(r[f])*o}),e},n.prototype.getPosition=function(t){var e;t===void 0&&(t={});var r=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!r)return{top:0,left:0,width:0,height:0};var o=r.body,l=this.module.getZoomDecimal(),f=this.getFrameOffset(),d=this.getCanvasOffset(),h=t.noScroll;return{top:f.top+(h?0:o.scrollTop)*l-d.top,left:f.left+(h?0:o.scrollLeft)*l-d.left,width:d.width,height:d.height}},n.prototype.updateScript=function(t){var e=t.model,r=e.getId();if(!t.scriptContainer){t.scriptContainer=(0,Kt.ut)("div",{"data-id":r});var o=this.getJsContainer();o==null||o.appendChild(t.scriptContainer)}t.el.id=r,t.scriptContainer.innerHTML="";var l=document.createElement("script"),f=e.getScriptString(),d=e.get("script-props")?f:`function(){
`.concat(f,`
;}`),h=JSON.stringify(e.__getScriptProps());l.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(r,`');
        if (!item) return;
        (`).concat(d,".bind(item))(").concat(h,`)
      }, 1);`),setTimeout(function(){var v=t.scriptContainer;v==null||v.appendChild(l)},0)},n.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e==null?void 0:e.getJsContainer()},n.prototype.getFrameView=function(t){return(t==null?void 0:t.frameView)||this.em.getCurrentFrame()},n.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,r=t.frames,o=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),r.render();var d=f.at(0),h=d==null?void 0:d.view;o.setCurrentFrame(h),l==null||l.appendChild(r.el),this.frame=h,this.updateFramesArea()}},n.prototype.renderFrames=function(){this._renderFrames()},n.prototype.render=function(){var t=this,e=t.el,r=t.$el,o=t.ppfx,l=t.config,f=t.em;r.html(this.template());var d=r.find("[data-frames]");this.framesArea=d.get(0);var h=r.find("[data-tools]");return this.toolsWrapper=h.get(0),h.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(o,"tools")),this.hlEl=e.querySelector(".".concat(o,"highlighter")),this.badgeEl=e.querySelector(".".concat(o,"badge")),this.placerEl=e.querySelector(".".concat(o,"placeholder")),this.ghostEl=e.querySelector(".".concat(o,"ghost")),this.toolbarEl=e.querySelector(".".concat(o,"toolbar")),this.resizerEl=e.querySelector(".".concat(o,"resizer")),this.offsetEl=e.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(o,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),this.el.className=(0,tt.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},n}(fr);const Ko=Ji;var js=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vo=function(){return vo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},vo.apply(this,arguments)},Na=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Va=function(a){js(n,a);function n(t){var e=a.call(this,t,"Canvas",Yt)||this;return e.events=Tr,e.framesById={},e.canvas=new ge(e),e.spots=new _e(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return n.prototype.getCanvasView=function(){return this.canvasView},n.prototype.postLoad=function(){this.model.init()},n.prototype.getModel=function(){return this.canvas},n.prototype.getElement=function(){return this.getCanvasView().el},n.prototype.getFrame=function(t){return this.getFrames()[t||0]},n.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},n.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},n.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},n.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},n.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},n.prototype._getLocalEl=function(t,e,r){var o=t,l=e==null?void 0:e.frameView;return o=l?l[r]():o,o},n.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},n.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},n.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},n.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},n.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},n.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},n.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},n.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},n.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},n.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},n.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},n.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new Ko(this.canvas),this.canvasView.render().el},n.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},n.prototype.offset=function(t){return this.getCanvasView().offset(t)},n.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},n.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},n.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},n.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},r=e.top,o=r===void 0?0:r,l=e.left,f=l===void 0?0:l;return vo(vo({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:f})},n.prototype.getTargetToElementDim=function(t,e,r){r===void 0&&(r={});var o=r||{},l=this.getCanvasView().getPosition();if(l){var f=o.elPos||this.getCanvasView().getElementPos(e),d=r.toRight||0,h=o.targetHeight||t.offsetHeight,v=o.targetWidth||t.offsetWidth,m=o.event||null,w=f.top-h,T=f.left;T+=d?f.width:0,T=d?T-v:T;var I=T<l.left?l.left:T,W=w<l.top?l.top:w;W=W>f.top+f.height?f.top+f.height:W;var z={top:W,left:I,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return m&&this.em&&this.em.trigger(m,z),z}},n.prototype.canvasRectOffset=function(t,e,r){var o=this;r===void 0&&(r={});var l=function(d){var h=d.defaultView;return h==null?void 0:h.frameElement},f=function(d,h,v){h===void 0&&(h=1);var m=o.em.getZoomDecimal(),w=h?"top":"left",T=d.ownerDocument,I=r.offset?l(T):{},W=I.offsetTop,z=W===void 0?0:W,st=I.offsetLeft,St=st===void 0?0:st,Tt=T.body||{},zt=Tt.scrollTop,le=zt===void 0?0:zt,Se=Tt.scrollLeft,Pe=Se===void 0?0:Se,Jt=h?le:Pe,Ee=h?z:St;return v[w]-(Jt-Ee)*m};return{top:f(t,1,e),left:f(t,0,e)}},n.prototype.getTargetToElementFixed=function(t,e,r){r===void 0&&(r={});var o=r.pos||this.getElementPos(t,{noScroll:!0}),l=r.canvasOff||this.canvasRectOffset(t,o),f=e.offsetHeight||0,d=e.offsetWidth||0,h=o.left+o.width,v=this.getCanvasView(),m=v.getPosition(),w=v.getFrameOffset(t),T=r.event,I=-f,W=(0,S.isUndefined)(r.left)?o.width-d:r.left;if(W=o.left<-W?-o.left:W,W=h>m.width?W-(h-m.width):W,l.top<f){var z=o.height+f,st=z<w.height;st?I=I+z:I=-l.top<o.height?-l.top:o.height}var St={top:I,left:W,canvasOffsetTop:l.top,canvasOffsetLeft:l.left,elRect:o,canvasOffset:l,canvasRect:m,targetWidth:d,targetHeight:f};return T&&this.em.trigger(T,St),St},n.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var r=e.subWinOffset,o=t.target.ownerDocument,l=o.defaultView||o.parentWindow,f=l.frameElement,d=r?l.pageYOffset:0,h=r?l.pageXOffset:0,v=this.getZoomMultiplier(),m=0,w=0;if(f){var T=f.getBoundingClientRect();m=T.top||0,w=T.left||0}return{y:(t.clientY+m-d)*v,x:(t.clientX+w-h)*v}},n.prototype.getMouseRelativeCanvas=function(t,e){var r,o=this.getZoomDecimal(),l=(r=this.getCanvasView().getPosition(e))!==null&&r!==void 0?r:{},f=l.top,d=f===void 0?0:f,h=l.left,v=h===void 0?0:h;return{y:t.clientY*o+d,x:t.clientX*o+v}},n.prototype.hasFocus=function(){return this.getDocument().hasFocus()},n.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),r=Na(["body"],this.config.notTextable,!0),o=e&&document.activeElement===e,l=o?t&&t.activeElement:document.activeElement;return l&&!r.some(function(f){return l.matches(f)})},n.prototype.scrollTo=function(t,e){e===void 0&&(e={});var r=(0,tt.getElement)(t),o=r&&(0,tt.getViewEl)(r);o&&o.scrollIntoView(e)},n.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},n.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},n.prototype.setZoom=function(t){return this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t),this},n.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},n.prototype.setCoords=function(t,e,r){var o;r===void 0&&(r={});var l=t||t===0,f=e||e===0,d={x:this.canvas.get("x"),y:this.canvas.get("y")};if(l&&(d.x=parseFloat("".concat(t))),f&&(d.y=parseFloat("".concat(e))),r.toWorld){var h=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();h&&(l&&(d.x=d.x-h.x),f&&(d.y=d.y-h.y))}return this.canvas.set(d),this},n.prototype.getCoords=function(){var t=this.canvas.attributes,e=t.x,r=t.y;return{x:e,y:r}},n.prototype.getPointer=function(t){var e=this.canvas.attributes,r=e.pointer,o=e.pointerScreen;return t?o:r},n.prototype.getZoomDecimal=function(){return this.getZoom()/100},n.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},n.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},n.prototype.toggleFramesEvents=function(t){var e=this.getFramesEl().style;e.pointerEvents=t?"":"none"},n.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},n.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new dt(this,vo({},t)),e)},n.prototype.getLastDragResult=function(){return this.em.get("dragResult")},n.prototype.addSpot=function(t,e){var r;e===void 0&&(e={});var o=t,l=this.getSpots(o);if(l.length){var f=l[0];return f.set(o),f}var d=o.componentView||((r=o.component)===null||r===void 0?void 0:r.view),h=new Qe.Z(this,vo(vo({},o),{id:o.id||"cs_".concat(o.type,"_").concat(d==null?void 0:d.cid),type:o.type||""}));return this.spots.add(h,e),h},n.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},n.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,S.isArray)(t)?t:this.getSpots(t),r=this.spots.remove(e);return r},n.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},n.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},n.prototype.refresh=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,l=e.canvasView;l==null||l.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),r.trigger("canvas:updateTools")),r.set("canvasOffset",this.getOffset()),r.trigger(o.refresh,t)},n.prototype.refreshSpots=function(){this.spots.refresh()},n.prototype.destroy=function(){var t=this,e;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(r){return t[r]={}})},n}(Bt);const Fa=Va,go={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var io=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ao=function(){return ao=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ao.apply(this,arguments)},Ha=function(a){io(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ao(ao({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return e!=null&&e.is("script")?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,tt.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(Gr);const x=Ha;var M=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),J=function(){return J=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},J.apply(this,arguments)},nt=function(a){M(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return J({},a.prototype.defaults)},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},n.isComponent=function(t){var e;if(t.nodeType==8)return{type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(x);const bt=nt;var gt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ht=function(){return Ht=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ht.apply(this,arguments)},ie="iframe",Fe=function(a){gt(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ht(Ht({},a.prototype.defaults),{type:ie,tagName:ie,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===ie},n}(Gr);const Me=Fe;var dr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hr=function(){return Hr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Hr.apply(this,arguments)},Qi='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',Is=function(a){dr(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this,o=r.get("attributes").src;return o&&(0,tt.buildBase64UrlFromSvg)((0,S.result)(r,"defaults").src)!==o&&r.set("src",o,{silent:!0}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Hr(Hr({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(Qi,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(Qi,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),n.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e=t.Commands,r="image-editor";if(e.has(r)){for(var o=!1,l=this.get("toolbar"),f=0;f<l.length;f++)if(l[f].command==="image-editor"){o=!0;break}o||(l.push({attributes:{class:"fa fa-pencil"},command:r}),this.set("toolbar",l))}}},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},n.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",r=e;return e&&e.substr(0,4)==="<svg"&&(r=(0,tt.buildBase64UrlFromSvg)(e)),r},n.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,S.result)(this,"defaults").src;return t===e||t===(0,tt.buildBase64UrlFromSvg)(e)},n.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),r=e.attributes;return r&&e.src===r.src&&delete e.src,e},n.prototype.parseUri=function(t){var e={},r=function(o){o===void 0&&(o="");for(var l={},f=o.substring(1).split("&"),d=0;d<f.length;d++){var h=f[d].split("="),v=decodeURIComponent(h[0]);v&&(l[v]=decodeURIComponent(h[1]||""))}return l};if((0,tt.hasWin)())e=document.createElement("a"),e.href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:r(e.search)}},n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)==="img"},n}(Gr);const Tl=Is;var _f=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ba=function(){return Ba=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ba.apply(this,arguments)},Pu=function(a){_f(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;return r.__checkInnerChilds(),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ba(Ba({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(r){r.isInstanceOf("textnode")||r.set({locked:!0,layerable:!1})};(0,S.isFunction)(t)?this.forEachChild(function(r){t(r)&&e(r)}):this.forEachChild(e)}},n}(Gr);const xi=Pu;var Au=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ua=function(){return Ua=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ua.apply(this,arguments)},Wa="label",Rs=function(a){Au(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ua(Ua({},a.prototype.defaults),{type:Wa,tagName:Wa,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===Wa},n}(xi);const ku=Rs;var Ns=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dn=function(){return Dn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Dn.apply(this,arguments)},El="link",Pl=function(a){Ns(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Dn(Dn({},a.prototype.defaults),{type:El,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){e===void 0&&(e={});var r;if((0,tt.toLowerCase)(t.tagName)==="a"){var o=e.textTags||[];r={type:El,editable:!1};var l=t.childNodes,f=l.length;f||delete r.editable,(0,S.forEach)(l,function(d){var h=d.tagName;(d.nodeType==3&&d.textContent.trim()!==""||h&&o.indexOf((0,tt.toLowerCase)(h))>=0)&&delete r.editable})}return r},n}(xi);const Al=Pl;var Mu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),za=function(){return za=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},za.apply(this,arguments)},kl=function(a){Mu(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;return r.get("src")?r.parseFromSrc():r.updateSrc(),r.listenTo(r,"change:address change:zoom change:mapType",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return za(za({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),n.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),r=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",r=r?"&t="+r:"";var o=this.get("mapUrl")+"?"+t+e+r;return o+="&output=embed",o},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),e=t.query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},n.isComponent=function(t){if((0,tt.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},n}(Tl);const wf=kl;var bf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vs=function(){return Vs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Vs.apply(this,arguments)},To="script",ta=function(a){bf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Vs(Vs({},a.prototype.defaults),{type:To,tagName:To,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===To},n}(Gr);const ea=ta;var Ml=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ra=function(){return ra=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ra.apply(this,arguments)},Fs="svg",Ll=function(a){Ml(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ra(ra({},a.prototype.defaults),{type:Fs,tagName:Fs,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===Fs},n}(Gr);const Go=Ll;var Si=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rn=function(){return rn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},rn.apply(this,arguments)},$o=function(a){Si(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return rn(rn({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},n}(Go);const qo=$o;var Hs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bs=function(){return Bs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Bs.apply(this,arguments)},Us="table",Ka=function(a){Hs(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this,o=r.get("components");return!o.length&&o.add({type:"tbody"}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Bs(Bs({},a.prototype.defaults),{type:Us,tagName:Us,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===Us},n}(Gr);const Lu=Ka;var Dl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oi=function(){return Oi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Oi.apply(this,arguments)},jl="tbody",Il=function(a){Dl(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this,o=r.get("components"),l=r.get("columns"),f=r.get("rows");if(!o.length){for(var d=[];f--;){for(var h=[],v=l;v--;)h.push({type:"cell",classes:["cell"]});d.push({type:"row",classes:["row"],components:h})}o.add(d)}return r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Oi(Oi({},a.prototype.defaults),{type:jl,tagName:jl,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===jl},n}(Gr);const Ws=Il;var Rl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),na=function(){return na=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},na.apply(this,arguments)},oa=function(a){Rl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return na(na({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return["td","th"].indexOf((0,tt.toLowerCase)(t.tagName))>=0},n}(Gr);const zs=oa;var Du=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ti=function(){return Ti=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ti.apply(this,arguments)},Nl="tfoot",Cf=function(a){Du(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ti(Ti({},a.prototype.defaults),{type:Nl,tagName:Nl})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===Nl},n}(Ws);const xf=Cf;var Vl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ia=function(){return ia=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ia.apply(this,arguments)},Yo="thead",Ga=function(a){Vl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ia(ia({},a.prototype.defaults),{type:Yo,tagName:Yo})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===Yo},n}(Ws);const Sf=Ga;var Ks=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$a=function(){return $a=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$a.apply(this,arguments)},aa="tr",ju=function(a){Ks(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return $a($a({},a.prototype.defaults),{tagName:aa,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,tt.toLowerCase)(t.tagName)===aa},n}(Gr);const Ei=ju;var qa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yo=function(){return yo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yo.apply(this,arguments)},Pi="video",so="yt",Ai="vi",ki="ytnc",Fl="so",Hl=function(a){return a&&a!=="0"},Mi=function(a){qa(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;return r.get("src")&&r.parseFromSrc(),r.updatePropsFromAttr(),r.updateTraits(),r.on("change:provider",r.updateTraits),r.on("change:videoId change:provider",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return yo(yo({},a.prototype.defaults),{type:Pi,tagName:Pi,videoId:"",void:!1,provider:Fl,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),n.prototype.updatePropsFromAttr=function(){if(this.get("provider")===Fl){var t=this.get("attributes"),e=t.controls,r=t.autoplay,o=t.loop,l={};(0,tt.isDef)(e)&&(l.controls=!!e),(0,tt.isDef)(r)&&(l.autoplay=!!r),(0,tt.isDef)(o)&&(l.loop=!!o),(0,tt.isEmptyObj)(l)||this.set(l)}},n.prototype.updateTraits=function(){var t=this.em,e=this.get("provider"),r="iframe",o;switch(e){case so:case ki:o=this.getYoutubeTraits();break;case Ai:o=this.getVimeoTraits();break;default:r="video",o=this.getSourceTraits()}this.set({tagName:r},{silent:!0}),this.set({traits:o}),t.get("ready")&&t.trigger("component:toggled")},n.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),r=e.query;switch(t){case so:case ki:case Ai:this.set("videoId",e.pathname.split("/").pop()),r.list&&this.set("list",r.list),Hl(r.autoplay)&&this.set("autoplay",!0),Hl(r.loop)&&this.set("loop",!0),parseInt(r.controls)===0&&this.set("controls",!1),Hl(r.color)&&this.set("color",r.color),r.rel==="0"&&this.set("rel",0),r.modestbranding==="1"&&this.set("modestbranding",1);break}},n.prototype.updateSrc=function(){var t=this.get("provider"),e="";switch(t){case so:e=this.getYoutubeSrc();break;case ki:e=this.getYoutubeNoCookieSrc();break;case Ai:e=this.getVimeoSrc();break}this.set({src:e})},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.get("provider");switch(e){case so:case ki:case Ai:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls")}return t},n.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:so,name:"Youtube"},{value:ki,name:"Youtube (no cookie)"},{value:Ai,name:"Vimeo"}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),r=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=r?"&list=".concat(r):"",e+=this.get("autoplay")?"&autoplay=1&mute=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":"",e},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},n.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},n.isComponent=function(t){var e=t.tagName,r=t.src,o=/youtube\.com\/embed/.test(r),l=/youtube-nocookie\.com\/embed/.test(r),f=/player\.vimeo\.com\/video/.test(r),d=o||l||f;if((0,tt.toLowerCase)(e)==Pi||(0,tt.toLowerCase)(e)=="iframe"&&d){var h={type:"video"};return r&&(h.src=r),d&&(o?h.provider=so:l?h.provider=ki:f&&(h.provider=Ai)),h}},n}(Tl);const Li=Mi;var Of=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gs=function(){return Gs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gs.apply(this,arguments)},Tf=function(a){Of(n,a);function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,o,l=a.apply(this,t)||this,f=t[1],d=(r=f==null?void 0:f.em)===null||r===void 0?void 0:r.Components,h=(o=d==null?void 0:d.getType(oo))===null||o===void 0?void 0:o.model,v=d==null?void 0:d.getType("default").model;return h&&l.set({head:new h({},f),docEl:new v({tagName:"html"},f)},{silent:!0}),l}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Gs(Gs({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(t){t===void 0&&(t={});var e=this.doctype,r=(0,S.isUndefined)(t.asDocument)?!!e:t.asDocument,o=this,l=o.head,f=o.docEl,d=a.prototype.toHTML.call(this,t),h=r&&(l==null?void 0:l.toHTML(t))||"",v=r&&(0,Kt.nB)(f==null?void 0:f.getAttrToHTML())||"",m=v?" ".concat(v):"";return r?"".concat(e,"<html").concat(m,">").concat(h).concat(d,"</html>"):d},n.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(Gr);const Ef=Tf;var Pf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Af=function(a){Pf(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=xr,t}return n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},n.prototype.removeChildren=function(t,e,r){var o=this;r===void 0&&(r={}),t.views.forEach(function(f){if(f){var d=f.childrenView,h=f.scriptContainer;d&&d.stopListening(),(0,Kt.L_)(h),f.remove.apply(f)}});var l=t.components();l.forEach(function(f){return o.removeChildren(f,e,r)})},n.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},n.prototype.addToCollection=function(t,e,r){for(var o=this,l=o.config,f=o.opts,d=o.em,h=l.frameView,v=(h==null?void 0:h.model)&&t.getView(h.model),m=f.componentTypes||(d==null?void 0:d.Components.getTypes()),w=t.get("type")||"default",T=this.compView,I=0;I<m.length;I++)if(m[I].id==w){T=m[I].view;break}var W=v||new T({model:t,config:l,componentTypes:m}),z;try{z=W.render().el}catch(zt){z=document.createTextNode(""),d.logError(zt)}if(e)e.appendChild(z);else{var st=this.parentEl,St=st.childNodes;if((0,S.isUndefined)(r))st.appendChild(z);else{var Tt=St.length==r;Tt&&r--,Tt||!St.length?st.appendChild(z):st.insertBefore(z,St[r])}}return t.opt.temporary||d==null||d.trigger("component:mount",t),z},n.prototype.resetChildren=function(t,e){var r=this,o=e===void 0?{}:e,l=o.previousModels,f=l===void 0?[]:l;this.parentEl.innerHTML="",f.forEach(function(d){return r.removeChildren(d,r.collection)}),t.each(function(d){return r.addToCollection(d)})},n.prototype.render=function(t){var e=this,r=this.el,o=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,o)}),r.innerHTML="",r.appendChild(o),this},n}(O.G7);const En=Af;var $r=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wr=function(){return wr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},wr.apply(this,arguments)},qr=function(a){$r(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.className=function(){return this.getClasses()},n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.preinitialize=function(t){t===void 0&&(t={}),this.opts=t},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{},o=r.em,l=e.opt||{},f=this,d=f.$el,h=f.el;this.opts=t,this.modelOpt=l,this.config=r,this.em=o,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),d.data("model",e),(0,tt.setViewEl)(h,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=wr(wr({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},Object.defineProperty(n.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createDoc",{get:function(){var t,e,r=((t=this.frameView)===null||t===void 0?void 0:t.getDoc())||document;return!((e=this.opts.config)===null||e===void 0)&&e.useFrameDoc?r:document},enumerable:!1,configurable:!0}),n.prototype.__isDraggable=function(){var t=this,e=t.model,r=t.config,o=e.attributes.draggable;return r.draggableComponents&&o},n.prototype._clbObj=function(){var t=this,e=t.em,r=t.model,o=t.el;return{editor:e==null?void 0:e.getEditor(),model:r,el:o}},n.prototype.init=function(t){},n.prototype.removed=function(t){},n.prototype.onRender=function(t){},n.prototype.onActive=function(t){},n.prototype.onDisable=function(t){},n.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this,r=e.model,o=e.$el,l=r.views,f=this.frameView||{};return r.components().forEach(function(d){var h=d.getView(f.model);h==null||h.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),l.splice(l.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},n.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},n.prototype.initClasses=function(){var t=this.model,e=t.classes,r="change:classes";e instanceof to&&(this.stopListening(t,r,this.initClasses),this.listenTo(t,r,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},n.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,r=e.model,o=e.$el,l=e.childrenView,f="change:components",d=r.get("components"),h=[r,f,this.initComponents];d instanceof Qn&&(o.data("collection",d),l&&l.remove(),this.stopListening.apply(this,h),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,h))},n.prototype.handleChange=function(){var t=this.model,e=(0,S.keys)(t.changed);if(!(e.length===1&&e[0]==="status")){t.emitUpdate();for(var r in t.changed)t.emitUpdate(r)}},n.prototype.importClasses=function(){var t=this,e=t.em,r=t.model,o=e.Selectors;o&&r.classes.forEach(function(l){return o.add(l.getName())})},n.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.el,l=e.ppfx,f=e.model,d=r==null?void 0:r.Canvas,h=d==null?void 0:d.config.extHl,v=f.get("status"),m="".concat(l,"selected"),w="".concat(m,"-parent"),T="".concat(l,"freezed"),I="".concat(l,"hovered"),W="".concat(l,"no-pointer"),z="".concat(l,"pointer-init"),st=[m,w,T,I,W],St=h&&!t.noExtHl?"":m;this.$el.removeClass(st.join(" "));var Tt=o.getAttribute("class")||"",zt=[Tt],le=!(d!=null&&d.hasCustomSpot(Qe.q.Select)),Se=!(d!=null&&d.hasCustomSpot(Qe.q.Target));switch(v){case"selected":le&&zt.push(St);break;case"selected-parent":Se&&zt.push(w);break;case"freezed":zt.push(T);break;case"freezed-selected":zt.push(T),le&&zt.push(St);break;case"hovered":!t.avoidHover&&zt.push(I);break}(0,S.isBoolean)(f.locked)&&zt.push(f.locked?W:z);var Pe=zt.filter(Boolean).join(" ");Pe&&o.setAttribute("class",Pe)},n.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),r=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",r?!0:"")},n.prototype.updateStyle=function(t,e,r){r===void 0&&(r={});var o=this,l=o.model,f=o.em;if(So(f)&&!r.inline){var d=this.__cmpStyleOpts,h=l.getStyle(wr({inline:!0},d));!(0,S.isEmpty)(h)&&l.setStyle(h,d)}else this.setAttribute("style",l.styleToString(r))},n.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},n.prototype.setAttribute=function(t,e){var r=this.$el;e?r.attr(t,e):r.removeAttr(t)},n.prototype.getClasses=function(){return this.model.getClasses().join(" ")},n.prototype.updateAttributes=function(){var t=[],e=this,r=e.model,o=e.$el,l=e.el,f=r.attributes,d=f.textable,h=f.type,v=wr(wr({id:r.getId(),"data-gjs-type":h||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});(0,S.each)(l.attributes,function(w){return t.push(w.nodeName)}),t.forEach(function(w){return o.removeAttr(w)}),this.updateStyle(),this.updateHighlight();var m=wr(wr({},v),r.getAttributes());(0,S.keys)(m).forEach(function(w){return m[w]===!1&&delete m[w]}),o.attr(m)},n.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},n.prototype.prevDef=function(t){t.preventDefault()},n.prototype.updateScript=function(){var t=this,e=t.model,r=t.em;e.get("script")&&(r==null||r.Canvas.getCanvasView().updateScript(this))},n.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},n.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,r=0,o=0,l=function(f){var d=f.offsetParent;d?(r+=d.offsetTop,o+=d.offsetLeft,l(d)):(t.top=e.offsetTop+r,t.left=e.offsetLeft+o,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},n.prototype.isInViewport=function(){var t=this,e=t.el,r=t.em,o=t.frameView,l=r.Canvas.getCanvasView(),f=l.getElBoxRect(e,{local:!0}),d=o.el,h=d.clientHeight,v=d.clientWidth,m=f.y,w=f.x,T=m+f.height,I=w+f.width,W=m>=0&&m<h,z=T>0&&T<h,st=I>=0&&I<v,St=w>0&&w<=v,Tt=(W||z)&&(st||St);return Tt},n.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var r=this.isInViewport();if(!r||t.force){var o=this.el;if(t.behavior!=="smooth"){var l=this.getOffsetRect();(e=o.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,l.top)}else o.scrollIntoView(wr({behavior:"smooth",block:"nearest"},t))}},n.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,Kt.dL)(t,this.el),this.render()},n.prototype._setData=function(){var t=this.model,e=t.components(),r=this;this.$el.data({model:t,collection:e,view:r})},n.prototype._createElement=function(t){return this.createDoc.createElement(t)},n.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new En({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var r=Array.prototype.slice.call(e.el.childNodes),o=0,l=r.length;o<l;o++)t.appendChild(r.shift())},n.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},n.prototype.onAttrUpdate=function(){},n.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,tt.setViewEl)(this.el,this),this.postRender(),this)},n.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},n.getEvents=function(){return(0,S.result)(this.prototype,"events")},n}(O.G7);const xr=qr;var kf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$s=function(a){kf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._setAttributes=function(){},n.prototype.renderAttributes=function(){},n.prototype.updateStatus=function(){},n.prototype.updateClasses=function(){},n.prototype.setAttribute=function(){},n.prototype.updateAttributes=function(){},n.prototype.initClasses=function(){},n.prototype.initComponents=function(){},n.prototype.delegateEvents=function(){return this},n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this,e=t.model,r=t.el;return e.opt.temporary?this:(r.textContent=e.content,this)},n}(xr);const Iu=$s;var Mf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lf=function(a){Mf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createComment(this.model.content)},n}(Iu);const Bl=Lf;var Ru=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ul=function(a){Ru(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},n.prototype.updateSrc=function(){var t=(0,Kt.sE)(this.el,"iframe")[0];t&&(0,Kt.FW)(t,{src:this.__getSrc()})},n.prototype.render=function(){a.prototype.render.call(this);var t=(0,Kt.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},n.prototype.__getSrc=function(){return this.model.getAttributes().src||""},n}(xr);const Df=Ul;var Wl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zl=function(a){Wl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"img"},n.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,r=t.em,o=e.get("file");if(o&&r){var l=r.Assets.FileUploader();l==null||l.uploadFile({dataTransfer:{files:[o]}},function(f){var d=f&&f.data&&f.data[0],h=d&&((0,S.isString)(d)?d:d.src);h&&e.set({src:h})}),e.set("file","")}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,r=t.classEmpty,o=t.model,l=o.getSrcResult()&&!o.isDefaultSrc(),f=l?"remove":"add";e.classList[f](r)},n.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.model,l=r==null?void 0:r.Assets;l&&o.get("editable")&&l.open({select:function(f,d){o.set({src:f.getSrc()}),d&&l.close()},target:o,types:["image"],accept:"image/*"})},n.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},n.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,e=t.$el,r=t.model,o=e.attr("class")||"";return!r.get("src")&&e.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(xr);const qs=zl;var Nu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Di=function(){return Di=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Di.apply(this,arguments)},Ya=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(v){try{h(e.next(v))}catch(m){l(m)}}function d(v){try{h(e.throw(v))}catch(m){l(m)}}function h(v){v.done?o(v.value):r(v.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Xo=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(v){return d([h,v])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(v){h=[6,v],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},jf=function(a){Nu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,S.bindAll)(this,"disableEditing","onDisable");var e=this.model,r=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=r==null?void 0:r.RichTextEditor},n.prototype.updateContentText=function(t,e,r){r===void 0&&(r={}),!r.fromDisable&&this.disableEditing()},n.prototype.canActivate=function(){var t=this,e=t.model,r=t.rteEnabled,o=t.em,l=o==null?void 0:o.getEditing(),f=l===e,d=!0,h=!1,v;if((r||!e.get("editable")||f||(h=e.isChildOf("text")))&&(d=!1,h&&!e.get("textable"))){for(var m=e.parent();m&&!m.isInstanceOf("text");)m=m.parent();m&&m.get("editable")?v=m:d=!0}return{result:d,delegate:v}},n.prototype.onActive=function(t){var e,r;return Ya(this,void 0,void 0,function(){var o,l,f,d,h,v,m,w,T;return Xo(this,function(I){switch(I.label){case 0:return o=this,l=o.rte,f=o.em,d=this.canActivate(),h=d.result,v=d.delegate,h?((r=t==null?void 0:t.stopPropagation)===null||r===void 0||r.call(t),m=this,[4,this.getContent()]):(v&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(v),v.trigger("active",t)),[2]);case 1:if(m.lastContent=I.sent(),!l)return[3,5];I.label=2;case 2:return I.trys.push([2,4,,5]),w=this,[4,l.enable(this,this.activeRte,{event:t})];case 3:return w.activeRte=I.sent(),[3,5];case 4:return T=I.sent(),f.logError(T),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},n.prototype.onDisable=function(t){this.disableEditing(t)},n.prototype.disableEditing=function(t){return t===void 0&&(t={}),Ya(this,void 0,void 0,function(){var e,r,o,l,f,d,h,v;return Xo(this,function(m){switch(m.label){case 0:if(e=this,r=e.model,o=e.rte,l=e.activeRte,f=e.em,d=r&&r.get("editable"),!o)return[3,8];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,o.disable(this,l,t)];case 2:return m.sent(),[3,4];case 3:return h=m.sent(),f.logError(h),[3,4];case 4:return v=d,v?[4,this.getContent()]:[3,6];case 5:v=m.sent()!==this.lastContent,m.label=6;case 6:return v?[4,this.syncContent(t)]:[3,8];case 7:m.sent(),this.lastContent="",m.label=8;case 8:return this.toggleEvents(),[2]}})})},n.prototype.getContent=function(){return Ya(this,void 0,void 0,function(){var t,e,r,o;return Xo(this,function(l){switch(l.label){case 0:return t=this,e=t.rte,r=t.activeRte,o="",e?[4,e.getContent(this,r)]:[3,2];case 1:o=l.sent(),l.label=2;case 2:return[2,o]}})})},n.prototype.syncContent=function(t){return t===void 0&&(t={}),Ya(this,void 0,void 0,function(){var e,r,o,l,f,d,h;return Xo(this,function(v){switch(v.label){case 0:return e=this,r=e.model,o=e.rte,l=e.rteEnabled,!l&&!t.force?[2]:[4,this.getContent()];case 1:return f=v.sent(),d=r.components(),h=Di({fromDisable:1},t),r.set("content","",h),o!=null&&o.customRte&&!o.customRte.parseContent?(d.length&&d.reset(void 0,Di(Di({},t),{keepIds:cn(d)})),r.set("content",f,h)):d.resetFromString(f,t),[2]}})})},n.prototype.insertComponent=function(t,e){var r;e===void 0&&(e={});var o=this,l=o.model,f=o.el,d=f.ownerDocument,h=d.getSelection();if(h!=null&&h.rangeCount){var v=h.getRangeAt(0),m=v.startContainer,w=v.startOffset,T=(0,tt.getComponentModel)(m),I=[];if(T&&(!((r=T.is)===null||r===void 0)&&r.call(T,"textnode"))){var W=T.collection;W.forEach(function(St){if(St===T){var Tt="textnode",zt=e.useDomContent?m.textContent||"":St.content;I.push({type:Tt,content:zt.slice(0,w)}),I.push(t),I.push({type:Tt,content:zt.slice(w)})}else I.push(St)});var z=I.filter(Boolean),st=z.indexOf(t);return W.reset(z,e),W.at(st)}}return l.append(t,e)},n.prototype.onInput=function(){var t=this.em,e="component",r=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(r,this.model)},n.prototype.disablePropagation=function(t){t.stopPropagation()},n.prototype.toggleEvents=function(t){var e=this,r=e.em,o=e.model,l=e.$el,f={on:Kt.on,off:Kt.S1},d=t?"on":"off";r.setEditing(t?this:!1),this.rteEnabled=!!t;var h=[this.el.ownerDocument,document];if(f.off(h,"mousedown",this.onDisable),f[d](h,"mousedown",this.onDisable),r[d]("toolbar:run:before",this.onDisable),o&&(o[d]("removed",this.onDisable),o.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var v=this.el;v;)v.draggable=!t,v=v.parentNode,v&&v.tagName=="BODY"&&(v=0)},n}(xr);const Xa=jf;var Eo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vu=function(a){Eo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},n}(Xa);const Fu=Vu;var Hu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vn=function(a){Hu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Fu);const ar=Vn;var lo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zo=function(a){lo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},n.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},n.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},n.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},n}(qs);const Jo=Zo;var Bu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kl=function(a){Bu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"script"},n.prototype.events=function(){return{}},n}(xr);const Uu=Kl;var If=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gl=function(a){If(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},n}(xr);const sa=Gl;var Wu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$l=function(a){Wu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(xr);const Qo=$l;var zu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ku=function(a){zu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(xr);const Rf=Ku;var Ys=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ql=function(a){Ys(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(xr);const Gu=ql;var Nf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$u=function(a){Nf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(xr);const Vf=$u;var Ff=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xs=function(a){Ff(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(xr);const qu=Xs;var Hf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bf=function(a){Hf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{}},n}(xr);const Yu=Bf;var la=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yl=function(a){la(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(){xr.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],r=e.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,r,this.updateVideo)},n.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},n.prototype.updateSrc=function(){var t=this,e=t.model,r=t.videoEl;if(r){var o=e.get("provider"),l=e.get("src");switch(o){case"yt":l=e.getYoutubeSrc();break;case"ytnc":l=e.getYoutubeNoCookieSrc();break;case"vi":l=e.getVimeoSrc();break}r.src=l}},n.prototype.updateVideo=function(){var t=this,e=t.model,r=t.videoEl,o=e.get("provider");switch(o){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(r){var l=r;l.loop=e.get("loop"),l.autoplay=e.get("autoplay"),l.controls=e.get("controls"),l.poster=e.get("poster")}}},n.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},n.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},n.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},n.prototype.render=function(){xr.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},n}(qs);const Zs=Yl;var Xu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xl=function(a){Xu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n}(xr);const Zu=Xl;var Uf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Za=function(){return Za=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Za.apply(this,arguments)},dn=function(a){Uf(n,a);function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.apply(this,t)||this;r.refreshDbn=(0,S.debounce)(function(){return r.refresh()},0);var o=r.events;return r.on(o.update,r.onUpdate),r.on(o.updateInside,r.onUpdateDeep),r}return n.prototype.removeChildren=function(t,e,r){var o;r===void 0&&(r={}),a.prototype.removeChildren.call(this,t,e,r),(o=Dr(t))===null||o===void 0||o.forEach(function(l){return Rt(l,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:t})},n.prototype.onAdd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.onAdd.apply(this,t);var r=t[0];this.__trgEvent(this.events.symbolMainAdd,{component:r})},n.prototype.onUpdate=function(t){this.__trgEvent(this.events.symbolMainUpdate,t)},n.prototype.onUpdateDeep=function(t){this.__trgEvent(this.events.symbolMainUpdateDeep,t)},n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.symbol)},n.prototype.__trgEvent=function(t,e,r){r===void 0&&(r=!1);var o=this,l=o.em,f=o.events,d=r?f.symbolInstance:f.symbolMain;l.trigger(t,e),l.trigger(d,Za(Za({},e),{event:t})),this.refreshDbn()},n}(Qn);const Js=dn;var Ju=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pn=function(){return pn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pn.apply(this,arguments)},Qu=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ua=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ti;(function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"})(ti||(ti={}));var tc=function(a){Ju(n,a);function n(t){var e=a.call(this,t,"DomComponents",new Qn(void 0,{em:t}))||this;e.componentTypes=[{id:"cell",model:zs,view:Rf},{id:"row",model:Ei,view:qu},{id:"table",model:Lu,view:Yu},{id:"thead",model:Sf,view:Vf},{id:"tbody",model:Ws,view:Qo},{id:"tfoot",model:xf,view:Gu},{id:"map",model:wf,view:Jo},{id:"link",model:Al,view:Fu},{id:"label",model:ku,view:ar},{id:"video",model:Li,view:Zs},{id:"image",model:Tl,view:qs},{id:"script",model:ea,view:Uu},{id:"svg-in",model:qo,view:sa},{id:"svg",model:Go,view:sa},{id:"iframe",model:Me,view:Df},{id:"comment",model:bt,view:Bl},{id:"textnode",model:x,view:Iu},{id:oo,model:qi,view:xr},{id:"wrapper",model:Ef,view:Zu},{id:"text",model:xi,view:Xa},{id:"default",model:Gr,view:xr}],e.componentsById={},e.Component=Gr,e.Components=Qn,e.ComponentView=xr,e.ComponentsView=En,e.storageKey="components",e.keySymbols="symbols",e.events=De.g;var r=e.config;e.symbols=new Js([],{em:t,config:r,domc:e}),t&&(e.config.components=t.config.components||e.config.components);for(var o in go)o in e.config||(e.config[o]=go[o]);var l=e.config.pStylePrefix;if(l&&(e.config.stylePrefix=l+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var f=t.get("selected");t.listenTo(f,"add",function(d,h,v){return e.selectAdd(f.getComponent(d),v)}),t.listenTo(f,"remove",function(d,h,v){return e.selectRemove(f.getComponent(d),v)})}return e}return n.prototype.postLoad=function(){var t=this,e=t.em,r=t.symbols,o=e.UndoManager;o.add(r)},n.prototype.load=function(t){var e=this,r=this.loadProjectData(t,{onResult:function(o){var l=e.getWrapper();if(l||(e.em.Pages.add({},{select:!0}),l=e.getWrapper()),(0,S.isArray)(o))o.length&&l.components(o);else{var f=o.components,d=f===void 0?[]:f,h=Qu(o,["components"]);l.set(h),l.components(d)}}});return this.symbols.reset(t[this.keySymbols]||[]),r},n.prototype.store=function(){var t;return t={},t[this.keySymbols]=this.symbols,t},n.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},n.prototype.getWrapper=function(){return this.getComponent()},n.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.components()},n.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},n.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(r){return r.remove(t)}),this},n.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},n.prototype.addType=function(t,e){var r=this.em,o=e.model,l=o===void 0?{}:o,f=e.view,d=f===void 0?{}:f,h=e.isComponent,v=e.extend,m=e.extendView,w=e.extendFn,T=w===void 0?[]:w,I=e.extendFnView,W=I===void 0?[]:I,z=e.block,st=this.getType(t),St=this.getType(v),Tt=this.getType(m),zt=St||st||this.getType("default"),le=zt.model,Se=Tt?Tt.view:zt.view,Pe=function(zn,mu,yl){return zn.reduce(function(ml,ui){var gs=mu[ui],ys=yl.prototype[ui];return gs&&ys&&(ml[ui]=function(){for(var Sa=[],Oa=0;Oa<arguments.length;Oa++)Sa[Oa]=arguments[Oa];ys.bind(this).apply(void 0,Sa),gs.bind(this).apply(void 0,Sa)}),ml},{})};if(typeof l=="object"){var Jt={defaults:l.defaults};delete l.defaults;var Ee=new Set(le.typeExtends);Ee.add(le.getDefaults().type),e.model=le.extend(pn(pn({},l),Pe(T,l,le)),{typeExtends:Ee,isComponent:st&&!St&&!h?le.isComponent:h||function(){return 0}}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return pn(pn({},(0,S.result)(le.prototype,"defaults")||{}),(0,S.result)(Jt,"defaults")||{})}})}if(typeof d=="object"&&(e.view=Se.extend(pn(pn({},d),Pe(W,d,Se)))),st?(st.model=e.model,st.view=e.view):(e.id=t,this.componentTypes.unshift(e)),z){var Ve={id:t,label:t,content:{type:t}},sr=z===!0?Ve:pn(pn({},Ve),z);r.Blocks.add(sr.id||t,sr)}var ue="component:type:".concat(st?"update":"add");return r==null||r.trigger(ue,st||e),this},n.prototype.getType=function(t){for(var e=this.componentTypes,r=0;r<e.length;r++){var o=e[r].id;if(o==t)return e[r]}},n.prototype.removeType=function(t){var e=this.componentTypes,r=this.getType(t);if(r){var o=e.indexOf(r);return e.splice(o,1),r}},n.prototype.getTypes=function(){return this.componentTypes},n.prototype.selectAdd=function(t,e){var r=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.selectRemove=function(t,e){var r=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),r=t.previous("componentHovered"),o="hovered";r&&r.get("status")==o&&r.set({status:"",state:""}),e&&(0,S.isEmpty)(e.get("status"))&&e.set("status",o)},n.prototype.getShallowWrapper=function(){var t=this,e=t.shallow,r=t.em;if(!e&&r){var o=r.shallow;if(!o)return;var l=o.Components;if(l.componentTypes=this.componentTypes,e=l.getWrapper(),e){var f=[ro,no].join(" ");e.on(f,(0,S.debounce)(function(){return e==null?void 0:e.components("")},100))}this.shallow=e}return e},n.prototype.isComponent=function(t){return(0,tt.isComponent)(t)},n.prototype.addSymbol=function(t){if(!((0,S.isSymbol)(t)&&!Vr(t))){var e=t.clone({symbol:!0});return me(e)&&this.symbols.add(e),this.em.trigger("component:toggled"),e}},n.prototype.getSymbols=function(){return ua([],this.symbols.models,!0)},n.prototype.detachSymbol=function(t){un(t)&&Rt(t)},n.prototype.getSymbolInfo=function(t,e){e===void 0&&(e={});var r=me(t),o=tn(t),l=!!o,f=Dr(r?t:o)||[],d=o||(r?t:void 0),h=C(t,{changed:e.withChanges}),v=r||l,m=v&&Vr(t);return{isSymbol:v,isMain:r,isInstance:l,isRoot:m,main:d,instances:f,relatives:h||[]}},n.prototype.canMove=function(t,e,r){var o={result:!1,reason:ti.InvalidSource,target:t,source:null};if(!e||!t)return o;var l=(0,tt.isComponent)(e)?e:null;if(!l){var f=this.getShallowWrapper();l=(f==null?void 0:f.append(e)[0])||null}if(o.source=l,!l)return o;var d=l.get("draggable");if((0,S.isFunction)(d))d=!!d(l,t,r);else{var h=t.getEl();d=(0,S.isArray)(d)?d.join(","):d,d=(0,S.isString)(d)?h==null?void 0:h.matches(d):d}if(!d)return pn(pn({},o),{reason:ti.SourceReject});var v=t.get("droppable");if((0,S.isFunction)(v))v=!!v(l,t,r);else if(v===!1&&t.isInstanceOf("text")&&l.get("textable"))v=!0;else{var h=l.getEl();v=(0,S.isArray)(v)?v.join(","):v,v=(0,S.isString)(v)?h==null?void 0:h.matches(v):v}var m=[t].concat(t.parents()).indexOf(l)>-1;return!v||m?pn(pn({},o),{reason:ti.TargetReject}):pn(pn({},o),{result:!0})},n.prototype.allById=function(){return this.componentsById},n.prototype.getById=function(t){return this.componentsById[t]||null},n.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(r){return e[r]&&e[r].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(r){return{}})},n}(Ot);const ec=tc;var rc={stylePrefix:"css-",rules:[]};const ca=rc;var nc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qs=Number.MAX_VALUE,oc=function(a){var n=/(-?\d*\.?\d+)\w{0,}/.exec(a);return n?n[0]:""},Ja=function(a){nc(n,a);function n(){var t=a.call(this)||this;return(0,S.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return n.prototype.buildFromModel=function(t,e){var r=this;e===void 0&&(e={});var o="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),h=t.classes;this.ids.push("#".concat(t.getId())),h.forEach(function(m){return r.compCls.push(m.getFullName())}),!f&&d&&(o="#".concat(t.getId(),"{").concat(d,"}"));var v=t.components();return v.forEach(function(m){return o+=r.buildFromModel(m,e)}),o},n.prototype.build=function(t,e){var r=this;e===void 0&&(e={});var o=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],h=t?this.buildFromModel(t,e):"",v=(0,S.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var m=e.rules||f.getAll(),w={},T=[];e.onlyMatched&&t&&(0,tt.hasWin)()&&(m=this.matchedRules(t,m)),m.forEach(function(I){var W=I.getAtRule();if(W){var z=w[W];z?z.push(I):w[W]=[I];return}var st=r.buildFromRule(I,T,e);o?d.push(st):h+=st}),this.sortMediaObject(w).forEach(function(I){var W="",z=I.key,st=I.value;st.forEach(function(St){var Tt=r.buildFromRule(St,T,e);St.get("singleAtRule")?h+="".concat(z,"{").concat(Tt,"}"):W+=Tt,o&&d.push(Tt)}),W&&(h+="".concat(z,"{").concat(W,"}"))}),l&&v&&m.remove&&m.remove(T)}return o?d.filter(function(I){return I}):h},n.prototype.buildFromRule=function(t,e,r){var o=this,l;r===void 0&&(r={});var f="",d=this.model,h=t.selectorsToString({skipAdd:1}),v=t.get("selectorsAdd"),m=t.get("singleAtRule"),w;if((l=t.get("selectors"))===null||l===void 0||l.forEach(function(I){var W=I.getFullName();(o.compCls.indexOf(W)>=0||o.ids.indexOf(W)>=0||r.keepUnusedStyles)&&(w=1)}),h&&w||v||m||!d){var T=t.getDeclaration({body:1});T&&(r.json?f=t:f+=T)}else e.push(t);return f},n.prototype.matchedRules=function(t,e){var r=this,o=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(d){return o==null?void 0:o.matches(r.__cleanSelector(d))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(r.matchedRules(f,e))}),l=l.filter(function(f,d){return l.indexOf(f)===d}),l},n.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):Qs},n.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var r=[];return(0,S.each)(t,function(o,l){return r.push({key:l,value:o})}),r.sort(function(o,l){var f=[o.key,l.key].every(function(v){return v.indexOf("min-width")!==-1}),d=f?o.key:l.key,h=f?l.key:o.key;return e.getQueryLength(d)-e.getQueryLength(h)})},n.prototype.sortRules=function(t,e){var r=function(d){return d.get("mediaText")||""},o=[r(t),r(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=r(o?t:e),f=r(o?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},n.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},n}(O.Hn);const Wf=Ja;var fa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),da=function(){return da=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},da.apply(this,arguments)},ic=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},tl=((0,tt.hasWin)()?window:{}).CSS,Qa=function(a){fa(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this;return r.config=t||{},r.opt=e,r.em=e.em,r.ensureSelectors(null,null,{}),r.on("change",r.__onChange),r}return n.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},n.prototype.__onChange=function(t,e){var r=this.em,o=this.changedAttributes();o&&!(0,tt.isEmptyObj)(o)&&(r==null||r.changesUp(e))},n.prototype.clone=function(){var t=da({},this.opt),e=da({},this.attributes);return e.selectors=this.get("selectors").map(function(r){return r.clone()}),new this.constructor(e,t)},n.prototype.ensureSelectors=function(t,e,r){var o=this.em,l=o==null?void 0:o.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,f),d.models&&(d=ic([],d.models,!0)),d=(0,S.isString)(d)?[d]:d,Array.isArray(d)){var h=d.filter(function(v){return v}).map(function(v){return l?l.add(v):v});d=new to(h)}this.set("selectors",d,r),this.listenTo.apply(this,f)},n.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),r=t?"@".concat(t):e?"@media":"";return r+(e&&r?" ".concat(e):"")},n.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],r=this.get("state"),o=this.get("selectorsAdd"),l={escape:function(h){return tl&&tl.escape?tl.escape(h):h}},f=this.get("selectors").getFullString(0,l),d=r&&!t.skipState?":".concat(r):"";return f&&e.push("".concat(f).concat(d)),o&&!t.skipAdd&&e.push(o),e.join(", ")},n.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",r=this.attributes.important,o=this.selectorsToString(t),l=this.styleToString(da({important:r},t)),f=this.get("singleAtRule");return(o||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(o,"{").concat(l,"}")),e},n.prototype.getDevice=function(){var t=this.em,e=this.attributes,r=e.atRuleType,o=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(d){return d.getWidthMedia()===""})[0];return r!=="media"||!o?f||null:l.filter(function(d){return d.getWidthMedia()===oc(o)})[0]||null},n.prototype.getState=function(){var t=this.em,e=this.get("state"),r=(t==null?void 0:t.get("SelectorManager").getStates())||[];return r.filter(function(o){return o.getName()===e})[0]||null},n.prototype.getComponent=function(){var t,e=this.getSelectors(),r=e.length==1&&e.at(0),o=r&&r.isId()&&r.get("name");return o&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(o))||null},n.prototype.toCSS=function(t){t===void 0&&(t={});var e="",r=this.getAtRule(),o=this.getDeclaration(t);return(o||t.allowEmpty)&&(e=o),r&&e&&(e="".concat(r,"{").concat(e,"}")),e},n.prototype.toJSON=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=O.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,S.forEach)(l,function(f,d){o[d]===f&&delete o[d]}),delete o.style.__p,(0,S.isEmpty)(o.selectors)&&delete o.selectors,(0,S.isEmpty)(o.style)&&delete o.style}return o},n.prototype.compare=function(t,e,r,o){var l;o===void 0&&(o={});var f=e||"",d=r||"",h=o.selectorsAdd||"",v=o.atRuleType||"",m=!(0,S.isArray)(t)&&!t.models?[t]:t.models||t;d&&!v&&(v="media");var w=m.map(function(z){return z.getFullName()}),T=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(z){return z.getFullName()}),I=w.slice().sort(),W=T.slice().sort();return!(w.length!==T.length||!I.every(function(z,st){return z===W[st]})||this.get("state")!==f||this.get("mediaText")!==d||this.get("selectorsAdd")!==h||this.get("atRuleType")!==v)},n}(On);const pa=Qa;var ts=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ha=function(a){ts(n,a);function n(t,e){var r=a.call(this,t)||this;return r.editor=e==null?void 0:e.em,setTimeout(function(){r.on("remove",r.onRemove),r.on("add",r.onAdd)}),r}return n.prototype.toJSON=function(t){var e=O.FE.prototype.toJSON.call(this,t);return e.filter(function(r){return r.style&&!r.shallow})},n.prototype.onAdd=function(t,e,r){t.ensureSelectors(t,e,r)},n.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,O.FE.prototype.add.apply(this,[t,e])},n}(O.FE);const ac=ha;ha.prototype.model=pa;var zf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ei=function(){return ei=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ei.apply(this,arguments)},ri=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},va=function(a){zf(n,a);function n(t){var e=a.call(this,t,"CssComposer",null,{},ca)||this;e.Selectors=to,e.storageKey="styles";var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),r.rules=e.em.config.style||r.rules||"",e.rules=new ac([],r),e}return n.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},n.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},n.prototype.add=function(t,e,r,o,l){o===void 0&&(o={}),l===void 0&&(l={});var f=e||"",d=r||"",h=ei({},o),v=this.get(t,f,d,h);return v&&v.config&&!v.config.singleAtRule||(h.state=f,h.mediaText=d,h.selectors=[],d&&!h.atRuleType&&(h.atRuleType="media"),v=new pa(h,this.config),v.get("selectors").add(t,l),this.rules.add(v,l)),v},n.prototype.get=function(t,e,r,o){var l=t;if((0,S.isString)(t)){var f=this.em.Selectors,d=t.split(",")[0].trim(),h=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=f.get(h.selectors)}return this.rules.find(function(v){return v.compare(l,e,r,o)})||null},n.prototype.getAll=function(){return this.rules},n.prototype.addCollection=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=this.em,l=[];(0,S.isString)(t)&&(t=o.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],d=0,h=f.length;d<h;d++){var v=f[d]||{};if(v.selectors){var m=o==null?void 0:o.Selectors;m||console.warn("Selector Manager not found");for(var w=v.selectors,T=w instanceof Array?w:[w],I=[],W=0,z=T.length;W<z;W++){var st=m.add(T[W]);I.push(st)}var St=this.get(I,v.state,v.mediaText,v),Tt=this.add(I,v.state,v.mediaText,v,e),zt=!St||!e.avoidUpdateStyle,le=v.style||{};if((0,tt.isObject)(r)&&Tt.set(r,e),zt){var Se=e.extend?ei(ei({},Tt.get("style")),le):le;Tt.set("style",Se,e)}l.push(Tt)}}return l},n.prototype.addRules=function(t){return this.addCollection(t)},n.prototype.setRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.atRuleType,l=r.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=f.state,h=f.selectorsAdd,v=this.em.Selectors,m=v.add(f.selectors),w=this.add(m,d,l,{selectorsAdd:h,atRule:o});return r.addStyles?w.addStyle(e,r):w.setStyle(e,r),w},n.prototype.getRule=function(t,e){e===void 0&&(e={});var r=this.em,o=r.Selectors,l=r.Parser.parserCss.checkNode({selectors:t})[0],f=o.get(l.selectors),d=l.state,h=l.selectorsAdd,v=e.atRuleType,m=e.atRuleParams;return f?this.get(f,d,m,{selectorsAdd:h,atRuleType:v}):void 0},n.prototype.getRules=function(t){var e=this.getAll();if(!t)return ri([],e.models,!0);var r={sort:!0},o=(0,S.isString)(t)?t.split(",").map(function(f){return f.trim()}):t,l=e.filter(function(f){return o.indexOf(f.getSelectors().getFullString(null,r))>=0});return l},n.prototype.setIdRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.addOpts,l=o===void 0?{}:o,f=r.mediaText,d=r.state||"",h=(0,S.isUndefined)(f)?this.em.getCurrentMedia():f,v=this.em.Selectors,m=v.add({name:t,type:jr.TYPE_ID},l),w=this.add(m,d,h,{},l);return w.setStyle(e,ei(ei({},r),l)),w},n.prototype.getIdRule=function(t,e){e===void 0&&(e={});var r=e.mediaText,o=e.state||"",l=(0,S.isUndefined)(r)?this.em.getCurrentMedia():r,f=this.em.Selectors.get(t,jr.TYPE_ID);return f&&this.get(f,o,l)},n.prototype.setClassRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.state||"",l=r.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors,d=f.add({name:t,type:jr.TYPE_CLASS}),h=this.add(d,o,l);return h.setStyle(e,r),h},n.prototype.getClassRule=function(t,e){e===void 0&&(e={});var r=e.state||"",o=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,jr.TYPE_CLASS);return l&&this.get(l,r,o)},n.prototype.remove=function(t,e){var r=(0,S.isString)(t)?this.getRules(t):t,o=this.getAll().remove(r,e);return(0,S.isArray)(o)?o:[o]},n.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},n.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var r=e.state,o=e.mediaText,l=e.current;l&&(r=this.em.get("state")||"",o=this.em.getCurrentMedia());var f=t.getId(),d=this.getAll().filter(function(h){return!(0,S.isUndefined)(r)&&h.get("state")!==r||!(0,S.isUndefined)(o)&&h.get("mediaText")!==o?!1:h.getSelectorsString()==="#".concat(f)});return d},n.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new vn({collection:this.rules,config:this.config}),this.rulesView.render().el},n.prototype.checkId=function(t,e){e===void 0&&(e={});var r=e.idMap,o=r===void 0?{}:r,l=[];if(!Object.keys(o).length)return l;var f=Array.isArray(t)?t:[t];return f.forEach(function(d){var h=d.selectors;if(h&&h.length==1){var v=h[0];if((0,S.isString)(v)){if(v[0]==="#"){var m=v.substring(1),w=o[m];m&&w&&(h[0]="#".concat(w),l.push(d))}}else if(v.name&&v.type===jr.TYPE_ID){var w=o[v.name];w&&(v.name=w,l.push(d))}}}),l},n.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},n}(Ot);const es=va;var Kf={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};const sc=Kf;var Gf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$f=function(a){Gf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof Ro?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get("label")},n.prototype.getMedia=function(){return this.get("media")},n.prototype.getContent=function(){return this.get("content")},n.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,S.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},n}(O.Hn);const lc=$f;var Pn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zl=function(a){Pn(n,a);function n(t,e){var r=a.call(this,t)||this;return r.em=e.em,r.on("add",r.handleAdd),r}return n.prototype.getCategories=function(){return this.em.Blocks.getCategories()},n.prototype.handleAdd=function(t){this.initCategory(t)},n}(Ma);const el=Zl;Zl.prototype.model=lc;var rs;(function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.categoryUpdate="block:category:update",a.custom="block:custom",a.all="block"})(rs||(rs={}));var qf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),uc=function(a){qf(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,o=r.model;return r.em=e.em,r.config=e,r.endDrag=r.endDrag.bind(r),r.ppfx=e.pStylePrefix||"",r.listenTo(o,"destroy remove",r.remove),r.listenTo(o,"change",r.render),r}return n.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.handleClick=function(t){var e=this,r=e.config,o=e.model,l=e.em,f=o.get("onClick")||r.appendOnClick;if(l.trigger("block:click",o,t),f){if((0,S.isFunction)(f))return f(o,l==null?void 0:l.getEditor(),{event:t})}else return;var d=r.getSorter(),h=o.get("content"),v=l.getSelected();d.setDropContent(h);var m,w,T;if(v)if(w=d.validTarget(v.getEl(),h),w.valid)m=v;else{var I=v.parent();I&&(w=d.validTarget(I.getEl(),h),w.valid&&(m=I,T=I.components().indexOf(v)+1))}if(!m){var W=l.getWrapper();w=d.validTarget(W.getEl(),h),w.valid&&(m=W)}var z=m&&m.append(h,{at:T})[0];z&&l.setSelected(z,{scroll:1})},n.prototype.startDrag=function(t){var e=this,r=e.config,o=e.em,l=e.model,f=l.get("disable");if(!(t.button!==0||!r.getSorter||this.el.draggable||f)){o.refreshCanvas();var d=r.getSorter();d.__currentBlock=l,d.setDragHelper(this.el,t),d.setDropContent(this.model.get("content")),d.startSort(this.el),(0,Kt.on)(document,"mouseup",this.endDrag)}},n.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},n.prototype.handleDrag=function(t){this.__getModule().__drag(t)},n.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},n.prototype.endDrag=function(){(0,Kt.S1)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},n.prototype.render=function(){var t,e=this,r=e.em,o=e.el,l=e.$el,f=e.ppfx,d=e.model,h=d.get("disable"),v=d.get("attributes")||{},m=v.class||"",w="".concat(f,"block"),T=r&&r.t("blockManager.labels.".concat(d.id))||d.get("label"),I=d.get("render"),W=d.get("media"),z=h?"".concat(w,"--disable"):"".concat(f,"four-color-h");l.attr(v),o.className="".concat(m," ").concat(w," ").concat(f,"one-bg ").concat(z).trim(),o.innerHTML=`
      `.concat(W?'<div class="'.concat(w,'__media">').concat(W,"</div>"):"",`
      <div class="`).concat(w,'-label">').concat(T,`</div>
    `),o.title=v.title||((t=o.textContent)===null||t===void 0?void 0:t.trim()),o.setAttribute("draggable","".concat(!!((0,tt.hasDnd)(r)&&!h)));var st=I&&I({el:o,model:d,className:w,prefix:f});return st&&(o.innerHTML=st),this},n}(O.G7);const cc=uc;var fc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yf=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Xf=function(a){fc(n,a);function n(t,e,r){var o=a.call(this,t)||this;o.config=e;var l=e.pStylePrefix||"";return o.em=e.em,o.catName=r,o.pfx=l,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(l,"caret-icon"),o.activeClass="".concat(l,"open"),o.className="".concat(l).concat(r,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return n.prototype.events=function(){return{"click [data-title]":"toggle"}},n.prototype.template=function(t){var e=t.pfx,r=t.label,o=t.catName;return ut(Po||(Po=Yf([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),e,e,r,e,o)},n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},n.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},n.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},n.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},n.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},n.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},n.prototype.append=function(t){this.getTypeEl().appendChild(t)},n.prototype.render=function(){var t=this,e=t.em,r=t.el,o=t.$el,l=t.model,f=t.pfx,d=t.catName,h=e.t("".concat(d,"Manager.categories.").concat(l.id))||l.get("label");return r.innerHTML=this.template({pfx:f,label:h,catName:d}),o.addClass(this.className),o.css({order:l.get("order")}),this.updateVisibility(),this},n}(O.G7);const dc=Xf;var Po,ns=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ji=function(){return ji=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ji.apply(this,arguments)},os=function(a){ns(n,a);function n(t,e){var r=a.call(this,t)||this;r.renderedCategories=new Map,(0,S.bindAll)(r,"getSorter","onDrag","onDrop","onMove"),r.config=e||{},r.categories=t.categories||"";var o=r.config.pStylePrefix||"";r.ppfx=o,r.noCatClass="".concat(o,"blocks-no-cat"),r.blockContClass="".concat(o,"blocks-c"),r.catsClass="".concat(o,"block-categories");var l=r.collection;return r.listenTo(l,"add",r.addTo),r.listenTo(l,"reset",r.render),r.em=r.config.em,r.em&&(r.config.getSorter=r.getSorter),r}return n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=ji(ji({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,r=t.Canvas;this.sorter=new e.Sorter({container:r.getBody(),placer:r.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:r.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(t,e){var r=this,o=r.config,l=r.renderedCategories,f=t.get("attributes"),d=new cc({model:t,attributes:f},o),h=d.render().el,v=t.parent.initCategory(t);if(v&&this.categories&&!o.ignoreCategories){var m=v.getId(),w=this.getCategoriesEl(),T=l.get(m);!T&&w&&(T=new dc({model:v},o,"block").render(),l.set(m,T),w.appendChild(T.el)),T==null||T.append(h);return}e?e.appendChild(h):this.append(h)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,r=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,r)}),this.append(r);var o="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(o),this.rendered=!0,this},n}(O.G7);const mo=os;var Zf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ni=function(){return ni=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ni.apply(this,arguments)},ga=function(a){Zf(n,a);function n(t){var e,r=a.call(this,t,"BlockManager",new el(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[],{em:t}),rs,sc)||this;return r.events=rs,r.Block=lc,r.Blocks=el,r.Category=Ro,r.Categories=bo,r.storageKey="",r.blocks=r.all,r.blocksVisible=new el(r.blocks.models,{em:t}),r.categories=new bo([],{em:t,events:{update:rs.categoryUpdate}}),r.blocks.on("add",function(o){return r.blocksVisible.add(o)}),r.blocks.on("remove",function(o){return r.blocksVisible.remove(o)}),r.blocks.on("reset",function(o){return r.blocksVisible.reset(o.models)}),r.__onAllEvent=(0,S.debounce)(function(){return r.__trgCustom()},0),r}return n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(r,o){return t.startDrag(r,o)},drag:function(r){return t.__drag(r)},dragStop:function(r){return t.endDrag(r)}}},n.prototype.__startDrag=function(t,e){var r=this,o=r.em,l=r.events,f=r.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,o.set({dragResult:null,dragContent:d}),[o,f].map(function(h){return h.trigger(l.dragStart,t,e)})},n.prototype.__drag=function(t){var e=this,r=e.em,o=e.events,l=e.blocks,f=this._dragBlock;[r,l].map(function(d){return d.trigger(o.drag,f,t)})},n.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,l=e.blocks,f=this._dragBlock,d=t.component||r.get("dragResult");if(delete this._dragBlock,d&&f){var h="activeOnRender",v=d.get&&d.get(h),m=f.get("activate")||v,w=f.get("select"),T=(0,S.isArray)(d)?d[0]:d;(w||m&&w!==!1)&&r.setSelected(T),m&&(T.trigger("active"),v&&T.unset(h)),f.get("resetId")&&T.onAll(function(I){return I.resetId()})}r.set({dragResult:null,dragContent:null}),f&&[r,l].map(function(I){return I.trigger(o.dragEnd,d,f)})},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=ni(ni({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(r){var o;return(o=r.droppable)===null||o===void 0?void 0:o.startCustom()})},n.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var r;return(r=e.droppable)===null||r===void 0?void 0:r.endCustom(t)}),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,r=t.config,o=t.em,l=this.blocksVisible;this.blocksView=new mo({collection:l,categories:e},ni(ni({},r),{em:o})),this.__appendTo(l.models),this.__trgCustom()},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=e||{};return o.id=t,this.blocks.add(o,r)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.getBlocksByCategory=function(t){return No(t||this.getAll().models)},n.prototype.render=function(t,e){e===void 0&&(e={});var r=this,o=r.categories,l=r.config,f=r.em,d=t||this.getAll().models;if(e.external){var h=new el(d,{em:f});return new mo({collection:h,categories:o},ni(ni({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(r){return r.stopListening()}),e.map(function(r){return r.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},n}(Ot);const pc=ga;var hc={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};const vc=hc;var rl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ii=function(a){rl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",label:""}},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(){return this.get("label")||this.getName()},n}(O.Hn);const is=Ii;Ii.prototype.idAttribute="name";var Jl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ql=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},gc="contentEditable",as=function(a){Jl(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.config||{};return e.config=r,e.module=t.module,e.coll=t.coll||null,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return n.prototype.template=function(){var t=this,e=t.pfx,r=t.model,o=t.config,l=r.get("label")||"";return ut(mc||(mc=Ql([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,o.iconTagRemove)},n.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},n.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},n.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[gc]="true",e.focus(),t==null||t.setEditing(!0)},n.prototype.endEditTag=function(){var t=this,e=t.model,r=t.em,o=this.getInputEl(),l=o.textContent||"",f=r==null?void 0:r.Selectors;o[gc]="false",r==null||r.setEditing(!1),f&&f.rename(e,l)!==e&&(o.innerText=e.getLabel())},n.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},n.prototype.removeTag=function(){this.module.removeSelected(this.model)},n.prototype.updateStatus=function(){var t=this,e=t.model,r=t.$el,o=t.config,l=o.iconTagOn,f=o.iconTagOff,d=r.find("[data-tag-status]");e.get("active")?(d.html(l),r.removeClass("opac50")):(d.html(f),r.addClass("opac50"))},n.prototype.render=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.$el,l=t.model,f="".concat(e,"tag"),d=["".concat(f," ").concat(r,"three-bg")];return l.get("protected")&&d.push("".concat(f,"-protected")),o.html(this.template()),o.attr("class",d.join(" ")),this.updateStatus(),this},n}(O.G7);const yc=as;var mc,_c=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oi=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Jf=function(a){_c(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var r=e.config.em,o=e.collection;e.target=r;var l=r.Selectors;e.module=l,e.em=r,e.componentChanged=(0,S.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,S.debounce)(e.checkSync.bind(e),0);var f=De.g.update,d="".concat(f,":classes"),h="component:toggled ".concat(d),v="".concat(d," ").concat(f,":attributes:id change:state");return e.listenTo(r,h,e.componentChanged),e.listenTo(r,"styleManager:update",e.componentChanged),e.listenTo(r,v,e.__handleStateChange),e.listenTo(r,"styleable:change change:device",e.checkSync),e.listenTo(o,"add",e.addNew),e.listenTo(o,"reset",e.renderClasses),e.listenTo(o,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,S.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.labelInfo,r=t.labelHead,o=t.iconSync,l=t.iconAdd,f=t.pfx,d=t.ppfx;return ut(ya||(ya=oi([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,r,f,f,f,d,d,d,f,d,d,f,d,f,f,f,f,f,l,f,f,o,f,f,e,f)},n.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},n.prototype.syncStyle=function(){var t=this.em,e=this.getTarget(),r=t.Css,o={noDisabled:1},l=this.getCommonSelectors({opts:o}),f=t.get("state"),d=t.getCurrentMedia(),h=[],v=r.get(l,f,d)||r.add(l,f,d),m;this.getTargets().forEach(function(w){var T=r.getIdRule(w.getId(),{state:f,mediaText:d});m=T.getStyle(),T.setStyle({}),h.push(T)}),m&&v.addStyle(m),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:e,selectors:l,mediaText:d,rule:v,ruleComponents:h,state:f})},n.prototype.tagRemoved=function(t){this.updateStateVis()},n.prototype.addNew=function(t){this.addToClasses(t)},n.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},n.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},n.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},n.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},n.prototype.componentChanged=function(t){var e=t===void 0?{}:t,r=e.targets;this.updateSelection(r)},n.prototype.updateSelection=function(t){var e=t||this.getTargets();e=(0,S.isArray)(e)?e:[e];var r=[];return e&&e.length&&(r=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:r})),this.collection.reset(r),this.updateStateVis(e),this.module.__trgCustom(),r},n.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,r=e.targets,o=e.opts,l=o===void 0?{}:o,f=r||this.getTargets();return this.module.__getCommonSelectors(f,l)},n.prototype._commonSelectors=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.module).__common.apply(t,e)},n.prototype.checkSync=function(){var t=this,e=t.$btnSyncEl,r=t.config,o=t.collection,l=this.getTarget(),f;if(l&&r.componentFirst&&o.length){var d=l.getStyle();f=!(0,S.isEmpty)(d)}e&&e[f?"show":"hide"]()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(t){var e=this.em,r=e&&e.getConfig().avoidInlineStyle,o=this.collection.length||r?"":"none";this.getStatesC().css("display",o),this.updateSelector(t)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(t){var e=this,r=this.el.querySelector("[data-selected]"),o=[],l=t||this.getTargets();l=(0,S.isArray)(l)?l:[l],l.forEach(function(f){return o.push(e.__getName(f))}),r&&(r.innerHTML=o.join(", ")),this.checkStates()},n.prototype.__getName=function(t){var e=this,r=e.pfx,o=e.config,l=e.em,f=o.selectedName,d=o.componentFirst,h;if((0,S.isString)(t))h=ut(tu||(tu=oi(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,t);else{var v=t==null?void 0:t.getSelectors();if(!v)return"";var m=v.getStyleable(),w=l.get("state"),T=t.getId?ut(eu||(eu=oi(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,t.getName(),r,t.getId()):"";h=this.collection.getFullString(m),h=h?ut(wc||(wc=oi(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,h):t.get("selectorsAdd")||T,h=d&&T?T:h,h+=w?ut(nl||(nl=oi(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,w):"",h=f?f({result:h,state:w,target:t}):h}return h&&'<span class="'.concat(r,'sel">').concat(h,"</span>")},n.prototype.stateChanged=function(t){var e=this.em,r=t.target.value;e.set("state",r)},n.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},n.prototype.addToClasses=function(t,e){var r=e,o=this.getClasses(),l=new yc({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return r?r.appendChild(l):o.append(l),l},n.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),r=this.getClasses();r.empty(),this.collection.each(function(o){return t.addToClasses(o,e)}),r.append(e)},n.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},n.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var t=this,e=t.module,r=t.em,o=r.t("selectorManager.emptyState"),l=e.getStates().map(function(d){var h=r.t("selectorManager.states.".concat(d.id))||d.getLabel()||d.id;return'<option value="'.concat(d.id,'">').concat(h,"</option>")}).join(""),f=this.getStates();f&&f.html('<option value="">'.concat(o,"</option>").concat(l)),this.checkStates()},n.prototype.render=function(){var t=this,e=t.em,r=t.pfx,o=t.ppfx,l=t.config,f=t.$el,d=t.el,h=l.render,v=l.iconSync,m=l.iconAdd,w={iconSync:v,iconAdd:m,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:o,pfx:r,el:d};f.html(this.template(w));var T=h&&h(w);return T&&T!==d&&f.empty().append(T),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+r+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},n}(O.G7);const Qf=Jf;var ya,tu,eu,wc,nl,bc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ss=function(){return ss=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ss.apply(this,arguments)},ol=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ru=function(a){return(0,S.isString)(a)&&a[0]=="#"},Cc=function(a){return(0,S.isString)(a)&&a[0]=="."},il="selector",Ao="".concat(il,":"),ls="".concat(Ao,"add"),td="".concat(Ao,"update"),nu="".concat(Ao,"remove"),ed="".concat(nu,":before"),rd="".concat(Ao,"custom"),xc="".concat(Ao,"state"),nd={all:il,update:td,add:ls,remove:nu,removeBefore:ed,state:xc,custom:rd},Sc=function(a){bc(n,a);function n(t){var e=a.call(this,t,"SelectorManager",new to([]),nd,vc,{skipListen:!0})||this;e.Selector=jr,e.Selectors=to,e.storageKey="",(0,S.bindAll)(e,"__updateSelectedByComponents");var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.all=new to(r.selectors),e.selected=new to([],{em:t,config:r}),e.states=new O.FE(r.states.map(function(d){return new is(d)}),{model:is}),e.model=new O.Hn({cFirst:r.componentFirst,_undo:!0}),e.__update=(0,S.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(d,h){return t.trigger(xc,h)}),e.model.on("change:cFirst",function(d,h){return t.trigger("selector:type",h)});var l="".concat(De.g.update,":classes");t.on("component:toggled ".concat(l),e.__updateSelectedByComponents);var f="component:toggled ".concat(l," change:device styleManager:update selector:state selector:type style:target");return e.model.listenTo(t,f,function(){return e.__update()}),e}return n.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},n.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?ol([],this.all.models,!0):this.all:[]},n.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},n.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},n.prototype.select=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.em.Styles.select(r,e);this.selected.reset(this.__getCommonSelectors(o));var l=this.selectorTags,f=o.filter(function(d){return d}).map(function(d){return(0,tt.isComponent)(d)||(0,tt.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},n.prototype.addSelector=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=ss({},e);(0,S.isObject)(t)?o=t:o.name=t,ru(o.name)?(o.name=o.name.substr(1),o.type=jr.TYPE_ID):Cc(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var l=o.name,f=this.getConfig(),d=this,h=d.all,v=d.em,m=l?this.get(l,o.type):h.where(o)[0];if(!m){var w=o instanceof jr?o:new jr(o,ss(ss({},r),{config:f,em:v}));return h.add(w,r)}return m},n.prototype.getSelector=function(t,e){return e===void 0&&(e=jr.TYPE_CLASS),ru(t)?(t=t.substr(1),e=jr.TYPE_ID):Cc(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=(0,S.isString)(t)?{}:e;return(0,S.isArray)(t)?t.map(function(l){return r.addSelector(l,e,o)}):this.addSelector(t,e,o)},n.prototype.addClass=function(t){var e=this,r=[];return(0,S.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(o){return r.push(e.addSelector(o))}),r},n.prototype.get=function(t,e){var r=this;if((0,S.isArray)(t)){var o=[],l=t.map(function(f){return r.getSelector(f)}).filter(Boolean);return l.forEach(function(f){return o.indexOf(f)<0&&o.push(f)}),o}else return this.getSelector(t,e)},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.rename=function(t,e,r){var o=this.escapeName(e),l=this.get(o);return l||t.set({name:o,label:e},r)},n.prototype.setState=function(t){return this.em.setState(t),this},n.prototype.getState=function(){return this.em.getState()},n.prototype.getStates=function(){return ol([],this.states.models,!0)},n.prototype.setStates=function(t,e){return this.states.reset(t.map(function(r){return new is(r)}),e)},n.prototype.getSelected=function(){return this.__getCommon()},n.prototype.getSelectedAll=function(){return ol([],this.selected.models,!0)},n.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(r){r.getSelectors().add(e)})},n.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},n.prototype.duplicateSelected=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,l=this.getSelected();if(!(l.indexOf(t)<0)){var f=this.getState(),d=o.getCurrentMedia(),h=o.Css.get(l,f,d),v=h==null?void 0:h.getStyle();if(o.getSelectedAll().forEach(function(w){var T=w.getSelectors();if(T.includes(t)){var I=e.suffix||" copy",W=t.getLabel(),z=r.addSelector("".concat(W).concat(I)),st=T.indexOf(t);T.remove(t),T.add(z,{at:st})}}),v){var m=o.Css.add(this.getSelected(),f,d);m.setStyle(v)}}},n.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},n.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},n.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},n.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):jr.escapeName(t)},n.prototype.render=function(t){var e=this.selectorTags,r=this.getConfig(),o=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new Qf({el:o,collection:this.selected,module:this,config:r}),this.selectorTags.render().el},n.prototype.destroy=function(){var t=this,e=t.selectorTags,r=t.model;r.stopListening(),this.__update.cancel(),this.__destroy(),e==null||e.remove(),this.selectorTags=void 0},n.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},n.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var r=t.map(function(o){return o.getSelectors&&o.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,r)},n.prototype.__common=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(o){return e[1].indexOf(o)>=0}):e.slice(1).reduce(function(o,l){return t.__common(o,l)},e[0]):[]},n.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},n}(Ot);const od=Sc;var id={textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}};const Oc=id;var Fn,jn={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},ma=(Fn={},Fn[jn.MEDIA_RULE]="media",Fn[jn.FONT_FACE_RULE]="font-face",Fn[jn.PAGE_RULE]="page",Fn[jn.KEYFRAMES_RULE]="keyframes",Fn[jn.COUNTER_STYLE_RULE]="counter-style",Fn[jn.SUPPORTS_RULE]="supports",Fn[jn.DOCUMENT_RULE]="document",Fn[jn.FONT_FEATURE_VALUES_RULE]="font-feature-values",Fn[jn.VIEWPORT_RULE]="viewport",Fn),ou=(0,S.keys)(ma),ii=[jn.FONT_FACE_RULE,jn.PAGE_RULE,jn.COUNTER_STYLE_RULE,jn.VIEWPORT_RULE],Tc=ou.filter(function(a){return ii.indexOf(Number(a))<0}).map(function(a){return ma[a]}).concat(["container","layer"]),al=ii.map(function(a){return ma[a]}),Ec=function(a){a===void 0&&(a="");for(var n=[],t=[],e=a.split(","),r=0,o=e.length;r<o;r++){var l=e[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else n.push(l)}return{result:t,add:n}},ad=function(a){for(var n=a.style,t={},e=0,r=n.length;e<r;e++){var o=n[e],l=n.getPropertyValue(o),f=n.getPropertyPriority(o);t[o]="".concat(l).concat(f?" !".concat(f):"")}return t},Pc=function(a){var n=a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"";return n.trim()},mr=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={});var e={},r=a.length,o=a[r-1],l=o?o.split(/:(.+)/):[],f=l[1],d=t.atRule,h=t.selectorsAdd,v=t.mediaText,m=al.indexOf(d)>=0;return m&&(e.singleAtRule=!0),d&&(e.atRuleType=d),h&&(e.selectorsAdd=h),v&&(e.mediaText=v),f&&(a[r-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=n,e},Ac=function(a){var n=a.cssText,t=n===void 0?"":n;return Tc.find(function(e){return t.indexOf("@".concat(e))===0})},sl=function(a){for(var n=[],t=a.cssRules||[],e=0,r=t.length;e<r;e++){var o=t[e],l=o.type,f=!1,d="",h="",v=o.selectorText||o.keyText||"",m=ii.indexOf(l)>=0;if(m)f=!0,d=ma[l],h=Pc(o);else if(ou.indexOf("".concat(l))>=0||!l&&Ac(o)){var w=sl(o),T=ma[l]||Ac(o);h=Pc(o);for(var I=0,W=w.length;I<W;I++){var z=w[I];h&&(z.mediaText=h),z.atRuleType=T}n=n.concat(w)}if(!(!v&&!m)){for(var st=ad(o),St=Ec(v),Tt=St.add,zt=St.result,le=void 0,Se=0,Pe=zt.length;Se<Pe;Se++){var Jt=mr(zt[Se],st,{atRule:ma[l]});n.push(Jt),le=Jt}if(Tt.length){var Ee=Tt.join(", ");if(le)le.selectorsAdd=Ee;else{var Jt={selectors:[],selectorsAdd:Ee,style:st};f&&(Jt.singleAtRule=f),d&&(Jt.atRuleType=d),h&&(Jt.mediaText=h),n.push(Jt)}}}}return n};const us=function(a){var n=document.createElement("style");n.innerHTML=a,document.head.appendChild(n);var t=n.sheet;return document.head.removeChild(n),t?sl(t):[]};var uo=function(a,n){return n===void 0&&(n={}),{parse:function(t){var e=this,r=[],o=n.parserCss,l=a==null?void 0:a.Editor,f=o?o(t,l):us(t);return f.forEach(function(d){return r=r.concat(e.checkNode(d))}),a==null||a.trigger("parse:css",{input:t,output:r,nodes:f}),r},checkNode:function(t){var e=t.selectors,r=t.style,o=[t];if((0,S.isString)(e)){var l=[],f=t,d=Ec(e),h=d.result,v=d.add.join(", "),m={atRule:f.atRule,mediaText:f.params};if(h.length?h.forEach(function(T){l.push(mr(T,r,m))}):l.push(mr([],r,m)),v){var w=l[l.length-1];w.selectorsAdd=v}o=l}return o}}};const ll=uo;var iu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kc=function(a){iu(n,a);function n(t){var e=a.call(this,t,"Parser",Oc)||this,r=e.config;return e.parserCss=ll(t,r),e.parserHtml=Do(t,r),e}return n.prototype.parseHtml=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.parserHtml;return l.compTypes=o.Components.getTypes()||[],l.parse(t,this.parserCss,e)},n.prototype.parseCss=function(t){return this.parserCss.parse(t)},n.prototype.destroy=function(){},n}(Bt);const Mc=kc;var Lc={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};const au=Lc;var su=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(v){try{h(e.next(v))}catch(m){l(m)}}function d(v){try{h(e.throw(v))}catch(m){l(m)}}function h(v){v.done?o(v.value):r(v.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Dc=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(v){return d([h,v])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(v){h=[6,v],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},lu=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),su(this,void 0,void 0,function(){return Dc(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(n)),[2,n]})})},a.prototype.load=function(n){return n===void 0&&(n={}),su(this,void 0,void 0,function(){var t;return Dc(this,function(e){return t={},this.hasLocal(n,!0)&&(t=JSON.parse(localStorage.getItem(n.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(n,t){if(n===void 0&&(n={}),n.checkLocal&&(!(0,tt.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();const jc=lu;function tr(a){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tr(a)}function Ic(a){var n=this.constructor;return this.then(function(t){return n.resolve(a()).then(function(){return t})},function(t){return n.resolve(a()).then(function(){return n.reject(t)})})}const sd=Ic;function _a(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError(tr(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(a);if(r.length===0)return t([]);var o=r.length;function l(d,h){if(h&&(tr(h)==="object"||typeof h=="function")){var v=h.then;if(typeof v=="function"){v.call(h,function(m){l(d,m)},function(m){r[d]={status:"rejected",reason:m},--o===0&&t(r)});return}}r[d]={status:"fulfilled",value:h},--o===0&&t(r)}for(var f=0;f<r.length;f++)l(f,r[f])})}const ld=_a;function cs(a,n){this.name="AggregateError",this.errors=a,this.message=n||""}cs.prototype=Error.prototype;function ud(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(a);if(r.length===0)return e();for(var o=[],l=0;l<r.length;l++)try{n.resolve(r[l]).then(t).catch(function(f){o.push(f),o.length===r.length&&e(new cs(o,"All promises were rejected"))})}catch(f){e(f)}})}const Rr=ud;var cd=setTimeout;function Rc(a){return!!(a&&typeof a.length<"u")}function fd(){}function ul(a,n){return function(){a.apply(n,arguments)}}function i(a){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(a,this)}function s(a,n){for(;a._state===3;)a=a._value;if(a._state===0){a._deferreds.push(n);return}a._handled=!0,i._immediateFn(function(){var t=a._state===1?n.onFulfilled:n.onRejected;if(t===null){(a._state===1?c:u)(n.promise,a._value);return}var e;try{e=t(a._value)}catch(r){u(n.promise,r);return}c(n.promise,e)})}function c(a,n){try{if(n===a)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(tr(n)==="object"||typeof n=="function")){var t=n.then;if(n instanceof i){a._state=3,a._value=n,p(a);return}else if(typeof t=="function"){y(ul(t,n),a);return}}a._state=1,a._value=n,p(a)}catch(e){u(a,e)}}function u(a,n){a._state=2,a._value=n,p(a)}function p(a){a._state===2&&a._deferreds.length===0&&i._immediateFn(function(){a._handled||i._unhandledRejectionFn(a._value)});for(var n=0,t=a._deferreds.length;n<t;n++)s(a,a._deferreds[n]);a._deferreds=null}function g(a,n,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof n=="function"?n:null,this.promise=t}function y(a,n){var t=!1;try{a(function(e){t||(t=!0,c(n,e))},function(e){t||(t=!0,u(n,e))})}catch(e){if(t)return;t=!0,u(n,e)}}i.prototype.catch=function(a){return this.then(null,a)},i.prototype.then=function(a,n){var t=new this.constructor(fd);return s(this,new g(a,n,t)),t},i.prototype.finally=sd,i.all=function(a){return new i(function(n,t){if(!Rc(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return n([]);var r=e.length;function o(f,d){try{if(d&&(tr(d)==="object"||typeof d=="function")){var h=d.then;if(typeof h=="function"){h.call(d,function(v){o(f,v)},t);return}}e[f]=d,--r===0&&n(e)}catch(v){t(v)}}for(var l=0;l<e.length;l++)o(l,e[l])})},i.any=Rr,i.allSettled=ld,i.resolve=function(a){return a&&tr(a)==="object"&&a.constructor===i?a:new i(function(n){n(a)})},i.reject=function(a){return new i(function(n,t){t(a)})},i.race=function(a){return new i(function(n,t){if(!Rc(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,r=a.length;e<r;e++)i.resolve(a[e]).then(n,t)})},i._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){cd(a,0)},i._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};const _=i;(0,tt.hasWin)()&&(window.Promise=window.Promise||_);const b=typeof fetch=="function"?fetch.bind():function(a,n){return new _(function(t,e){var r=new XMLHttpRequest;r.open(n.method||"get",a),r.withCredentials=n.credentials=="include";for(var o in n.headers||{})r.setRequestHeader(o,n.headers[o]);r.onload=function(l){return t({status:r.status,statusText:r.statusText,text:function(){return _.resolve(r.responseText)}})},r.onerror=e,r.upload&&n.onProgress&&(r.upload.onprogress=n.onProgress),n.body?r.send(n.body):r.send()})};var E=function(){return E=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},E.apply(this,arguments)},K=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(v){try{h(e.next(v))}catch(m){l(m)}}function d(v){try{h(e.throw(v))}catch(m){l(m)}}function h(v){v.done?o(v.value):r(v.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},et=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(v){return d([h,v])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(v){h=[6,v],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},_t=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),K(this,void 0,void 0,function(){return et(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,n),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(n){return n===void 0&&(n={}),K(this,void 0,void 0,function(){return et(this,function(t){switch(t.label){case 0:return[4,this.request(n.urlLoad,this.__props(n),n)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(n,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),b(n,t).then(function(r){var o=r.text(),l=(r.status/200|0)===1;return l?o:o.then(Promise.reject)}).then(function(r){var o=r&&(0,S.isString)(r);return e.contentTypeJson&&o?JSON.parse(r):r})},a.prototype.__props=function(n,t){n===void 0&&(n={});var e=n.contentTypeJson,r=n.headers||{},o=n.fetchOptions||{},l="X-Requested-With",f="Content-Type",d;if((0,S.isUndefined)(r[l])&&(r[l]="XMLHttpRequest"),(0,S.isUndefined)(r[f])&&e&&(r[f]="application/json; charset=utf-8"),t)if(e)d=JSON.stringify(t);else{d=new FormData;for(var h in t)d.append(h,t[h])}var v={method:d?"POST":"GET",credentials:n.credentials,headers:r,body:d};return E(E({},v),(0,S.isFunction)(o)?o(v):o)},a}();const ft=_t;var Dt;(function(a){a.start="storage:start",a.startStore="storage:start:store",a.startLoad="storage:start:load",a.load="storage:load",a.store="storage:store",a.after="storage:after",a.afterStore="storage:after:store",a.afterLoad="storage:after:load",a.end="storage:end",a.endStore="storage:end:store",a.endLoad="storage:end:load",a.error="storage:error",a.errorStore="storage:error:store",a.errorLoad="storage:error:load"})(Dt||(Dt={}));const It=Dt;var Zt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ee=function(){return ee=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ee.apply(this,arguments)},pe=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(v){try{h(e.next(v))}catch(m){l(m)}}function d(v){try{h(e.throw(v))}catch(m){l(m)}}function h(v){v.done?o(v.value):r(v.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},ne=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(v){return d([h,v])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(v){h=[6,v],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},he="local",Te="remote",Oe=function(a){Zt(n,a);function n(t){var e=a.call(this,t,"StorageManager",au)||this;e.storages={},e.events=It;var r=e.config;return r._disable&&(r.type=void 0),e.storages={},e.add(he,new jc),e.add(Te,new ft),e.setCurrent(r.type),e}return n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t,e){return e===void 0&&(e={}),pe(this,void 0,void 0,function(){var r,o,l,f,d,h;return ne(this,function(v){switch(v.label){case 0:r=this.getCurrentStorage(),o=ee(ee({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(he),v.label=1;case 1:return v.trys.push([1,5,,9]),[4,this.__exec(r,o,t)];case 2:return v.sent(),d=l,d?[4,this.__exec(l,f,{})]:[3,4];case 3:d=v.sent(),v.label=4;case 4:return[3,9];case 5:return h=v.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return v.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,t]}})})},n.prototype.load=function(t){return t===void 0&&(t={}),pe(this,void 0,void 0,function(){var e,r,o,l,f;return ne(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),r=ee(ee({},this.getCurrentOptions()),t),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(he))]:[3,5];case 1:if(f=d.sent(),(0,S.isEmpty)(f))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=f,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,r)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},n.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(r,o){(0,S.isFunction)(e)?e(r,o,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?r(null):o()})},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===Te&&this.get(he)},n.prototype.__exec=function(t,e,r){var o;return pe(this,void 0,void 0,function(){var l,f,d,h,v,m,w,T,I,W,z,st,St;return ne(this,function(Tt){switch(Tt.label){case 0:if(l=r?"store":"load",f=this.getConfig(),d=f.onStore,h=f.onLoad,this.onStart(l,r),!t)return[2,r||{}];Tt.label=1;case 1:return Tt.trys.push([1,14,,15]),m=(o=this.em)===null||o===void 0?void 0:o.getEditor(),w=void 0,r?(I=d,I?[4,d(r,m)]:[3,3]):[3,7];case 2:I=Tt.sent(),Tt.label=3;case 3:return T=I||r,W=e.onStore,W?[4,e.onStore(T,m)]:[3,5];case 4:W=Tt.sent(),Tt.label=5;case 5:return T=W||T,[4,t.store(T,e)];case 6:return w=Tt.sent(),v=r,[3,13];case 7:return[4,t.load(e)];case 8:return w=Tt.sent(),v=this.__clearKeys(w),z=e.onLoad,z?[4,e.onLoad(v,m)]:[3,10];case 9:z=Tt.sent(),Tt.label=10;case 10:return v=z||v,st=h,st?[4,h(v,m)]:[3,12];case 11:st=Tt.sent(),Tt.label=12;case 12:v=st||v,Tt.label=13;case 13:return this.onAfter(l,v,w),this.onEnd(l,v,w),[3,15];case 14:throw St=Tt.sent(),this.onError(l,St),St;case 15:return[2,v]}})})},n.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),r=new RegExp("^".concat(e.id)),o={};for(var l in t){var f=l.replace(r,"");o[f]=t[l]}return o},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),r=t||this.getCurrent();return e.options[r]||{}},n.prototype.onStart=function(t,e){var r=this.em;if(r){var o=t==="load"?It.startLoad:It.startStore;r.trigger(It.start,t,e),r.trigger(o,e)}},n.prototype.onAfter=function(t,e,r){var o=this.em;if(o){var l=t==="load"?It.afterLoad:It.afterStore;o.trigger(It.after),o.trigger(l,e,r);var f=t==="load"?It.load:It.store;o.trigger(f,e,r)}},n.prototype.onEnd=function(t,e,r){var o=this.em;if(o){var l=t==="load"?It.endLoad:It.endStore;o.trigger(It.end,t,e,r),o.trigger(l,e,r)}},n.prototype.onError=function(t,e){var r=this.em;if(r){var o=t==="load"?It.errorLoad:It.errorStore;r.trigger(It.error,e,t),r.trigger(o,e),this.onEnd(t,e)}},n.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(Bt);const We=Oe;var vr={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1};const Yr=vr;var Sr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nn=function(){return nn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},nn.apply(this,arguments)},wn=function(a){Sr(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var r=t.config,o=r===void 0?{}:r,l=e,f=l.model,d=l.eventCapture,h=f.target,v=f.attributes.type;e.config=o,e.em=o.em,e.pfx=o.stylePrefix||"",e.ppfx=o.pStylePrefix||"",e.target=h,e.className=e.pfx+"trait",e.clsField="".concat(e.ppfx,"field ").concat(e.ppfx,"field-").concat(v);var m=[["change:value",e.onValueChange],["remove",e.removeView]];return m.forEach(function(w){var T=w[0],I=w[1];f.off(T,I),e.listenTo(f,T,I)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},d.forEach(function(w){return e.events[w]="onChange"}),e.delegateEvents(),e.init(),e}return n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.templateLabel=function(t){var e=this.ppfx,r=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(r,'">').concat(r,"</div>")},n.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},n.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},n.prototype.removeView=function(){this.remove(),this.removed()},n.prototype.init=function(){},n.prototype.removed=function(){},n.prototype.onRender=function(t){},n.prototype.onUpdate=function(t){},n.prototype.onEvent=function(t){},n.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,S.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(nn(nn({},this.getClbOpts()),{event:t}))},n.prototype.getValueForTarget=function(){return this.model.get("value")},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},n.prototype.onValueChange=function(t,e,r){if(r===void 0&&(r={}),r.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var o=this.getValueForTarget();t.setTargetValue(o,r)}},n.prototype.renderLabel=function(){var t=this,e=t.$el,r=t.target,o=this.getLabel(),l=this.templateLabel(r);this.createLabel&&(l=this.createLabel({label:o,component:r,trait:this})||""),e.find("[data-label]").append(l)},n.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,r=e.label,o=e.name;return t.t("traitManager.traits.labels.".concat(o))||(0,tt.capitalize)(r||o).replace(/-/g," ")},n.prototype.getComponent=function(){return this.target},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,r=t.model,o=r,l=r.attributes.name,f=o.get("placeholder")||o.get("default")||"",d=o.get("type")||"text",h=o.get("min"),v=o.get("max"),m=this.getModelValue(),w=(0,D.default)('<input type="'.concat(d,'">')),T=e.t("traitManager.traits.attributes.".concat(l))||{};w.attr(nn({placeholder:f},T)),(0,S.isUndefined)(m)||(o.set({value:m},{silent:!0}),w.prop("value",m)),h&&w.prop("min",h),v&&w.prop("max",v),this.$input=w}return this.$input.get(0)},n.prototype.getInputElem=function(){var t=this,e=t.input,r=t.$input;return e||r&&r.get&&r.get(0)||this.getElInput()},n.prototype.getModelValue=function(){return this.model.getValue()},n.prototype.getElInput=function(){return this.elInput},n.prototype.renderField=function(){var t=this,e=t.$el,r=t.appendInput,o=t.model,l=e.find("[data-input]"),f=l[l.length-1],d=o.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,S.isString)(d)?(f.innerHTML=d,this.elInput=f.firstChild):(r?f.appendChild(d):f.insertBefore(d,f.firstChild),this.elInput=d),o.el=this.elInput},n.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},n.prototype.rerender=function(){delete this.model.el,this.render()},n.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.ppfx,l=t.model,f=l.attributes,d=f.type,h=f.id,v=this.hasLabel&&this.hasLabel(),m="".concat(r,"trait");delete this.$input;var w='<div class="'.concat(m," ").concat(m,"--").concat(d,`">
      `).concat(v?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(d,`" data-input>
        `).concat(this.templateInput?(0,S.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(w),v&&this.renderLabel(),this.renderField(),this.el.className="".concat(m,"__wrp ").concat(m,"__wrp-").concat(h),this.postUpdate(),this.onRender(this.getClbOpts()),this},n}(O.G7);const pr=wn;wn.prototype.eventCapture=["change"];var An=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xr=function(a){An(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.onChange=function(){this.handleClick()},n.prototype.handleClick=function(){this.model.runCommand()},n.prototype.renderLabel=function(){this.model.get("label")&&pr.prototype.renderLabel.apply(this)},n.prototype.getInputEl=function(){var t=this,e=t.model,r=t.ppfx,o=e.props(),l=o.labelButton,f=o.text,d=o.full,h=l||f,v="".concat(r,"btn"),m='<button type="button" class="'.concat(v,"-prim").concat(d?" ".concat(v,"--full"):"",'">').concat(h,"</button>");return m},n}(pr);const Kr=Xr;Xr.prototype.eventCapture=["click button"];var Br=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Er=function(a){Br(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<label class="'.concat(r,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},n.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},n.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!this.$input,o=pr.prototype.getInputEl.apply(this,t);if(r){var l=void 0,f=void 0,d=this,h=d.model,v=d.target,m=h.attributes.valueFalse,w=h.getName();h.changeProp?(l=v.get(w),f=l):(f=v.get("attributes")[w],l=!!(f||f==="")),!(0,S.isUndefined)(m)&&f===m&&(l=!1),o.checked=l}return o},n}(pr);const kn=Er;function wa(a,n){if(!(0,tt.hasWin)())return;var t={beforeShow:T,move:T,change:T,show:T,hide:T,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function q(qt,te){return!!~(""+qt).indexOf(te)}var wt=document.createElement("div"),B=wt.style;return B.cssText="background-color:rgba(0,0,0,.5)",q(B.backgroundColor,"rgba")||q(B.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var q="";if(r)for(var wt=1;wt<=6;wt++)q+="<div class='sp-"+wt+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",q,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function d(q,wt,B,qt){for(var te=[],ye=0;ye<q.length;ye++){var He=q[ye];if(He){var ze=ue(He),Ne=ze.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";Ne+=ue.equals(wt,He)?" sp-thumb-active":"";var Ur=ze.toString(qt.preferredFormat||"rgb"),an=o?"background-color:"+ze.toRgbString():"filter:"+ze.toFilter();te.push('<span title="'+Ur+'" data-color="'+ze.toRgbString()+'" class="'+Ne+'"><span class="sp-thumb-inner" style="'+an+';"></span></span>')}else{var Jr="sp-clear-display";te.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="'+Jr+'"></span>').attr("title",qt.noColorSelectedText)).html())}}return"<div class='sp-cf "+B+"'>"+te.join("")+"</div>"}function h(){for(var q=0;q<e.length;q++)e[q]&&e[q].hide()}function v(q,wt){var B=a.extend({},t,q);return B.callbacks={move:W(B.move,wt),change:W(B.change,wt),show:W(B.show,wt),hide:W(B.hide,wt),beforeShow:W(B.beforeShow,wt)},B}function m(q,wt){var B=v(wt,q),qt=B.flat,te=B.showSelectionPalette,ye=B.localStorageKey,He=B.theme,ze=B.callbacks,Ne=st(Ss,10),Ur=!1,an=!1,Jr=!0,Ui=0,ko=0,fi=0,Ar=0,di=0,lf=0,uf=0,_s=0,ws=0,wu=0,pi=1,cf=[],bu=[],ff={},hi=B.selectionPalette.slice(0),y_=B.maxSelectionSize,wh="sp-dragging",Ta=null,Cu=q.ownerDocument;Cu.body;var sn=a(q),Kd=!1,Je=a(f,Cu).addClass(He),m_=Je.find(".sp-picker-container"),df=Je.find(".sp-color"),pf=Je.find(".sp-dragger"),Gd=Je.find(".sp-hue"),hf=Je.find(".sp-slider"),xu=Je.find(".sp-alpha-inner"),bh=Je.find(".sp-alpha"),vf=Je.find(".sp-alpha-handle"),vi=Je.find(".sp-input"),Ch=Je.find(".sp-palette"),xh=Je.find(".sp-initial"),Sh=Je.find(".sp-cancel"),$d=Je.find(".sp-clear"),Oh=Je.find(".sp-choose"),qd=Je.find(".sp-palette-toggle"),gf=sn.is("input"),__=gf&&sn.attr("type")==="color"&&St(),Yd=gf&&!qt,_l=Yd?a(l).addClass(He).addClass(B.className).addClass(B.replacerClassName):a([]),Su=Yd?_l:sn,wl=_l.find(".sp-preview-inner"),Ou=B.color||gf&&sn.val(),bl=!1,Cl=B.preferredFormat,w_=!B.showButtons||B.clickoutFiresChange,Ea=!Ou,bs=B.allowEmpty&&!__;function Xd(){if(B.showPaletteOnly&&(B.showPalette=!0),qd.text(B.showPaletteOnly?B.togglePaletteMoreText:B.togglePaletteLessText),B.palette){cf=B.palette.slice(0),bu=a.isArray(cf[0])?cf:[cf],ff={};for(var Le=0;Le<bu.length;Le++)for(var Ie=0;Ie<bu[Le].length;Ie++){var cr=ue(bu[Le][Ie]).toRgbString();ff[cr]=!0}}Je.toggleClass("sp-flat",qt),Je.toggleClass("sp-input-disabled",!B.showInput),Je.toggleClass("sp-alpha-enabled",B.showAlpha),Je.toggleClass("sp-clear-enabled",bs),Je.toggleClass("sp-buttons-disabled",!B.showButtons),Je.toggleClass("sp-palette-buttons-disabled",!B.togglePaletteOnly),Je.toggleClass("sp-palette-disabled",!B.showPalette),Je.toggleClass("sp-palette-only",B.showPaletteOnly),Je.toggleClass("sp-initial-disabled",!B.showInitial),Je.addClass(B.className).addClass(B.containerClassName),Ss()}function b_(){if(r&&Je.find("*:not(input)").attr("unselectable","on"),Xd(),Yd&&sn.after(_l).hide(),bs||$d.hide(),qt)sn.after(Je).hide();else{var Le=B.appendTo==="parent"?sn.parent():a(B.appendTo);Le.length!==1&&(Le=a("body")),Le.append(Je)}Th(),Su.bind("click.spectrum touchstart.spectrum",function(Be){Kd||Ah(),Be.stopPropagation(),a(Be.target).is("input")||Be.preventDefault()}),(sn.is(":disabled")||B.disabled===!0)&&jh(),Je.click(I),vi.change(tp),vi.bind("paste",function(){setTimeout(tp,1)}),vi.keydown(function(Be){Be.keyCode==13&&tp()}),Sh.text(B.cancelText),Sh.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),Lh(),Pa()}),$d.attr("title",B.clearText),$d.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),Ea=!0,xl(),qt&&xs(!0)}),Oh.text(B.chooseText),Oh.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),r&&vi.is(":focus")&&vi.trigger("change"),x_()&&(xs(!0),Pa())}),qd.text(B.showPaletteOnly?B.togglePaletteMoreText:B.togglePaletteLessText),qd.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),B.showPaletteOnly=!B.showPaletteOnly,!B.showPaletteOnly&&!qt&&Je.css("left","-="+(m_.outerWidth(!0)+5)),Xd()}),z(bh,function(Be,Mo,Os){pi=Be/di,Ea=!1,Os.shiftKey&&(pi=Math.round(pi*10)/10),xl()},Jd,Qd),z(Gd,function(Be,Mo){_s=parseFloat(Mo/Ar),Ea=!1,B.showAlpha||(pi=1),xl()},Jd,Qd),z(df,function(Be,Mo,Os){if(!Os.shiftKey)Ta=null;else if(!Ta){var mf=ws*Ui,Tu=ko-wu*ko,Eu=Math.abs(Be-mf)>Math.abs(Mo-Tu);Ta=Eu?"x":"y"}var P_=!Ta||Ta==="x",A_=!Ta||Ta==="y";P_&&(ws=parseFloat(Be/Ui)),A_&&(wu=parseFloat((ko-Mo)/ko)),Ea=!1,B.showAlpha||(pi=1),xl()},Jd,Qd),Ou?(Cs(Ou),Sl(),Cl=B.preferredFormat||ue(Ou).getFormat(),Zd(Ou)):Sl(),qt&&ep();function Ie(Be){return Be.data&&Be.data.ignore?(Cs(a(Be.target).closest(".sp-thumb-el").data("color")),xl()):(Cs(a(Be.target).closest(".sp-thumb-el").data("color")),xl(),B.hideAfterPaletteSelect&&(xs(!0),Pa())),!1}var cr=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ch.delegate(".sp-thumb-el",cr,Ie),xh.delegate(".sp-thumb-el:nth-child(1)",cr,{ignore:!0},Ie)}function Th(){if(ye&&window.localStorage){try{var Le=window.localStorage[ye].split(",#");Le.length>1&&(delete window.localStorage[ye],a.each(Le,function(Ie,cr){Zd(cr)}))}catch{}try{hi=window.localStorage[ye].split(";")}catch{}}}function Zd(Le){if(te){var Ie=ue(Le).toRgbString();if(!ff[Ie]&&a.inArray(Ie,hi)===-1)for(hi.push(Ie);hi.length>y_;)hi.shift();if(ye&&window.localStorage)try{window.localStorage[ye]=hi.join(";")}catch{}}}function C_(){var Le=[];if(B.showPalette)for(var Ie=0;Ie<hi.length;Ie++){var cr=ue(hi[Ie]).toRgbString();ff[cr]||Le.push(hi[Ie])}return Le.reverse().slice(0,B.maxSelectionSize)}function Eh(){var Le=Kn(),Ie=a.map(bu,function(cr,Be){return d(cr,Le,"sp-palette-row sp-palette-row-"+Be,B)});Th(),hi&&Ie.push(d(C_(),Le,"sp-palette-row sp-palette-row-selection",B)),Ch.html(Ie.join(""))}function Ph(){if(B.showInitial){var Le=bl,Ie=Kn();xh.html(d([Le,Ie],Ie,"sp-palette-row-initial",B))}}function Jd(){(ko<=0||Ui<=0||Ar<=0)&&Ss(),an=!0,Je.addClass(wh),Ta=null,sn.trigger("dragstart.spectrum",[Kn()])}function Qd(){an=!1,Je.removeClass(wh),sn.trigger("dragstop.spectrum",[Kn()])}function tp(){var Le=vi.val();if((Le===null||Le==="")&&bs)Cs(null),xs(!0);else{var Ie=ue(Le);Ie.isValid()?(Cs(Ie),xs(!0)):vi.addClass("sp-validation-error")}}function Ah(){Ur?Pa():ep()}function ep(){var Le=a.Event("beforeShow.spectrum");if(Ur){Ss();return}if(sn.trigger("beforeShow.spectrum",[Kn()]),!(ze.beforeShow(Kn())===!1||Le.isDefaultPrevented())){h(),Ur=!0;var Ie=a(Cu);Ie.bind("keydown.spectrum",kh),Ie.bind("click.spectrum",Mh),a(window).bind("resize.spectrum",Ne),_l.addClass("sp-active"),Je.removeClass("sp-hidden"),Ss(),Sl(),bl=Kn(),Ph(),ze.show(bl),sn.trigger("show.spectrum",[bl])}}function kh(Le){Le.keyCode===27&&Pa()}function Mh(Le){Le.button!=2&&(an||(w_?xs(!0):Lh(),Pa()))}function Pa(){!Ur||qt||(Ur=!1,a(Cu).unbind("keydown.spectrum",kh),a(Cu).unbind("click.spectrum",Mh),a(window).unbind("resize.spectrum",Ne),_l.removeClass("sp-active"),Je.addClass("sp-hidden"),ze.hide(Kn()),sn.trigger("hide.spectrum",[Kn()]))}function Lh(){Cs(bl,!0)}function Cs(Le,Ie){if(ue.equals(Le,Kn())){Sl();return}var cr,Be;!Le&&bs?Ea=!0:(Ea=!1,Jr=!Le,cr=ue(Le),Be=cr.toHsv(),_s=Be.h%360/360,ws=Be.s,wu=Be.v,pi=Be.a),Sl(),cr&&cr.isValid()&&!Ie&&(Cl=B.preferredFormat||cr.getFormat())}function Kn(Le){return Le=Le||{},bs&&Ea?null:ue.fromRatio({h:_s,s:ws,v:wu,a:Math.round(pi*100)/100},{format:Le.format||Cl})}function x_(){return!vi.hasClass("sp-validation-error")}function xl(){Sl(),ze.move(Kn()),sn.trigger("move.spectrum",[Kn()])}function Sl(){vi.removeClass("sp-validation-error"),Dh();var Le=ue.fromRatio({h:_s,s:1,v:1});df.css("background-color",Le.toHexString());var Ie=Cl;pi<1&&!(pi===0&&Ie==="name")&&(Ie==="hex"||Ie==="hex3"||Ie==="hex6"||Ie==="name")&&(Ie="rgb");var cr=Kn({format:Ie}),Be="";if(wl.removeClass("sp-clear-display"),wl.css("background-color","transparent"),!cr&&bs)wl.addClass("sp-clear-display");else{var Mo=cr.toHexString(),Os=cr.toRgbString();if(o||cr.alpha===1?wl.css("background-color",Os):(wl.css("background-color","transparent"),wl.css("filter",cr.toFilter())),B.showAlpha){var mf=cr.toRgb();mf.a=0;var Tu=ue(mf).toRgbString(),Eu="linear-gradient(left, "+Tu+", "+Mo+")";r?xu.css("filter",ue(Tu).toFilter({gradientType:1},Mo)):(xu.css("background","-webkit-"+Eu),xu.css("background","-moz-"+Eu),xu.css("background","-ms-"+Eu),xu.css("background","linear-gradient(to right, "+Tu+", "+Mo+")"))}Be=cr.toString(Ie)}B.showInput&&vi.val(Be),B.showPalette&&Eh(),Ph()}function Dh(){var Le=ws,Ie=wu;if(bs&&Ea)vf.hide(),hf.hide(),pf.hide();else{vf.show(),hf.show(),pf.show();var cr=Le*Ui,Be=ko-Ie*ko;cr=Math.max(-fi,Math.min(Ui-fi,cr-fi)),Be=Math.max(-fi,Math.min(ko-fi,Be-fi)),pf.css({top:Be+"px",left:cr+"px"});var Mo=pi*di;vf.css({left:Mo-lf/2+"px"});var Os=_s*Ar;hf.css({top:Os-uf+"px"})}}function xs(Le){var Ie=Kn(),cr="",Be=Jr?!0:!ue.equals(Ie,bl);Ie&&(cr=Ie.toString(Cl),!Ur&&Zd(Ie)),gf&&sn.val(cr),Le&&Be&&(ze.change(Ie),sn.trigger("change",[Ie]))}function Ss(){Ur&&(Ui=df.width(),ko=df.height(),fi=pf.height(),Gd.width(),Ar=Gd.height(),uf=hf.height(),di=bh.width(),lf=vf.width(),qt||(Je.css("position","absolute"),B.offset?Je.offset(B.offset):Je.offset(w(Je,Su))),Dh(),B.showPalette&&Eh(),sn.trigger("reflow.spectrum"))}function S_(){sn.show(),Su.unbind("click.spectrum touchstart.spectrum"),Je.remove(),_l.remove(),e[yf.id]=null}function O_(Le,Ie){if(Le===n)return a.extend({},B);if(Ie===n)return B[Le];B[Le]=Ie,Le==="preferredFormat"&&(Cl=B.preferredFormat),Xd()}function T_(){Kd=!1,sn.attr("disabled",!1),Su.removeClass("sp-disabled")}function jh(){Pa(),Kd=!0,sn.attr("disabled",!0),Su.addClass("sp-disabled")}function E_(Le){B.offset=Le,Ss()}b_();var yf={show:ep,hide:Pa,toggle:Ah,reflow:Ss,option:O_,enable:T_,disable:jh,offset:E_,set:function(Le){Cs(Le),xs()},get:Kn,destroy:S_,container:Je};return yf.id=e.push(yf)-1,yf}function w(q,wt){for(var B=wt[0],qt=q[0],te=qt.parentElement,ye=B.getBoundingClientRect(),He=qt.offsetWidth,ze=qt.offsetHeight,Ne={top:0,left:0,width:B.offsetWidth,height:B.offsetHeight};B&&(Ne.top+=B.offsetTop-B.scrollTop,Ne.left+=B.offsetLeft-B.scrollLeft,!(B===te||!te.contains(B.offsetParent)));)B=B.offsetParent;return ye.right+He>window.innerWidth-window.scrollX&&ye.right-He>0&&(Ne.left-=He-Ne.width),ye.bottom+ze<window.innerHeight-window.scrollY?Ne.top+=Ne.height:Ne.top-=ze,Ne}function T(){}function I(q){q.stopPropagation()}function W(q,wt){var B=Array.prototype.slice,qt=B.call(arguments,2);return function(){return q.apply(wt,qt.concat(B.call(arguments)))}}function z(q,wt,B,qt){wt=wt||function(){},B=B||function(){},qt=qt||function(){};var te=document,ye=!1,He={},ze=0,Ne=0,Ur="ontouchstart"in window,an={};an.selectstart=Jr,an.dragstart=Jr,an["touchmove mousemove"]=Ui,an["touchend mouseup"]=fi;function Jr(Ar){Ar.stopPropagation&&Ar.stopPropagation(),Ar.preventDefault&&Ar.preventDefault(),Ar.returnValue=!1}function Ui(Ar){if(ye){if(r&&te.documentMode<9&&!Ar.button)return fi();var di=Ar&&Ar.touches&&Ar.touches[0],lf=di&&di.pageX||Ar.pageX,uf=di&&di.pageY||Ar.pageY,_s=Math.max(0,Math.min(lf-He.left,Ne)),ws=Math.max(0,Math.min(uf-He.top,ze));Ur&&Jr(Ar),wt.apply(q,[_s,ws,Ar])}}function ko(Ar){var di=Ar.which?Ar.which==3:Ar.button==2;!di&&!ye&&B.apply(q,arguments)!==!1&&(ye=!0,ze=a(q).height(),Ne=a(q).width(),He=a(q).offset(),a(te).bind(an),a(te.body).addClass("sp-dragging"),Ui(Ar),Jr(Ar))}function fi(){ye&&(a(te).unbind(an),a(te.body).removeClass("sp-dragging"),setTimeout(function(){qt.apply(q,arguments)},0)),ye=!1}a(q).bind("touchstart mousedown",ko)}function st(q,wt,B){var qt;return function(){var te=this,ye=arguments,He=function(){qt=null,q.apply(te,ye)};qt||(qt=setTimeout(He,wt))}}function St(){return a.fn.spectrum.inputTypeColorSupport()}var Tt="spectrum.id";a.fn.spectrum=function(q,wt){if(typeof q=="string"){var B=this,qt=Array.prototype.slice.call(arguments,1);return this.each(function(){var te=e[a(this).data(Tt)];if(te){var ye=te[q];if(!ye)throw new Error("Spectrum: no such method: '"+q+"'");q=="get"?B=te.get():q=="container"?B=te.container:q=="option"?B=te.option.apply(te,qt):q=="destroy"?(te.destroy(),a(this).removeData(Tt)):ye.apply(te,qt)}}),B}return this.spectrum("destroy").each(function(){var te=a.extend({},q,a(this).data()),ye=m(this,te);a(this).data(Tt,ye.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=z,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function q(){if(typeof q._cachedResult>"u"){var wt=a("<input type='color'/>")[0];q._cachedResult=wt.type==="color"&&wt.value!==""}return q._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var q=a("input[type=color]");q.length&&!St()&&q.spectrum({preferredFormat:"hex6"})};var zt=/^[\s,#]+/,le=/\s+$/,Se=0,Pe=Math,Jt=Pe.round,Ee=Pe.min,Ve=Pe.max,sr=Pe.random,ue=function(q,wt){if(q=q||"",wt=wt||{},q instanceof ue)return q;if(!(this instanceof ue))return new ue(q,wt);var B=zn(q);this._originalInput=q,this._r=B.r,this._g=B.g,this._b=B.b,this._a=B.a,this._roundA=Jt(100*this._a)/100,this._format=wt.format||B.format,this._gradientType=wt.gradientType,this._r<1&&(this._r=Jt(this._r)),this._g<1&&(this._g=Jt(this._g)),this._b<1&&(this._b=Jt(this._b)),this._ok=B.ok,this._tc_id=Se++};ue.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var q=this.toRgb();return(q.r*299+q.g*587+q.b*114)/1e3},setAlpha:function(q){return this._a=_h(q),this._roundA=Jt(100*this._a)/100,this},toHsv:function(){var q=ui(this._r,this._g,this._b);return{h:q.h*360,s:q.s,v:q.v,a:this._a}},toHsvString:function(){var q=ui(this._r,this._g,this._b),wt=Jt(q.h*360),B=Jt(q.s*100),qt=Jt(q.v*100);return this._a==1?"hsv("+wt+", "+B+"%, "+qt+"%)":"hsva("+wt+", "+B+"%, "+qt+"%, "+this._roundA+")"},toHsl:function(){var q=yl(this._r,this._g,this._b);return{h:q.h*360,s:q.s,l:q.l,a:this._a}},toHslString:function(){var q=yl(this._r,this._g,this._b),wt=Jt(q.h*360),B=Jt(q.s*100),qt=Jt(q.l*100);return this._a==1?"hsl("+wt+", "+B+"%, "+qt+"%)":"hsla("+wt+", "+B+"%, "+qt+"%, "+this._roundA+")"},toHex:function(q){return ys(this._r,this._g,this._b,q)},toHexString:function(q){return"#"+this.toHex(q)},toHex8:function(){return Sa(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:Jt(this._r),g:Jt(this._g),b:Jt(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Jt(this._r)+", "+Jt(this._g)+", "+Jt(this._b)+")":"rgba("+Jt(this._r)+", "+Jt(this._g)+", "+Jt(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Jt(Nr(this._r,255)*100)+"%",g:Jt(Nr(this._g,255)*100)+"%",b:Jt(Nr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Jt(Nr(this._r,255)*100)+"%, "+Jt(Nr(this._g,255)*100)+"%, "+Jt(Nr(this._b,255)*100)+"%)":"rgba("+Jt(Nr(this._r,255)*100)+"%, "+Jt(Nr(this._g,255)*100)+"%, "+Jt(Nr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:c_[ys(this._r,this._g,this._b,!0)]||!1},toFilter:function(q){var wt="#"+Sa(this._r,this._g,this._b,this._a),B=wt,qt=this._gradientType?"GradientType = 1, ":"";if(q){var te=ue(q);B=te.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+qt+"startColorstr="+wt+",endColorstr="+B+")"},toString:function(q){var wt=!!q;q=q||this._format;var B=!1,qt=this._a<1&&this._a>=0,te=!wt&&qt&&(q==="hex"||q==="hex6"||q==="hex3"||q==="name");return te?q==="name"&&this._a===0?this.toName():this.toRgbString():(q==="rgb"&&(B=this.toRgbString()),q==="prgb"&&(B=this.toPercentageRgbString()),(q==="hex"||q==="hex6")&&(B=this.toHexString()),q==="hex3"&&(B=this.toHexString(!0)),q==="hex8"&&(B=this.toHex8String()),q==="name"&&(B=this.toName()),q==="hsl"&&(B=this.toHslString()),q==="hsv"&&(B=this.toHsvString()),B||this.toHexString())},_applyModification:function(q,wt){var B=q.apply(null,[this].concat([].slice.call(wt)));return this._r=B._r,this._g=B._g,this._b=B._b,this.setAlpha(B._a),this},lighten:function(){return this._applyModification(t_,arguments)},brighten:function(){return this._applyModification(e_,arguments)},darken:function(){return this._applyModification(r_,arguments)},desaturate:function(){return this._applyModification(Oa,arguments)},saturate:function(){return this._applyModification(J0,arguments)},greyscale:function(){return this._applyModification(Q0,arguments)},spin:function(){return this._applyModification(n_,arguments)},_applyCombination:function(q,wt){return q.apply(null,[this].concat([].slice.call(wt)))},analogous:function(){return this._applyCombination(l_,arguments)},complement:function(){return this._applyCombination(o_,arguments)},monochromatic:function(){return this._applyCombination(u_,arguments)},splitcomplement:function(){return this._applyCombination(s_,arguments)},triad:function(){return this._applyCombination(i_,arguments)},tetrad:function(){return this._applyCombination(a_,arguments)}},ue.fromRatio=function(q,wt){if(typeof q=="object"){var B={};for(var qt in q)q.hasOwnProperty(qt)&&(qt==="a"?B[qt]=q[qt]:B[qt]=_u(q[qt]));q=B}return ue(q,wt)};function zn(q){var wt={r:0,g:0,b:0},B=1,qt=!1,te=!1;return typeof q=="string"&&(q=g_(q)),typeof q=="object"&&(q.hasOwnProperty("r")&&q.hasOwnProperty("g")&&q.hasOwnProperty("b")?(wt=mu(q.r,q.g,q.b),qt=!0,te=String(q.r).substr(-1)==="%"?"prgb":"rgb"):q.hasOwnProperty("h")&&q.hasOwnProperty("s")&&q.hasOwnProperty("v")?(q.s=_u(q.s),q.v=_u(q.v),wt=gs(q.h,q.s,q.v),qt=!0,te="hsv"):q.hasOwnProperty("h")&&q.hasOwnProperty("s")&&q.hasOwnProperty("l")&&(q.s=_u(q.s),q.l=_u(q.l),wt=ml(q.h,q.s,q.l),qt=!0,te="hsl"),q.hasOwnProperty("a")&&(B=q.a)),B=_h(B),{ok:qt,format:q.format||te,r:Ee(255,Ve(wt.r,0)),g:Ee(255,Ve(wt.g,0)),b:Ee(255,Ve(wt.b,0)),a:B}}function mu(q,wt,B){return{r:Nr(q,255)*255,g:Nr(wt,255)*255,b:Nr(B,255)*255}}function yl(q,wt,B){q=Nr(q,255),wt=Nr(wt,255),B=Nr(B,255);var qt=Ve(q,wt,B),te=Ee(q,wt,B),ye,He,ze=(qt+te)/2;if(qt==te)ye=He=0;else{var Ne=qt-te;switch(He=ze>.5?Ne/(2-qt-te):Ne/(qt+te),qt){case q:ye=(wt-B)/Ne+(wt<B?6:0);break;case wt:ye=(B-q)/Ne+2;break;case B:ye=(q-wt)/Ne+4;break}ye/=6}return{h:ye,s:He,l:ze}}function ml(q,wt,B){var qt,te,ye;q=Nr(q,360),wt=Nr(wt,100),B=Nr(B,100);function He(Ur,an,Jr){return Jr<0&&(Jr+=1),Jr>1&&(Jr-=1),Jr<1/6?Ur+(an-Ur)*6*Jr:Jr<1/2?an:Jr<2/3?Ur+(an-Ur)*(2/3-Jr)*6:Ur}if(wt===0)qt=te=ye=B;else{var ze=B<.5?B*(1+wt):B+wt-B*wt,Ne=2*B-ze;qt=He(Ne,ze,q+1/3),te=He(Ne,ze,q),ye=He(Ne,ze,q-1/3)}return{r:qt*255,g:te*255,b:ye*255}}function ui(q,wt,B){q=Nr(q,255),wt=Nr(wt,255),B=Nr(B,255);var qt=Ve(q,wt,B),te=Ee(q,wt,B),ye,He,ze=qt,Ne=qt-te;if(He=qt===0?0:Ne/qt,qt==te)ye=0;else{switch(qt){case q:ye=(wt-B)/Ne+(wt<B?6:0);break;case wt:ye=(B-q)/Ne+2;break;case B:ye=(q-wt)/Ne+4;break}ye/=6}return{h:ye,s:He,v:ze}}function gs(q,wt,B){q=Nr(q,360)*6,wt=Nr(wt,100),B=Nr(B,100);var qt=Pe.floor(q),te=q-qt,ye=B*(1-wt),He=B*(1-te*wt),ze=B*(1-(1-te)*wt),Ne=qt%6,Ur=[B,He,ye,ye,ze,B][Ne],an=[ze,B,B,He,ye,ye][Ne],Jr=[ye,ye,ze,B,B,He][Ne];return{r:Ur*255,g:an*255,b:Jr*255}}function ys(q,wt,B,qt){var te=[ms(Jt(q).toString(16)),ms(Jt(wt).toString(16)),ms(Jt(B).toString(16))];return qt&&te[0].charAt(0)==te[0].charAt(1)&&te[1].charAt(0)==te[1].charAt(1)&&te[2].charAt(0)==te[2].charAt(1)?te[0].charAt(0)+te[1].charAt(0)+te[2].charAt(0):te.join("")}function Sa(q,wt,B,qt){var te=[ms(h_(qt)),ms(Jt(q).toString(16)),ms(Jt(wt).toString(16)),ms(Jt(B).toString(16))];return te.join("")}ue.equals=function(q,wt){return!q||!wt?!1:ue(q).toRgbString()==ue(wt).toRgbString()},ue.random=function(){return ue.fromRatio({r:sr(),g:sr(),b:sr()})};function Oa(q,wt){wt=wt===0?0:wt||10;var B=ue(q).toHsl();return B.s-=wt/100,B.s=sf(B.s),ue(B)}function J0(q,wt){wt=wt===0?0:wt||10;var B=ue(q).toHsl();return B.s+=wt/100,B.s=sf(B.s),ue(B)}function Q0(q){return ue(q).desaturate(100)}function t_(q,wt){wt=wt===0?0:wt||10;var B=ue(q).toHsl();return B.l+=wt/100,B.l=sf(B.l),ue(B)}function e_(q,wt){wt=wt===0?0:wt||10;var B=ue(q).toRgb();return B.r=Ve(0,Ee(255,B.r-Jt(255*-(wt/100)))),B.g=Ve(0,Ee(255,B.g-Jt(255*-(wt/100)))),B.b=Ve(0,Ee(255,B.b-Jt(255*-(wt/100)))),ue(B)}function r_(q,wt){wt=wt===0?0:wt||10;var B=ue(q).toHsl();return B.l-=wt/100,B.l=sf(B.l),ue(B)}function n_(q,wt){var B=ue(q).toHsl(),qt=(Jt(B.h)+wt)%360;return B.h=qt<0?360+qt:qt,ue(B)}function o_(q){var wt=ue(q).toHsl();return wt.h=(wt.h+180)%360,ue(wt)}function i_(q){var wt=ue(q).toHsl(),B=wt.h;return[ue(q),ue({h:(B+120)%360,s:wt.s,l:wt.l}),ue({h:(B+240)%360,s:wt.s,l:wt.l})]}function a_(q){var wt=ue(q).toHsl(),B=wt.h;return[ue(q),ue({h:(B+90)%360,s:wt.s,l:wt.l}),ue({h:(B+180)%360,s:wt.s,l:wt.l}),ue({h:(B+270)%360,s:wt.s,l:wt.l})]}function s_(q){var wt=ue(q).toHsl(),B=wt.h;return[ue(q),ue({h:(B+72)%360,s:wt.s,l:wt.l}),ue({h:(B+216)%360,s:wt.s,l:wt.l})]}function l_(q,wt,B){wt=wt||6,B=B||30;var qt=ue(q).toHsl(),te=360/B,ye=[ue(q)];for(qt.h=(qt.h-(te*wt>>1)+720)%360;--wt;)qt.h=(qt.h+te)%360,ye.push(ue(qt));return ye}function u_(q,wt){wt=wt||6;for(var B=ue(q).toHsv(),qt=B.h,te=B.s,ye=B.v,He=[],ze=1/wt;wt--;)He.push(ue({h:qt,s:te,v:ye})),ye=(ye+ze)%1;return He}ue.mix=function(q,wt,B){B=B===0?0:B||50;var qt=ue(q).toRgb(),te=ue(wt).toRgb(),ye=B/100,He=ye*2-1,ze=te.a-qt.a,Ne;He*ze==-1?Ne=He:Ne=(He+ze)/(1+He*ze),Ne=(Ne+1)/2;var Ur=1-Ne,an={r:te.r*Ne+qt.r*Ur,g:te.g*Ne+qt.g*Ur,b:te.b*Ne+qt.b*Ur,a:te.a*ye+qt.a*(1-ye)};return ue(an)},ue.readability=function(q,wt){var B=ue(q),qt=ue(wt),te=B.toRgb(),ye=qt.toRgb(),He=B.getBrightness(),ze=qt.getBrightness(),Ne=Math.max(te.r,ye.r)-Math.min(te.r,ye.r)+Math.max(te.g,ye.g)-Math.min(te.g,ye.g)+Math.max(te.b,ye.b)-Math.min(te.b,ye.b);return{brightness:Math.abs(He-ze),color:Ne}},ue.isReadable=function(q,wt){var B=ue.readability(q,wt);return B.brightness>125&&B.color>500},ue.mostReadable=function(q,wt){for(var B=null,qt=0,te=!1,ye=0;ye<wt.length;ye++){var He=ue.readability(q,wt[ye]),ze=He.brightness>125&&He.color>500,Ne=3*(He.brightness/125)+He.color/500;(ze&&!te||ze&&te&&Ne>qt||!ze&&!te&&Ne>qt)&&(te=ze,qt=Ne,B=ue(wt[ye]))}return B};var zd=ue.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},c_=ue.hexNames=f_(zd);function f_(q){var wt={};for(var B in q)q.hasOwnProperty(B)&&(wt[q[B]]=B);return wt}function _h(q){return q=parseFloat(q),(isNaN(q)||q<0||q>1)&&(q=1),q}function Nr(q,wt){d_(q)&&(q="100%");var B=p_(q);return q=Ee(wt,Ve(0,parseFloat(q))),B&&(q=parseInt(q*wt,10)/100),Pe.abs(q-wt)<1e-6?1:q%wt/parseFloat(wt)}function sf(q){return Ee(1,Ve(0,q))}function ci(q){return parseInt(q,16)}function d_(q){return typeof q=="string"&&q.indexOf(".")!=-1&&parseFloat(q)===1}function p_(q){return typeof q=="string"&&q.indexOf("%")!=-1}function ms(q){return q.length==1?"0"+q:""+q}function _u(q){return q<=1&&(q=q*100+"%"),q}function h_(q){return Math.round(parseFloat(q)*255).toString(16)}function v_(q){return ci(q)/255}var Bi=function(){var q="[-\\+]?\\d+%?",wt="[-\\+]?\\d*\\.\\d+%?",B="(?:"+wt+")|(?:"+q+")",qt="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",te="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?";return{rgb:new RegExp("rgb"+qt),rgba:new RegExp("rgba"+te),hsl:new RegExp("hsl"+qt),hsla:new RegExp("hsla"+te),hsv:new RegExp("hsv"+qt),hsva:new RegExp("hsva"+te),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function g_(q){q=q.replace(zt,"").replace(le,"").toLowerCase();var wt=!1;if(zd[q])q=zd[q],wt=!0;else if(q=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var B;return(B=Bi.rgb.exec(q))?{r:B[1],g:B[2],b:B[3]}:(B=Bi.rgba.exec(q))?{r:B[1],g:B[2],b:B[3],a:B[4]}:(B=Bi.hsl.exec(q))?{h:B[1],s:B[2],l:B[3]}:(B=Bi.hsla.exec(q))?{h:B[1],s:B[2],l:B[3],a:B[4]}:(B=Bi.hsv.exec(q))?{h:B[1],s:B[2],v:B[3]}:(B=Bi.hsva.exec(q))?{h:B[1],s:B[2],v:B[3],a:B[4]}:(B=Bi.hex8.exec(q))?{a:v_(B[1]),r:ci(B[2]),g:ci(B[3]),b:ci(B[4]),format:wt?"name":"hex8"}:(B=Bi.hex6.exec(q))?{r:ci(B[1]),g:ci(B[2]),b:ci(B[3]),format:wt?"name":"hex"}:(B=Bi.hex3.exec(q))?{r:ci(B[1]+""+B[1]),g:ci(B[2]+""+B[2]),b:ci(B[3]+""+B[3]),format:wt?"name":"hex"}:!1}window.tinycolor=ue,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}var ai=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),on=function(a){ai(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.ppfx||"";return e.opts=t,e.ppfx=r,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return n.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},n.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.setValue=function(t,e){var r=this.model,o=t||r.get("defaults"),l=this.getInputEl();l&&(l.value=o)},n.prototype.handleModelChange=function(t,e,r){this.setValue(e,r)},n.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},n.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},n.prototype.getInputEl=function(){if(!this.inputEl){var t=this,e=t.model,r=t.opts,o=r.type||"text",l=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,D.default)('<input type="'.concat(o,'" placeholder="').concat(l,'">'))}return this.inputEl.get(0)},n.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},n}(O.G7);const Hn=on;on.prototype.events={change:"handleChange"};var Zr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ri=function(){return Ri=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ri.apply(this,arguments)};D.default&&wa(D.default);var Xn=function(a){var n=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return n||t.replace(/ /g,"")},Ni=function(a){Zr(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},n.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,S.isUndefined)(e)||this.__onInputChange(e)},n.prototype.__onInputChange=function(t){var e=this,r=e.model,o=e.opts,l=o.onChange,f=t,d=this.getColorEl();if(d){d.spectrum("set",f);var h=d.spectrum("get"),v=f&&Xn(h);v&&(f=v)}l?l(f):r.set({value:f},{fromInput:1})},n.prototype.setValue=function(t,e){e===void 0&&(e={});var r=this.model,o=(0,S.isUndefined)(e.def)?r.get("defaults"):e.def,l=(0,S.isUndefined)(t)?(0,S.isUndefined)(o)?"":o:t,f=this.getInputEl(),d=this.getColorEl(),h=l!="none"?l:"";f.value=l,d.get(0).style.backgroundColor=h,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",h),this.noneColor=l=="none",this.movedColor=h)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,r=e.em,o=e.model,l=e.opts,f=this.ppfx,d=l.onChange,h=(0,D.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),v=h.get(0).style,m=r&&r.getConfig&&r.getConfig().colorPicker||{};this.movedColor="";var w=!1,T;this.$el.find("[data-colorp-c]").append(h);var I=function(W,z){z===void 0&&(z=!0),d?d(W,!z):(z&&o.setValueFromInput(0,!1),o.setValueFromInput(W,z))};h.spectrum(Ri(Ri(Ri({color:o.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color ").concat(f,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},m),o.get("colorPicker")||{}),{move:function(W){var z=Xn(W);t.movedColor=z,v.backgroundColor=z,I(z,!1)},change:function(W){w=!0;var z=Xn(W);v.backgroundColor=z,I(z),t.noneColor=!1},show:function(W){w=!1,t.movedColor="",T=d?o.getValue({noDefault:!0}):Xn(W)},hide:function(){!w&&(T||d)&&(t.noneColor&&(T=""),v.backgroundColor=T,h.spectrum("set",T),I(T,!1))}})),r&&r.on&&this.listenTo(r,"component:selected",function(){t.movedColor&&I(t.movedColor),w=!0,t.movedColor="",h.spectrum("hide")}),this.colorEl=h}return this.colorEl},n.prototype.render=function(){return Hn.prototype.render.call(this),this.getColorEl(),this},n}(Hn);const si=Ni;var bn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ba=function(a){bn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),r=new si({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=r.render();o.setValue(e,{fromTarget:1}),this.input=o.el}return this.input},n}(pr);const uu=ba;var Nh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rp=function(a){Nh(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,S.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return n.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var r=e||{},o=this.validateInputValue(t,{deepCheck:1}),l={value:o.value,unit:""};(o.unit||o.force)&&(l.unit=o.unit),this.model.set(l,r),r.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var r=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";r.push("<option ".concat(f,">").concat(l,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(r.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,Kt.on)(this.doc,"mousemove",this.moveIncrement),(0,Kt.on)(this.doc,"mouseup",this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,r=e.get("step"),o=this.current,l=this.normalizeValue(o.val+(o.y-t.pageY)*r),f=this.validateInputValue(l),d=f.value,h=f.unit;return this.prValue=d,e.set({value:d,unit:h},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,Kt.S1)(this.doc,"mouseup",this.upIncrement),(0,Kt.S1)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var r=this.prValue-e;t.set("value",r,{avoidStore:1}).set("value",r+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var r=this.model,o=r.get("step"),l=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var f=o.toString().split(".")[1];l=f?f.length:0}return l?parseFloat(t.toFixed(l)):t},n.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var r=0,o=e||{},l=this.model,f="",d=(0,S.isUndefined)(t)?f:t,h=e.units||l.get("units")||[],v=l.get("unit")||h.length&&h[0]||"",m=(0,S.isUndefined)(e.max)?l.get("max"):e.max,w=(0,S.isUndefined)(e.min)?l.get("min"):e.min,T=!!l.get("limitlessMax"),I=!!l.get("limitlessMin");if(o.deepCheck){var W=l.get("fixedValues")||[];if(d===""&&(v=""),d){var z=new RegExp("^"+W.join("|"),"g");if(W.length&&z.test(d))d=d.match(z)[0],v="",r=1;else{var st=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?f:d;var St=st.replace(d,"");(0,S.indexOf)(h,St)>=0&&(v=St)}}}return!T&&!(0,S.isUndefined)(m)&&m!==""&&(d=d>m?m:d),!I&&!(0,S.isUndefined)(w)&&w!==""&&(d=d<w?w:d),{force:r,value:d,unit:v}},n.prototype.render=function(){Hn.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(Hn);const np=rp;rp.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var Vh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fh=function(a){Vh(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,r=e.value,o=e.unit;return!(0,S.isUndefined)(r)&&r!==""?r+o:t.get("default")},n.prototype.getInputEl=function(){if(!this.input){var t=this,e=t.ppfx,r=t.model,o=this.getModelValue(),l=new np({contClass:"".concat(e,"field-int"),type:"number",model:r,ppfx:e});l.render(),this.$input=l.inputEl,this.$unit=l.unitEl,r.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=l.el}return this.input},n}(pr);const Hh=Fh;var Bh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uh=function(a){Bh(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<div class="'.concat(r,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.model,r=t.em,o=e.get("name"),l=e.get("options")||[],f=[],d="<select>";l.forEach(function(m){var w="",T,I,W;(0,S.isString)(m)?(T=m,I=m):(T=m.name||m.label||m.value,I="".concat((0,S.isUndefined)(m.value)?m.id:m.value).replace(/"/g,"&quot;"),W=m.style?m.style.replace(/"/g,"&quot;"):"",w+=W?' style="'.concat(W,'"'):"");var z=r.t("traitManager.traits.options.".concat(o,".").concat(I))||T;d+='<option value="'.concat(I,'"').concat(w,">").concat(z,"</option>"),f.push(I)}),d+="</select>",this.$input=(0,D.default)(d);var h=e.getTargetValue(),v=f.indexOf(h)>=0?h:e.get("default");!(0,S.isUndefined)(v)&&this.$input.val(v)}return this.$input.get(0)},n}(pr);const Wh=Uh;var zh=hr(330),Kh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),op="data-categories",ip="data-no-categories",ap=function(a){Kh(n,a);function n(t,e){var r=a.call(this,t)||this;r.reuseView=!0,r.renderedCategories=new Map,r.itemsView=e;var o=t.config||{};r.config=o;var l=t.editor;r.em=l;var f=o.pStylePrefix||"";return r.ppfx=f,r.pfx=f+o.stylePrefix||"",r.className="".concat(r.pfx,"traits"),r.traitContClass="".concat(f,"traits-c"),r.classNoCat="".concat(f,"traits-empty-c"),r.catsClass="".concat(f,"trait-categories"),r.collection=new yn([],{em:l}),r.listenTo(l,"component:toggled",r.updatedCollection),r.updatedCollection(),r}return n.prototype.updatedCollection=function(){var t=this,e=t.ppfx,r=t.em,o=r.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=(o==null?void 0:o.traits)||new yn([],{em:r}),this.render()},n.prototype.add=function(t,e){var r=this,o=r.config,l=r.renderedCategories,f=this.itemView,d=t.get(this.itemType);this.itemsView&&this.itemsView[d]&&(f=this.itemsView[d]);var h=new f({config:o,model:t,attributes:t.get("attributes")}),v=h.render().el,m=t.parent.initCategory(t);if(m){var w=m.getId(),T=this.getCategoriesEl(),I=l.get(w);!I&&T&&(I=new dc({model:m},o,"trait").render(),l.set(w,I),T.appendChild(I.el)),I==null||I.append(v);return}e?e.appendChild(v):this.append(v)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(op,"]"))),this.catsEl},n.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(ip,"]"))),this.traitsEl},n.prototype.append=function(t){var e=this.getTraitsEl();e==null||e.appendChild(t)},n.prototype.render=function(){var t=this,e=this,r=e.el,o=e.ppfx,l=e.catsClass,f=e.traitContClass,d=e.classNoCat,h=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,r.innerHTML=`
      <div class="`.concat(l,'" ').concat(op,`></div>
      <div class="`).concat(d," ").concat(f,'" ').concat(ip,`></div>
    `),this.collection.forEach(function(m){return t.add(m,h)}),this.append(h);var v="".concat(f,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(v),this.rendered=!0,this},n}(zh.Z);const sp=ap;ap.prototype.itemView=pr;var Gh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$h=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},qh=function(a){Gh(n,a);function n(t){var e=a.call(this,t,"TraitManager",Yr)||this;e.TraitsView=sp,e.events=Co,e.state=new O.Hn({traits:[]}),e.types={text:pr,number:Hh,select:Wh,checkbox:kn,color:uu,button:Kr};var r=e,o=r.state,l=r.config,f=r.events,d=l.pStylePrefix;d&&(l.stylePrefix="".concat(d).concat(l.stylePrefix)),(0,S.bindAll)(e,"__onSelect");var h=(0,S.debounce)(function(){return e.__upSel()},0),v=(0,S.debounce)(function(){return e.__onUp()},0);return o.listenTo(t,"component:toggled",h),o.listenTo(t,f.value,v),o.on("change:traits",e.__onSelect),e.debounced=[h,v],e}return n.prototype.select=function(t){var e=(t==null?void 0:t.getTraits())||[];this.state.set({component:t,traits:e}),this.__trgCustom()},n.prototype.getCategories=function(){var t,e=this.getComponent(),r=((t=e==null?void 0:e.traits.categories)===null||t===void 0?void 0:t.models)||[];return $h([],r,!0)},n.prototype.getTraits=function(){return this.getCurrent()},n.prototype.getTraitsByCategory=function(t){return No(t||this.getTraits())},n.prototype.getComponent=function(){return this.state.attributes.component},n.prototype.addType=function(t,e){var r=this.getType("text");this.types[t]=r.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.getCurrent=function(){return this.state.get("traits")||[]},n.prototype.render=function(){var t=this.view,e=this.em;return t=new sp({el:t==null?void 0:t.el,collection:[],editor:e,config:this.getConfig()},this.getTypes()),this.view=t,t.el},n.prototype.postRender=function(){this.__appendTo()},n.prototype.__onSelect=function(){var t=this,e=t.em,r=t.events,o=t.state,l=o.attributes,f=l.component,d=l.traits;e.trigger(r.select,{component:f,traits:d})},n.prototype.__trgCustom=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,l=e.__ctn;this.__ctn=l||t.container,r.trigger(o.custom,this.__customData())},n.prototype.__customData=function(){return{container:this.__ctn}},n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getComponent())},n}(Bt);const Yh=qh;var Xh={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};const Zh=Xh;var Jh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qh=function(a){Jh(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var r=t.config||{};e.config=r,e.parentView=t.parentView;var o=r.stylePrefix||"",l=r.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(o,"layers");var d=r.em;if(r.sortable&&!e.opt.sorter){var h=d.Utils;e.opt.sorter=new h.Sorter({container:r.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(o,"layer"),ignoreViewChildren:1,avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:o,em:d})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return n.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},n.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},n.prototype.addToCollection=function(t,e,r){var o=this,l=o.parentView,f=o.opt,d=o.config,h=o.el,v=f.ItemView,m=f.opened,w=f.module,T=f.level,I=f.sorter,W=t.viewLayer||new v({ItemView:v,level:T,model:t,parentView:l,config:d,sorter:I,opened:m,module:w}),z=W.render().el;if(e)e.appendChild(z);else{var st=h,St=st.childNodes;if((0,S.isUndefined)(r))st.appendChild(z);else{var Tt=St.length==r;Tt&&r--,Tt||!St.length?st.appendChild(z):st.insertBefore(z,St[r])}}return this.items.push(W),z},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O.G7.prototype.remove.apply(this,t),this.items.map(function(r){return r.remove()}),this},n.prototype.render=function(){var t=this,e=document.createDocumentFragment(),r=this.el;return r.innerHTML="",this.collection.each(function(o){return t.addToCollection(o,e)}),r.appendChild(e),r.className=this.className,this},n}(O.G7);const tv=Qh;var dd=hr(790),ev={stylePrefix:"com-",defaults:{},strict:!0};const rv=ev;var nv=hr(713),ov=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nc=function(){return Nc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Nc.apply(this,arguments)},lp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},up=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],cp={preserveSelected:1},fp=function(a){return function(n){return a.trigger("".concat(Tn,":start"),n)}},dp=function(a){return function(n){return a.trigger(Tn,n)}},pp=function(a,n,t){return t===void 0&&(t={}),function(e,r,o){n.forEach(function(l){return l.set("status",l.get("selectable")?"selected":"")}),a.setSelected(n),n[0].emitUpdate(),a.trigger("".concat(Tn,":end"),o),setTimeout(function(){return a.runDefault(cp)}),(t.altMode||o.cancelled)&&a.set("_cmpDrag",1)}},iv=function(a){ov(n,a);function n(t){var e=a.call(this,t,"Commands",rv)||this;e.CommandAbstract=dd.default,e.defaultCommands={},e.commands={},e.active={},e.events=nv.Z;var r=e.config,o=r.pStylePrefix,l=e.defaultCommands;o&&(r.stylePrefix=o+r.stylePrefix),Object.keys(r.defaults).forEach(function(d){var h=r.defaults[d];h.id&&e.add(h.id,h)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,h,v){var m;v===void 0&&(v={});var w=d.getModel(),T=v.event,I=v.target,W=I?[I]:lp([],d.getSelectedAll(),!0),z=W.map(function(sr){var ue,zn;return((zn=(ue=sr.delegate)===null||ue===void 0?void 0:ue.move)===null||zn===void 0?void 0:zn.call(ue,sr))||sr}).filter(Boolean),st=z[z.length-1],St=(T==null?void 0:T.type)==="dragstart",Tt=["absolute","translate"];if(!(st!=null&&st.get("draggable")))return w.logWarning("The element is not draggable");var zt=st.get("dmode")||w.get("dmode"),le=function(){return w.stopDefault(cp)},Se=(0,S.includes)(Tt,zt);z.forEach(function(sr){return sr.trigger("disable",{fromMove:!0})}),St?setTimeout(le,0):le();var Pe=fp(w),Jt=dp(w),Ee=pp(w,z,{altMode:Se});if(Se)d.runCommand("core:component-drag",{guidesInfo:1,mode:zt,target:st,onStart:Pe,onDrag:Jt,onEnd:Ee,event:T});else{St&&T.dataTransfer.setDragImage((m=st.view)===null||m===void 0?void 0:m.el,0,0);var Ve=d.Commands.get("move-comp");Ve.onStart=Pe,Ve.onDrag=Jt,Ve.onEndMoveFromModel=Ee,Ve.initSorterFromModels(z)}z.filter(function(sr){return sr.get("selectable")}).forEach(function(sr){return sr.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},up.forEach(function(d){var h=d[2],v=hr(828)("./".concat(d[1])).default,m="core:".concat(d[0]);l[m]=v,h&&(l[h]=v,["run","stop"].forEach(function(w){t.on("".concat(w,":").concat(h),function(){for(var T=[],I=0;I<arguments.length;I++)T[I]=arguments[I];return t.trigger.apply(t,lp(["".concat(w,":").concat(m)],T,!1))})}))}),r.model=t.Canvas;for(var f in l)e.add(f,l[f]);return e}return n.prototype.add=function(t,e){var r=(0,S.isFunction)(e)?{run:e}:e;return r.stop||(r.noStop=!0),delete r.initialize,r.id=t,this.commands[t]=dd.default.extend(r),this},n.prototype.get=function(t){var e=this.commands[t];return(0,S.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},n.prototype.extend=function(t,e){e===void 0&&(e={});var r=this.get(t);if(r){var o=Nc(Nc({},r.constructor.prototype),e);this.add(t,o);var l=up.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],o)}return this},n.prototype.has=function(t){return!!this.commands[t]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},n.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},n.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var o=this,l=o.em,f=o.config,d=t.id,h=l.Editor;(!this.isActive(d)||e.force||!f.strict)&&(r=h&&t.callRun(h,e),d&&t.stop&&!t.noStop&&!e.abort&&(this.active[d]=r))}return r},n.prototype.stopCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var o=this,l=o.em,f=o.config,d=t.id,h=l.Editor;(this.isActive(d)||e.force||!f.strict)&&(d&&delete this.active[d],r=t.callStop(h,e))}return r},n.prototype.create=function(t){t.stop||(t.noStop=!0);var e=dd.default.extend(t);return new e(this.config)},n.prototype.__onRun=function(t,e){var r=this,o=r.em,l=r.events;o.on("".concat(l.runCommand).concat(t),e)},n.prototype.__onStop=function(t,e){var r=this,o=r.em,l=r.events;o.on("".concat(l.stopCommand).concat(t),e)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}(Bt);const av=iv;var sv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hp="contentEditable",Vc="data-toggle-move",lv=function(a){sv(n,a);function n(t){var e=a.call(this,t)||this;(0,S.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var r=e,o=r.model,l=r.pfx,f=r.ppfx,d=o.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return n.prototype.events=function(){var t;return t={},t["mousedown [".concat(Vc,"]")]="startSort",t["touchstart [".concat(Vc,"]")]="startSort",t["click [data-toggle-visible]"]="toggleVisibility",t["click [data-toggle-open]"]="toggleOpening",t["click [data-toggle-select]"]="handleSelect",t["mouseover [data-toggle-select]"]="handleHover",t["mouseout [data-toggle-select]"]="handleHoverOut",t["dblclick [data-name]"]="handleEdit",t["keydown [data-name]"]="handleEditKey",t["focusout [data-name]"]="handleEditEnd",t},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx,l=e.config,f=e.clsNoEdit,d=e.module,h=e.opt,v=e.em,m=l.hidable,w=d.getComponents(t).length,T=w?"":this.clsNoChild,I="".concat(this.clsTitle," ").concat(T),W="".concat(this.clsTitleC),z="".concat(this.inputNameCls," ").concat(f," ").concat(o,"no-app"),st=h.level||0,St="".concat(st*10,"px"),Tt=t.getName(),zt=t.getIcon(),le="".concat(r,"layer"),Se=(v==null?void 0:v.getConfig()).icons,Pe=Se,Jt=Pe.move,Ee=Pe.eye,Ve=Pe.eyeOff,sr=Pe.chevron;return`
      <div class="`.concat(r,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(r,`layer-item-left">
          `).concat(m?'<i class="'.concat(r,`layer-vis" data-toggle-visible>
                <i class="`).concat(r,'layer-vis-on">').concat(Ee,`</i>
                <i class="`).concat(r,'layer-vis-off">').concat(Ve,`</i>
              </i>`):"",`
          <div class="`).concat(W,`">
            <div class="`).concat(I,'" style="padding-left: ').concat(St,`">
              <div class="`).concat(r,'layer-title-inn" title="').concat(Tt,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(sr,`</i>
                  `).concat(zt?'<span class="'.concat(le,'__icon">').concat(zt,"</span>"):"",`
                <span class="`).concat(z,'" data-name>').concat(Tt,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(r,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(w||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(Vc,">").concat(Jt||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var t=this,e=this,r=e.model,o=e.config,l=o.onInit,f=r.components();this.listenTo(f,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(d){return t.listenTo(r,d[0],d[1])}),this.$el.data("model",r),this.$el.data("collection",f),r.viewLayer=this,l.bind(this)({component:r,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},n.prototype.updateVisibility=function(){var t=this,e=t.pfx,r=t.model,o=t.module,l="".concat(e,"layer-hidden"),f=!o.isVisible(r),d=f?"addClass":"removeClass";this.$el[d](l),this.getVisibilityEl()[d]("".concat(e,"layer-off"))},n.prototype.updateMove=function(){var t=this,e=t.model,r=t.config,o=this.getItemContainer().find("[".concat(Vc,"]"))[0];if(o){var l=e.get("draggable")&&r.sortable;o.style.display=l?"":"none"}},n.prototype.toggleVisibility=function(t){t==null||t.stopImmediatePropagation();var e=this,r=e.module,o=e.model;r.setVisible(o,!r.isVisible(o))},n.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName();d[hp]="true",d.focus(),document.execCommand("selectAll",!1),r.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},n.prototype.handleEditKey=function(t){t.stopPropagation(),((0,Kt.kl)(t)||(0,Kt.r$)(t))&&this.handleEditEnd(t)},n.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=e.model,h=this.getInputName(),v=h.textContent;h.scrollLeft=0,h[hp]="false",d.setName(v),r.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,l="open",f="".concat(o,"layer-open"),d=this.getCaret();this.module.isOpen(r)?(e.addClass(l),d.addClass(f)):(e.removeClass(l),d.removeClass(f))},n.prototype.toggleOpening=function(t){var e=this,r=e.model,o=e.module;t==null||t.stopImmediatePropagation(),r.get("components").length&&o.setOpen(r,!o.isOpen(r))},n.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{selected:!0},{event:t})},n.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!0})},n.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!1})},n.prototype.startSort=function(t){var e,r,o;t.stopPropagation();var l=this,f=l.em,d=l.sorter,h=l.model;if(!(t.button&&t.button!==0)&&d){var v=((r=(e=h.delegate)===null||e===void 0?void 0:e.move)===null||r===void 0?void 0:r.call(e,h))||h;d.onStart=fp(f),d.onMoveClb=dp(f),d.onEndMove=pp(f,[v]);var m=((o=v.viewLayer)===null||o===void 0?void 0:o.el)||t.target;d.startSort(m)}},n.prototype.updateStatus=function(){xr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},n.prototype.checkChildren=function(){var t=this,e=t.model,r=t.clsNoChild,o=t.module,l=o.getComponents(e).length,f=this.getItemContainer(),d=f.find(".".concat(this.clsTitle)),h=f.find("[data-count]");d[l?"removeClass":"addClass"](r),h.html("".concat(l||"")),!l&&o.setOpen(e,!1)},n.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(t){var e,r=(0,S.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;r&&(this.stopListening(),this.model=r,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){var t=this.parentView,e=t||this;e.render()},n.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return O.G7.prototype.remove.apply(this,t),this.__clearItems(),this},n.prototype.render=function(){var t=this,e=t.model,r=t.config,o=t.pfx,l=t.ppfx,f=t.opt,d=t.sorter;this.__clearItems();var h=f.opened,v=f.module,m=f.ItemView,w=!v.__isLayerable(e),T=this.$el.empty(),I=f.level+1;delete this.inputName,this.items=new tv({ItemView:m,collection:e.get("components"),config:r,sorter:d,opened:h,parentView:this,parent:e,level:I,module:v});var W=this.items.render().$el;return!r.showWrapper&&I===1?T.append(W):(T.html(this.template(e)),T.find(".".concat(this.clsChildren)).append(W)),!v.isVisible(e)&&(this.className+=" ".concat(o,"hide")),w&&(this.className+=" ".concat(l,"hidden")),T.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var t=this,e=t.model,r=t.config,o=t.el,l=r.onRender,f={component:e,el:o};l.bind(this)(f),this.em.trigger("layer:render",f)},n}(O.G7);const uv=lv;var cv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pd=function(){return pd=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pd.apply(this,arguments)},vp="layer",hd="".concat(vp,":"),gp="".concat(hd,"root"),yp="".concat(hd,"component"),fv="".concat(hd,"custom"),dv={all:vp,root:gp,component:yp,custom:fv},vd={mediaText:""},pv=["open","status","locked","custom-name","components","classes"].map(function(a){return"".concat(De.g.update,":").concat(a)}).join(" "),hv=function(a){return a===void 0&&(a={}),(a.display||"").trim().indexOf("none")===0},vv=function(a){cv(n,a);function n(t){var e=a.call(this,t,"LayerManager",Zh)||this;return e.events=dv,(0,S.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new re.Z(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return n.prototype.onLoad=function(){var t=this,e=this,r=e.em,o=e.config,l=e.model;l.listenTo(r,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(r,pv,this.__onComponent),this.componentChanged(),l.listenToOnce(r,"load",function(){t.setRoot(o.root),t.__appendTo()})},n.prototype.setRoot=function(t){var e=this.em.getWrapper(),r=(0,tt.isComponent)(t)?t:e;return t&&(0,S.isString)(t)&&(0,tt.hasWin)()&&(r=e.find(t)[0]||e),this.model.set("root",r),r},n.prototype.getRoot=function(){return this.model.get("root")},n.prototype.getComponents=function(t){var e=this;return t.components().filter(function(r){return e.__isLayerable(r)})},n.prototype.setOpen=function(t,e){t.set("open",e)},n.prototype.isOpen=function(t){return!!t.get("open")},n.prototype.setVisible=function(t,e){var r="__prev-display",o=t.getStyle(vd),l=o.display;if(e){var f=t.get(r);delete o.display,f&&(o.display=f,t.unset(r))}else l&&t.set(r,l),o.display="none";t.setStyle(o,vd),this.updateLayer(t),this.em.trigger("component:toggled")},n.prototype.isVisible=function(t){return!hv(t.getStyle(vd))},n.prototype.setLocked=function(t,e){t.set("locked",e)},n.prototype.isLocked=function(t){return!!t.get("locked")},n.prototype.setName=function(t,e){t.set("custom-name",e)},n.prototype.getName=function(t){return t.getName()},n.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},n.prototype.setLayerData=function(t,e,r){var o;r===void 0&&(r={});var l=this,f=l.em,d=l.config,h=e.open,v=e.selected,m=e.hovered,w=e.visible,T=e.locked,I=e.name,W=pd({fromLayers:!0},r);if((0,tt.isDef)(h)&&this.setOpen(t,h),(0,tt.isDef)(v))if(v){f.setSelected(t,W);var z=d.scrollCanvas;z&&((o=t.views)===null||o===void 0||o.forEach(function(st){return st.scrollIntoView(z)}))}else f.removeSelected(t,W);(0,tt.isDef)(m)&&d.showHover&&(m?f.setHovered(t,W):f.setHovered(null,W)),(0,tt.isDef)(w)&&w!==this.isVisible(t)&&this.setVisible(t,w),(0,tt.isDef)(T)&&this.setLocked(t,T),(0,tt.isDef)(I)&&this.setName(t,I)},n.prototype.componentChanged=function(t,e){var r;if(e===void 0&&(e={}),!e.fromLayers){var o=this,l=o.em,f=o.config,d=f.scrollLayers,h=this.model.get("opened"),v=l.getSelected(),m=v==null?void 0:v.parent();for(var w in h)h[w].set("open",!1),delete h[w];for(;m;)m.set("open",!0),h[m.cid]=m,m=m.parent();if(v&&d){var T=(r=v.viewLayer)===null||r===void 0?void 0:r.el;T==null||T.scrollIntoView(d)}}},n.prototype.getAll=function(){return this.view},n.prototype.render=function(){var t,e,r=this,o=r.config,l=r.model,f=uv.extend(o.extend);return this.view=new f({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:f,level:0,config:o,opened:l.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},n.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},n.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(gp,e),this.__trgCustom()},n.prototype.__onComponent=function(t){this.updateLayer(t)},n.prototype.__isLayerable=function(t){var e=t.get("tagName"),r=this.config.hideTextnode,o=!r||!t.isInstanceOf("textnode")&&e!=="br";return o&&t.get("layerable")},n.prototype.__trgCustom=function(t){var e=this,r=e.__ctn,o=e.em,l=e.events;this.__ctn=r||(t==null?void 0:t.container),o.trigger(l.custom,{container:this.__ctn,root:this.getRoot()})},n.prototype.updateLayer=function(t,e){this.em.trigger(yp,t,e)},n}(Bt);const gv=vv;var yv={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};const mv=yv;var _v=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mp=function(a){_v(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,S.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{type:"",src:""}},n.prototype.getType=function(){return this.get("type")},n.prototype.getSrc=function(){return this.get("src")},n.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},n.prototype.getExtension=function(){return this.getFilename().split(".").pop()},n}(O.Hn);const gd=mp;mp.prototype.idAttribute="src";var wv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fc=function(){return Fc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Fc.apply(this,arguments)},bv=function(a){wv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Fc(Fc({},gd.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},n}(gd);const Cv=bv;var xv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sv=function(a){xv(n,a);function n(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var r=t.config||{};e.config=r,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var o=e.init&&e.init.bind(e);return o&&o(t),e}return n.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var r=this.pfx;return`
      <div class="`.concat(r,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(r,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(r,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},n.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,S.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},n.prototype.getPreview=function(){return""},n.prototype.getInfo=function(){return""},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(O.G7);const Ov=Sv;var Tv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_p=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},wp=function(a){Tv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getPreview=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.model,l=o.get("src");return ut(bp||(bp=_p([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,l,e,r)},n.prototype.getInfo=function(){var t=this,e=t.pfx,r=t.model,o=r.get("name"),l=r.get("width"),f=r.get("height"),d=r.get("unitDim"),h=l&&f?"".concat(l,"x").concat(f).concat(d):"";return o=o||r.getFilename(),ut(Cp||(Cp=_p([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,o,e,h)},n.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},n.prototype.onClick=function(){var t=this,e=t.model,r=t.pfx,o=this.__getBhv().select,l=this.config.onClick,f=this.collection;f.trigger("deselectAll"),this.$el.addClass(r+"highlight"),(0,S.isFunction)(o)?o(e,!1):(0,S.isFunction)(l)?l(e):this.updateTarget(f.target)},n.prototype.onDblClick=function(){var t=this,e=t.em,r=t.model,o=this.__getBhv().select,l=this.config.onDblClick,f=this.collection,d=f.target,h=f.onSelect;(0,S.isFunction)(o)?o(r,!0):(0,S.isFunction)(l)?l(r):(this.updateTarget(d),e==null||e.Modal.close()),(0,S.isFunction)(h)&&h(r)},n.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(Ov);const Ev=wp;wp.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var bp,Cp,Hc=function(){return Hc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Hc.apply(this,arguments)},Pv={types:[],initialize:function(a,n){var t=this;n===void 0&&(n={});var e=n.em;this.em=e,this.opts=n,this.model=function(o,l){o===void 0&&(o={}),l===void 0&&(l={});var f,d,h;if(o&&o.type){var v=t.getBaseType();h=t.getType(o.type),f=h?h.model:v.model,d=h?h.view:v.view}else{var m=t.recognizeType(o);h=m.type,f=h.model,d=h.view,o=m.attributes}var w=new f(o,Hc(Hc({},l),{em:e}));return w.typeView=d,w};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t],r=e.isType(a);if(r=typeof r=="boolean"&&r?{type:e.id}:r,r)return{type:e,attributes:r}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t];if(e.id===a)return e}},addType:function(a,n){var t=this.getType(a),e=this.getBaseType(),r=t?t.model:e.model,o=t?t.view:e.view,l=n.model,f=n.view,d=n.isType;l=l instanceof O.Hn||(0,S.isFunction)(l)?l:r.extend(l||{}),f=f instanceof O.G7||(0,S.isFunction)(f)?f:o.extend(f||{}),this.extendViewApi&&!n.model&&!n.view&&(f=f.extend(n)),t?(t.model=l,t.view=f,t.isType=d||t.isType):(n.id=a,n.model=l,n.view=f,n.isType=d||function(h){if(h&&h.type==a)return!0},this.getTypes().unshift(n))}};const xp=Pv;var Av=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kv=O.FE.extend(xp),Sp=function(a){Av(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(kv);const yd=Sp;Sp.prototype.types=[{id:"image",model:Cv,view:Ev,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var md;(function(a){a.add="asset:add",a.remove="asset:remove",a.removeBefore="asset:remove:before",a.update="asset:update",a.open="asset:open",a.close="asset:close",a.uploadStart="asset:upload:start",a.uploadEnd="asset:upload:end",a.uploadError="asset:upload:error",a.uploadResponse="asset:upload:response",a.custom="asset:custom",a.all="asset"})(md||(md={}));const Op=md;var Mv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tp=function(a){Mv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var r=e.collection;return e.listenTo(r,"reset",e.renderAssets),e.listenTo(r,"add",e.addToAsset),e.listenTo(r,"remove",e.removedAsset),e.listenTo(r,"deselectAll",e.deselectAll),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(r,"field ").concat(e,`add-field">
              <input placeholder="`).concat(o==null?void 0:o.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(r,'btn-prim">').concat(o==null?void 0:o.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},n.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),r=e&&e.value.trim(),o=this.config.handleAdd;if(r){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),o?o.bind(this)(r):this.options.globalCollection.add(r,{at:0})}},n.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},n.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},n.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},n.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},n.prototype.addAsset=function(t,e){e===void 0&&(e=null);var r=e,o=this.collection,l=this.config,f=new t.typeView({model:t,collection:o,config:l}).render().el;if(r)r.appendChild(f);else{var d=this.getAssetsEl();d&&d.insertBefore(f,d.firstChild)}return f},n.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var r=this.config.noAssets;r&&e.append(r)}},n.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},n.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),r=this.$el.find(".".concat(this.pfx,"assets"));r.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return t.addAsset(o,e)}),r.append(e)},n.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},n}(O.G7);const Lv=Tp;Tp.prototype.events={submit:"handleSubmit"};var Dv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jv=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Iv=function(a){Dv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var r=t.config||{};e.module=t.module,e.config=r,e.em=e.config.em,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=r.disableUpload!==void 0?r.disableUpload:!r.upload&&!r.embedAsBase64,e.multiUpload=r.multiUpload!==void 0?r.multiUpload:!0;var o=r.uploadFile;return o?e.uploadFile=o.bind(e):!r.upload&&r.embedAsBase64&&(e.uploadFile=n.embedAsBase64),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.pfx,r=t.title,o=t.uploadId,l=t.disabled,f=t.multiUpload;return ut(Ep||(Ep=jv([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,r,o,l?"disabled":"",f?"multiple":"")},n.prototype.events=function(){return{"change [data-input]":"uploadFile"}},n.prototype.onUploadStart=function(){var t=this.module;t==null||t.__propEv(t.events.uploadStart)},n.prototype.onUploadEnd=function(t){var e=this,r=e.$el,o=e.module;o==null||o.__propEv(o.events.uploadEnd,t);var l=r.find("input");l&&l.val("")},n.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e==null||e.__propEv(e.events.uploadError,t)},n.prototype.onUploadResponse=function(t,e){var r=this,o=r.module,l=r.config,f=r.target,d;try{d=typeof t=="string"?JSON.parse(t):t}catch{d=t}o==null||o.__propEv(o.events.uploadResponse,d),l.autoAdd&&f&&f.add(d.data,{at:0}),this.onUploadEnd(t),e==null||e(d)},n.prototype.uploadFile=function(t,e){var r=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload,d=f&&f(o);if(d!==!1){var h=new FormData,v=l.params,m=l.customFetch,w=l.fetchOptions;for(var T in v)h.append(T,v[T]);if(this.multiUpload)for(var I=0;I<o.length;I++)h.append("".concat(l.uploadName).concat(l.multiUploadSuffix),o[I]);else o.length&&h.append(l.uploadName,o[0]);var W=l.upload,z=l.headers,st="X-Requested-With";if(typeof z[st]>"u"&&(z[st]="XMLHttpRequest"),W){this.onUploadStart();var St={method:"post",credentials:l.credentials||"include",headers:z,body:h},Tt=(w==null?void 0:w(St))||St,zt=m?m(W,Tt):b(W,Tt).then(function(le){return(le.status/200|0)==1?le.text():le.text().then(function(Se){return Promise.reject(Se)})});return zt.then(function(le){return r.onUploadResponse(le,e)}).catch(function(le){return r.onUploadError(le)})}}},n.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(r){e.className="",r.preventDefault(),t.uploadFile(r)})}},n.prototype.initDropzone=function(t){var e=this,r=0,o=this.config,l=t.model,f=t.el,d=l.Editor,h=l.Canvas.getBody(),v=this.ppfx,m="".concat(v,"dropzone-active"),w="".concat(v,"dropzone"),T=function(){f.className=f.className.replace(m,"").trim(),r=0},I=function(){return r||(f.className+=" ".concat(m),r=1),!1},W=function(){return T(),!1},z=function(st){if(T(),st.preventDefault(),st.stopPropagation(),e.uploadFile(st),o.openAssetsOnDrop&&d){var St=d.getSelected();d.runCommand("open-assets",{target:St,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(w,'">').concat(o.dropzoneContent,"</div>")),T(),"draggable"in f&&[f,h].forEach(function(st){st.ondragover=I,st.ondragleave=W,st.ondrop=z})},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.em;return e.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:r})),this.initDrop(),e.attr("class",r+"file-uploader"),this},n.embedAsBase64=function(t,e){var r=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var f=[],d=/^(.+)\/(.+)$/,h=function(T){var I=new Promise(function(W,z){var st=new FileReader;st.addEventListener("load",function(St){var Tt,zt=T.name,le=d.exec(T.type);if(le?Tt=le[1]:Tt=T.type,Tt==="image"){var Se={src:st.result,name:zt,type:Tt,height:0,width:0},Pe=new Image;Pe.addEventListener("error",function(Jt){z(Jt)}),Pe.addEventListener("load",function(){Se.height=Pe.height,Se.width=Pe.width,W(Se)}),Pe.src=Se.src}else W(Tt?{src:st.result,name:zt,type:Tt}:st.result)}),st.addEventListener("error",function(St){z(St)}),st.addEventListener("abort",function(St){z("Aborted")}),st.readAsDataURL(T)});f.push(I)},v=0,m=o;v<m.length;v++){var w=m[v];h(w)}return Promise.all(f).then(function(T){l.data=T,r.onUploadResponse(l,e)},function(T){r.onUploadError(T)})},n}(O.G7);const Rv=Iv;var Ep,Nv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cl=function(){return cl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},cl.apply(this,arguments)},Pp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},cu="open-assets",Vv=function(a){Nv(n,a);function n(t){var e=a.call(this,t,"AssetManager",new yd([],t),Op,mv)||this;e.storageKey="assets",e.Asset=gd,e.Assets=yd,e.events=Op;var r=e,o=r.all,l=r.config;e.assetsVis=new yd([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),o.on("add",function(d){return e.getAllVisible().add(d)}),o.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,S.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.open=function(t){t===void 0&&(t={});var e=this.em.Commands;e.run(cu,cl({types:["image"],select:function(){}},t))},n.prototype.close=function(){var t=this.em.Commands;t.stop(cu)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(cu))},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof e.at>"u"&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t,e=this.__getBehaviour();return e.container||((t=this.am)===null||t===void 0?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var r=this.__viewParams();r.fu=this.FileUploader(),this.am=new Lv(cl({},r)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new Rv(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this,r=e.em,o=e.events;r.Commands.__onRun(cu,function(){return t.__propEv(o.open)}),r.Commands.__onStop(cu,function(){return t.__propEv(o.close)})},n.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__propEv=function(t){for(var e,r,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];(e=this.em).trigger.apply(e,Pp([t],o,!1)),(r=this.getAll()).trigger.apply(r,Pp([t],o,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;!t.container&&!e.open||this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(r,o){return t.remove(r,o)},select:function(r,o){var l=t.add(r);(0,S.isFunction)(e.select)&&e.select(l,o)},options:e.options||{}}},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=cl(cl({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},n}(Ot);const Fv=Vv;var Hv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bv=function(a){Hv(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.em,l={};r.em=o,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(h){return r.unset(h)}));var f=t.frames||[l],d=new Re(o.Canvas,f);return d.page=r,r.set("frames",d),!r.getId()&&r.set("id",o==null?void 0:o.Pages._createId()),o==null||o.UndoManager.add(d),r}return n.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get("frames")},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get("name")},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=O.Hn.prototype.toJSON.call(this,t),r=(0,S.result)(this,"defaults");return(0,S.forEach)(e,function(o,l){l.indexOf("_")===0&&delete e[l]}),(0,S.forEach)(r,function(o,l){e[l]===o&&delete e[l]}),e},n}(O.Hn);const _d=Bv;var Uv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bc=function(){return Bc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Bc.apply(this,arguments)},Wv=function(a){Uv(n,a);function n(t,e){var r=a.call(this,t)||this;return r.on("reset",r.onReset),r.on("remove",r.onRemove),r.model=function(o,l){return l===void 0&&(l={}),new _d(o,Bc(Bc({},l),{em:e}))},r}return n.prototype.onReset=function(t,e){var r=this,o;(o=e==null?void 0:e.previousModels)===null||o===void 0||o.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t==null||t.onRemove()},n}(O.FE);const zv=Wv;var Kv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gv=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Ap="change:selected",kp="main",$v=function(a){Kv(n,a);function n(t){var e=a.call(this,t,"PageManager",new zv([],t),gr)||this;e.events=gr,e.storageKey="pages",(0,S.bindAll)(e,"_onPageChange");var r=new re.Z({_undo:!0});return e.model=r,e.pages.on("reset",function(o){return o.at(0)&&e.select(o.at(0))}),e.pages.on("all",e.__onChange,e),r.on(Ap,e._onPageChange),e}return Object.defineProperty(n.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),n.prototype.getAll=function(){return Gv([],this.all.models,!0)},n.prototype.__onChange=function(t,e,r,o){var l=this,f=l.em,d=l.events,h=o||r;f.trigger(d.all,{event:t,page:e,options:h})},n.prototype.onLoad=function(){var t,e=this,r=e.pages,o=e.config,l=e.em,f={silent:!0},d=((t=o.pages)===null||t===void 0?void 0:t.map(function(v){return new _d(v,{em:l,config:o})}))||[];r.add(d,f);var h=r.length?this._initPage():this.add({type:kp},f);h&&this.select(h,f)},n.prototype._onPageChange=function(t,e,r){var o=this,l=o.em,f=o.events,d=l.Layers,h=e.getMainComponent();d&&h&&d.setRoot(h),l.trigger(f.select,e,t.previous("selected")),this.__onChange(Ap,e,r)},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.model,o=t.pages,l=e.UndoManager;l.add(r),l.add(o),o.on("add remove reset change",function(f,d,h){return e.changesUp(h||d)})},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=o.em,f=o.events;t.id=t.id||this._createId();var d=function(){var h=r.pages.add(new _d(t,{em:r.em,config:r.config}),e);return e.select&&r.select(h),h};return!e.silent&&l.trigger(f.addBefore,t,d,e),e.abort?void 0:d()},n.prototype.remove=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=o.em,f=o.events,d=(0,S.isString)(t)?this.get(t):t,h=function(){return d&&r.pages.remove(d,e),d};return!e.silent&&l.trigger(f.removeBefore,d,h,e),!e.abort&&h()},n.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},n.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===kp})[0]||t.at(0)},n.prototype.getAllWrappers=function(){var t=this.getAll();return(0,S.unique)((0,S.flatten)(t.map(function(e){return e.getAllFrames().map(function(r){return r.getComponent()})})))},n.prototype.select=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.model,f=r.events,d=(0,S.isString)(t)?this.get(t):t;return d&&(o.trigger(f.selectBefore,d,e),l.set("selected",d,e)),this},n.prototype.getSelected=function(){return this.model.get("selected")},n.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){var e=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach(function(r){return r.getFrames().initRefs()}),e},n.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},n.prototype._createId=function(){var t=this.getAll(),e=t.length+16,r=this.getAllMap(),o;do o=(0,tt.createId)(e);while(r[o]);return o},n}(Ot);const qv=$v;var wd={placeholder:"eg. Text here"},Yv={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:wd,alt:wd,title:wd,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};const Xv=Yv;var bd;(function(a){a.add="i18n:add",a.update="i18n:update",a.locale="i18n:locale"})(bd||(bd={}));const Zv=bd;var Jv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qv=function(a){Jv(n,a);function n(t){var e=a.call(this,t,"I18n",Xv)||this;e.events=Zv;var r=e.config.messagesAdd;return r&&e.addMessages(r),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return n.prototype.setLocale=function(t){var e=this,r=e.em,o=e.config,l=e.events;return r.trigger(l.locale,{value:t,valuePrev:o.locale}),o.locale=t,this},n.prototype.getLocale=function(){return this.config.locale},n.prototype.getMessages=function(t,e){e===void 0&&(e={});var r=this.config.messages;return t&&!r[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?r[t]:r},n.prototype.setMessages=function(t){var e=this,r=e.em,o=e.config,l=e.events;return o.messages=t,r.trigger(l.update,t),this},n.prototype.addMessages=function(t){var e=this,r=e.em,o=e.events,l=e.config,f=l.messages;return r.trigger(o.add,t),this.setMessages((0,tt.deepMerge)(f,t)),this},n.prototype.t=function(t,e){e===void 0&&(e={});var r=this.config,o=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||r.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,f,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,S.isString)(d)?this._addParams(d,o):d,d},n.prototype._localLang=function(){var t=(0,tt.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},n.prototype._addParams=function(t,e){var r=new RegExp("{([\\w\\d-]*)}","g");return t.replace(r,function(o,l){return e[l]||""}).trim()},n.prototype._getMsg=function(t,e,r){r===void 0&&(r={});var o=this.getMessages(e,r);if(o){var l=o[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,d){if(!(0,S.isUndefined)(f))return f[d]},o)),l}},n.prototype._debug=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.config;(e.debug||l.debug)&&o&&o.logWarning(t)},n.prototype.destroy=function(){},n}(Bt);const tg=Qv;var eg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),li=function(){return li=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},li.apply(this,arguments)},rg=function(){},ng=Qe.q.Target,Mp={id:"sorter-target",type:ng},og=function(a){eg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,S.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var r=e.container;this.el=typeof r=="string"?document.querySelector(r):r,this.$el=(0,D.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||rg,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale;var o=this.em;o!=null&&o.on&&(o.on(o.Canvas.events.refresh,this.updateOffset),this.updateOffset())},n.prototype.getScale=function(){return(0,S.result)(this,"scale")||1},n.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,D.default)(this.el)}return this.el},n.prototype.getDocuments=function(t){var e=this.em,r=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,o=[document];return r&&o.push(r),o},n.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},n.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},n.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var r=e.Canvas,o=r.getDocument(),l=null;if(o.caretRangeFromPoint){var f=(0,Kt.VB)(t);l=o.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=o.createRange(),l.setStart(t.rangeParent,t.rangeOffset));var d=r.getWindow().getSelection();r.getFrameEl().focus(),d==null||d.removeAllRanges(),l&&(d==null||d.addRange(l)),this.setContentEditable(this.activeTextModel,!0)}},n.prototype.setContentEditable=function(t,e){if(t){var r=t.getEl();r.contentEditable!=e&&(r.contentEditable=e)}},n.prototype.toggleSortCursor=function(t){var e=this.em,r=e==null?void 0:e.Canvas;r&&(t?r.startAutoscroll():r.stopAutoscroll())},n.prototype.setDragHelper=function(t,e){for(var r=e||"",o=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),d="",h=0;h<f.length;h++){var v=f[h];d+="".concat(v,":").concat(f.getPropertyValue(v),";")}if(document.body.appendChild(o),o.className+=" ".concat(this.pfx,"bdrag"),o.setAttribute("style",d),this.dragHelper=o,o.style.width="".concat(l.width,"px"),o.style.height="".concat(l.height,"px"),r&&this.moveDragHelper(r),this.em){var m=(0,D.default)(this.em.Canvas.getBody().ownerDocument);m.off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}(0,D.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},n.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(!(!this.dragHelper||!e)){var r=t.pageY,o=t.pageX,l=0,f=0,d=e.defaultView||e.parentWindow,h=d.frameElement,v=this.dragHelper.style;if(h){var m=h.getBoundingClientRect();l=m.top+document.documentElement.scrollTop,f=m.left+document.documentElement.scrollLeft,r=t.clientY,o=t.clientX}v.top=r+l+"px",v.left=o+f+"px"}},n.prototype.matches=function(t,e){return tt.matches.call(t,e)},n.prototype.closest=function(t,e){if(t)for(var r=t.parentNode;r&&r.nodeType===1;){if(this.matches(r,e))return r;r=r.parentNode}},n.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},n.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),r=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n.prototype.startSort=function(t,e){var r,o;e===void 0&&(e={});var l=this,f=l.em,d=l.itemSel,h=l.containerSel,v=l.plh,m=this.getContainerEl(e.container),w=this.getDocuments(t),T;delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(d,", ").concat(h))&&(t=this.closest(t,d)),this.sourceEl=t,v||(this.plh=this.createPlaceholder(),m.appendChild(this.plh)),t&&(T=this.getSourceModel(t),T!=null&&T.set&&T.set("status","freezed"),this.srcModel=T),(0,Kt.on)(m,"mousemove dragover",this.onMove),(0,Kt.on)(w,"mouseup dragend touchend",this.endMove),(0,Kt.on)(w,"keydown",this.rollback),this.onStart({sorter:this,target:T,parent:T&&((r=T.parent)===null||r===void 0?void 0:r.call(T)),index:T&&((o=T.index)===null||o===void 0?void 0:o.call(T))}),f==null||f.clearSelection(),this.toggleSortCursor(!0),f==null||f.trigger("sorter:drag:start",t,T)},n.prototype.getTargetModel=function(t){var e=t||this.target;return(0,D.default)(e).data("model")},n.prototype.getSourceModel=function(t,e){var r=this,o=e===void 0?{}:e,l=o.target,f=o.avoidChildren,d=f===void 0?1:f,h=this,v=h.em,m=h.sourceEl,w=t||m,T=this,I=T.dropModel,W=T.dropContent,z=function(zt){return zt&&l&&zt.opt&&zt.opt.avoidChildren&&r.isTextableActive(zt,l)};if(W&&v){if(z(I)&&(I=void 0),!I){var st=v.Components.getComponents(),St={avoidChildren:d,avoidStore:1,avoidUpdateStyle:1},Tt=st.add(W,li(li({},St),{temporary:!0}));if(I=st.remove(Tt,St),I=I instanceof Array?I[0]:I,this.dropModel=I,z(I))return this.getSourceModel(w,{target:l,avoidChildren:0})}return I}return w&&(0,D.default)(w).data("model")},n.prototype.selectTargetModel=function(t,e){if(!(t instanceof O.FE)&&!(e&&e===t)){var r=this.targetModel;if(r&&r!==this.srcModel&&r.set("status",""),t!=null&&t.set){var o=this.em.Canvas,l=Qe.q.Select,f=Qe.q.Hover,d=Qe.q.Spacing;[l,f,d].forEach(function(h){return o.removeSpots({type:h})}),o.addSpot(li(li({},Mp),{component:t})),t.set("status","selected-parent"),this.targetModel=t}}},n.prototype.onMove=function(t){var e=t,r=this,o=r.em,l=r.onMoveClb,f=r.plh,d=r.customTarget;this.moved=!0;var h=f.style.display;(!h||h==="none")&&(f.style.display="block");var v=this.offset(this.el);this.elT=this.wmargin?Math.abs(v.top):v.top,this.elL=this.wmargin?Math.abs(v.left):v.left;var m=t.pageY-this.elT+this.el.scrollTop,w=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&o){var T=o.Canvas.getMouseRelativeCanvas(t,{noScroll:1});w=T.x,m=T.y}this.rX=w,this.rY=m,this.eventMove=t;var I=this.getSourceModel(),W=d?d({sorter:this,event:t}):t.target,z=this.dimsFromTarget(W,w,m),st=this.target,St=st&&this.getTargetModel(st);if(this.selectTargetModel(St,I),St||(f.style.display="none"),!!st){this.lastDims=z;var Tt=this.findPosition(z,w,m);this.isTextableActive(I,St)?(this.activeTextModel=St,f.style.display="none",this.lastPos=Tt,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,(!this.lastPos||this.lastPos.index!=Tt.index||this.lastPos.method!=Tt.method)&&(this.movePlaceholder(this.plh,z,Tt,this.prevTargetDim),this.$plh||(this.$plh=(0,D.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=Tt)),(0,S.isFunction)(l)&&l({event:t,target:I,parent:St,index:Tt.index+(Tt.method=="after"?1:0)}),o&&o.trigger("sorter:drag",{target:st,targetModel:St,sourceModel:I,dims:z,pos:Tt,x:w,y:m})}},n.prototype.isTextableActive=function(t,e){var r;return((r=t==null?void 0:t.get)===null||r===void 0?void 0:r.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},n.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},n.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var r=t;return r.offsetHeight,!!this.styleInFlow(r,e)},n.prototype.styleInFlow=function(t,e){if(!(0,Kt.BM)(t)){var r=t.style||{},o=(0,D.default)(t),l=e&&(0,D.default)(e);if(!(r.overflow&&r.overflow!=="visible")){var f=o.css("float");if(!(f&&f!=="none")&&!(l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(r.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(o.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},n.prototype.validTarget=function(t,e){var r,o,l=this.lastPos,f=this.getTargetModel(t),d=this.getSourceModel(e,{target:f});e=(r=d==null?void 0:d.view)===null||r===void 0?void 0:r.el,t=(o=f==null?void 0:f.view)===null||o===void 0?void 0:o.el;var h={valid:!0,src:e,srcModel:d,trg:t,trgModel:f,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return h.valid=!1,h;var v=l?l.method==="after"?l.indexEl+1:l.indexEl:f.components().length,m=d.get("draggable");if((0,S.isFunction)(m)){var w=m(d,f,v);h.dragInfo=w,h.draggable=w,m=w}else m=m instanceof Array?m.join(", "):m,h.dragInfo=m,m=(0,S.isString)(m)?this.matches(t,m):m,h.draggable=m;var T=f.get("droppable");if((0,S.isFunction)(T)){var w=T(d,f,v);h.droppable=w,h.dropInfo=w,T=w}else T=T instanceof O.FE?1:T,T=T instanceof Array?T.join(", "):T,h.dropInfo=T,T=(0,S.isString)(T)?this.matches(e,T):T,T=m&&this.isTextableActive(d,f)?1:T,h.droppable=T;return(!T||!m)&&(h.valid=!1),h},n.prototype.dimsFromTarget=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var o=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(o&&o.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,r);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,r)||!this.nested&&!this.cacheDims.length){var d=this.targetP;d&&this.validTarget(d).valid&&(l=this.cacheDimsP,this.target=d)}return delete this.lastPos,l},n.prototype.getTargetFromEl=function(t){var e=t,r,o=this.targetPrev,l=this.em,f=this.containerSel,d=this.itemSel;if(this.matches(e,"".concat(d,", ").concat(f))||(e=this.closest(e,d)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),o&&o!=e&&delete this.targetPrev,!this.targetPrev){r=this.closest(e,f);var h=this.validTarget(e);if(l&&l.trigger("sorter:drag:validation",h),!h.valid&&r)return this.getTargetFromEl(r);this.targetPrev=e}return this.nearElBorders(e)&&(r=this.closest(e,f),r&&this.validTarget(r).valid&&(e=r)),e},n.prototype.nearElBorders=function(t){var e=10,r=t.getBoundingClientRect(),o=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,d=l.y,h=r.top+o.scrollTop,v=r.left+o.scrollLeft,m=r.width,w=r.height;if(d<h+e||d>h+w-e||f<v+e||f>v+m-e)return 1},n.prototype.getCurrentPos=function(){var t=this.eventMove,e=(t==null?void 0:t.pageX)||0,r=(t==null?void 0:t.pageY)||0;return{x:e,y:r}},n.prototype.getDim=function(t){var e=this,r=e.em,o=e.canvasRelative,l=r==null?void 0:r.Canvas,f=l?l.getElementOffsets(t):{},d,h,v,m;if(o&&r){var w=l.getElementPos(t,{noScroll:1});d=w.top,h=w.left,v=w.height,m=w.width}else{var T=this.offset(t);d=this.relative?t.offsetTop:T.top-(this.wmargin?-1:1)*this.elT,h=this.relative?t.offsetLeft:T.left-(this.wmargin?-1:1)*this.elL,v=t.offsetHeight,m=t.offsetWidth}return{top:d,left:h,height:v,width:m,offsets:f}},n.prototype.getChildrenDim=function(t){var e=this,r=[];if(!t)return r;var o=this.getTargetModel(t);if(o&&o.view&&!this.ignoreViewChildren){var l=o.getCurrentView?o.getCurrentView():o.view;t=l.getChildrenContainer()}return(0,S.each)(t.children,function(f,d){var h=f,v=(0,tt.getModel)(h,D.default),m=v&&v.index?v.index():d;if(!(!(0,Kt.BM)(h)&&!e.matches(h,e.itemSel))){var w=e.getDim(h),T=e.direction,I;T=="v"?I=!0:T=="h"?I=!1:I=e.isInFlow(h,t),w.dir=I,w.el=h,w.indexEl=m,r.push(w)}}),r},n.prototype.nearBorders=function(t,e,r){var o=!1,l=this.borderOffset,f=e||0,d=r||0,h=t.top,v=t.left,m=t.height,w=t.width;return(h+l>d||d>h+m-l||v+l>f||f>v+w-l)&&(o=!0),o},n.prototype.findPosition=function(t,e,r){for(var o={index:0,indexEl:0,method:"before"},l=0,f=0,d=0,h=0,v=0,m=0,w=0,T,I=0,W=t.length;I<W;I++){T=t[I];var z=T.top,st=T.left,St=T.height,Tt=T.width;if(d=st+Tt,w=z+St,v=st+Tt/2,m=z+St/2,!(f&&st>f||h&&m>=h||l&&d<l))if(o.index=I,o.indexEl=T.indexEl,!T.dir)r<w&&(h=w),e<v?(f=v,o.method="before"):(l=v,o.method="after");else if(r<m){o.method="before";break}else o.method="after"}return o},n.prototype.movePlaceholder=function(t,e,r,o){var l=0,f=0,d=0,h="",v="",m="px",w=5,T=r.method,I=e[r.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),I){var W=I.top,z=I.left,st=I.height,St=I.width;I.dir?(h=St+m,v="auto",f=T=="before"?W-l:W+st-l,d=z):(h="auto",v=st-l*2+m,f=W+l,d=T=="before"?z-l:z+St-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested){t.style.display="none";return}if(o){var Tt=o.offsets||{},zt=Tt.paddingTop||w,le=Tt.paddingLeft||w,Se=Tt.borderTopWidth||0,Pe=Tt.borderLeftWidth||0,Jt=Tt.borderRightWidth||0,Ee=Pe+Jt;f=o.top+zt+Se,d=o.left+le+Pe,h=parseInt("".concat(o.width))-le*2-Ee+m,v="auto"}}t.style.top=f+m,t.style.left=d+m,h&&(t.style.width=h),v&&(t.style.height=v)},n.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},n.prototype.sort=function(t,e){var r=t.parents.filter(function(d){return e.parents.includes(d)}),o=r[0];if(!o)return e.model.index()-t.model.index();var l=t.parents[t.parents.indexOf(o)-1],f=e.parents[e.parents.indexOf(o)-1];return f.index()-l.index()},n.prototype.endMove=function(){var t=this,e,r=this.sourceEl,o=[],l=this.getDocuments(),f=this.getContainerEl(),d=this.onEndMove,h=this.onEnd,v=this,m=v.target,w=v.lastPos,T;if((0,Kt.S1)(f,"mousemove dragover",this.onMove),(0,Kt.S1)(l,"mouseup dragend touchend",this.endMove),(0,Kt.S1)(l,"keydown",this.rollback),this.plh.style.display="none",r&&(T=this.getSourceModel()),this.moved&&m){var I=this.toMove,W=(0,S.isArray)(I)?I:I?[I]:[r],z=0;W.length===1?o.push(this.move(m,W[0],w)):W.map(function(Tt){return{model:Tt,parents:t.parents(Tt)}}).sort(this.sort).forEach(function(Tt){var zt=Tt.model,le=zt.index(),Se=zt.parent().getEl();o.push(t.move(m,zt,li(li({},w),{indexEl:w.indexEl-z,index:w.index-z}))),Se===m&&le<=w.index&&z++})}this.plh&&(this.plh.style.display="none");var st=this.dragHelper;if(st&&(st.parentNode.removeChild(st),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),(e=this.em)===null||e===void 0||e.Canvas.removeSpots(Mp),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,S.isFunction)(d)){var St={target:T,parent:T&&T.parent(),index:T&&T.index()};o.length?o.forEach(function(Tt){return d(Tt,t,St)}):d(null,this,li(li({},St),{cancelled:1}))}(0,S.isFunction)(h)&&h({sorter:this})},n.prototype.move=function(t,e,r){var o=this,l=o.em,f=o.dropContent,d=(0,tt.getElement)(e),h=[],v=r.method==="after"?r.indexEl+1:r.indexEl,m=this.validTarget(t,d),w=(0,D.default)(t).data("collection"),T=m.trgModel,I=m.srcModel,W=m.draggable,z=T instanceof O.FE?1:m.droppable,st,St;if(w&&z&&W){var Tt={at:v,action:"move-component"},zt=this.isTextableActive(I,T);if(f)st=(0,S.isFunction)(f)?f():f,Tt.avoidUpdateStyle=!0,Tt.action="add-component";else{var le=I.collection.indexOf(I),Se=w===I.collection,Pe=le===v||le===v-1,Jt=!Se||!Pe||zt;Jt&&(st=I.collection.remove(I,{temporary:!0}),Se&&v>le&&(Tt.at=v-1))}st&&(zt?(delete Tt.at,St=T.getView().insertComponent(st,Tt)):St=w.add(st,Tt)),delete this.dropContent,delete this.prevTarget}else if(l){var Ee=m.dropInfo||(T==null?void 0:T.get("droppable")),Ve=m.dragInfo||(I==null?void 0:I.get("draggable"));!w&&h.push("Target collection not found"),!z&&Ee&&h.push("Target is not droppable, accepts [".concat(Ee,"]")),!W&&Ve&&h.push("Component not draggable, acceptable by [".concat(Ve,"]")),l.logWarning("Invalid target position",{errors:h,model:I,context:"sorter",target:T})}return l==null||l.trigger("sorter:drag:end",{targetCollection:w,modelToDrop:st,warns:h,validResult:m,dst:t,srcEl:d}),St},n.prototype.rollback=function(t){(0,Kt.S1)(this.getDocuments(),"keydown",this.rollback);var e=t.which||t.keyCode;e==27&&(this.moved=!1,this.endMove())},n}(O.G7);const ig=og;var fs=function(){return fs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},fs.apply(this,arguments)},ag=function(a,n){n===void 0&&(n={});var t=n.prefix||"",e=document.createElement("i");return e.className=t+"resizer-h "+t+"resizer-h-"+a,e.setAttribute("data-"+t+"handler",a),e},sg=function(a,n){var t=window,e=a.getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},lg=function(){function a(n){n===void 0&&(n={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=fs({},this.defOpts),this.setOptions(n),(0,S.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(n,t){n===void 0&&(n={}),this.opts=fs(fs({},t?this.defOpts:this.opts),n),this.setup()},a.prototype.setup=function(){var n=this.opts,t=n.prefix||"",e=n.appendTo||document.body,r=this.container;for(r||(r=document.createElement("div"),r.className="".concat(t,"resizer-c"),e.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return o[d]=n[d]?ag(d,n):null});for(var l in o){var f=o[l];f&&r.appendChild(f)}this.handlers=o,this.mousePosFetcher=n.mousePosFetcher,this.updateTarget=n.updateTarget,this.posFetcher=n.posFetcher,this.onStart=n.onStart,this.onMove=n.onMove,this.onEnd=n.onEnd,this.onUpdateContainer=n.onUpdateContainer},a.prototype.toggleFrames=function(n){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,S.each)(t,function(e){return e.style.pointerEvents=n?"none":""})}},a.prototype.isHandler=function(n){var t=this.handlers;for(var e in t)if(t[e]===n)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var n;return(n=this.el)===null||n===void 0?void 0:n.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(n,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(n,t):sg(n)},a.prototype.focus=function(n){n&&n===this.el||(this.el=n,this.updateContainer({forceShow:!0}),(0,Kt.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Kt.S1)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(n){var t=n;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,r=this.getParentEl(),o=this,l=this.opts||{},f=this.mousePosFetcher,d="data-"+l.prefix+"handler",h=this.getElementPos(e,{avoidFrameZoom:!0,avoidFrameOffset:!0}),v=this.getElementPos(r),m=t.target;this.handlerAttr=m.getAttribute(d),this.clickedHandler=m,this.startDim={t:h.top,l:h.left,w:h.width,h:h.height},this.rectDim={t:h.top,l:h.left,w:h.width,h:h.height},this.startPos=f?f(t):{x:t.clientX,y:t.clientY},this.parentDim={t:v.top,l:v.left,w:v.width,h:v.height};var w=this.getDocumentEl();this.docs=w,(0,Kt.on)(w,"pointermove",this.move),(0,Kt.on)(w,"keydown",this.handleKeyDown),(0,Kt.on)(w,"pointerup",this.stop),(0,S.isFunction)(this.onStart)&&this.onStart(t,{docs:w,config:l,el:e,resizer:o}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(n){var t=n,e=this.onMove,r=this.mousePosFetcher,o=r?r(t):{x:t.clientX,y:t.clientY};this.currentPos=o,this.delta={x:o.x-this.startPos.x,y:o.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(n){var t=this.el,e=this.opts,r=this.docs||this.getDocumentEl();(0,Kt.S1)(r,"pointermove",this.move),(0,Kt.S1)(r,"keydown",this.handleKeyDown),(0,Kt.S1)(r,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,S.isFunction)(this.onEnd)&&this.onEnd(n,{docs:r,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(n){var t=this.el,e=this,r=this.opts,o=this.rectDim,l=this.updateTarget,f=this.getSelectedHandler(),d=r.unitHeight,h=r.unitWidth,v=r.keyWidth,m=r.keyHeight;if((0,S.isFunction)(l))l(t,o,{store:n,selectedHandler:f,resizer:e,config:r});else{var w=t.style;w[v]=o.w+h,w[m]=o.h+d}this.updateContainer()},a.prototype.updateContainer=function(n){var t;n===void 0&&(n={});var e=this,r=e.opts,o=e.container,l=e.el,f=o.style;!r.avoidContainerUpdate&&l&&n.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:o,resizer:this,opts:fs(fs({},r),n)})},a.prototype.getSelectedHandler=function(){var n=this.handlers;if(this.selectedHandler){for(var t in n)if(n[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(n){n.keyCode===27&&(this.rectDim=this.startDim,this.stop(n))},a.prototype.handleMouseDown=function(n){var t=n.target;this.isHandler(t)?(this.selectedHandler=t,this.start(n)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(n){var t,e=this.opts||{},r=e.step,o=this.startDim,l=e.minDim,f=e.maxDim,d=n.delta.x,h=n.delta.y,v=this.parentDim.w,m=this.parentDim.h,w=this.opts.unitWidth,T=this.opts.unitHeight,I=w==="%"?o.w/100*v:o.w,W=T==="%"?o.h/100*m:o.h,z={t:o.t,l:o.l,w:I,h:W};if(n){var st=n.handlerAttr;~st.indexOf("r")&&(t=w==="%"?(0,tt.normalizeFloat)((I+d*r)/v*100,.01):(0,tt.normalizeFloat)(I+d*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),z.w=t),~st.indexOf("b")&&(t=T==="%"?(0,tt.normalizeFloat)((W+h*r)/m*100,.01):(0,tt.normalizeFloat)(W+h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),z.h=t),~st.indexOf("l")&&(t=w==="%"?(0,tt.normalizeFloat)((I-d*r)/v*100,.01):(0,tt.normalizeFloat)(I-d*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),z.w=t),~st.indexOf("t")&&(t=T==="%"?(0,tt.normalizeFloat)((W-h*r)/m*100,.01):(0,tt.normalizeFloat)(W-h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),z.h=t);var St=e.ratioDefault?!n.keys.shift:n.keys.shift;if(st.indexOf("c")<0&&St){var Tt=o.w/o.h;z.w/z.h>Tt?z.h=Math.round(z.w/Tt):z.w=Math.round(z.h*Tt)}~st.indexOf("l")&&(z.l+=o.w-z.w),~st.indexOf("t")&&(z.t+=o.h-z.h);for(var zt in z){var le=zt;z[le]=parseInt("".concat(z[le]),10)}return z}},a}();const ug=lg;var cg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cd=function(){return Cd=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Cd.apply(this,arguments)},fg=function(a){cg(n,a);function n(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=ig,e.Resizer=ug,e.Dragger=Zi.Z,e.helpers=Cd({},tt),e}return n.prototype.destroy=function(){},n}(Bt);const dg=fg;var Zn,co={},Bn={16:!1,18:!1,17:!1,91:!1},Lp="all",ds={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},Dp={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},xd=function(a){return Dp[a]||a.toUpperCase().charCodeAt(0)},fl=[];for(Zn=1;Zn<20;Zn++)Dp["f"+Zn]=111+Zn;function fu(a,n){for(var t=a.length;t--;)if(a[t]===n)return t;return-1}function pg(a,n){if(a.length!=n.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==n[t])return!1;return!0}var hg={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function vg(a){for(Zn in Bn)Bn[Zn]=a[hg[Zn]]}function gg(a){var n,t,e,r,o,l;if(n=a.keyCode,fu(fl,n)==-1&&fl.push(n),(n==93||n==224)&&(n=91),n in Bn){Bn[n]=!0;for(e in ds)ds[e]==n&&(Un[e]=!0);return}if(vg(a),!!Un.filter.call(this,a)&&n in co){for(l=Sd(),r=0;r<co[n].length;r++)if(t=co[n][r],t.scope==l||t.scope=="all"){o=t.mods.length>0;for(e in Bn)(!Bn[e]&&fu(t.mods,+e)>-1||Bn[e]&&fu(t.mods,+e)==-1)&&(o=!1);(t.mods.length==0&&!Bn[16]&&!Bn[18]&&!Bn[17]&&!Bn[91]||o)&&t.method(a,t)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}function yg(a){var n=a.keyCode,t,e=fu(fl,n);if(e>=0&&fl.splice(e,1),(n==93||n==224)&&(n=91),n in Bn){Bn[n]=!1;for(t in ds)ds[t]==n&&(Un[t]=!1)}}function mg(){for(Zn in Bn)Bn[Zn]=!1;for(Zn in ds)Un[Zn]=!1}function Un(a,n,t){var e,r;e=jp(a),t===void 0&&(t=n,n="all");for(var o=0;o<e.length;o++)r=[],a=e[o].split("+"),a.length>1&&(r=Ip(a),a=[a[a.length-1]]),a=a[0],a=xd(a),a in co||(co[a]=[]),co[a].push({shortcut:e[o],scope:n,method:t,key:e[o],mods:r})}function _g(a,n){var t,e,r=[],o,l,f;for(t=jp(a),l=0;l<t.length;l++){if(e=t[l].split("+"),e.length>1&&(r=Ip(e)),a=e[e.length-1],a=xd(a),n===void 0&&(n=Sd()),!co[a])return;for(o=0;o<co[a].length;o++)f=co[a][o],f.scope===n&&pg(f.mods,r)&&(co[a][o]={})}}function wg(a){return typeof a=="string"&&(a=xd(a)),fu(fl,a)!=-1}function bg(){return fl.slice(0)}function Cg(a){var n=(a.target||a.srcElement).tagName;return!(n=="INPUT"||n=="SELECT"||n=="TEXTAREA")}for(Zn in ds)Un[Zn]=!1;function xg(a){Lp=a||"all"}function Sd(){return Lp||"all"}function Sg(a){var n,t,e;for(n in co)for(t=co[n],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++}function jp(a){var n;return a=a.replace(/\s/g,""),n=a.split(","),n[n.length-1]==""&&(n[n.length-2]+=","),n}function Ip(a){for(var n=a.slice(0,a.length-1),t=0;t<n.length;t++)n[t]=ds[n[t]];return n}function Od(a,n,t){a.addEventListener?a.addEventListener(n,t,!1):a.attachEvent&&a.attachEvent("on"+n,function(){t(window.event)})}Un.setScope=xg,Un.getScope=Sd,Un.deleteScope=Sg,Un.filter=Cg,Un.isPressed=wg,Un.getPressedKeyCodes=bg,Un.unbind=_g,Un.handlers=co,Un.init=function(a){Od(a.document,"keydown",function(n){gg(n)}),Od(a.document,"keyup",yg),Od(a,"focus",mg)};const du=Un;var Og={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};const Tg=Og;var Eg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))};(0,tt.hasWin)()&&du.init(window);var Pg=function(a){Eg(n,a);function n(t){var e=a.call(this,t,"Keymaps",Tg)||this;return e.keymaster=du,e.keymaps={},e}return n.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var r=t[e];this.add(e,r.keys,r.handler,r.opts||{})}},n.prototype.add=function(t,e,r,o){o===void 0&&(o={});var l=this.em,f=l.Commands,d=l.getEditor(),h=l.Canvas,v={id:t,keys:e,handler:r},m=this.keymaps[t];return m&&this.remove(t),this.keymaps[t]=v,du(e,function(w,T){var I={event:w,h:T},W=(0,S.isString)(r)?f.get(r):r,z=!l.isEditing()&&!d.Canvas.isInputFocused();if(z||o.force){o.prevent&&h.getCanvasView().preventDefault(w),(0,S.isFunction)(W)?W(d,0,I):f.runCommand(W,I);var st=[t,T.shortcut,w];l.trigger.apply(l,Rp(["keymap:emit"],st,!1)),l.trigger.apply(l,Rp(["keymap:emit:".concat(t)],st,!1))}},void 0),l.trigger("keymap:add",v),v},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this.em,r=this.get(t);if(r)return delete this.keymaps[t],r.keys.split(", ").forEach(function(o){du.unbind(o.trim())}),e==null||e.trigger("keymap:remove",r),r},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),du.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(Bt);const Ag=Pg;var kg={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};const Mg=kg;var Lg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dg=function(a){Lg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},n.prototype.open=function(){this.set("open",!0)},n.prototype.close=function(){this.set("open",!1)},n}(re.Z);const jg=Dg;var Ig=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uc=function(){return Uc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Uc.apply(this,arguments)},Rg=function(a){Ig(n,a);function n(t){var e=a.call(this,t)||this,r=e.model;return e.listenTo(r,"change:open",e.updateOpen),e.listenTo(r,"change:title",e.updateTitle),e.listenTo(r,"change:content",e.updateContent),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(r,"one-bg ").concat(r,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},n.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},n.prototype.onClick=function(t){var e=this.config.backdrop;e&&t.target===this.el&&this.hide()},n.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},n.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},n.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},n.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),r=this.getCollector(),o=this.model.get("content");e.length&&r.append(e),t.empty().append(o)},n.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},n.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},n.prototype.hide=function(){this.model.close()},n.prototype.show=function(){this.model.open()},n.prototype.updateAttr=function(t){var e=this,r=e.pfx,o=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(d){return d.name});o.removeAttr(f.join(" ")),o.attr(Uc(Uc({},t||{}),{class:"".concat(r,"container ").concat(t&&t.class||"").trim()}))},n.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},n}(fr);const Ng=Rg;var Vg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fg=function(a){Vg(n,a);function n(t){var e=a.call(this,t,"Modal",Mg)||this;return e.model=new jg(e),e.model.on("change:open",function(r,o){t.trigger("modal:".concat(o?"open":"close"))}),e.model.on("change",(0,S.debounce)(function(){var r=e._evData(),o=e.config.custom;(0,S.isFunction)(o)&&o(r),t.trigger("modal",r)},0)),e}return n.prototype._evData=function(){var t=this,e=this.getTitle(),r=this.getContent(),o=this.model.attributes,l=o.open,f=o.attributes;return{open:l,attributes:f,title:(0,S.isString)(e)?(0,Kt.rw)(e):e,content:(0,S.isString)(r)?(0,Kt.rw)(r):r.get?r.get(0):r,close:function(){t.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,r=this.render();r&&(e==null||e.appendChild(r))},n.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},n.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},n.prototype.isOpen=function(){return!!this.model.get("open")},n.prototype.setTitle=function(t){return this.model.set("title",t),this},n.prototype.getTitle=function(){return this.model.get("title")},n.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},n.prototype.getContent=function(){return this.model.get("content")},n.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=Ng.extend(this.config.extend),r=this.modal&&this.modal.el;return this.modal=new e({el:r,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},n.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},n}(Bt);const Hg=Fg;var Np="sw-visibility",Vp="export-template",Fp="open-sm",Hp="open-tm",Bp="open-layers",Up="open-blocks",Td="fullscreen",Ed="preview",Bg={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Np,className:"fa fa-square-o",command:"core:component-outline",context:Np,attributes:{title:"View components"}},{id:Ed,className:"fa fa-eye",command:Ed,context:Ed,attributes:{title:"Preview"}},{id:Td,className:"fa fa-arrows-alt",command:Td,context:Td,attributes:{title:"Fullscreen"}},{id:Vp,className:"fa fa-code",command:Vp,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Fp,className:"fa fa-paint-brush",command:Fp,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Hp,className:"fa fa-cog",command:Hp,togglable:!1,attributes:{title:"Settings"}},{id:Bp,className:"fa fa-bars",command:Bp,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Up,className:"fa fa-th-large",command:Up,togglable:!1,attributes:{title:"Open Blocks"}}]}]};const Pd=Bg;var Ug=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wg=function(a){Ug(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.get("buttons").length&&r.set("buttons",new Kp(r.module,r.get("buttons"))),r}return n.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(n.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),n}(re.Z);const Wp=Wg;var zg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zp=function(a){zg(n,a);function n(t,e){return a.call(this,t,e,Wp)||this}return n.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("active",!1),e&&r.get("buttons").length&&r.get("buttons").deactivateAllExceptOne(t,e))})},n.prototype.deactivateAll=function(t,e){var r=t||"";this.forEach(function(o){o.get("context")==r&&o!==e&&o.set("active",!1,{fromCollection:!0})})},n.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(r,o){r.get("context")==e&&r.set("disable",!0)})},n.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("disable",!0),e&&r.get("buttons").length&&r.get("buttons").disableAllButtonsExceptOne(t,e))})},n}(de);const Kp=zp;zp.prototype.model=Wp;var Kg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gg=function(a){Kg(n,a);function n(t,e){var r=a.call(this,t,e)||this,o=r.get("buttons")||[];return r.buttons=new Kp(t,o),r}return n.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(n.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),n}(re.Z);const Gp=Gg;var $g=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$p=function(a){$g(n,a);function n(t,e){return a.call(this,t,e,Gp)||this}return n}(de);const qg=$p;$p.prototype.model=Gp;var Yg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dl=function(){return dl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},dl.apply(this,arguments)},Xg=function(a){Yg(n,a);function n(t){var e=a.call(this,t)||this,r=e,o=r.model,l=r.em,f=r.pfx,d=r.ppfx,h=o.className,v=o.attributes,m=v.command,w=v.listen;if(e.id=f+o.get("id"),e.activeCls="".concat(f,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(h?" "+h:""),e.listenTo(o,"change",e.render),e.listenTo(o,"change:active updateActive",e.updateActive),e.listenTo(o,"checkActive",e.checkActive),e.listenTo(o,"change:bntsVis",e.updateBtnsVis),e.listenTo(o,"change:attributes",e.updateAttributes),e.listenTo(o,"change:className",e.updateClassName),e.listenTo(o,"change:disable",e.updateDisable),l&&(0,S.isString)(m)&&w){var T={fromListen:!0};e.listenTo(l,"run:".concat(m),function(){return o.set("active",!0,T)}),e.listenTo(l,"stop:".concat(m),function(){return o.set("active",!1,T)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.events=function(){return{click:"clicked"}},n.prototype.updateClassName=function(){var t=this,e=t.model,r=t.pfx,o=e.className,l=e.get("attributes").class,f="".concat(l||""," ").concat(r,"btn ").concat(o||"");this.$el.attr("class",f.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,r=t.model,o=t.$el,l=r.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(r.id));o.attr(l),f&&o.attr({title:f}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(t,e,r){var o;r===void 0&&(r={});var l=this,f=l.model,d=l.commands,h=l.$el,v=l.activeCls,m=r.fromCollection,w=r.fromListen,T=f.get("context"),I=f.get("options"),W=f.command,z={};W&&(d&&(0,S.isString)(W)?z=d.get(W)||{}:(0,S.isFunction)(W)?z=d.create({run:W}):W!==null&&(0,S.isObject)(W)&&(z=d.create(W)),f.active?(!m&&((o=f.collection)===null||o===void 0||o.deactivateAll(T,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!w&&d.runCommand(z,dl(dl({},I),{sender:f})),z.noStop&&f.set("active",!1)):(h.removeClass(v),!w&&d.stopCommand(z,dl(dl({},I),{sender:f,force:1}))))},n.prototype.updateDisable=function(){var t=this,e=t.disableCls,r=t.model,o=r.disable;this.$el[o?"addClass":"removeClass"](e)},n.prototype.checkActive=function(){var t=this,e=t.model,r=t.$el,o=t.activeCls;e.active?r.addClass(o):r.removeClass(o)},n.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this,e=t.model,r=t.em,o=e.active,l=e.togglable;o&&!l||(e.active=!o,o?e.runDefaultCommand&&r.runDefault():e.stopDefaultCommand&&r.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get("label"),r=this.$el;return!t.get("el")&&r.empty(),this.updateAttributes(),e&&r.append(e),this.checkActive(),this.updateDisable(),this},n}(fr);const Zg=Xg;var Jg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qg=function(a){Jg(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),l=new Zg({el:o,model:t}),f=l.render().el;return r?r.appendChild(f):this.$el.append(f),f},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(r){return t.addToCollection(r,e)}),this.$el.append(e),this.$el.attr("class",(0,S.result)(this,"className")),this},n}(fr);const ty=Qg;var ey=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ad=function(){return Ad=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ad.apply(this,arguments)},ry=function(a){ey(n,a);function n(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return n.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},n.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},n.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},n.prototype.attributes=function(){return this.model.get("attributes")},n.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,r=this.model.get("resizable");if(e&&r){var o=r===!0?[!0,!0,!0,!0]:r,l=o.length,f=void 0,d=void 0,h=void 0,v=!1;if(l==2){var m=o;f=m[0],h=m[0],d=m[1],v=m[1]}else if(l==4){var m=o;f=m[0],d=m[1],h=m[2],v=m[3]}var w=new e.Utils.Resizer(Ad({tc:f,cr:d,bc:h,cl:v,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(T,I){var W=I.target,z=T.style,st=w.getConfig(),St=st.keyWidth,Tt=st.keyHeight,zt=T.getBoundingClientRect(),le=W=="container",Se=z[St],Pe=z[Tt],Jt=Se&&!le?parseFloat(Se):zt.width,Ee=Pe&&!le?parseFloat(Pe):zt.height;return{left:0,top:0,width:Jt,height:Ee}}},r&&typeof r!="boolean"?r:{}));w.blur=function(){},w.focus(this.el)}},n.prototype.render=function(){var t=this.model.buttons,e=this.$el,r=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(r,"one-bg ").concat(r,"two-color");if(e.addClass(o),this.toggleVisible(),t.length){var l=new ty(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},n}(fr);const ny=ry;var oy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),iy=function(a){oy(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return n.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),l=new ny(t),f=l.render().el,d=t.get("appendTo");if(!o)if(d){var h=document.querySelector(d);h==null||h.appendChild(f)}else r?r.appendChild(f):this.$el.append(f);return l.initResize(),f},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.each(function(o){return t.addToCollection(o,r)}),e.append(r),e.attr("class",this.className),this},n}(fr);const ay=iy;var sy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ly=function(a){sy(n,a);function n(t){var e=a.call(this,t,"Panels",Pd)||this;e.panels=new qg(e,e.config.defaults);for(var r in Pd)r in e.config||(e.config[r]=Pd[r]);return e}return n.prototype.getPanels=function(){return this.panels},n.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},n.prototype.addPanel=function(t){return this.panels.add(t)},n.prototype.removePanel=function(t){return this.panels.remove(t)},n.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},n.prototype.addButton=function(t,e){var r=this.getPanel(t);return r?r.buttons.add(e):null},n.prototype.removeButton=function(t,e){var r=this.getPanel(t);return r&&r.buttons.remove(e)},n.prototype.getButton=function(t,e){var r=this.getPanel(t);if(r){var o=r.buttons.where({id:e});return o.length?o[0]:null}return null},n.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new ay(this.panels),this.PanelsViewObj.render().el},n.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},n.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},n.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},n}(Bt);const uy=ly;var cy={stylePrefix:"cm-",optsCodeViewer:{}};const fy=cy;var dy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),py=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},hy=function(a){dy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t,e){e===void 0&&(e={});var r=e.em,o=py(e,["em"]),l=o;if(e.cleanId&&r){var f=r.Css.getAll(),d=f.toJSON().map(function(h){var v=h.selectors,m=v&&v.length===1&&v.models[0];return m&&m.isId()&&m.get("name")}).filter(Boolean);l.attributes||(l.attributes=function(h,v){var m=v.id;return m&&m[0]==="i"&&!h.get("script")&&!h.get("attributes").id&&d.indexOf(m)<0&&delete v.id,v})}return t.toHTML(l)},n}(O.Hn);const vy=hy;var gy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yy=function(a){gy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t){var e=this,r=t.toJSON();return this.beforeEach(r),(0,S.each)(r,function(o,l){var f=r[l];if(f instanceof O.Hn)r[l]=e.build(f);else if(f instanceof O.FE){var d=f;r[l]=[],d.length&&d.forEach(function(h,v){r[l][v]=e.build(h)})}}),r},n.prototype.beforeEach=function(t){delete t.status},n}(O.Hn);const my=yy;var _y=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();function wy(a){var n,t=((n=a.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var by=function(a){_y(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.mapModel=function(t){var e,r=this,o="",l=t.get("script-export")||t.get("script"),f=t.get("type"),d=t.get("components"),h=t.getId();if(l){var v=t.get("attributes");v=(0,S.extend)({},v,{id:h}),t.set("attributes",v,{silent:!0});var m=t.getScriptString(l),w=t.get("script-props");if(t.get("scriptUpdated")&&!w)this.mapJs[f+"-"+h]={ids:[h],code:m};else{var T=void 0,I=this.mapJs[f];if(w&&(T=t.__getScriptProps()),I)I.ids.push(h),T&&(I.props[h]=T);else{var W={ids:[h],code:m};T&&(W.props=(e={},e[h]=T,e)),this.mapJs[f]=W}}}return d.forEach(function(z){o+=r.mapModel(z)}),o},n.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var r in this.mapJs){var o=this.mapJs[r];if(o.code)if(o.props){if(wy(o.code))continue;e+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var l="#"+o.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(l,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return e},n}(O.Hn);const Cy=by;var xy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kd=function(){return kd=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},kd.apply(this,arguments)},pu;(0,tt.hasWin)()&&(pu=hr(631),hr(531),hr(629),hr(210));var qp=function(a){xy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},n.prototype.init=function(t){return(0,S.bindAll)(this,"onChange"),this.editor=pu.fromTextArea(t,kd({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},n.prototype.onChange=function(){this.trigger("update",this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(t){return this.element=t,this},n.prototype.refresh=function(){return this.getEditor().refresh(),this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},n.prototype.setContent=function(t,e){var r=this;e===void 0&&(e={});var o=this.editor;if(o){o.setValue(t);var l=this.get("autoFormat"),f=o.autoFormatRange&&(l===!0||Array.isArray(l)&&l.includes(this.get("codeName")));f&&(pu.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),pu.commands.goDocStart(o)),!e.noRefresh&&setTimeout(function(){return r.refresh()})}},n}(O.Hn);const Sy=qp;qp.prototype.CodeMirror=pu;var Oy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ty=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Ey=function(a){Oy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(t){var e=t.pfx,r=t.codeName,o=t.label;return ut(Yp||(Yp=Ty([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,r,e,o,e)},n.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},n.prototype.render=function(){var t,e,r=this,o=r.model,l=r.pfx,f=r.$el,d=o.toJSON(),h=o.get("input")||((e=(t=o).getElement)===null||e===void 0?void 0:e.call(t));return d.pfx=l,f.html(this.template(d)),f.attr("class","".concat(l,"editor-c")),f.find("#".concat(l,"code")).append(h),this},n}(O.G7);const Py=Ey;var Yp,Ay=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wc=function(){return Wc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wc.apply(this,arguments)},ky="CodeMirror",My=function(a){Ay(n,a);function n(t){var e=a.call(this,t,"CodeManager",fy)||this;e.EditorView=Py;var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new vy,css:new Wf,json:new my,js:new Cy},e.defViewers={CodeMirror:new Sy},e.loadDefaultGenerators().loadDefaultViewers(),e}return n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,S.isUndefined)(t.type)?ky:t.type,r=this.getViewer(e)&&this.getViewer(e).clone(),o=document.createElement("div"),l=document.createElement("textarea");return o.appendChild(l),r.set(Wc(Wc({},this.config.optsCodeViewer),t)),r.init(l),r.setElement(o),r},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,r){r===void 0&&(r={}),r.em=this.em;var o=this.getGenerator(e);return o?o.build(t,r):""},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(Bt);const Ly=My;var Dy=hr(410),jy=hr.n(Dy),Iy={maximumStackLength:500,trackSelection:!0};const Ry=Iy;var Ny=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vi=function(){return Vi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Vi.apply(this,arguments)},Vy=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},zc=function(a){return a.avoidStore||a.noUndo},Xp=function(a){return Object.keys(a.changedAttributes())},Fy=function(a){Ny(n,a);function n(t){var e=a.call(this,t,"UndoManager",Ry)||this;e.config._disable&&(e.config.maximumStackLength=0);var r=!0;return e.um=new(jy())(Vi({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(o){var l=o.get("_undo");if(l){var f=o.get("_undoexc");if((0,S.isArray)(f)&&Xp(o).some(function(d){return f.indexOf(d)>=0}))return!1;if((0,S.isBoolean)(l)||(0,S.isArray)(l)&&Xp(o).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(o,l,f){var d=this;!this.beforeCache&&(this.beforeCache=o.previousAttributes());var h=f||l||{};if(h.noUndo&&setTimeout(function(){d.beforeCache=null}),!zc(h)){var v=o.toJSON({fromUndo:r}),m={object:o,before:this.beforeCache,after:v};return this.beforeCache=null,(0,S.isEmpty)(v)?void 0:m}}}),e.um.changeUndoType("add",{on:function(o,l,f){if(f===void 0&&(f={}),!(zc(f)||!e.isRegistered(l)))return{object:l,before:void 0,after:o,options:Vi(Vi({},f),{fromUndo:r})}}}),e.um.changeUndoType("remove",{on:function(o,l,f){if(f===void 0&&(f={}),!(zc(f)||!e.isRegistered(l)))return{object:l,before:o,after:void 0,options:Vi(Vi({},f),{fromUndo:r})}}}),e.um.changeUndoType("reset",{undo:function(o,l){o.reset(l,{fromUndo:r})},redo:function(o,l,f){o.reset(f,{fromUndo:r})},on:function(o,l){if(l===void 0&&(l={}),!(zc(l)||!e.isRegistered(o)))return{object:o,before:l.previousModels,after:Vy([],o.models,!0),options:Vi(Vi({},l),{fromUndo:r})}}}),e.um.on("undo redo",function(){t.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),["undo","redo"].forEach(function(o){return e.um.on(o,function(){return t.trigger(o)})}),e}return n.prototype.postLoad=function(){var t=this,e=t.config,r=t.em;e.trackSelection&&r&&this.add(r.get("selected"))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},n.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(r){var o=r.get("magicFusionIndex");e.indexOf(o)<0&&(e.push(o),t.push(r))}),t},n.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},n.prototype.getGroupedStack=function(){var t={},e=this.getStack(),r=function(o,l){var f=o.attributes,d=f.type,h=f.after,v=f.before,m=f.object,w=f.options,T=w===void 0?{}:w;return{index:l,type:d,after:h,before:v,object:m,options:T}};return e.forEach(function(o,l){var f=o.get("magicFusionIndex"),d=r(o,l);t[f]?t[f].push(d):t[f]=[d]}),Object.keys(t).map(function(o){var l=t[o];return{index:l[l.length-1].index,actions:l,labels:(0,S.unique)(l.reduce(function(f,d){var h,v=(h=d.options)===null||h===void 0?void 0:h.action;return v&&f.push(v),f},[]))}})},n.prototype.goToGroup=function(t){var e=this;if(t){var r=this.getPointer(),o=t.index-r;(0,S.times)(Math.abs(o),function(){e[o<0?"undo":"redo"](!1)})}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(Bt);const Hy=Fy;var By={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1};const Uy=By;var pl=function(){return pl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pl.apply(this,arguments)},Kc;(function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"})(Kc||(Kc={}));var Md="_rte",ps={ACTIVE:1,INACTIVE:0,DISABLED:-1},Gc=function(a,n){n===void 0&&(n="A");var t=a.selection()||{},e=t.anchorNode,r=t.focusNode,o=e==null?void 0:e.parentNode,l=r==null?void 0:r.parentNode;return(o==null?void 0:o.nodeName)==n||(l==null?void 0:l.nodeName)==n},$c="data-selectme",hu={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&Gc(a)?ps.ACTIVE:ps.INACTIVE},result:function(a){Gc(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat($c,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&Gc(a,"SPAN")?ps.DISABLED:ps.INACTIVE},result:function(a){!Gc(a,"SPAN")&&a.insertHTML("<span ".concat($c,">").concat(a.selection(),"</span>"),{select:!0})}}},Wy=function(){function a(n,t,e){var r=this;if(e===void 0&&(e={}),this.em=n,this.settings=e,t[Md])return t[Md];t[Md]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(e.actions||[]).map(function(v){var m=v;return(0,S.isString)(v)?m=pl({},hu[v]):hu[v.name]&&(m=pl(pl({},hu[v.name]),v)),m}),l=o.length?o:Object.keys(hu).map(function(v){return hu[v]});e.classes=pl({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=f,this.actions=l,!d){if(!this.isCustom(e.module)){var h=e.actionbarContainer;d=document.createElement("div"),d.className=f.actionbar,h==null||h.appendChild(d),this.actionbar=d}l.forEach(function(v){return r.addAction(v)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(n){var t=n||this.em.RichTextEditor;return!!(t!=null&&t.config.custom||t!=null&&t.customRte)},a.prototype.destroy=function(){},a.prototype.setEl=function(n){this.el=n,this.doc=n.ownerDocument},a.prototype.updateActiveActions=function(){var n=this,t=this.getActions();t.forEach(function(e){var r=e.update,o=e.btn,l=n.classes,f=l.active,d=l.inactive,h=l.disabled,v=e.state,m=e.name,w=n.doc,T=Kc.INACTIVE;if(o&&(o.className=o.className.replace(f,"").trim(),o.className=o.className.replace(d,"").trim(),o.className=o.className.replace(h,"").trim()),v){var I=v(n,w);if(T=I,o)switch(I){case ps.ACTIVE:o.className+=" ".concat(f);break;case ps.INACTIVE:o.className+=" ".concat(d);break;case ps.DISABLED:o.className+=" ".concat(h);break}}else w.queryCommandSupported(m)&&w.queryCommandState(m)&&(o&&(o.className+=" ".concat(f)),T=Kc.ACTIVE);e.currentState=T,r==null||r(n,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(n){return this.enabled?this:this.__toggleEffects(!0,n)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(n,t){n===void 0&&(n=!1),t===void 0&&(t={});var e=n?Kt.on:Kt.S1,r=this,o=r.el,l=r.doc,f=this.actionbarEl();if(f&&(f.style.display=n?"":"none"),o.contentEditable="".concat(!!n),e(o,"mouseup keyup",this.updateActiveActions),e(l,"keydown",this.__onKeydown),e(l,"paste",this.__onPaste),this.enabled=n,n){var d=t.event;if(this.syncActions(),this.updateActiveActions(),d){var h=null;if(l.caretRangeFromPoint){var v=(0,Kt.VB)(d);h=l.caretRangeFromPoint(v.clientX,v.clientY)}else d.rangeParent&&(h=l.createRange(),h.setStart(d.rangeParent,d.rangeOffset));var m=l.getSelection();m==null||m.removeAllRanges(),h&&(m==null||m.addRange(h))}o.focus()}return this},a.prototype.__onKeydown=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onKeydown;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=this.doc,o=["insertOrderedList","insertUnorderedList"];n.key==="Enter"&&!o.some(function(l){return r.queryCommandState(l)})&&(r.execCommand("insertLineBreak"),n.preventDefault())},a.prototype.__onPaste=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onPaste;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=n.clipboardData,o=r.getData("text"),l=r.getData("text/html");if(o&&!l){n.preventDefault();var f=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,f)}},a.prototype.syncActions=function(){var n=this;this.getActions().forEach(function(t){if(n.actionbar&&(!t.state||t.state&&t.state(n,n.doc)>=0)){var e=t.event||"click",r=t.btn;r&&(r["on".concat(e)]=function(){t.result(n,t),n.updateActiveActions()})}})},a.prototype.addAction=function(n,t){t===void 0&&(t={});var e=t.sync,r=this.actionbarEl();if(r){var o=n.icon,l=n.attributes,f=l===void 0?{}:l,d=document.createElement("span");d.className=this.classes.button,n.btn=d;for(var h in f)d.setAttribute(h,f[h]);typeof o=="string"?d.innerHTML=o:d.appendChild(o),r.appendChild(d)}e&&(this.actions.push(n),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(n,t){this.doc.execCommand(n,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(n,t){var e=t===void 0?{}:t,r=e.select,o=this,l=o.em,f=o.doc,d=o.el,h=f.getSelection();if(h&&h.rangeCount){var v=(0,tt.getComponentModel)(d)||l.getSelected(),m=f.createElement("div"),w=h.getRangeAt(0);w.deleteContents(),(0,S.isString)(n)?m.innerHTML=n:n&&m.appendChild(n),Array.prototype.slice.call(m.childNodes).forEach(function(T){w.insertNode(T)}),h.removeAllRanges(),h.addRange(w),d.focus(),r&&v&&(v.once("rte:disable",function(){var T=v.find("[".concat($c,"]"))[0];T&&(l.setSelected(T),T.removeAttributes($c))}),v.trigger("disable"))}},a}();const zy=Wy;var Ky=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zp=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(v){try{h(e.next(v))}catch(m){l(m)}}function d(v){try{h(e.throw(v))}catch(m){l(m)}}function h(v){v.done?o(v.value):r(v.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Jp=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(v){return d([h,v])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(v){h=[6,v],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Gy=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Ld="".concat(Ae.refresh," frame:scroll ").concat(De.g.update),$y="rte:enable",qy="rte:disable",Yy="rte:custom",Xy={enable:$y,disable:qy,custom:Yy},Zy=function(a){Ky(n,a);function n(t){var e=a.call(this,t,"RichTextEditor",Uy)||this;e.events=Xy;var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.pfx=r.stylePrefix,e.actions=r.actions||[];var l=new O.Hn;return e.model=l,l.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,S.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.onLoad=function(){if((0,tt.hasWin)()){var t=this.config,e=t.pStylePrefix,r=t.custom,o=(0,Kt.ut)("div",{class:(0,Kt.cx)("".concat(e,"rte-toolbar"),!r&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,Kt.ut)("div")),(0,Kt.on)(o,"mousedown",function(l){return l.stopPropagation()})}},n.prototype.__trgCustom=function(){var t=this,e=t.model,r=t.em,o=t.events;r.trigger(o.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},n.prototype.destroy=function(){var t,e,r;(t=this.globalRte)===null||t===void 0||t.destroy(),(r=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||r===void 0||r.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Kt.L_)(this.toolbar)},n.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},n.prototype.initRte=function(t){var e=this.globalRte,r=this,o=r.em,l=r.pfx,f=r.actionbar,d=r.config,h=this.actions||Gy([],d.actions,!0),v={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=o,e.setEl(t)):(e=new zy(o,t,{classes:v,actions:h,actionbar:f,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},n.prototype.add=function(t,e){var r;e===void 0&&(e={}),e.name=t,(r=this.globalRte)===null||r===void 0||r.addAction(e,{sync:!0})},n.prototype.get=function(t){var e,r;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(o){o.name==t&&(r=o)}),r},n.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},n.prototype.remove=function(t){var e,r=this.getAll(),o=this.get(t);if(o){var l=o.btn,f=r.indexOf(o);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),r.splice(f,1)}return o},n.prototype.run=function(t){var e=this.globalRte,r=(0,S.isString)(t)?this.get(t):t;e&&r&&(r.result(e,r),e.updateActiveActions())},n.prototype.getToolbarEl=function(){return this.toolbar},n.prototype.updatePosition=function(){var t=this,e=t.em,r=t.toolbar,o="px",l=e.Canvas,f=r.style,d=l.getTargetToElementFixed(this.lastEl,r,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(h){var v=d[h];(0,tt.isDef)(v)&&(f[h]=(0,S.isString)(v)?v:(v||0)+o)})},n.prototype.enable=function(t,e,r){return r===void 0&&(r={}),Zp(this,void 0,void 0,function(){var o,l,f,d,h;return Jp(this,function(v){switch(v.label){case 0:return this.lastEl=t.el,o=this,l=o.customRte,f=o.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e):this.initRte(d).enable(r)];case 1:return h=v.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(Ld,this.updatePosition,this),f.on(Ld,this.updatePosition,this),f.trigger("rte:enable",t,h)),this.model.set({currentView:t}),[2,h]}})})},n.prototype.getContent=function(t,e){return Zp(this,void 0,void 0,function(){var r;return Jp(this,function(o){switch(o.label){case 0:return r=this.customRte,r&&e&&(0,S.isFunction)(r.getContent)?[4,r.getContent(t.el,e)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,t.getChildrenContainer().innerHTML]}})})},n.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},n.prototype.disable=function(t,e,r){r===void 0&&(r={});var o=this.em,l=this.customRte,f=t.getChildrenContainer();l?l.disable(f,e):e&&e.disable(),this.hideToolbar(),o&&(o.off(Ld,this.updatePosition,this),!r.fromMove&&o.trigger("rte:disable",t,e)),this.model.unset("currentView")},n}(Bt);const Jy=Zy,Qy={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var tm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wn=function(){return Wn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wn.apply(this,arguments)},em=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Qp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Dd=function(a){tm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,S.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var r=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||r).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!o&&this.set("name",(0,tt.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),n.callInit(this,t,e)},n.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},n.prototype.__upTargets=function(t,e){var r,o=this;e===void 0&&(e={});var l=this.em,f=l.Styles,d=this.getName(),h=e.__clear,v=h?"":this.__getFullValue(e),m=this.__getParentProp(),w=this.changedAttributes(),T=(0,S.keys)(w).reduce(function(Tt,zt){return Tt[zt]=o.previous(zt),Tt},{}),I=Qp(Qp([],(0,S.keys)(this.__getClearProps()),!0),["__p"],!1),W=(0,S.keys)(w),z=!e.__up&&!m&&(h||I.some(function(Tt){return W.indexOf(Tt)>=0})),st=this.get("onChange"),St={property:this,from:T,to:w,value:v,opts:e};f.__trgEv(f.events.propertyUpdate,St),st&&st(St),z&&this.__upTargetsStyle((r={},r[d]=v,r),e)},n.prototype.__upTargetsStyle=function(t,e){var r,o=(r=this.em)===null||r===void 0?void 0:r.get("StyleManager");o==null||o.addStyleTargets(Wn(Wn({},t),{__p:!!e.avoidStore}),e)},n.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var r=e.partial,o=em(e,["partial"]);return t.__p=!!(o.avoidStore||r),this.set(t,Wn(Wn({},o),{avoidStore:t.__p}))},n.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Wn(Wn({},e),{__up:!0}))},n.prototype.init=function(){},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("property")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,l=this.getId(),f=this.get("name")||this.get("label");return o&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},n.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,r=this.get("value");return!this.hasValue()&&!e?this.getDefaultValue():r},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget(),o=this.get("value");return!(0,S.isUndefined)(o)&&o!==""&&!r},n.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},n.prototype.getStyle=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=t.camelCase?(0,tt.camelCase)(r):r;return e={},e[o]=this.__getFullValue(t),e},n.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,S.isUndefined)(t)?this.get("defaults"):t)},n.prototype.upValue=function(t,e){e===void 0&&(e={});var r=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(r,e)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Wn(Wn({},t),{__clear:!0})),this},n.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},n.prototype.getParent=function(){return this.__getParentProp()},n.prototype.isFull=function(){return!!this.get("full")},n.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},n.prototype.__getClearProps=function(){return{value:""}},n.prototype.setValue=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(o,Wn({avoidStore:l},r))},n.prototype.setValueFromInput=function(t,e,r){r===void 0&&(r={}),this.setValue(t,e,Wn(Wn({},r),{fromInput:1}))},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r={value:t},o="!important",l=this.get("functionName")||"";if((0,S.isString)(t)&&t.indexOf(o)!==-1&&(r.value=t.replace(o,"").trim(),r.important=!0),!l&&!e.complete)return r;var f=[],d="".concat(r.value).trim(),h=d.indexOf("(")+1,v=l||d.substring(0,h-1);if(v&&(r.functionName=v),!l||d.indexOf("".concat(l,"("))===0){var m=d.lastIndexOf(")");f.push(h),m>=0&&f.push(m),r.value=String.prototype.substring.apply(d,f)}if(e.numeric){var w=parseFloat(r.value);r.unit=r.value.replace(w,""),r.value=w}return r},n.prototype.__getFullValue=function(t){var e=t===void 0?{}:t,r=e.withDefault;return!this.hasValue()&&r?this.getDefaultValue():this.getFullValue()},n.prototype.getFullValue=function(t,e){e===void 0&&(e={});var r=this.get("functionName"),o=this.getDefaultValue(),l=(0,S.isUndefined)(t)?this.get("value"):t,f=!(0,S.isUndefined)(l)&&l!=="";if(l&&o&&l===o)return o;if(r&&f){var d=r==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(r,"(").concat(d,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},n.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},n.prototype.getParentTarget=function(){return this.get("parentTarget")||null},n.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,r=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,r>=0?r:void 0]).trim()}},n.prototype.__checkVisibility=function(t){var e=t.target,r=t.component,o=t.sectors,l=r||e;if(!l)return!1;var f=this.getId(),d=this.getName(),h=this.get("toRequire"),v=this.get("requires"),m=this.get("requiresParent"),w=l.get("unstylable"),T=l.get("stylable-require"),I=l.get("stylable");if((0,S.isArray)(I)&&(I=I.indexOf(d)>=0),(0,S.isArray)(w)&&(I=w.indexOf(d)<0),h&&(I=!e||T&&(T.indexOf(f)>=0||T.indexOf(d)>=0)),o&&v){var W=(0,S.keys)(v);o.forEach(function(Tt){Tt.getProperties().forEach(function(zt){if((0,S.includes)(W,zt.id)){var le=v[zt.id];I=I&&(0,S.includes)(le,zt.get("value"))}})})}if(m){var z=r&&r.parent(),st=z&&z.getEl();if(st){var St=(0,tt.hasWin)()?window.getComputedStyle(st):{};(0,S.each)(m,function(Tt,zt){I=I&&St[zt]&&(0,S.includes)(Tt,St[zt])})}else I=!1}return!!I},n}(O.Hn);const Pr=Dd;Dd.callParentInit=function(a,n,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(n,[t,Wn(Wn({},e),{skipInit:1})])},Dd.callInit=function(a,n,t){t===void 0&&(t={}),!t.skipInit&&a.init(n,t)};var rm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qc=function(){return qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qc.apply(this,arguments)},nm=function(a){rm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(r,o){return r[(0,tt.camelCase)(o)]=e[o],r},{}):e},n.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},n.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",qc(qc({},this.getValues()),t))},n}(O.Hn);const om=nm;var im=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),th=function(a){im(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},n}(O.FE);const am=th;th.prototype.model=om;var sm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hl=function(){return hl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},hl.apply(this,arguments)},eh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},rh=function(a){return a==="integer"||a==="number"},lm=function(a){sm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return hl(hl({},Pr.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Pr.callParentInit(Pr,this,t,e);var r=this.em,o=new Nd(this.get("properties")||[],{em:r,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),Pr.callInit(this,t,e)},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),n.prototype.getProperties=function(){return eh([],this.get("properties").models,!0)},n.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},n.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},n.prototype.isDetached=function(){return!!this.get("detached")},n.prototype.getValues=function(t){var e=t===void 0?{}:t,r=e.byName;return this.getProperties().reduce(function(o,l){var f=r?l.getName():l.getId();return o[f]="".concat(l.__getFullValue()),o},{})},n.prototype.getSeparator=function(){return this.getSplitSeparator()},n.prototype.getJoin=function(){return this.__getJoin()},n.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),d={};if(l)d=l(f,{join:o,name:r,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())d=f;else{var h=this.getProperties().map(function(v){return v.__getFullValue({withDefault:1})}).filter(Boolean).join(o);d=(e={},e[r]=h,e)}return this.isDetached()?d[r]="":(d[r]=d[r]||"",d=hl(hl({},d),this.getProperties().reduce(function(v,m){return v[m.getName()]="",v},{}))),t.camelCase?Object.keys(d).reduce(function(v,m){return v[(0,tt.camelCase)(m)]=d[m],v},{}):d},n.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},n.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!(e.__up||e.__clearIn)){var r=this.__getParentProp();if(r)return r.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},n.prototype.__upTargetsStyleProps=function(t,e){var r;t===void 0&&(t={});var o=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();o=(r={},r[l]=o[l],r)}this.__upTargetsStyle(o,t)},n.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),Pr.prototype._up.call(this,t,e),this},n.prototype.getStyle=function(t){return this.getStyleFromProps(t)},n.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return qn(e)},n.prototype.__getJoin=function(){var t=this.get("join");return(0,S.isString)(t)?t:this.get("separator")},n.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),r=this.getProperties(),o=r.map(function(f){return f.getName()}),l=eh([e],o,!0);return l.some(function(f){return!(0,S.isUndefined)(t[f])&&t[f]!==""})},n.prototype.__splitValue=function(t,e){return qn(t).split(e).map(function(r){return r.trim()}).filter(Boolean)},n.prototype.__splitStyleName=function(t,e,r){return this.__splitValue(t[e]||"",r)},n.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var r=e===void 0?{}:e,o=r.byName,l=this.getProperties(),f=l.length===4&&l.every(function(v){return rh(v.getType())}),d=this.__splitValue(t,this.getSplitSeparator()),h={};return l.forEach(function(v,m){var w=d[m],T=(0,S.isUndefined)(w)?"":w;if(f){var I=d.length;T=d[m]||d[m%I+(I!=1&&I%2?1:0)]||T}var W=o?v.getName():v.getId();h[W]=T||""}),h},n.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var r=e.byName,o=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),d=this.get("fromStyle"),h=d?d(t,{property:this,name:o,separator:f}):{};return d||(h=this.__getSplitValue(t[o]||"",{byName:r}),l.forEach(function(v){var m=t[v.getName()],w=r?v.getName():v.getId();!(0,S.isUndefined)(m)&&m!==""&&(h[w]=m)})),h},n.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(o){var l=t[o.getId()];o.__getFullValue()!==l&&o.upValue(l,e)});var r=(0,S.keys)(t).map(function(o){return t[o]}).join(" ");this.set("value",r,{silent:!0})},n.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),Pr.prototype.clear.call(this),this},n.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},n.prototype.getFullValue=function(){return this.__getFullValue()},n.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},n}(Pr);const vl=lm;var um=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jn=function(){return Jn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Jn.apply(this,arguments)},cm=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},fm=/,(?![^\(]*\))/,dm=/\s(?![^(]*\))/,pm=function(a){um(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Jn(Jn({},vl.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),vl.callParentInit(vl,this,t,e);var r=this.get("layers"),o=new am(r,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),vl.callInit(this,t,e)},Object.defineProperty(n.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),n.prototype.getLayers=function(){return this.layers.models},n.prototype.hasLayers=function(){return this.getLayers().length>0},n.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers.at(t)||void 0},n.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},n.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},n.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},n.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var r=this.layers,o=t?t.getIndex():-1;o>=0&&(0,S.isNumber)(e)&&e>=0&&e<r.length&&o!==e&&(this.removeLayer(t),r.add(t,{at:e}))},n.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r={};this.getProperties().forEach(function(l){var f=l.getId(),d=t[f];r[f]=(0,S.isUndefined)(d)?l.getDefaultValue():d});var o=this.layers.push({values:r},e);return o},n.prototype.removeLayer=function(t){return this.layers.remove(t)},n.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},n.prototype.getLayerLabel=function(t){var e="";if(t){var r=this.get("layerLabel"),o=t.getValues(),l=t.getIndex();if(r)e=r(t,{index:l,values:o,property:this});else{var f=[];this.getProperties().map(function(d){f.push(o[d.getId()])}),e=f.filter(Boolean).join(" ")}}return e},n.prototype.getStyleFromLayer=function(t,e){var r;e===void 0&&(e={});var o=this.__getJoin(),l=this.__getJoinLayers(),f=this.get("toStyle"),d=this.getName(),h=t.getValues(),v;if(f)v=f(h,{join:o,joinLayers:l,name:d,layer:t,property:this});else{var m=this.getProperties().map(function(w){var T=w.getName(),I=h[w.getId()],W=(0,S.isUndefined)(I)?w.getDefaultValue():I;if(e.number&&rh(w.getType())){var z=w.parseValue(I,e.number);W="".concat(z.value).concat(z.unit)}return{name:T,value:W}});v=this.isDetached()?m.reduce(function(w,T){return w[T.name]=T.value,w},{}):(r={},r[this.getName()]=m.map(function(w){return w.value}).join(o),r)}return e.camelCase?Object.keys(v).reduce(function(w,T){return w[(0,tt.camelCase)(T)]=v[T],w},{}):v},n.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var r={},o=this.get("preview");return o&&(r=this.getStyleFromLayer(t,e)),r},n.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,S.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},n.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},n.prototype.__upProperties=function(t,e){var r;e===void 0&&(e={});var o=this.getSelectedLayer();o&&(o.upValues((r={},r[t.getId()]=t.__getFullValue(),r)),!e.__up&&this.__upTargetsStyleProps(e))},n.prototype.__upLayers=function(t,e,r){this.__upTargetsStyleProps(r||e)},n.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return Pr.prototype.__upTargets.call(this,t,e)},n.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},n.prototype.__upTargetsStyle=function(t,e){return Pr.prototype.__upTargetsStyle.call(this,t,e)},n.prototype.__upSelected=function(t,e){var r=t===void 0?{}:t,o=r.noEvent;e===void 0&&(e={});var l=this.em.Styles,f=this.getSelectedLayer(),d=f==null?void 0:f.getValues();d&&this.getProperties().forEach(function(h){var v,m=(v=d[h.getId()])!==null&&v!==void 0?v:"";h.__getFullValue()!==m&&h.upValue(m,Jn(Jn({},e),{__up:!0}))}),!o&&l.__trgEv(l.events.layerSelect,{property:this})},n.prototype._up=function(t,e){e===void 0&&(e={});var r=t.__layers,o=r===void 0?[]:r,l=cm(t,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},e),Pr.prototype._up.call(this,l,e),this},n.prototype.__setLayers=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=this.layers,o=t.map(function(l){return{values:l}});r.length===o.length?o.map(function(l,f){var d;return(d=r.at(f))===null||d===void 0?void 0:d.upValues(l.values)}):r.reset(o),this.set({isEmptyValue:!!e.isEmptyValue}),this.__upSelected({noEvent:!0})},n.prototype.__parseValue=function(t){var e=this,r=this.parseValue(t);return r.__layers=t.split(fm).map(function(o){return o.trim()}).map(function(o){return e.__parseLayer(o)}).filter(Boolean),r},n.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),r=t.split(dm),o=this.getProperties();return e?e({value:t,values:r}):o.reduce(function(l,f,d){var h=r[d];return l[f.getId()]=(0,S.isUndefined)(h)?f.getDefaultValue():h,l},{})},n.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var r=this.getName(),o=this.getProperties(),l=this.getLayerSeparator(),f=this.attributes.fromStyle,d=f?f(t,{property:this,name:r,separatorLayers:l}):[];if(!f){var h=this.__splitStyleName(t,r,l).map(function(v){return v.split(e.getSplitSeparator())}).map(function(v){var m={};return o.forEach(function(w,T){var I=v[T];m[w.getId()]=(0,S.isUndefined)(I)?w.getDefaultValue():I}),m});o.forEach(function(v){var m=v.getId();e.__splitStyleName(t,v.getName(),l).map(function(w){var T;return T={},T[m]=w||v.getDefaultValue(),T}).forEach(function(w,T){h[T]=h[T]?Jn(Jn({},h[T]),w):w})}),d=h}return(0,S.isArray)(d)?d:[d]},n.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},n.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var r={},o=this.getName(),l=this.getLayers(),f=this.getProperties(),d=l.map(function(v){return e.getStyleFromLayer(v,t)});if(d.forEach(function(v){(0,S.keys)(v).map(function(m){r[m]||(r[m]=[]),r[m].push(v[m])})}),(0,S.keys)(r).map(function(v){r[v]=r[v].join(e.__getJoinLayers())}),this.isDetached())r[o]="",!l.length&&f.map(function(v){r[v.getName()]=""});else{var h=f.reduce(function(v,m){return v[m.getName()]="",v},{});r[o]=r[o]||"",r=Jn(Jn({},r),h)}return Jn(Jn({},r),t.__clear?{}:this.getEmptyValueStyle())},n.prototype.isEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.getEmptyValueStyle({force:!0}),r=(0,S.keys)(e);return!!r.length&&r.every(function(o){return e[o]===t[o]})},n.prototype.getEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.attributes.emptyValue;if(e&&(!this.hasLayers()||t.force)){var r=this.getName(),o=this.getProperties(),l=(0,S.isString)(e)?e:e({property:this});if((0,S.isString)(l)){var f={};return this.isDetached()?o.map(function(d){f[d.getName()]=l}):f[r]=l,f}else return l}else return{}},n.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,S.isString)(e)?e:t)},n.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return qn(t[this.getName()])},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!r},n.prototype.clear=function(t){return t===void 0&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(Jn(Jn({},t),{__clear:!0})),Pr.prototype.clear.call(this),this},n.prototype.__canClearProp=function(){return!1},n.prototype.__getLayers=function(){return this.layers},n}(vl);const hm=pm;var vm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yc=function(){return Yc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yc.apply(this,arguments)},gm=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ym=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},jd="data-clear-style",mm=function(a){vm(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,S.bindAll)(e,"__change","__updateStyle");var r=t.config||{},o=r.em;e.config=r,e.em=o,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,S.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,S.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(o,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return n.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(jd,"]")]="clear",t},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx;return`
      <div class="`.concat(r,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},n.prototype.templateLabel=function(t){var e=this,r=e.pfx,o=e.em,l=t.parent,f=t.attributes,d=f.icon,h=d===void 0?"":d,v=f.info,m=v===void 0?"":v,w=o==null?void 0:o.getConfig().icons,T=(w==null?void 0:w.close)||"";return`
      <span class="`.concat(r,"icon ").concat(h,'" title="').concat(m,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(l?"":'<div class="'.concat(r,'clear" style="display: none" ').concat(jd,">").concat(T,"</div>"),`
    `)},n.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},n.prototype.remove=function(){var t=this;return O.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},n.prototype.updateStatus=function(){var t,e=this,r=e.model,o=e.pfx,l=e.ppfx,f=e.config,d="".concat(l,"four-color"),h="".concat(l,"color-warn"),v=this.$el.children(".".concat(o,"label")),m=this.getClearEl(),w=m?m.style:{};v.removeClass("".concat(d," ").concat(h)),w.display="none",r.hasValue({noParent:!0})&&f.highlightChanged?(v.addClass(d),f.clearProperties&&(w.display="")):r.hasValue()&&f.highlightComputed&&v.addClass(h),(t=this.parent)===null||t===void 0||t.updateStatus()},n.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},n.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(jd,"]"))),this.clearEl},n.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},n.prototype.onValueChange=function(t,e,r){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},n.prototype.setValue=function(t){var e=this.model,r=(0,S.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(r);this.__setValueInput(r)},n.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},n.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},n.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},n.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(Yc(Yc({},this._getClbOpts()),{value:t}))},n.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.emit&&this.emit.bind(this);r&&r.apply(void 0,ym([this._getClbOpts()],t,!1))},n.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var r=e.complete,o=e.partial;gm(e,["complete","partial"]);var l=this.model,f=r!==!1&&o!==!0;(0,tt.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},n.prototype._getClbOpts=function(){var t=this,e=t.model,r=t.el,o=t.createdEl;return{el:r,createdEl:o,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},n.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,r=t.model,o=t.el,l=t.$el,f=r.getName(),d=r.getType(),h=r.get("className")||"",v="".concat(e,"property"),m=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(r)),l.find("[data-sm-label]").append(this.templateLabel(r));var w=this.create&&this.create.bind(this);this.createdEl=w&&w(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(r)),o.className="".concat(v," ").concat(m," ").concat(v,"__").concat(f," ").concat(h).trim(),o.className+=r.isFull()?" ".concat(v,"--full"):"";var T=this.onRender&&this.onRender.bind(this);return T&&T(),this.setValue(r.getValue()),this},n.prototype.onRender=function(){},n}(O.G7);const Fi=mm;var _m=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wm=function(a){_m(n,a);function n(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var r=e.collection;return e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.render),e}return n.prototype.addTo=function(t,e,r){this.add(t,null,r)},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=this,l=o.parent,f=o.config,d=e||this.el,h=new t.typeView({model:t,config:f});l&&(h.parent=l),h.render();var v=h.el;this.properties.push(h),(0,Kt.$Q)(d,v,r.at)},n.prototype.remove=function(){return O.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},n.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx;this.clearItems();var l=document.createDocumentFragment();return this.collection.forEach(function(f){return t.add(f,l)}),r.empty(),r.append(l),r.attr("class","".concat(o,"properties")),this},n}(O.G7);const Id=wm;var bm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xc=function(){return Xc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xc.apply(this,arguments)},Cm=function(a){bm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},n.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),Fi.prototype.remove.apply(this,arguments),this},n.prototype.onValueChange=function(){},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.get("properties");if(r.length&&!this.props){var o=e.isDetached(),l=new Id({config:Xc(Xc({},this.config),{highlightComputed:o,highlightChanged:o}),collection:r,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},n.prototype.clearCached=function(){Fi.prototype.clearCached.apply(this,arguments),delete this.props},n}(Fi);const vu=Cm;var xm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sm=function(a){xm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},n.prototype.template=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.em,l=o==null?void 0:o.getConfig().icons,f=(l==null?void 0:l.close)||"",d=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(r,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{};this.em=r.em,this.config=r,this.sorter=t.sorter,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.propertyView=t.propertyView;var o=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},n.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},n.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var r=this.getPreviewEl(),o=t.getStylePreview({number:{min:-3,max:3}}),l=(0,S.keys)(o).map(function(f){return"".concat(f,":").concat(o[f])}).join(";");r.setAttribute("style",l)}},n.prototype.updateVisibility=function(){var t,e=this,r=e.pfx,o=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),d=o.isSelected();f.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(r,"active")),d&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,r=t.pfx,o=t.model;return e.innerHTML=this.template(),e.className="".concat(r,"layer"),o.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},n}(O.G7);const Om=Sm;var Tm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Em=function(a){Tm(n,a);function n(t){var e=a.call(this,t)||this,r=e.collection,o=t.config||{},l=o.em,f=o.stylePrefix||"",d=o.pStylePrefix||"";e.config=o,e.pfx=f,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(d,"field"),e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.reset),e.items=[];var h=l==null?void 0:l.Utils;return e.sorter=h?new h.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:o.pStylePrefix,em:l}):"",r.view=e,e.$el.data("model",r),e.$el.data("collection",r),e}return n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var o=e||null,l=this,f=l.propertyView,d=l.config,h=l.sorter,v=l.$el,m=new Om({model:t,config:d,sorter:h,propertyView:f}),w=m.render().el;if(this.items.push(m),o)o.appendChild(w);else if(typeof r<"u"){var T="before";v.children().length===r&&(r--,T="after"),r<0?v.append(w):v.children().eq(r)[T](w)}else v.append(w);return w},n.prototype.reset=function(t,e){this.clearItems(),this.render()},n.prototype.remove=function(){return this.clearItems(),O.G7.prototype.remove.apply(this,arguments),this},n.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.sorter,l=document.createDocumentFragment();return r.empty(),this.collection.forEach(function(f){return t.addToCollection(f,l)}),r.append(l),r.attr("class",this.className),o&&(o.plh=null),this},n}(O.G7);const Pm=Em;var Am=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gl=function(){return gl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},gl.apply(this,arguments)},km=function(a){Am(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return gl(gl({},vu.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.em,o=r==null?void 0:r.getConfig().icons,l=(o==null?void 0:o.plus)||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(l,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},n.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},n.prototype.addLayer=function(){this.model.addLayer({},{at:0})},n.prototype.setValue=function(){},n.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),vu.prototype.remove.apply(this,arguments),this},n.prototype.clearCached=function(){vu.prototype.clearCached.apply(this,arguments),delete this.layersView},n.prototype.onRender=function(){var t=this,e=t.model,r=t.el,o=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new Id({config:gl(gl({},o),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var d=new Pm({collection:e.layers,config:o,propertyView:this});d.render();var h=r.querySelector("[data-layers-wrapper]");h.appendChild(d.el),this.props=f,this.layersView=d}},n}(vu);const Mm=km;var Lm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zc=function(){return Zc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Zc.apply(this,arguments)},Dm=function(a){Lm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return Zc(Zc({},Fi.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},n.prototype.templateInput=function(){var t,e=this,r=e.pfx,o=e.em,l=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,f=l==null?void 0:l.close;return`
      <div class="`.concat(r,"field ").concat(r,`file">
        <div id='`).concat(r,`input-holder'>
          <div class="`).concat(r,`btn-c">
            <button class="`).concat(r,'btn" id="').concat(r,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`preview-file" data-preview-box>
          <div id="`).concat(r,'preview-file" class="').concat(r,`preview-file-cnt" data-preview></div>
          <div id="`).concat(r,'close" class="').concat(r,'preview-file-close" data-clear-asset>').concat(f,`</div>
        </div>
      </div>
    `)},n.prototype.__setValueInput=function(t){var e=this,r=e.model,o=e.el,l=r.getDefaultValue(),f=o.querySelector("[data-preview-box]"),d=o.querySelector("[data-preview]");f.style.display=!t||t===l?"none":"",d.style.backgroundImage=t||r.getDefaultValue()},n.prototype.openAssetManager=function(){var t=this,e,r=(e=this.em)===null||e===void 0?void 0:e.Assets;r==null||r.open({select:function(o,l){var f=(0,S.isString)(o)?o:o.get("src");t.model.upValue(f,{partial:!l}),l&&r.close()},types:["image"],accept:"image/*"})},n}(Fi);const jm=Dm;var Im=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rm=function(a){Im(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(t){return""},n.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},n.prototype.setValue=function(t){},n.prototype.onRender=function(){var t=this,e=t.ppfx,r=t.model,o=t.el;if(!this.inputInst){var l=r.input;l.ppfx=e,l.render();var f=o.querySelector(".".concat(e,"fields"));f.appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},n.prototype.clearCached=function(){Fi.prototype.clearCached.apply(this,arguments),this.inputInst=null},n}(Fi);const Hi=Rm;var Nm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vm=function(a){Nm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},n.prototype.remove=function(){var t=this;Hi.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(r){return t[r]=null}),this},n.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},n.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,r=e.ppfx,o=e.model,l=e.em,f=e.el,d=new si({target:l,model:o,ppfx:r,onChange:this.__handleChange}),h=d.render();f.querySelector(".".concat(r,"fields")).appendChild(h.el),this.input=(t=h.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=h}},n}(Hi);const Fm=Vm;var Hm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jc=function(){return Jc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Jc.apply(this,arguments)},nh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Bm=function(a){Hm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Jc(Jc({},Pr.getDefaults()),{options:[],full:0})},n.prototype.getOptions=function(){var t=this.attributes,e=t.options,r=t.list;return(e&&e.length?e:r)||[]},n.prototype.getOption=function(t){var e=this,r=(0,tt.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]||null},n.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},n.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(nh(nh([],e,!0),[t],!1))}return this},n.prototype.getOptionId=function(t){return(0,tt.isDef)(t.id)?t.id:t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,l=o===void 0?!0:o,f=((0,S.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(f),h=f.label||f.name||d,v=e.property||this.getId();return l&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.options.".concat(v,".").concat(d)))||h},n.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Pr.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},n.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},n}(Pr);const Rd=Bm;var Um=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wm=function(a){Um(n,a);function n(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(r,`sel-arrow">
          <div class="`).concat(r,`d-s-arrow"></div>
        </div>
      </div>
    `)},n.prototype.updateOptions=function(){delete this.input,this.onRender()},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.getOptions();if(!this.input){var o=[];r.forEach(function(f){var d=e.getOptionId(f),h=e.getOptionLabel(d),v=f.style?f.style.replace(/"/g,"&quot;"):"",m=v?'style="'.concat(v,'"'):"",w=d.replace(/"/g,"&quot;");o.push('<option value="'.concat(w,'" ').concat(m,">").concat(h,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=l.firstChild}},n.prototype.__setValueInput=function(t){var e=this.model,r=this.getInputEl(),o=e.getOptions()[0],l=o?e.getOptionId(o):"";r&&(r.value=t||l)},n}(Fi);const oh=Wm;var zm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qc=function(){return Qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qc.apply(this,arguments)},Km=function(a){zm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Qc(Qc({},Rd.getDefaults()),{full:1})},n}(Rd);const Gm=Km;var $m=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qm=function(a){$m(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},n.prototype.onRender=function(){var t=this,e=t.pfx,r=t.ppfx,o=this.model,l="".concat(r,"radio-item-label"),f=o.getName(),d=o.getOptions(),h="".concat(e,"radio ").concat(e,"radio-").concat(f),v=o.cid;if(!this.input){var m=[];d.forEach(function(T){var I=T.className?"".concat(T.className," ").concat(e,"icon ").concat(l):"",W=o.getOptionId(T),z="".concat(f,"-").concat(W,"-").concat(v),st=I?"":o.getOptionLabel(W),St=T.title?'title="'.concat(T.title,'"'):"",Tt=o.getValue()===W?"checked":"";m.push(`
          <div class="`.concat(r,`radio-item">
            <input type="radio" class="`).concat(h,'" id="').concat(z,'" name="').concat(f,"-").concat(v,'" value="').concat(W,'" ').concat(Tt,`/>
            <label class="`).concat(I||l,'" ').concat(St,' for="').concat(z,'">').concat(st,`</label>
          </div>
        `))});var w=this.el.querySelector(".".concat(r,"field"));w.innerHTML='<div class="'.concat(r,'radio-items">').concat(m.join(""),"</div>"),this.input=w.firstChild}},n.prototype.__setValueInput=function(t){var e,r=this.model,o=t||r.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(o,'"]'));l&&(l.checked=!0)},n}(oh);const Ym=qm;var Xm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hs=function(){return hs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},hs.apply(this,arguments)},Zm=function(a){Xm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return hs(hs({},Pr.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},n.prototype.getUnits=function(){return this.get("units")||[]},n.prototype.getUnit=function(){return this.get("unit")},n.prototype.getMin=function(){return this.get("min")},n.prototype.getMax=function(){return this.get("max")},n.prototype.getStep=function(){return this.get("step")},n.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Pr.callParentInit(Pr,this,t,e);var r=this.get("unit"),o=this.getUnits();this.input=(0,tt.hasWin)()?new np({model:this}):void 0,o.length&&!r&&this.set("unit",o[0],{silent:!0}),Pr.callInit(this,t,e)},n.prototype.__getClearProps=function(){return hs(hs({},Pr.prototype.__getClearProps()),{unit:""})},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r=Pr.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(r.value,hs({deepCheck:1},e)),l=o.value,f=o.unit;return r.value=l,r.unit=f,r},n.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),r=(0,S.isUndefined)(t)?"":"".concat(t),o=!(0,S.isUndefined)(e)&&r?e:"",l="".concat(r).concat(o);return Pr.prototype.getFullValue.apply(this,[l])},n}(Pr);const tf=Zm;var Jm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ef=function(){return ef=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ef.apply(this,arguments)},Qm=function(a){Jm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return ef(ef({},tf.getDefaults()),{showInput:1})},n}(tf);const t0=Qm;var e0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rf=function(){return rf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},rf.apply(this,arguments)},r0=function(a){e0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return rf(rf({},Hi.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},n.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},n.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},n.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},n.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},n.prototype.setValue=function(t){var e=this.model,r=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(r.value),Hi.prototype.setValue.apply(this,arguments)},n.prototype.onRender=function(){Hi.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},n.prototype.clearCached=function(){Hi.prototype.clearCached.apply(this,arguments),delete this.slider},n}(Hi);const n0=r0;var o0=O.FE.extend(xp),i0=o0.extend({extendViewApi:1,init:function(){var a=this,n=a.opts,t=a.em,e=n.module||(t==null?void 0:t.get("StyleManager"));e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:hm,view:Mm,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:vl,view:vu,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:Pr,view:jm,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:Pr,view:Fm,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:Rd,view:oh,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:Gm,view:Ym,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:t0,view:n0,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:tf,view:Hi,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:tf,view:Hi,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:Pr,view:Fi,isType:function(a){return a.type="base",a}}]});const Nd=i0;var a0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nf=function(){return nf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},nf.apply(this,arguments)},s0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},l0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},u0=function(a){a0(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,o=e.em;r.em=o;var l=t||{},f=r.buildProperties(l.buildProps),d=r.get("name")||"",h=[];!r.get("id")&&r.set("id",d.replace(/ /g,"_").toLowerCase()),f?h=r.extendProperties(f):h=r.get("properties").map(function(m){return(0,S.isString)(m)?r.buildProperties(m)[0]:m}).filter(Boolean),h=h.map(function(m){return r.checkExtend(m)});var v=new Nd(h,{em:o});return v.sector=r,r.set("properties",v),r}return n.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get("id")},n.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},n.prototype.setName=function(t){return this.set("name",t)},n.prototype.isOpen=function(){return!!this.get("open")},n.prototype.setOpen=function(t){return this.set("open",t)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.properties,r=e.models?l0([],e.models,!0):e;return r.filter(function(o){var l=!0;if(t.withValue&&(l=o.hasValue({noParent:!0})),t.withParentValue){var f=o.hasValue({noParent:!0});l=!f&&o.hasValue()}return l})},n.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},n.prototype.addProperty=function(t,e){return this.properties.add(this.checkExtend(t),e)},n.prototype.extendProperties=function(t,e,r){r===void 0&&(r=!1);for(var o=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),d=[],h=0,v=l.length;h<v;h++){for(var m=l[h],w=0,T=0;T<o;T++){var I=t[T];if(m.property==I.property||m.id==I.property){var W=m.properties;W&&W.length&&(m.properties=this.extendProperties(I.properties||[],W,1)),t[T]=f?(0,S.extend)(I,m):m,d[T]=t[T],w=1;continue}}w||(t.push(m),d.push(m))}return r?d.filter(function(z){return z}):t},n.prototype.checkExtend=function(t){var e=((0,S.isString)(t)?{extend:t}:t)||{},r=e.extend,o=s0(e,["extend"]);return r?nf(nf({},this.buildProperties([r])[0]||{}),o):t},n.prototype.buildProperties=function(t){var e,r=t||[];if(!r.length)return[];var o=(e=this.em)===null||e===void 0?void 0:e.Styles.builtIn;return o==null?void 0:o.build(r)},n}(O.Hn);const ih=u0;var c0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),of=function(){return of=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},of.apply(this,arguments)},f0=function(a){c0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={});var r=e.module,o=e.em;this.em=o,this.module=r,this.listenTo(this,"reset",this.onReset)},n.prototype.model=function(t,e){e===void 0&&(e={});var r=e.collection.em;return new ih(t,of(of({},e),{em:r}))},n.prototype.onReset=function(t,e){e===void 0&&(e={});var r=e.previousModels||[];r.forEach(function(o){return o.get("properties").reset()})},n}(O.FE);const d0=f0;var Ca=function(){return Ca=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ca.apply(this,arguments)},p0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},vs=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},hn=function(a){return a.map(function(n){return{id:n}})},h0=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var n=", sans-serif",t=["flex-start","flex-end","center"],e=vs(vs([],t,!0),["baseline","stretch"],!1);this.optsBgSize=hn(["auto","cover","contain"]),this.optsBgAttach=hn(["scroll","fixed","local"]),this.optsBgRepeat=hn(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=hn(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=hn(["visible","hidden","scroll","auto"]),this.optsDir=hn(["row","row-reverse","column","column-reverse"]),this.opstDisplay=hn(["block","inline","inline-block","flex","none"]),this.optsTransitFn=hn(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=hn(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=hn(["none","left","right"]),this.optsPos=hn(["static","relative","absolute","fixed"]),this.optsTextAlign=hn(["left","center","right","justify"]),this.optsFlexAlign=hn(e),this.optsJustCont=hn(vs(vs([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=hn(vs(vs([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=hn(vs(["auto"],e,!0)),this.optsTransitProp=hn(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=hn(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=hn(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+n,"Arial Black, Gadget"+n,"Brush Script MT"+n,"Comic Sans MS, cursive"+n,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+n,"Impact, Charcoal"+n,"Lucida Sans Unicode, Lucida Grande"+n,"Tahoma, Geneva"+n,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+n,"Verdana, Geneva"+n].map(function(r){return{id:r,label:r.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(n){var t=this;return function(){return n.map(function(e){if((0,S.isString)(e))return t.get(e);var r=e.extend,o=p0(e,["extend"]);return Ca(Ca({},t.get(r)),o)})}},a.prototype.init=function(){var n=this,t=this,e=t.fixedValues,r=t.requireFlex,o=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:r},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:r}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:r},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:r},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,d){var h=d.values,v=h["box-shadow-h"],m=h["box-shadow-v"],w=h["box-shadow-blur"],T=h["box-shadow-spread"];return"".concat(v," ").concat(m," ").concat(w," ").concat(T)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,d){var h=d.values,v=h["text-shadow-h"],m=h["text-shadow-v"],w=h["text-shadow-blur"];return"".concat(v," ").concat(m," ").concat(w)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,d){var h=d.values,v=h["background-repeat-sub"]||"",m=h["background-position-sub"]||"",w=h["background-attachment-sub"]||"",T=h["background-size-sub"]||"";return[v,m,w,T].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,d){var h=d.property,v=d.name,m=f[v]||"",w=h.getLayerSeparator();return m?m.split(w).map(function(T){var I=h.__parseFn(T),W=I.name,z=I.value;return{"transform-type":W,"transform-value":z}}):[]},toStyle:function(f,d){var h,v=d.name;return h={},h[v]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),h},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var d=f.property,h=f.to;if(h.value){var v=d.getOption(),m=Ca({},v.propValue||{}),w=d.getParent().getProperty("transform-value"),T=w.getUnit();(!T||(m==null?void 0:m.units.indexOf(T))<0)&&(m.unit=(m==null?void 0:m.units[0])||""),w.up(m)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var d=f[0],h=f[1],v=f[2];n.add(d,h||{},{from:v})}),this},a.prototype.add=function(n,t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.from||"",o=this.props[r||n]||{},l=Ca(Ca(Ca({},o),{property:n}),t);return l.properties&&(0,S.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[n]=l,l},a.prototype.get=function(n){return this.props[n]},a.prototype.build=function(n){var t=this,e=[],r=(0,S.isString)(n)?[n]:n;return r.forEach(function(o){e.push(t.get(o)||{property:o})}),e},a}();const v0=h0;var g0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),y0=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},m0=function(a){g0(n,a);function n(t){var e=a.call(this,t)||this,r=t.config||{},o=e.model,l=r.em;return e.config=r,e.em=l,e.pfx=r.stylePrefix||"",e.listenTo(o,"destroy remove",e.remove),e.listenTo(o,"change:open",e.updateOpen),e.listenTo(o,"change:visible",e.updateVisibility),e}return n.prototype.template=function(t){var e,r=t.pfx,o=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",d="".concat(r,"sector-");return ut(ah||(ah=y0([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,f,d,o)},n.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},n.prototype.updateOpen=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,l=r.isOpen();e[l?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=l?"":"none"},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.getPropertiesEl=function(){var t=this,e=t.$el,r=t.pfx;return e.find(".".concat(r,"properties")).get(0)},n.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},n.prototype.renderProperties=function(){var t=this,e=t.model,r=t.config,o=e.get("properties");if(o){var l=new Id({collection:o,config:r});this.$el.append(l.render().el)}},n.prototype.render=function(){var t=this,e=t.pfx,r=t.model,o=t.$el,l=r.getId(),f=r.getName();return o.html(this.template({pfx:e,label:f})),this.renderProperties(),o.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},n}(O.G7);const _0=m0;var ah,w0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),b0=function(a){w0(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.module,o=t.config,l=e.collection;return e.pfx=(o==null?void 0:o.stylePrefix)||"",e.ppfx=(o==null?void 0:o.pStylePrefix)||"",e.config=o,e.module=r,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return n.prototype.remove=function(){var t=this;return O.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},n.prototype.addTo=function(t,e,r){r===void 0&&(r={}),this.addToCollection(t,null,r)},n.prototype.addToCollection=function(t,e,r){r===void 0&&(r={});var o=this,l=o.config,f=o.el,d=e||f,h=new _0({model:t,config:l}).render().el;return(0,Kt.$Q)(d,h,r.at),h},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx,l=e.ppfx;r.empty();var f=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,f)}),r.append(f),r.addClass("".concat(o,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},n}(O.G7);const C0=b0;var x0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xa=function(){return xa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},xa.apply(this,arguments)},sh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},lh="style",gu="".concat(lh,":"),Vd="".concat(gu,"sector"),S0="".concat(Vd,":add"),O0="".concat(Vd,":remove"),T0="".concat(Vd,":update"),Fd="".concat(gu,"property"),E0="".concat(Fd,":add"),P0="".concat(Fd,":remove"),A0="".concat(Fd,":update"),uh="".concat(gu,"layer:select"),Hd="".concat(gu,"target"),k0="".concat(gu,"custom"),ch=function(a){return a||a===0},M0={all:lh,sectorAdd:S0,sectorRemove:O0,sectorUpdate:T0,propertyAdd:E0,propertyRemove:P0,propertyUpdate:A0,layerSelect:uh,target:Hd,custom:k0},L0=function(a){x0(n,a);function n(t){var e=a.call(this,t,"StyleManager",new d0([],{em:t}),M0,Qy)||this;e.Sector=ih,e.storageKey="",(0,S.bindAll)(e,"__clearStateTarget");var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.builtIn=new v0,e.properties=new Nd([],{em:t,module:e}),e.sectors=e.all;var l=new O.Hn({targets:[]});e.model=l;var f=De.g.update,d="component:toggled ".concat(f,":classes change:state change:device frame:resized selector:type");e.upAll=(0,S.debounce)(function(){return e.__upSel()},0),l.listenTo(t,d,e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var h=(0,S.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",h);var v=(0,S.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(uh," ").concat(Hd),v),l.on("change:lastTarget",function(){return t.trigger(Hd,e.getSelected())}),e}return n.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.__trgEv=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(e=this.em).trigger.apply(e,sh([t],r,!1))},n.prototype.__clearStateTarget=function(){var t=this,e=this.em,r=this.__getStateTarget();r&&(e==null||e.skip(function(){e.Css.remove(r),t.model.set({stateTarget:null})}))},n.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.addSector=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t);return o||(e.id=t,o=this.sectors.add(e,r)),o},n.prototype.getSector=function(t,e){e===void 0&&(e={});var r=this.sectors.where({id:t})[0];return!r&&e.warn&&this._logNoSector(t),r||null},n.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,r=e&&e.models?t.array?sh([],e.models,!0):e:[];return t.visible?r.filter(function(o){return o.isVisible()}):r},n.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},n.prototype.addProperty=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t,{warn:!0}),l;return o&&(l=o.addProperty(e,r)),l},n.prototype.getProperty=function(t,e){var r=this.getSector(t,{warn:!0}),o;return r&&(o=r.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),o},n.prototype.getProperties=function(t){var e,r=this.getSector(t,{warn:!0});return r&&(e=r.properties),e},n.prototype.removeProperty=function(t,e){var r=this.getProperties(t);return r?r.remove(this.getProperty(t,e)):null},n.prototype.select=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,l=(0,S.isArray)(t)?t:[t],f=e.stylable,d=o.Css,h=[];l.filter(Boolean).forEach(function(W){var z=W;if((0,S.isString)(W)){var st=d.getRule(W)||d.setRule(W);!(0,S.isUndefined)(f)&&st.set({stylable:f}),z=st}h.push(z)});var v=e.component||h.filter(function(W){return(0,tt.isComponent)(W)}).reverse()[0];h=h.map(function(W){return r.getModelToStyle(W)});var m=o.getState(),w=h.slice().reverse()[0],T=this.getParentRules(w,{state:m,component:v}),I=this.__getStateTarget();return o.skip(function(){var W;if(m&&(!((W=w==null?void 0:w.getState)===null||W===void 0)&&W.call(w))){var z=w.getStyle();I?I.setStyle(z):I=d.getAll().add({selectors:"gjs-selected",style:z,shallow:!0,important:!0})}else I&&(d.remove(I),I=void 0)}),this.model.set({targets:h,lastTarget:w,lastTargetParents:T,stateTarget:I,component:v}),this.__upProps(e),h},n.prototype.getSelected=function(){return this.model.get("lastTarget")},n.prototype.getSelectedAll=function(){return this.model.get("targets")},n.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},n.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},n.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var r=this.getSelected();r&&this.__emitCmpStyleUpdate(t);var o=this.__getStateTarget();r&&(o==null||o.setStyle(r.getStyle(),e))},n.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},n.prototype.getBuiltInAll=function(){return this.builtIn.props},n.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},n.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var r=this.em,o=e.skipAdd;if(r&&(t!=null&&t.toHTML)){var l=r.getConfig(),f=r.UndoManager,d=r.Css,h=r.Selectors,v=h?h.getConfig():{},m=l.devicePreviewMode?"":r.get("state"),w=t.get("classes"),T=w.getStyleable(),I=T.length,W=!v.componentFirst||e.useClasses,z={noCount:1},st={state:m,addOpts:z};f.skip(function(){var St;if(I&&W){var Tt=r.getCurrentMedia();St=d.get(T,m,Tt),!St&&!o&&(St=d.add(T,m,Tt,{},z))}else if(l.avoidInlineStyle){var zt=t.getId();St=d.getIdRule(zt,st),!St&&!o&&(St=d.setIdRule(zt,{},st)),t.is("wrapper")&&St.set("wrapper",1,z)}St&&(t=St)})}return t},n.prototype.getParentRules=function(t,e){var r=e===void 0?{}:e,o=r.state,l=r.component,f=this.em,d=[];if(f&&t){var h=l,v=f.Css,m=f.CodeManager.getGenerator("css"),w=t.toHTML?t:t.getComponent(),T={array:!0},I=[],W=[],z=[],st=[],St=[],Tt=function(Jt){return Jt.length?v.getRules().filter(function(Ee){var Ve=Ee.getSelectors().map(function(sr){return sr.getFullName()});return Ve.length===0?!1:Ve.every(function(sr){return Jt.indexOf(sr)>=0})}):[]},zt=function(Jt){return Jt?v.getRules().filter(function(Ee){return Ee.selectorsToString()===Jt}):[]};if(w)I=v.getRules("#".concat(w.getId())),W=zt(w.get("tagName")),st=h?Tt(h.getSelectors().getFullName(T)):[],St=st.concat(W).concat(I);else{I=h?v.getRules("#".concat(h.getId())):[],W=zt((h==null?void 0:h.get("tagName"))||"");var le=(h==null?void 0:h.getSelectors().getFullName(T))||[],Se=le.filter(function(Jt){return t.getSelectors().getFullName(T).findIndex(function(Ee){return Ee===Jt})===-1});z=Tt(Se.concat(t.getSelectors().getFullName(T))),St=W.concat(I).concat(z)}var Pe=St.filter(function(Jt){return(0,S.isUndefined)(o)?1:Jt.get("state")===o}).sort(m.sortRules).reverse();d=Pe.slice(Pe.indexOf(t)+1)}return d},n.prototype.addType=function(t,e){this.properties.addType(t,e)},n.prototype.getType=function(t){return this.properties.getType(t)},n.prototype.getTypes=function(){return this.properties.getTypes()},n.prototype.createType=function(t,e){var r=e===void 0?{}:e,o=r.model,l=o===void 0?{}:o,f=r.view,d=f===void 0?{}:f,h=this.config,v=this.getType(t);if(v)return new v.view(xa({model:new v.model(l),config:h},d))},n.prototype.render=function(){var t=this,e=t.config,r=t.em,o=t.SectView,l=o&&o.el;return this.SectView=new C0({el:l,em:r,config:e,module:this,collection:this.sectors}),this.SectView.render().el},n.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},n.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var r=this.em;if(!t.__p){var o=this.getSelectedAll(),l=e.components||r.getSelectedAll(),f=Array.isArray(l)?l:[l],d=xa({},t);delete d.__p,f.forEach(function(h){return!o.includes(h)&&h.__onStyleChange(d)})}},n.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var r=this.getSelected();if(r){var o=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),d=r.getStyle(),h=f.map(function(v){return{target:v,style:v.getStyle()}});o.map(function(v){v.getProperties().map(function(m){e.__upProp(m,d,h,t)})}),o.forEach(function(v){var m=v.getProperties();m.forEach(function(T){var I=T.__checkVisibility({target:r,component:l,sectors:o});T.set("visible",I)});var w=m.some(function(T){return T.isVisible()});v.set("visible",w)})}},n.prototype.__upProp=function(t,e,r,o){var l=this,f=t.getName(),d=e[f],h=ch(d),v=t.getType()==="stack",m=t.getType()==="composite",w=xa(xa({},o),{__up:!0}),T=!m&&!v,I=t,W=t,z=v?I.__getLayersFromStyle(e):[],st=m?W.__getPropsFromStyle(e):{},St=h?d:null,Tt=null;if(v&&z===null||m&&st===null){var zt=v?"__getLayersFromStyle":"__getPropsFromStyle",le=r.filter(function(Ve){return I[zt](Ve.style)!==null})[0];if(le){St=le.style[f],Tt=le.target;var Se=I[zt](le.style);v?z=Se:st=Se}}else if(!h){St=null;var le=r.filter(function(sr){return ch(sr.style[f])})[0];le&&(St=le.style[f],Tt=le.target)}if(t.__setParentTarget(Tt),T&&t.__getFullValue()!==St&&t.upValue(St,w),v&&I.__setLayers(z||[],{isEmptyValue:I.isEmptyValueStyle(e)}),m){var Pe=W.getProperties();if(W.isDetached()){var Jt=W.__getPropsFromStyle(e,{byName:!0})||{},Ee=r.map(function(Ve){return xa(xa({},Ve),{style:W.__getPropsFromStyle(Ve.style,{byName:!0})||{}})});Pe.map(function(Ve){return l.__upProp(Ve,Jt,Ee,o)})}else W.__setProperties(st||{},w),W.getProperties().map(function(Ve){return Ve.__setParentTarget(Tt)})}},n.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},n}(Ot);const D0=L0;var j0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),In=function(){return In=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},In.apply(this,arguments)},Bd=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(v){try{h(e.next(v))}catch(m){l(m)}}function d(v){try{h(e.throw(v))}catch(m){l(m)}}function h(v){v.done?o(v.value):r(v.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Ud=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(v){return d([h,v])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(v){h=[6,v],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},I0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},R0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))};G().$=D.default;var N0=[dg,tg,Ag,Hy,We,ve,Mc,D0,od,Hg,Ly,uy,Jy,Yh,gv,Fa,av,pc],V0=[Fv,es,qv,ec];F({$:D.default});var fh={debug:console.log,info:console.info,warning:console.warn,error:console.error},F0=function(a){j0(n,a);function n(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var r=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new H),e.set("dmode",r.dragMode);var o=r.el,l=r.log,f=l===!0?(0,S.keys)(fh):(0,S.isArray)(l)?l:[];return(0,S.bindAll)(e,"initBaseColorPicker"),o&&r.fromElement&&(r.components=o.innerHTML),e.attrsOrig=o?(0,S.toArray)(o.attributes).reduce(function(d,h){return d[h.nodeName]=h.nodeValue,d},{}):"",r.components&&!r.pageManager&&(r.pageManager={pages:[{component:r.components}]}),N0.forEach(function(d){return e.loadModule(d)}),V0.forEach(function(d){return e.loadStorableModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var h=d.from,v=d.to;e.listenTo(e,h,function(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];e.trigger.apply(e,R0([v],m,!1)),e.logWarning("The event '".concat(h,"' is deprecated, replace it with '").concat(v,"'"))})}),e}return n.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(n.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),n.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},n.prototype.getContainer=function(){return this.config.el},n.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),fh[t])},Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(t){var e=this.config;return(0,S.isUndefined)(t)?e:e[t]},n.prototype.loadOnStart=function(){var t=this,e=this.config,r=e.projectData,o=e.headless,l=this.Storage;this.toLoad.reverse().forEach(function(h){return h.onLoad()});var f=function(){t.modules.forEach(function(h){return h.postLoad&&h.postLoad(t)}),t.set("readyLoad",1)};o?(r&&this.loadData(r),f()):this._storageTimeout=setTimeout(function(){return Bd(t,void 0,void 0,function(){var h;return Ud(this,function(v){switch(v.label){case 0:return r?(this.loadData(r),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];v.label=2;case 2:return v.trys.push([2,4,,5]),[4,this.load()];case 3:return v.sent(),[3,5];case 4:return h=v.sent(),this.logError(h),[3,5];case 5:return f(),[2]}})})});var d=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});d.Pages.onLoad(),d.Canvas.postLoad(),this.set("shallow",d)},n.prototype.updateChanges=function(t,e,r){var o=this,l=this.Storage,f=this.getDirtyCount();r.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=f?function(){return!0}:null),l.isAutosave()&&f>=l.getStepsBeforeSave()&&this.store().catch(function(d){return o.logError(d)})},n.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},n.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},n.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},n.prototype.getEditor=function(){return this.get("Editor")},n.prototype.handleUpdates=function(t,e,r){var o=this;r===void 0&&(r={}),!(this.__skip||r.temporary||r.noCount||r.avoidStore||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=o.getDirtyCount()||0;r.unset;var f=I0(r,["unset"]);o.set("changesCount",l+1,f)},0))},n.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},n.prototype.componentHovered=function(t,e,r){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,r),e&&this.trigger("component:hovered",e,r)},n.prototype.getSelected=function(){return this.selected.lastComponent()},n.prototype.getSelectedAll=function(){return this.selected.allComponents()},n.prototype.setSelected=function(t,e){var r=this;e===void 0&&(e={});var o=e.event,l=o&&(o.ctrlKey||o.metaKey),f=(o||{}).shiftKey,d=((0,S.isArray)(t)?t:[t]).map(function(w){var T,I;return((I=(T=w==null?void 0:w.delegate)===null||T===void 0?void 0:T.select)===null||I===void 0?void 0:I.call(T,w))||w}).filter(Boolean),h=this.getSelectedAll(),v=this.getConfig().multipleSelection,m=(0,S.isArray)(t);(m||!t)&&this.removeSelected(h.filter(function(w){return!(0,S.contains)(d,w)})),d.forEach(function(w){if(w&&(r.trigger("component:select:before",w,e),!w.get("selectable")||e.abort))if(e.useValid){for(var T=w.parent();T&&!T.get("selectable");)T=T.parent();w=T}else return;if(l&&v)return r.toggleSelected(w);if(f&&v){r.clearSelection(r.Canvas.getWindow());var I=w.collection,W=w.index(),z,st;if(r.getSelectedAll().forEach(function(St){var Tt=St.collection,zt=St.index();Tt===I&&(zt<W?z=(0,S.isUndefined)(z)?zt:Math.max(z,zt):zt>W&&(st=(0,S.isUndefined)(st)?zt:Math.min(st,zt)))}),!(0,S.isUndefined)(z))for(;z!==W;)r.addSelected(I.at(z)),z++;if(!(0,S.isUndefined)(st))for(;st!==W;)r.addSelected(I.at(st)),st--;return r.addSelected(w)}!m&&r.removeSelected(h.filter(function(St){return St!==w})),r.addSelected(w,e)})},n.prototype.addSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,S.isArray)(t)?t:[t];o.forEach(function(l){var f=r.selected;if(!(!l||!l.get("selectable")||l.parents().some(function(h){return f.hasComponent(h)}))){e.forceChange&&r.removeSelected(l,e);var d=f.allComponents().filter(function(h){return(0,S.contains)(h.parents(),l)});d.forEach(function(h){return r.removeSelected(h,e)}),f.addComponent(l,e),r.trigger("component:select",l,e),r.Canvas.addSpot({type:Qe.q.Select,component:l})}})},n.prototype.removeSelected=function(t,e){var r=this;e===void 0&&(e={}),this.selected.removeComponent(t,e);var o=(0,S.isArray)(t)?t:[t];o.forEach(function(l){return r.Canvas.removeSpots({type:Qe.q.Select,component:l})})},n.prototype.toggleSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,S.isArray)(t)?t:[t];o.forEach(function(l){r.selected.hasComponent(l)?r.removeSelected(l,e):r.addSelected(l,e)})},n.prototype.setHovered=function(t,e){var r=this;e===void 0&&(e={});var o=function(d,h){var v=r,m=v.config,w=v.Canvas,T=r.getHovered(),I=r.getSelectedAll(),W=Qe.q.Hover,z=Qe.q.Spacing;r.set("componentHovered",d||null,h),T&&(w.removeSpots({type:W,component:T}),w.removeSpots({type:z,component:T})),d&&(w.addSpot({type:W,component:d}),(!I.includes(d)||m.showOffsetsSelected)&&w.addSpot({type:z,component:d}))};if(!t)return o();var l="component:hover";if(e.forceChange&&o(),this.trigger("".concat(l,":before"),t,e),!t.get("hoverable"))if(e.useValid&&!e.abort){for(var f=t.parent();f&&!f.get("hoverable");)f=f.parent();t=f}else return;e.abort||(o(t,e),this.trigger(l,t,e))},n.prototype.getHovered=function(){return this.get("componentHovered")},n.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},n.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(!(!t||!e)){var r=t.getComponents();return e.getCode(r,"json")}},n.prototype.setStyle=function(t,e){e===void 0&&(e={});var r=this.Css;return r.clear(e),r.getAll().add(t,e),this},n.prototype.addStyle=function(t,e){e===void 0&&(e={});var r=this.getStyle().add(t,e);return(0,S.isArray)(r)?r:[r]},n.prototype.getStyle=function(){return this.Css.getAll()},n.prototype.setState=function(t){return this.set("state",t),this},n.prototype.getState=function(){return this.get("state")||""},n.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,r=e.optsHtml,o=e.jsInHtml?this.getJs(t):"",l=t.component||this.Components.getComponent(),f=l?this.CodeManager.getCode(l,"html",In(In({},r),t)):"";return f+=o?"<script>".concat(o,"<\/script>"):"",f},n.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,r=e.optsCss,o=t.avoidProtected,l=(0,S.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.Css,d=t.component||this.Components.getComponent(),h=o?"":e.protectedCss,v=d&&this.CodeManager.getCode(d,"css",In(In({cssc:f,keepUnusedStyles:l},r),t));return d?t.json?v:h+v:""},n.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},n.prototype.store=function(t){return Bd(this,void 0,void 0,function(){var e;return Ud(this,function(r){switch(r.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return r.sent(),this.clearDirtyCount(),[2,e]}})})},n.prototype.load=function(t,e){return e===void 0&&(e={}),Bd(this,void 0,void 0,function(){var r;return Ud(this,function(o){switch(o.label){case 0:return[4,this.Storage.load(t)];case 1:return r=o.sent(),this.loadData(r),[4,(0,tt.wait)()];case 2:return o.sent(),e.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,r]}})})},n.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(r){t=In(In({},t),r.store(1))}),JSON.parse(JSON.stringify(t))},n.prototype.loadData=function(t){return t===void 0&&(t={}),(0,tt.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},n.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},n.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);!e||this.defaultRunning||(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},n.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands"),r=e.get(this.config.defaultCommand);!r||!this.defaultRunning||(r.stop(this,this,t),this.defaultRunning=!1)},n.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.Canvas.refresh({spots:t.tools})},n.prototype.clearSelection=function(t){var e,r=t||window;(e=r.getSelection())===null||e===void 0||e.removeAllRanges()},n.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),r=t.mediaCondition,o=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!o?"(".concat(r,": ").concat(l,")"):""},n.prototype.getWrapper=function(){return this.Components.getWrapper()},n.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},n.prototype.getCurrentFrame=function(){return this.get("currentFrame")},n.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},n.prototype.getIcon=function(t){var e=this.config.icons||{};return e[t]||""},n.prototype.getDirtyCount=function(){return this.get("changesCount")},n.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},n.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},n.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(t){var e=(t==null?void 0:t.getDragMode())||this.get("dmode");return e||""},n.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.get("I18n");return r==null?void 0:r.t.apply(r,t)},n.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},n.prototype.destroyAll=function(){var t=this,e=this,r=e.config,o=e.view,l=this.getEditor(),f=(r.grapesjs||{}).editors,d=f===void 0?[]:f,h=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),h==null||h.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(v){return v.destroy()}),o&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(v){return t[v]={}}),d.splice(d.indexOf(l),1),(0,tt.hasWin)()&&(0,D.default)(r.el).empty().attr(this.attrsOrig)},n.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},n.prototype.setEditing=function(t){return this.set("editing",t),this},n.prototype.isEditing=function(){return!!this.get("editing")},n.prototype.log=function(t,e){e===void 0&&(e={});var r=e.ns,o=e.level,l=o===void 0?"debug":o;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),r){var f="log-".concat(r);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},n.prototype.logInfo=function(t,e){this.log(t,In(In({},e),{level:"info"}))},n.prototype.logWarning=function(t,e){this.log(t,In(In({},e),{level:"warning"}))},n.prototype.logError=function(t,e){this.log(t,In(In({},e),{level:"error"}))},n.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var r=this.config,o=r.colorPicker,l=o===void 0?{}:o,f=r.el,d=r.stylePrefix;return(0,D.default)(t).spectrum(In(In({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),l))},n.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},n.prototype.data=function(t,e,r){var o="_gjs-data";if(t[o]||(t[o]={}),(0,S.isUndefined)(r))return t[o][e];t[o][e]=r},n}(O.Hn);const H0=F0;var B0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),U0=function(a){B0(n,a);function n(t){var e=a.call(this,{model:t})||this,r=t.Panels,o=t.UndoManager;return t.view=e,t.once("change:ready",function(){r.active(),r.disableButtons(),o.clear(),setTimeout(function(){t.trigger("load",t.Editor),t.clearDirtyCount()})}),e}return n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.model,l=o.Panels,f=o.Canvas,d=o.config,h=o.modules,v=d.stylePrefix,m=["".concat(v,"editor")];!d.customUI&&m.push("".concat(v,"one-bg ").concat(v,"two-color"));var w=(0,D.default)(d.el||"body ".concat(d.container));d.cssIcons&&(0,tt.appendStyles)(d.cssIcons,{unique:!0,prepand:!0}),r.empty(),d.width&&w.css("width",d.width),d.height&&w.css("height",d.height),r.append(f.render()),r.append(l.render());var T=o.shallow,I=T.Canvas.render();return I.style.display="none",r.append(I),r.attr("class",m.join(" ")),w.addClass("".concat(v,"editor-cont")).empty().append(r),h.forEach(function(W){var z;return(z=W.postRender)===null||z===void 0?void 0:z.call(W,t)}),this},n}(O.G7);const W0=U0;var yu=function(){return yu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yu.apply(this,arguments)},dh=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(v){try{h(e.next(v))}catch(m){l(m)}}function d(v){try{h(e.throw(v))}catch(m){l(m)}}function h(v){v.done?o(v.value):r(v.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},ph=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(v){return d([h,v])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(v){h=[6,v],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},z0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},K0=function(){function a(n,t){n===void 0&&(n={}),t===void 0&&(t={});var e;this.html=ut,this.config=yu(yu(yu({},At),n),{pStylePrefix:(e=n.stylePrefix)!==null&&e!==void 0?e:At.stylePrefix}),this.em=new H0(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return this.em.getConfig(n)},a.prototype.getHtml=function(n){return this.em.getHtml(n)},a.prototype.getCss=function(n){return this.em.getCss(n)},a.prototype.getJs=function(n){return this.em.getJs(n)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(n,t){return t===void 0&&(t={}),this.em.setComponents(n,t),this},a.prototype.addComponents=function(n,t){return this.getWrapper().append(n,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(n,t){return t===void 0&&(t={}),this.em.setStyle(n,t),this},a.prototype.addStyle=function(n,t){return t===void 0&&(t={}),this.em.addStyle(n,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var n=this.em.getSelected();if(n)return this.StyleManager.getModelToStyle(n)},a.prototype.select=function(n,t){return this.em.setSelected(n,t),this},a.prototype.selectAdd=function(n){return this.em.addSelected(n),this},a.prototype.selectRemove=function(n){return this.em.removeSelected(n),this},a.prototype.selectToggle=function(n){return this.em.toggleSelected(n),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(n){return this.em.set("device",n),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(n,t){return t===void 0&&(t={}),this.Commands.run(n,t)},a.prototype.stopCommand=function(n,t){return t===void 0&&(t={}),this.Commands.stop(n,t)},a.prototype.store=function(n){return dh(this,void 0,void 0,function(){return ph(this,function(t){switch(t.label){case 0:return[4,this.em.store(n)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(n,t){return t===void 0&&(t={}),dh(this,void 0,void 0,function(){return ph(this,function(e){switch(e.label){case 0:return[4,this.em.load(n,t)];case 1:return[2,e.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(n){return this.em.loadData(n)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(n){return this.em.loadData(n)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(n){this.em.refreshCanvas(n)},a.prototype.setCustomRte=function(n){this.RichTextEditor.customRte=n},a.prototype.setCustomParserCss=function(n){return this.Parser.getConfig().parserCss=n,this},a.prototype.setDragMode=function(n){return this.em.setDragMode(n),this},a.prototype.log=function(n,t){return t===void 0&&(t={}),this.em.log(n,t),this},a.prototype.t=function(){for(var n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.em).t.apply(n,t)},a.prototype.on=function(n,t){return this.em.on(n,t),this},a.prototype.once=function(n,t){return this.em.once(n,t),this},a.prototype.off=function(n,t){return this.em.off(n,t),this},a.prototype.trigger=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,z0([n],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var n;return(n=this.editorView)===null||n===void 0?void 0:n.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var n;return(n=this.editorView)===null||n===void 0||n.remove(),this.editorView=new W0(this.em),this.editorView.render().el},a.prototype.onReady=function(n){this.em.get("ready")?n(this):this.em.on("load",n)},a}();const G0=K0;var $0=function(a,n){var t=n.get(a);if(!t){var e=(0,tt.getGlobal)()[a];t=(e==null?void 0:e.default)||e}return t},hh=function(a,n){return(0,S.isString)(a)?$0(a,n):(a==null?void 0:a.default)||a},vh=function(a,n){a.getModel().logWarning("Plugin ".concat(n," not found"),{context:"plugins",plugin:n})},q0=function(){function a(){this.plugins={}}return a.prototype.add=function(n,t){var e=this.get(n);return e||(this.plugins[n]=t,t)},a.prototype.get=function(n){return this.plugins[n]},a.prototype.getAll=function(){return this.plugins},a}();const Y0=q0,X0=function(){var a=function(){for(var t,e=window.navigator.userAgent,r=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<r.length;o++){var l=r[o];if(t=l[1].exec(e),t)break}return!!t};if((0,tt.hasWin)()&&a()){var n=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),n.apply(document.implementation,[t])}}};var af=function(){return af=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},af.apply(this,arguments)};X0();var Wd=new Y0,gh=[],yh=function(a,n){var t=hh(a,Wd);return function(e){t?t(e,n||{}):vh(e,a)}},mh={$:D.default,editors:gh,plugins:Wd,usePlugin:yh,version:"0.21.12",init:function(a){a===void 0&&(a={});var n=a.headless,t=a.container;if(!t&&!n)throw new Error("'container' is required");var e=af(af({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:n?void 0:(0,S.isElement)(t)?t:document.querySelector(t)}),r=new G0(e,{$:D.default}),o=r.getModel();return e.plugins.forEach(function(l){var f=hh(l,Wd),d=e.pluginsOpts[l]||{};f?f(r,d):vh(r,l)}),o.loadOnStart(),e.autorender&&!n&&r.render(),gh.push(r),r}};const Z0=mh})();var L_=Rh.ZP;export{L_ as _};
