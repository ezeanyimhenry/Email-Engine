import{q as g,W as j,G as f,j as e}from"./app-CgsGaafV.js";import{u as N,D as w,a as v}from"./DashboardLayout-Dn06Sy3g.js";const E=()=>{const{contacts:d}=g().props,[c,l]=N(()=>({opacity:0})),{data:s,setData:i,post:p,delete:x,progress:a}=j({file:null});f.useEffect(()=>{l({opacity:1})},[l]);const h=r=>{r.preventDefault(),s.file?(console.log("File selected:",s.file),console.log("File type:",s.file.type),p("/dashboard/contacts/bulk-upload",{data:{file:s.file},forceFormData:!0,onSuccess:()=>{window.location.reload()},onError:t=>{console.error(t)}})):console.error("No file selected.")},b=()=>{window.location.href="/dashboard/contacts/export"},m=r=>{confirm("Are you sure you want to delete this contact?")&&x(`/dashboard/contacts/${r}`,{onSuccess:()=>window.location.reload(),onError:t=>console.error(t)})},o=d.meta||{},y=o.prev_page_url||"#",n=o.next_page_url||"#",u=!!n;return e.jsx(w,{children:e.jsxs(v.div,{style:c,className:"p-6 bg-white shadow-md rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts"}),e.jsx("button",{onClick:b,className:"mt-4 p-2 bg-blue-500 text-white rounded",children:"Export Contacts"}),e.jsxs("form",{onSubmit:h,children:[e.jsx("input",{type:"file",name:"file",accept:".xlsx, .csv",onChange:r=>i("file",r.target.files[0])}),e.jsx("button",{type:"submit",className:"mt-2 p-2 bg-green-500 text-white rounded",children:"Upload Bulk Contacts"})]}),a&&e.jsxs("progress",{value:a.percentage,max:"100",children:[a.percentage,"%"]}),e.jsxs("table",{className:"mt-4 w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"First Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Last Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Email"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Phone"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Address"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:d.data.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.id}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.first_name}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.last_name}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.email}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.phone}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.address}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[e.jsx("a",{href:`/dashboard/contacts/${r.id}/edit`,className:"text-blue-500",children:"Edit"}),e.jsx("button",{onClick:()=>m(r.id),className:"text-red-500 ml-4",children:"Delete"})]})]},r.id))})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[o.current_page>1&&e.jsx("button",{onClick:()=>window.location.href=y,className:"p-2 bg-gray-500 text-white rounded",children:"Previous"}),u&&e.jsx("button",{onClick:()=>window.location.href=n,className:"p-2 bg-gray-500 text-white rounded",children:"Next"})]})]})})};export{E as default};
